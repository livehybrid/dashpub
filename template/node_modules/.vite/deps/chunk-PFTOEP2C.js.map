{
  "version": 3,
  "sources": ["../../ajv/lib/compile/codegen/code.ts", "../../ajv/lib/compile/codegen/scope.ts", "../../ajv/lib/compile/codegen/index.ts", "../../ajv/lib/compile/util.ts", "../../ajv/lib/compile/names.ts", "../../ajv/lib/compile/errors.ts", "../../ajv/lib/compile/validate/boolSchema.ts", "../../ajv/lib/compile/rules.ts", "../../ajv/lib/compile/validate/applicability.ts", "../../ajv/lib/compile/validate/dataType.ts", "../../ajv/lib/compile/validate/defaults.ts", "../../ajv/lib/vocabularies/code.ts", "../../ajv/lib/compile/validate/keyword.ts", "../../ajv/lib/compile/validate/subschema.ts", "../../fast-deep-equal/index.js", "../../json-schema-traverse/index.js", "../../ajv/lib/compile/resolve.ts", "../../ajv/lib/compile/validate/index.ts", "../../ajv/lib/runtime/validation_error.ts", "../../ajv/lib/compile/ref_error.ts", "../../ajv/lib/compile/index.ts", "../../ajv/dist/refs/data.json", "../../fast-uri/lib/scopedChars.js", "../../fast-uri/lib/utils.js", "../../fast-uri/lib/schemes.js", "../../fast-uri/index.js", "../../ajv/lib/runtime/uri.ts", "../../ajv/lib/core.ts", "../../ajv/lib/vocabularies/core/id.ts", "../../ajv/lib/vocabularies/core/ref.ts", "../../ajv/lib/vocabularies/core/index.ts", "../../ajv/lib/vocabularies/validation/limitNumber.ts", "../../ajv/lib/vocabularies/validation/multipleOf.ts", "../../ajv/lib/runtime/ucs2length.ts", "../../ajv/lib/vocabularies/validation/limitLength.ts", "../../ajv/lib/vocabularies/validation/pattern.ts", "../../ajv/lib/vocabularies/validation/limitProperties.ts", "../../ajv/lib/vocabularies/validation/required.ts", "../../ajv/lib/vocabularies/validation/limitItems.ts", "../../ajv/lib/runtime/equal.ts", "../../ajv/lib/vocabularies/validation/uniqueItems.ts", "../../ajv/lib/vocabularies/validation/const.ts", "../../ajv/lib/vocabularies/validation/enum.ts", "../../ajv/lib/vocabularies/validation/index.ts", "../../ajv/lib/vocabularies/applicator/additionalItems.ts", "../../ajv/lib/vocabularies/applicator/items.ts", "../../ajv/lib/vocabularies/applicator/prefixItems.ts", "../../ajv/lib/vocabularies/applicator/items2020.ts", "../../ajv/lib/vocabularies/applicator/contains.ts", "../../ajv/lib/vocabularies/applicator/dependencies.ts", "../../ajv/lib/vocabularies/applicator/propertyNames.ts", "../../ajv/lib/vocabularies/applicator/additionalProperties.ts", "../../ajv/lib/vocabularies/applicator/properties.ts", "../../ajv/lib/vocabularies/applicator/patternProperties.ts", "../../ajv/lib/vocabularies/applicator/not.ts", "../../ajv/lib/vocabularies/applicator/anyOf.ts", "../../ajv/lib/vocabularies/applicator/oneOf.ts", "../../ajv/lib/vocabularies/applicator/allOf.ts", "../../ajv/lib/vocabularies/applicator/if.ts", "../../ajv/lib/vocabularies/applicator/thenElse.ts", "../../ajv/lib/vocabularies/applicator/index.ts", "../../ajv/lib/vocabularies/format/format.ts", "../../ajv/lib/vocabularies/format/index.ts", "../../ajv/lib/vocabularies/metadata.ts", "../../ajv/lib/vocabularies/draft7.ts", "../../ajv/lib/vocabularies/discriminator/types.ts", "../../ajv/lib/vocabularies/discriminator/index.ts", "../../ajv/dist/refs/json-schema-draft-07.json", "../../ajv/lib/ajv.ts", "../../ajv-errors/src/index.ts", "../../@splunk/dashboard-validation/src/index.ts", "../../@splunk/dashboard-validation/dist/cjs/react", "../../@splunk/dashboard-validation/src/hooks/useWorker.ts", "../../@splunk/dashboard-validation/dist/workers/validation.worker.ts", "../../@splunk/dashboard-validation/dist/cjs/@splunk/ui-utils/i18n", "../../@splunk/dashboard-validation/src/utils/messages.ts", "../../@splunk/dashboard-validation/src/utils/checkDuplicateTokens.ts", "../../@splunk/dashboard-validation/src/utils/typeGuards.ts", "../../@splunk/dashboard-validation/src/utils/isEmpty.ts", "../../@splunk/dashboard-validation/src/utils/checkInputsInStructure.ts", "../../@splunk/dashboard-validation/dist/cjs/@splunk/ui-utils/format", "../../@splunk/dashboard-validation/src/utils/checkInvalidSmartSources.ts", "../../@splunk/dashboard-validation/src/utils/checkLayoutsInTabs.ts", "../../@splunk/dashboard-validation/src/utils/checkVisualizationsInStructure.ts", "../../@splunk/dashboard-validation/src/utils/checkDuplicateLayoutsInTabs.ts", "../../@splunk/dashboard-validation/dist/cjs/ajv", "../../@splunk/dashboard-validation/dist/cjs/ajv-errors", "../../@splunk/dashboard-validation/src/utils/memoize.ts", "../../@splunk/dashboard-validation/src/utils/memoizedSchemaCompile.ts", "../../@splunk/dashboard-validation/src/utils/checkInvalidConditions.ts", "../../@splunk/dashboard-validation/src/utils/validateNoMixedShowHideConditions.ts", "../../@splunk/dashboard-validation/src/validators/DashboardValidator.ts", "../../@splunk/dashboard-validation/src/workers/validationEventHandler.ts", "../../@splunk/dashboard-validation/src/components/Validator.ts", "../../@splunk/dashboard-core/node_modules/react-resize-detector/src/utils.ts", "../../@splunk/dashboard-core/node_modules/react-resize-detector/src/useResizeDetector.ts", "../../@splunk/dashboard-core/node_modules/react-resize-detector/build/index.js", "../../@splunk/react-ui/TabBar.js", "../../@splunk/react-icons/PlusCircle.js", "../../@splunk/react-ui/SplitButton.js", "../../fscreen/src/fscreen.js", "../../react-full-screen/src/index.tsx", "../../@splunk/dashboard-core/src/index.ts", "../../@splunk/dashboard-core/lodash", "../../@splunk/dashboard-core/react", "../../@splunk/dashboard-core/@splunk/dashboard-context", "../../@splunk/dashboard-core/@splunk/dashboard-utils", "../../@splunk/dashboard-core/@splunk/dashboard-state", "../../@splunk/dashboard-core/@splunk/dashboard-validation", "../../@splunk/dashboard-core/@splunk/dashboard-ui", "../../@splunk/dashboard-core/styled-components", "../../@splunk/dashboard-core/react-resize-detector", "../../@splunk/dashboard-core/@dnd-kit/sortable", "../../@splunk/dashboard-core/@splunk/themes/mixins", "../../@splunk/dashboard-core/@dnd-kit/core", "../../@splunk/dashboard-core/src/hooks/useDashboardDragMonitor.ts", "../../@splunk/dashboard-core/@splunk/react-ui/Button", "../../@splunk/dashboard-core/@splunk/react-ui/Prose", "../../@splunk/dashboard-core/@splunk/ui-utils/i18n", "../../@splunk/dashboard-core/@splunk/ui-utils/format", "../../@splunk/dashboard-core/@splunk/react-ui/Paragraph", "../../@splunk/dashboard-core/src/components/ConfirmDeletionModal/formatInputName.ts", "../../@splunk/dashboard-core/src/components/ConfirmDeletionModal/SingleItemBody.tsx", "../../@splunk/dashboard-core/@splunk/react-ui/List", "../../@splunk/dashboard-core/src/components/ConfirmDeletionModal/DeleteMultipleBody.tsx", "../../@splunk/dashboard-core/src/components/ConfirmDeletionModal/ConfirmationModal.tsx", "../../@splunk/dashboard-core/@dnd-kit/modifiers", "../../@splunk/dashboard-core/@splunk/themes", "../../@splunk/dashboard-core/@splunk/react-ui/Menu", "../../@splunk/dashboard-core/@splunk/react-ui/ScreenReaderContent", "../../@splunk/dashboard-core/@splunk/react-ui/TabBar", "../../@splunk/dashboard-core/src/components/TabBar/TabMenuItems/createReorderMenuItems.tsx", "../../@splunk/dashboard-core/src/components/TabBar/TabMenuItems/RemoveTab.tsx", "../../@splunk/dashboard-core/src/hooks/useDeselectOnActiveTabPress.ts", "../../@splunk/dashboard-core/src/components/TabBar/ConnectedTab.tsx", "../../@splunk/dashboard-core/@dnd-kit/utilities", "../../@splunk/dashboard-core/src/components/TabBar/SortableTab.tsx", "../../@splunk/dashboard-core/src/components/TabBar/TabBar.tsx", "../../@splunk/dashboard-core/@splunk/react-ui/Tooltip", "../../@splunk/dashboard-core/@splunk/react-icons/PlusCircle", "../../@splunk/dashboard-core/@splunk/react-icons/Plus", "../../@splunk/dashboard-core/@splunk/react-ui/SplitButton", "../../@splunk/dashboard-core/src/components/AddTabButton/AddTabButton.tsx", "../../@splunk/dashboard-core/src/components/TabActionBar/TabActionBar.tsx", "../../@splunk/dashboard-core/src/components/TabContainer/TabContainer.tsx", "../../@splunk/dashboard-core/src/utils/visualization.ts", "../../@splunk/dashboard-core/react-dom", "../../@splunk/dashboard-core/src/contexts/ActionMenusContext.tsx", "../../@splunk/dashboard-core/src/containers/ActionMenu.tsx", "../../@splunk/dashboard-core/src/hooks/useActionMenu.tsx", "../../@splunk/dashboard-core/src/hooks/useCanItemBeHidden.ts", "../../@splunk/dashboard-core/react-full-screen", "../../@splunk/dashboard-core/@splunk/dashboard-telemetry", "../../@splunk/dashboard-core/src/hooks/useVizTelemetry.tsx", "../../@splunk/dashboard-core/@splunk/datasource-utils", "../../@splunk/dashboard-core/src/hooks/useStatusMessage.tsx", "../../@splunk/dashboard-core/src/containers/VisualizationContainer.tsx", "../../@splunk/dashboard-core/src/containers/InputContent.tsx", "../../@splunk/dashboard-core/src/components/CornerRadiusContainer.tsx", "../../@splunk/dashboard-core/src/hooks/useChangeAnnouncer.ts", "../../@splunk/dashboard-core/src/containers/BaseItemContainer.tsx", "../../@splunk/dashboard-core/src/containers/LineContainer.tsx", "../../@splunk/dashboard-core/src/containers/connected/ConnectedLineContainer.tsx", "../../@splunk/dashboard-core/src/containers/layouts/LayoutContainer.tsx", "../../@splunk/dashboard-core/src/containers/connected/ConnectedLayoutContainer.tsx", "../../@splunk/dashboard-core/@splunk/dashboard-layouts", "../../@splunk/dashboard-core/src/containers/connected/ConnectedInputContainer.tsx", "../../@splunk/dashboard-core/src/containers/layouts/GlobalInputContainer.tsx", "../../@splunk/dashboard-core/src/components/DashboardLayout.tsx", "../../@splunk/dashboard-core/src/containers/DashboardContainer.tsx", "../../@splunk/dashboard-core/src/containers/connected/ConnectedDashboardContainer.tsx", "../../@splunk/dashboard-core/src/utils/withDefinition.tsx", "../../@splunk/dashboard-core/src/utils/withReadOnlyTokenNamespaces.tsx", "../../@splunk/dashboard-core/@splunk/dashboard-definition", "../../@splunk/dashboard-core/src/utils/withValidationSchema.tsx", "../../@splunk/dashboard-core/src/hooks/useActiveTabWithUrl.ts", "../../@splunk/dashboard-core/src/utils/withActiveTabInUrl.tsx", "../../@splunk/dashboard-core/src/utils/simplifySchemaErrorMessages.ts", "../../@splunk/dashboard-core/src/DashboardCore.tsx"],
  "sourcesContent": ["// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport abstract class _CodeOrName {\n  abstract readonly str: string\n  abstract readonly names: UsedNames\n  abstract toString(): string\n  abstract emptyStr(): boolean\n}\n\nexport const IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i\n\nexport class Name extends _CodeOrName {\n  readonly str: string\n  constructor(s: string) {\n    super()\n    if (!IDENTIFIER.test(s)) throw new Error(\"CodeGen: name must be a valid identifier\")\n    this.str = s\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    return false\n  }\n\n  get names(): UsedNames {\n    return {[this.str]: 1}\n  }\n}\n\nexport class _Code extends _CodeOrName {\n  readonly _items: readonly CodeItem[]\n  private _str?: string\n  private _names?: UsedNames\n\n  constructor(code: string | readonly CodeItem[]) {\n    super()\n    this._items = typeof code === \"string\" ? [code] : code\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    if (this._items.length > 1) return false\n    const item = this._items[0]\n    return item === \"\" || item === '\"\"'\n  }\n\n  get str(): string {\n    return (this._str ??= this._items.reduce((s: string, c: CodeItem) => `${s}${c}`, \"\"))\n  }\n\n  get names(): UsedNames {\n    return (this._names ??= this._items.reduce((names: UsedNames, c) => {\n      if (c instanceof Name) names[c.str] = (names[c.str] || 0) + 1\n      return names\n    }, {}))\n  }\n}\n\nexport type CodeItem = Name | string | number | boolean | null\n\nexport type UsedNames = Record<string, number | undefined>\n\nexport type Code = _Code | Name\n\nexport type SafeExpr = Code | number | boolean | null\n\nexport const nil = new _Code(\"\")\n\ntype CodeArg = SafeExpr | string | undefined\n\nexport function _(strs: TemplateStringsArray, ...args: CodeArg[]): _Code {\n  const code: CodeItem[] = [strs[0]]\n  let i = 0\n  while (i < args.length) {\n    addCodeArg(code, args[i])\n    code.push(strs[++i])\n  }\n  return new _Code(code)\n}\n\nconst plus = new _Code(\"+\")\n\nexport function str(strs: TemplateStringsArray, ...args: (CodeArg | string[])[]): _Code {\n  const expr: CodeItem[] = [safeStringify(strs[0])]\n  let i = 0\n  while (i < args.length) {\n    expr.push(plus)\n    addCodeArg(expr, args[i])\n    expr.push(plus, safeStringify(strs[++i]))\n  }\n  optimize(expr)\n  return new _Code(expr)\n}\n\nexport function addCodeArg(code: CodeItem[], arg: CodeArg | string[]): void {\n  if (arg instanceof _Code) code.push(...arg._items)\n  else if (arg instanceof Name) code.push(arg)\n  else code.push(interpolate(arg))\n}\n\nfunction optimize(expr: CodeItem[]): void {\n  let i = 1\n  while (i < expr.length - 1) {\n    if (expr[i] === plus) {\n      const res = mergeExprItems(expr[i - 1], expr[i + 1])\n      if (res !== undefined) {\n        expr.splice(i - 1, 3, res)\n        continue\n      }\n      expr[i++] = \"+\"\n    }\n    i++\n  }\n}\n\nfunction mergeExprItems(a: CodeItem, b: CodeItem): CodeItem | undefined {\n  if (b === '\"\"') return a\n  if (a === '\"\"') return b\n  if (typeof a == \"string\") {\n    if (b instanceof Name || a[a.length - 1] !== '\"') return\n    if (typeof b != \"string\") return `${a.slice(0, -1)}${b}\"`\n    if (b[0] === '\"') return a.slice(0, -1) + b.slice(1)\n    return\n  }\n  if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name)) return `\"${a}${b.slice(1)}`\n  return\n}\n\nexport function strConcat(c1: Code, c2: Code): Code {\n  return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str`${c1}${c2}`\n}\n\n// TODO do not allow arrays here\nfunction interpolate(x?: string | string[] | number | boolean | null): SafeExpr | string {\n  return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n    ? x\n    : safeStringify(Array.isArray(x) ? x.join(\",\") : x)\n}\n\nexport function stringify(x: unknown): Code {\n  return new _Code(safeStringify(x))\n}\n\nexport function safeStringify(x: unknown): string {\n  return JSON.stringify(x)\n    .replace(/\\u2028/g, \"\\\\u2028\")\n    .replace(/\\u2029/g, \"\\\\u2029\")\n}\n\nexport function getProperty(key: Code | string | number): Code {\n  return typeof key == \"string\" && IDENTIFIER.test(key) ? new _Code(`.${key}`) : _`[${key}]`\n}\n\n//Does best effort to format the name properly\nexport function getEsmExportName(key: Code | string | number): Code {\n  if (typeof key == \"string\" && IDENTIFIER.test(key)) {\n    return new _Code(`${key}`)\n  }\n  throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`)\n}\n\nexport function regexpCode(rx: RegExp): Code {\n  return new _Code(rx.toString())\n}\n", "import {_, nil, Code, Name} from \"./code\"\n\ninterface NameGroup {\n  prefix: string\n  index: number\n}\n\nexport interface NameValue {\n  ref: ValueReference // this is the reference to any value that can be referred to from generated code via `globals` var in the closure\n  key?: unknown // any key to identify a global to avoid duplicates, if not passed ref is used\n  code?: Code // this is the code creating the value needed for standalone code wit_out closure - can be a primitive value, function or import (`require`)\n}\n\nexport type ValueReference = unknown // possibly make CodeGen parameterized type on this type\n\nclass ValueError extends Error {\n  readonly value?: NameValue\n  constructor(name: ValueScopeName) {\n    super(`CodeGen: \"code\" for ${name} not defined`)\n    this.value = name.value\n  }\n}\n\ninterface ScopeOptions {\n  prefixes?: Set<string>\n  parent?: Scope\n}\n\ninterface ValueScopeOptions extends ScopeOptions {\n  scope: ScopeStore\n  es5?: boolean\n  lines?: boolean\n}\n\nexport type ScopeStore = Record<string, ValueReference[] | undefined>\n\ntype ScopeValues = {\n  [Prefix in string]?: Map<unknown, ValueScopeName>\n}\n\nexport type ScopeValueSets = {\n  [Prefix in string]?: Set<ValueScopeName>\n}\n\nexport enum UsedValueState {\n  Started,\n  Completed,\n}\n\nexport type UsedScopeValues = {\n  [Prefix in string]?: Map<ValueScopeName, UsedValueState | undefined>\n}\n\nexport const varKinds = {\n  const: new Name(\"const\"),\n  let: new Name(\"let\"),\n  var: new Name(\"var\"),\n}\n\nexport class Scope {\n  protected readonly _names: {[Prefix in string]?: NameGroup} = {}\n  protected readonly _prefixes?: Set<string>\n  protected readonly _parent?: Scope\n\n  constructor({prefixes, parent}: ScopeOptions = {}) {\n    this._prefixes = prefixes\n    this._parent = parent\n  }\n\n  toName(nameOrPrefix: Name | string): Name {\n    return nameOrPrefix instanceof Name ? nameOrPrefix : this.name(nameOrPrefix)\n  }\n\n  name(prefix: string): Name {\n    return new Name(this._newName(prefix))\n  }\n\n  protected _newName(prefix: string): string {\n    const ng = this._names[prefix] || this._nameGroup(prefix)\n    return `${prefix}${ng.index++}`\n  }\n\n  private _nameGroup(prefix: string): NameGroup {\n    if (this._parent?._prefixes?.has(prefix) || (this._prefixes && !this._prefixes.has(prefix))) {\n      throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`)\n    }\n    return (this._names[prefix] = {prefix, index: 0})\n  }\n}\n\ninterface ScopePath {\n  property: string\n  itemIndex: number\n}\n\nexport class ValueScopeName extends Name {\n  readonly prefix: string\n  value?: NameValue\n  scopePath?: Code\n\n  constructor(prefix: string, nameStr: string) {\n    super(nameStr)\n    this.prefix = prefix\n  }\n\n  setValue(value: NameValue, {property, itemIndex}: ScopePath): void {\n    this.value = value\n    this.scopePath = _`.${new Name(property)}[${itemIndex}]`\n  }\n}\n\ninterface VSOptions extends ValueScopeOptions {\n  _n: Code\n}\n\nconst line = _`\\n`\n\nexport class ValueScope extends Scope {\n  protected readonly _values: ScopeValues = {}\n  protected readonly _scope: ScopeStore\n  readonly opts: VSOptions\n\n  constructor(opts: ValueScopeOptions) {\n    super(opts)\n    this._scope = opts.scope\n    this.opts = {...opts, _n: opts.lines ? line : nil}\n  }\n\n  get(): ScopeStore {\n    return this._scope\n  }\n\n  name(prefix: string): ValueScopeName {\n    return new ValueScopeName(prefix, this._newName(prefix))\n  }\n\n  value(nameOrPrefix: ValueScopeName | string, value: NameValue): ValueScopeName {\n    if (value.ref === undefined) throw new Error(\"CodeGen: ref must be passed in value\")\n    const name = this.toName(nameOrPrefix) as ValueScopeName\n    const {prefix} = name\n    const valueKey = value.key ?? value.ref\n    let vs = this._values[prefix]\n    if (vs) {\n      const _name = vs.get(valueKey)\n      if (_name) return _name\n    } else {\n      vs = this._values[prefix] = new Map()\n    }\n    vs.set(valueKey, name)\n\n    const s = this._scope[prefix] || (this._scope[prefix] = [])\n    const itemIndex = s.length\n    s[itemIndex] = value.ref\n    name.setValue(value, {property: prefix, itemIndex})\n    return name\n  }\n\n  getValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    const vs = this._values[prefix]\n    if (!vs) return\n    return vs.get(keyOrRef)\n  }\n\n  scopeRefs(scopeName: Name, values: ScopeValues | ScopeValueSets = this._values): Code {\n    return this._reduceValues(values, (name: ValueScopeName) => {\n      if (name.scopePath === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n      return _`${scopeName}${name.scopePath}`\n    })\n  }\n\n  scopeCode(\n    values: ScopeValues | ScopeValueSets = this._values,\n    usedValues?: UsedScopeValues,\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    return this._reduceValues(\n      values,\n      (name: ValueScopeName) => {\n        if (name.value === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n        return name.value.code\n      },\n      usedValues,\n      getCode\n    )\n  }\n\n  private _reduceValues(\n    values: ScopeValues | ScopeValueSets,\n    valueCode: (n: ValueScopeName) => Code | undefined,\n    usedValues: UsedScopeValues = {},\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    let code: Code = nil\n    for (const prefix in values) {\n      const vs = values[prefix]\n      if (!vs) continue\n      const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map())\n      vs.forEach((name: ValueScopeName) => {\n        if (nameSet.has(name)) return\n        nameSet.set(name, UsedValueState.Started)\n        let c = valueCode(name)\n        if (c) {\n          const def = this.opts.es5 ? varKinds.var : varKinds.const\n          code = _`${code}${def} ${name} = ${c};${this.opts._n}`\n        } else if ((c = getCode?.(name))) {\n          code = _`${code}${c}${this.opts._n}`\n        } else {\n          throw new ValueError(name)\n        }\n        nameSet.set(name, UsedValueState.Completed)\n      })\n    }\n    return code\n  }\n}\n", "import type {ScopeValueSets, NameValue, ValueScope, ValueScopeName} from \"./scope\"\nimport {_, nil, _Code, Code, Name, UsedNames, CodeItem, addCodeArg, _CodeOrName} from \"./code\"\nimport {Scope, varKinds} from \"./scope\"\n\nexport {_, str, strConcat, nil, getProperty, stringify, regexpCode, Name, Code} from \"./code\"\nexport {Scope, ScopeStore, ValueScope, ValueScopeName, ScopeValueSets, varKinds} from \"./scope\"\n\n// type for expressions that can be safely inserted in code without quotes\nexport type SafeExpr = Code | number | boolean | null\n\n// type that is either Code of function that adds code to CodeGen instance using its methods\nexport type Block = Code | (() => void)\n\nexport const operators = {\n  GT: new _Code(\">\"),\n  GTE: new _Code(\">=\"),\n  LT: new _Code(\"<\"),\n  LTE: new _Code(\"<=\"),\n  EQ: new _Code(\"===\"),\n  NEQ: new _Code(\"!==\"),\n  NOT: new _Code(\"!\"),\n  OR: new _Code(\"||\"),\n  AND: new _Code(\"&&\"),\n  ADD: new _Code(\"+\"),\n}\n\nabstract class Node {\n  abstract readonly names: UsedNames\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    return this\n  }\n\n  optimizeNames(_names: UsedNames, _constants: Constants): this | undefined {\n    return this\n  }\n\n  // get count(): number {\n  //   return 1\n  // }\n}\n\nclass Def extends Node {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private rhs?: SafeExpr\n  ) {\n    super()\n  }\n\n  render({es5, _n}: CGOptions): string {\n    const varKind = es5 ? varKinds.var : this.varKind\n    const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`\n    return `${varKind} ${this.name}${rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!names[this.name.str]) return\n    if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.rhs instanceof _CodeOrName ? this.rhs.names : {}\n  }\n}\n\nclass Assign extends Node {\n  constructor(\n    readonly lhs: Code,\n    public rhs: SafeExpr,\n    private readonly sideEffects?: boolean\n  ) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} = ${this.rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (this.lhs instanceof Name && !names[this.lhs.str] && !this.sideEffects) return\n    this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = this.lhs instanceof Name ? {} : {...this.lhs.names}\n    return addExprNames(names, this.rhs)\n  }\n}\n\nclass AssignOp extends Assign {\n  constructor(\n    lhs: Code,\n    private readonly op: Code,\n    rhs: SafeExpr,\n    sideEffects?: boolean\n  ) {\n    super(lhs, rhs, sideEffects)\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} ${this.op}= ${this.rhs};` + _n\n  }\n}\n\nclass Label extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label: Name) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.label}:` + _n\n  }\n}\n\nclass Break extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label?: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    const label = this.label ? ` ${this.label}` : \"\"\n    return `break${label};` + _n\n  }\n}\n\nclass Throw extends Node {\n  constructor(readonly error: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `throw ${this.error};` + _n\n  }\n\n  get names(): UsedNames {\n    return this.error.names\n  }\n}\n\nclass AnyCode extends Node {\n  constructor(private code: SafeExpr) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.code};` + _n\n  }\n\n  optimizeNodes(): this | undefined {\n    return `${this.code}` ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    this.code = optimizeExpr(this.code, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.code instanceof _CodeOrName ? this.code.names : {}\n  }\n}\n\nabstract class ParentNode extends Node {\n  constructor(readonly nodes: ChildNode[] = []) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return this.nodes.reduce((code, n) => code + n.render(opts), \"\")\n  }\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      const n = nodes[i].optimizeNodes()\n      if (Array.isArray(n)) nodes.splice(i, 1, ...n)\n      else if (n) nodes[i] = n\n      else nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      // iterating backwards improves 1-pass optimization\n      const n = nodes[i]\n      if (n.optimizeNames(names, constants)) continue\n      subtractNames(names, n.names)\n      nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  get names(): UsedNames {\n    return this.nodes.reduce((names: UsedNames, n) => addNames(names, n.names), {})\n  }\n\n  // get count(): number {\n  //   return this.nodes.reduce((c, n) => c + n.count, 1)\n  // }\n}\n\nabstract class BlockNode extends ParentNode {\n  render(opts: CGOptions): string {\n    return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n\n  }\n}\n\nclass Root extends ParentNode {}\n\nclass Else extends BlockNode {\n  static readonly kind = \"else\"\n}\n\nclass If extends BlockNode {\n  static readonly kind = \"if\"\n  else?: If | Else\n  constructor(\n    private condition: Code | boolean,\n    nodes?: ChildNode[]\n  ) {\n    super(nodes)\n  }\n\n  render(opts: CGOptions): string {\n    let code = `if(${this.condition})` + super.render(opts)\n    if (this.else) code += \"else \" + this.else.render(opts)\n    return code\n  }\n\n  optimizeNodes(): If | ChildNode[] | undefined {\n    super.optimizeNodes()\n    const cond = this.condition\n    if (cond === true) return this.nodes // else is ignored here\n    let e = this.else\n    if (e) {\n      const ns = e.optimizeNodes()\n      e = this.else = Array.isArray(ns) ? new Else(ns) : (ns as Else | undefined)\n    }\n    if (e) {\n      if (cond === false) return e instanceof If ? e : e.nodes\n      if (this.nodes.length) return this\n      return new If(not(cond), e instanceof If ? [e] : e.nodes)\n    }\n    if (cond === false || !this.nodes.length) return undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    this.else = this.else?.optimizeNames(names, constants)\n    if (!(super.optimizeNames(names, constants) || this.else)) return\n    this.condition = optimizeExpr(this.condition, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    addExprNames(names, this.condition)\n    if (this.else) addNames(names, this.else.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.else?.count || 0)\n  // }\n}\n\nabstract class For extends BlockNode {\n  static readonly kind = \"for\"\n}\n\nclass ForLoop extends For {\n  constructor(private iteration: Code) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.iteration})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iteration = optimizeExpr(this.iteration, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iteration.names)\n  }\n}\n\nclass ForRange extends For {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private readonly from: SafeExpr,\n    private readonly to: SafeExpr\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const varKind = opts.es5 ? varKinds.var : this.varKind\n    const {name, from, to} = this\n    return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts)\n  }\n\n  get names(): UsedNames {\n    const names = addExprNames(super.names, this.from)\n    return addExprNames(names, this.to)\n  }\n}\n\nclass ForIter extends For {\n  constructor(\n    private readonly loop: \"of\" | \"in\",\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private iterable: Code\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iterable = optimizeExpr(this.iterable, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iterable.names)\n  }\n}\n\nclass Func extends BlockNode {\n  static readonly kind = \"func\"\n  constructor(\n    public name: Name,\n    public args: Code,\n    public async?: boolean\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const _async = this.async ? \"async \" : \"\"\n    return `${_async}function ${this.name}(${this.args})` + super.render(opts)\n  }\n}\n\nclass Return extends ParentNode {\n  static readonly kind = \"return\"\n\n  render(opts: CGOptions): string {\n    return \"return \" + super.render(opts)\n  }\n}\n\nclass Try extends BlockNode {\n  catch?: Catch\n  finally?: Finally\n\n  render(opts: CGOptions): string {\n    let code = \"try\" + super.render(opts)\n    if (this.catch) code += this.catch.render(opts)\n    if (this.finally) code += this.finally.render(opts)\n    return code\n  }\n\n  optimizeNodes(): this {\n    super.optimizeNodes()\n    this.catch?.optimizeNodes() as Catch | undefined\n    this.finally?.optimizeNodes() as Finally | undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    super.optimizeNames(names, constants)\n    this.catch?.optimizeNames(names, constants)\n    this.finally?.optimizeNames(names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    if (this.catch) addNames(names, this.catch.names)\n    if (this.finally) addNames(names, this.finally.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.catch?.count || 0) + (this.finally?.count || 0)\n  // }\n}\n\nclass Catch extends BlockNode {\n  static readonly kind = \"catch\"\n  constructor(readonly error: Name) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `catch(${this.error})` + super.render(opts)\n  }\n}\n\nclass Finally extends BlockNode {\n  static readonly kind = \"finally\"\n  render(opts: CGOptions): string {\n    return \"finally\" + super.render(opts)\n  }\n}\n\ntype StartBlockNode = If | For | Func | Return | Try\n\ntype LeafNode = Def | Assign | Label | Break | Throw | AnyCode\n\ntype ChildNode = StartBlockNode | LeafNode\n\ntype EndBlockNodeType =\n  | typeof If\n  | typeof Else\n  | typeof For\n  | typeof Func\n  | typeof Return\n  | typeof Catch\n  | typeof Finally\n\ntype Constants = Record<string, SafeExpr | undefined>\n\nexport interface CodeGenOptions {\n  es5?: boolean\n  lines?: boolean\n  ownProperties?: boolean\n}\n\ninterface CGOptions extends CodeGenOptions {\n  _n: \"\\n\" | \"\"\n}\n\nexport class CodeGen {\n  readonly _scope: Scope\n  readonly _extScope: ValueScope\n  readonly _values: ScopeValueSets = {}\n  private readonly _nodes: ParentNode[]\n  private readonly _blockStarts: number[] = []\n  private readonly _constants: Constants = {}\n  private readonly opts: CGOptions\n\n  constructor(extScope: ValueScope, opts: CodeGenOptions = {}) {\n    this.opts = {...opts, _n: opts.lines ? \"\\n\" : \"\"}\n    this._extScope = extScope\n    this._scope = new Scope({parent: extScope})\n    this._nodes = [new Root()]\n  }\n\n  toString(): string {\n    return this._root.render(this.opts)\n  }\n\n  // returns unique name in the internal scope\n  name(prefix: string): Name {\n    return this._scope.name(prefix)\n  }\n\n  // reserves unique name in the external scope\n  scopeName(prefix: string): ValueScopeName {\n    return this._extScope.name(prefix)\n  }\n\n  // reserves unique name in the external scope and assigns value to it\n  scopeValue(prefixOrName: ValueScopeName | string, value: NameValue): Name {\n    const name = this._extScope.value(prefixOrName, value)\n    const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set())\n    vs.add(name)\n    return name\n  }\n\n  getScopeValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    return this._extScope.getValue(prefix, keyOrRef)\n  }\n\n  // return code that assigns values in the external scope to the names that are used internally\n  // (same names that were returned by gen.scopeName or gen.scopeValue)\n  scopeRefs(scopeName: Name): Code {\n    return this._extScope.scopeRefs(scopeName, this._values)\n  }\n\n  scopeCode(): Code {\n    return this._extScope.scopeCode(this._values)\n  }\n\n  private _def(\n    varKind: Name,\n    nameOrPrefix: Name | string,\n    rhs?: SafeExpr,\n    constant?: boolean\n  ): Name {\n    const name = this._scope.toName(nameOrPrefix)\n    if (rhs !== undefined && constant) this._constants[name.str] = rhs\n    this._leafNode(new Def(varKind, name, rhs))\n    return name\n  }\n\n  // `const` declaration (`var` in es5 mode)\n  const(nameOrPrefix: Name | string, rhs: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.const, nameOrPrefix, rhs, _constant)\n  }\n\n  // `let` declaration with optional assignment (`var` in es5 mode)\n  let(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.let, nameOrPrefix, rhs, _constant)\n  }\n\n  // `var` declaration with optional assignment\n  var(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.var, nameOrPrefix, rhs, _constant)\n  }\n\n  // assignment code\n  assign(lhs: Code, rhs: SafeExpr, sideEffects?: boolean): CodeGen {\n    return this._leafNode(new Assign(lhs, rhs, sideEffects))\n  }\n\n  // `+=` code\n  add(lhs: Code, rhs: SafeExpr): CodeGen {\n    return this._leafNode(new AssignOp(lhs, operators.ADD, rhs))\n  }\n\n  // appends passed SafeExpr to code or executes Block\n  code(c: Block | SafeExpr): CodeGen {\n    if (typeof c == \"function\") c()\n    else if (c !== nil) this._leafNode(new AnyCode(c))\n    return this\n  }\n\n  // returns code for object literal for the passed argument list of key-value pairs\n  object(...keyValues: [Name | string, SafeExpr | string][]): _Code {\n    const code: CodeItem[] = [\"{\"]\n    for (const [key, value] of keyValues) {\n      if (code.length > 1) code.push(\",\")\n      code.push(key)\n      if (key !== value || this.opts.es5) {\n        code.push(\":\")\n        addCodeArg(code, value)\n      }\n    }\n    code.push(\"}\")\n    return new _Code(code)\n  }\n\n  // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n  if(condition: Code | boolean, thenBody?: Block, elseBody?: Block): CodeGen {\n    this._blockNode(new If(condition))\n\n    if (thenBody && elseBody) {\n      this.code(thenBody).else().code(elseBody).endIf()\n    } else if (thenBody) {\n      this.code(thenBody).endIf()\n    } else if (elseBody) {\n      throw new Error('CodeGen: \"else\" body without \"then\" body')\n    }\n    return this\n  }\n\n  // `else if` clause - invalid without `if` or after `else` clauses\n  elseIf(condition: Code | boolean): CodeGen {\n    return this._elseNode(new If(condition))\n  }\n\n  // `else` clause - only valid after `if` or `else if` clauses\n  else(): CodeGen {\n    return this._elseNode(new Else())\n  }\n\n  // end `if` statement (needed if gen.if was used only with condition)\n  endIf(): CodeGen {\n    return this._endBlockNode(If, Else)\n  }\n\n  private _for(node: For, forBody?: Block): CodeGen {\n    this._blockNode(node)\n    if (forBody) this.code(forBody).endFor()\n    return this\n  }\n\n  // a generic `for` clause (or statement if `forBody` is passed)\n  for(iteration: Code, forBody?: Block): CodeGen {\n    return this._for(new ForLoop(iteration), forBody)\n  }\n\n  // `for` statement for a range of values\n  forRange(\n    nameOrPrefix: Name | string,\n    from: SafeExpr,\n    to: SafeExpr,\n    forBody: (index: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.let\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForRange(varKind, name, from, to), () => forBody(name))\n  }\n\n  // `for-of` statement (in es5 mode replace with a normal for loop)\n  forOf(\n    nameOrPrefix: Name | string,\n    iterable: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = varKinds.const\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    if (this.opts.es5) {\n      const arr = iterable instanceof Name ? iterable : this.var(\"_arr\", iterable)\n      return this.forRange(\"_i\", 0, _`${arr}.length`, (i) => {\n        this.var(name, _`${arr}[${i}]`)\n        forBody(name)\n      })\n    }\n    return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name))\n  }\n\n  // `for-in` statement.\n  // With option `ownProperties` replaced with a `for-of` loop for object keys\n  forIn(\n    nameOrPrefix: Name | string,\n    obj: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.const\n  ): CodeGen {\n    if (this.opts.ownProperties) {\n      return this.forOf(nameOrPrefix, _`Object.keys(${obj})`, forBody)\n    }\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name))\n  }\n\n  // end `for` loop\n  endFor(): CodeGen {\n    return this._endBlockNode(For)\n  }\n\n  // `label` statement\n  label(label: Name): CodeGen {\n    return this._leafNode(new Label(label))\n  }\n\n  // `break` statement\n  break(label?: Code): CodeGen {\n    return this._leafNode(new Break(label))\n  }\n\n  // `return` statement\n  return(value: Block | SafeExpr): CodeGen {\n    const node = new Return()\n    this._blockNode(node)\n    this.code(value)\n    if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node')\n    return this._endBlockNode(Return)\n  }\n\n  // `try` statement\n  try(tryBody: Block, catchCode?: (e: Name) => void, finallyCode?: Block): CodeGen {\n    if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"')\n    const node = new Try()\n    this._blockNode(node)\n    this.code(tryBody)\n    if (catchCode) {\n      const error = this.name(\"e\")\n      this._currNode = node.catch = new Catch(error)\n      catchCode(error)\n    }\n    if (finallyCode) {\n      this._currNode = node.finally = new Finally()\n      this.code(finallyCode)\n    }\n    return this._endBlockNode(Catch, Finally)\n  }\n\n  // `throw` statement\n  throw(error: Code): CodeGen {\n    return this._leafNode(new Throw(error))\n  }\n\n  // start self-balancing block\n  block(body?: Block, nodeCount?: number): CodeGen {\n    this._blockStarts.push(this._nodes.length)\n    if (body) this.code(body).endBlock(nodeCount)\n    return this\n  }\n\n  // end the current self-balancing block\n  endBlock(nodeCount?: number): CodeGen {\n    const len = this._blockStarts.pop()\n    if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\")\n    const toClose = this._nodes.length - len\n    if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n      throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`)\n    }\n    this._nodes.length = len\n    return this\n  }\n\n  // `function` heading (or definition if funcBody is passed)\n  func(name: Name, args: Code = nil, async?: boolean, funcBody?: Block): CodeGen {\n    this._blockNode(new Func(name, args, async))\n    if (funcBody) this.code(funcBody).endFunc()\n    return this\n  }\n\n  // end function definition\n  endFunc(): CodeGen {\n    return this._endBlockNode(Func)\n  }\n\n  optimize(n = 1): void {\n    while (n-- > 0) {\n      this._root.optimizeNodes()\n      this._root.optimizeNames(this._root.names, this._constants)\n    }\n  }\n\n  private _leafNode(node: LeafNode): CodeGen {\n    this._currNode.nodes.push(node)\n    return this\n  }\n\n  private _blockNode(node: StartBlockNode): void {\n    this._currNode.nodes.push(node)\n    this._nodes.push(node)\n  }\n\n  private _endBlockNode(N1: EndBlockNodeType, N2?: EndBlockNodeType): CodeGen {\n    const n = this._currNode\n    if (n instanceof N1 || (N2 && n instanceof N2)) {\n      this._nodes.pop()\n      return this\n    }\n    throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`)\n  }\n\n  private _elseNode(node: If | Else): CodeGen {\n    const n = this._currNode\n    if (!(n instanceof If)) {\n      throw new Error('CodeGen: \"else\" without \"if\"')\n    }\n    this._currNode = n.else = node\n    return this\n  }\n\n  private get _root(): Root {\n    return this._nodes[0] as Root\n  }\n\n  private get _currNode(): ParentNode {\n    const ns = this._nodes\n    return ns[ns.length - 1]\n  }\n\n  private set _currNode(node: ParentNode) {\n    const ns = this._nodes\n    ns[ns.length - 1] = node\n  }\n\n  // get nodeCount(): number {\n  //   return this._root.count\n  // }\n}\n\nfunction addNames(names: UsedNames, from: UsedNames): UsedNames {\n  for (const n in from) names[n] = (names[n] || 0) + (from[n] || 0)\n  return names\n}\n\nfunction addExprNames(names: UsedNames, from: SafeExpr): UsedNames {\n  return from instanceof _CodeOrName ? addNames(names, from.names) : names\n}\n\nfunction optimizeExpr<T extends SafeExpr | Code>(expr: T, names: UsedNames, constants: Constants): T\nfunction optimizeExpr(expr: SafeExpr, names: UsedNames, constants: Constants): SafeExpr {\n  if (expr instanceof Name) return replaceName(expr)\n  if (!canOptimize(expr)) return expr\n  return new _Code(\n    expr._items.reduce((items: CodeItem[], c: SafeExpr | string) => {\n      if (c instanceof Name) c = replaceName(c)\n      if (c instanceof _Code) items.push(...c._items)\n      else items.push(c)\n      return items\n    }, [])\n  )\n\n  function replaceName(n: Name): SafeExpr {\n    const c = constants[n.str]\n    if (c === undefined || names[n.str] !== 1) return n\n    delete names[n.str]\n    return c\n  }\n\n  function canOptimize(e: SafeExpr): e is _Code {\n    return (\n      e instanceof _Code &&\n      e._items.some(\n        (c) => c instanceof Name && names[c.str] === 1 && constants[c.str] !== undefined\n      )\n    )\n  }\n}\n\nfunction subtractNames(names: UsedNames, from: UsedNames): void {\n  for (const n in from) names[n] = (names[n] || 0) - (from[n] || 0)\n}\n\nexport function not<T extends Code | SafeExpr>(x: T): T\nexport function not(x: Code | SafeExpr): Code | SafeExpr {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : _`!${par(x)}`\n}\n\nconst andCode = mappend(operators.AND)\n\n// boolean AND (&&) expression with the passed arguments\nexport function and(...args: Code[]): Code {\n  return args.reduce(andCode)\n}\n\nconst orCode = mappend(operators.OR)\n\n// boolean OR (||) expression with the passed arguments\nexport function or(...args: Code[]): Code {\n  return args.reduce(orCode)\n}\n\ntype MAppend = (x: Code, y: Code) => Code\n\nfunction mappend(op: Code): MAppend {\n  return (x, y) => (x === nil ? y : y === nil ? x : _`${par(x)} ${op} ${par(y)}`)\n}\n\nfunction par(x: Code): Code {\n  return x instanceof Name ? x : _`(${x})`\n}\n", "import type {AnySchema, EvaluatedProperties, EvaluatedItems} from \"../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \".\"\nimport {_, getProperty, Code, Name, CodeGen} from \"./codegen\"\nimport {_Code} from \"./codegen/code\"\nimport type {Rule, ValidationRules} from \"./rules\"\n\n// TODO refactor to use Set\nexport function toHash<T extends string = string>(arr: T[]): {[K in T]?: true} {\n  const hash: {[K in T]?: true} = {}\n  for (const item of arr) hash[item] = true\n  return hash\n}\n\nexport function alwaysValidSchema(it: SchemaCxt, schema: AnySchema): boolean | void {\n  if (typeof schema == \"boolean\") return schema\n  if (Object.keys(schema).length === 0) return true\n  checkUnknownRules(it, schema)\n  return !schemaHasRules(schema, it.self.RULES.all)\n}\n\nexport function checkUnknownRules(it: SchemaCxt, schema: AnySchema = it.schema): void {\n  const {opts, self} = it\n  if (!opts.strictSchema) return\n  if (typeof schema === \"boolean\") return\n  const rules = self.RULES.keywords\n  for (const key in schema) {\n    if (!rules[key]) checkStrictMode(it, `unknown keyword: \"${key}\"`)\n  }\n}\n\nexport function schemaHasRules(\n  schema: AnySchema,\n  rules: {[Key in string]?: boolean | Rule}\n): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (rules[key]) return true\n  return false\n}\n\nexport function schemaHasRulesButRef(schema: AnySchema, RULES: ValidationRules): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (key !== \"$ref\" && RULES.all[key]) return true\n  return false\n}\n\nexport function schemaRefOrVal(\n  {topSchemaRef, schemaPath}: SchemaObjCxt,\n  schema: unknown,\n  keyword: string,\n  $data?: string | false\n): Code | number | boolean {\n  if (!$data) {\n    if (typeof schema == \"number\" || typeof schema == \"boolean\") return schema\n    if (typeof schema == \"string\") return _`${schema}`\n  }\n  return _`${topSchemaRef}${schemaPath}${getProperty(keyword)}`\n}\n\nexport function unescapeFragment(str: string): string {\n  return unescapeJsonPointer(decodeURIComponent(str))\n}\n\nexport function escapeFragment(str: string | number): string {\n  return encodeURIComponent(escapeJsonPointer(str))\n}\n\nexport function escapeJsonPointer(str: string | number): string {\n  if (typeof str == \"number\") return `${str}`\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\")\n}\n\nexport function unescapeJsonPointer(str: string): string {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\")\n}\n\nexport function eachItem<T>(xs: T | T[], f: (x: T) => void): void {\n  if (Array.isArray(xs)) {\n    for (const x of xs) f(x)\n  } else {\n    f(xs)\n  }\n}\n\ntype SomeEvaluated = EvaluatedProperties | EvaluatedItems\n\ntype MergeEvaluatedFunc<T extends SomeEvaluated> = (\n  gen: CodeGen,\n  from: Name | T,\n  to: Name | Exclude<T, true> | undefined,\n  toName?: typeof Name\n) => Name | T\n\ninterface MakeMergeFuncArgs<T extends SomeEvaluated> {\n  mergeNames: (gen: CodeGen, from: Name, to: Name) => void\n  mergeToName: (gen: CodeGen, from: T, to: Name) => void\n  mergeValues: (from: T, to: Exclude<T, true>) => T\n  resultToName: (gen: CodeGen, res?: T) => Name\n}\n\nfunction makeMergeEvaluated<T extends SomeEvaluated>({\n  mergeNames,\n  mergeToName,\n  mergeValues,\n  resultToName,\n}: MakeMergeFuncArgs<T>): MergeEvaluatedFunc<T> {\n  return (gen, from, to, toName) => {\n    const res =\n      to === undefined\n        ? from\n        : to instanceof Name\n        ? (from instanceof Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n        : from instanceof Name\n        ? (mergeToName(gen, to, from), from)\n        : mergeValues(from, to)\n    return toName === Name && !(res instanceof Name) ? resultToName(gen, res) : res\n  }\n}\n\ninterface MergeEvaluated {\n  props: MergeEvaluatedFunc<EvaluatedProperties>\n  items: MergeEvaluatedFunc<EvaluatedItems>\n}\n\nexport const mergeEvaluated: MergeEvaluated = {\n  props: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () => {\n        gen.if(\n          _`${from} === true`,\n          () => gen.assign(to, true),\n          () => gen.assign(to, _`${to} || {}`).code(_`Object.assign(${to}, ${from})`)\n        )\n      }),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () => {\n        if (from === true) {\n          gen.assign(to, true)\n        } else {\n          gen.assign(to, _`${to} || {}`)\n          setEvaluated(gen, to, from)\n        }\n      }),\n    mergeValues: (from, to) => (from === true ? true : {...from, ...to}),\n    resultToName: evaluatedPropsToName,\n  }),\n  items: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () =>\n        gen.assign(to, _`${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () =>\n        gen.assign(to, from === true ? true : _`${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n    resultToName: (gen, items) => gen.var(\"items\", items),\n  }),\n}\n\nexport function evaluatedPropsToName(gen: CodeGen, ps?: EvaluatedProperties): Name {\n  if (ps === true) return gen.var(\"props\", true)\n  const props = gen.var(\"props\", _`{}`)\n  if (ps !== undefined) setEvaluated(gen, props, ps)\n  return props\n}\n\nexport function setEvaluated(gen: CodeGen, props: Name, ps: {[K in string]?: true}): void {\n  Object.keys(ps).forEach((p) => gen.assign(_`${props}${getProperty(p)}`, true))\n}\n\nconst snippets: {[S in string]?: _Code} = {}\n\nexport function useFunc(gen: CodeGen, f: {code: string}): Name {\n  return gen.scopeValue(\"func\", {\n    ref: f,\n    code: snippets[f.code] || (snippets[f.code] = new _Code(f.code)),\n  })\n}\n\nexport enum Type {\n  Num,\n  Str,\n}\n\nexport function getErrorPath(\n  dataProp: Name | string | number,\n  dataPropType?: Type,\n  jsPropertySyntax?: boolean\n): Code | string {\n  // let path\n  if (dataProp instanceof Name) {\n    const isNumber = dataPropType === Type.Num\n    return jsPropertySyntax\n      ? isNumber\n        ? _`\"[\" + ${dataProp} + \"]\"`\n        : _`\"['\" + ${dataProp} + \"']\"`\n      : isNumber\n      ? _`\"/\" + ${dataProp}`\n      : _`\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")` // TODO maybe use global escapePointer\n  }\n  return jsPropertySyntax ? getProperty(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp)\n}\n\nexport function checkStrictMode(\n  it: SchemaCxt,\n  msg: string,\n  mode: boolean | \"log\" = it.opts.strictSchema\n): void {\n  if (!mode) return\n  msg = `strict mode: ${msg}`\n  if (mode === true) throw new Error(msg)\n  it.self.logger.warn(msg)\n}\n", "import {Name} from \"./codegen\"\n\nconst names = {\n  // validation function arguments\n  data: new Name(\"data\"), // data passed to validation function\n  // args passed from referencing schema\n  valCxt: new Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n  instancePath: new Name(\"instancePath\"),\n  parentData: new Name(\"parentData\"),\n  parentDataProperty: new Name(\"parentDataProperty\"),\n  rootData: new Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n  dynamicAnchors: new Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n  // function scoped variables\n  vErrors: new Name(\"vErrors\"), // null or array of validation errors\n  errors: new Name(\"errors\"), // counter of validation errors\n  this: new Name(\"this\"),\n  // \"globals\"\n  self: new Name(\"self\"),\n  scope: new Name(\"scope\"),\n  // JTD serialize/parse name for JSON string and position\n  json: new Name(\"json\"),\n  jsonPos: new Name(\"jsonPos\"),\n  jsonLen: new Name(\"jsonLen\"),\n  jsonPart: new Name(\"jsonPart\"),\n}\n\nexport default names\n", "import type {KeywordErrorCxt, KeywordErrorDefinition} from \"../types\"\nimport type {SchemaCxt} from \"./index\"\nimport {CodeGen, _, str, strConcat, Code, Name} from \"./codegen\"\nimport {SafeExpr} from \"./codegen/code\"\nimport {getErrorPath, Type} from \"./util\"\nimport N from \"./names\"\n\nexport const keywordError: KeywordErrorDefinition = {\n  message: ({keyword}) => str`must pass \"${keyword}\" keyword validation`,\n}\n\nexport const keyword$DataError: KeywordErrorDefinition = {\n  message: ({keyword, schemaType}) =>\n    schemaType\n      ? str`\"${keyword}\" keyword must be ${schemaType} ($data)`\n      : str`\"${keyword}\" keyword is invalid ($data)`,\n}\n\nexport interface ErrorPaths {\n  instancePath?: Code\n  schemaPath?: string\n  parentSchema?: boolean\n}\n\nexport function reportError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths,\n  overrideAllErrors?: boolean\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  if (overrideAllErrors ?? (compositeRule || allErrors)) {\n    addError(gen, errObj)\n  } else {\n    returnErrors(it, _`[${errObj}]`)\n  }\n}\n\nexport function reportExtraError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  addError(gen, errObj)\n  if (!(compositeRule || allErrors)) {\n    returnErrors(it, N.vErrors)\n  }\n}\n\nexport function resetErrorsCount(gen: CodeGen, errsCount: Name): void {\n  gen.assign(N.errors, errsCount)\n  gen.if(_`${N.vErrors} !== null`, () =>\n    gen.if(\n      errsCount,\n      () => gen.assign(_`${N.vErrors}.length`, errsCount),\n      () => gen.assign(N.vErrors, null)\n    )\n  )\n}\n\nexport function extendErrors({\n  gen,\n  keyword,\n  schemaValue,\n  data,\n  errsCount,\n  it,\n}: KeywordErrorCxt): void {\n  /* istanbul ignore if */\n  if (errsCount === undefined) throw new Error(\"ajv implementation error\")\n  const err = gen.name(\"err\")\n  gen.forRange(\"i\", errsCount, N.errors, (i) => {\n    gen.const(err, _`${N.vErrors}[${i}]`)\n    gen.if(_`${err}.instancePath === undefined`, () =>\n      gen.assign(_`${err}.instancePath`, strConcat(N.instancePath, it.errorPath))\n    )\n    gen.assign(_`${err}.schemaPath`, str`${it.errSchemaPath}/${keyword}`)\n    if (it.opts.verbose) {\n      gen.assign(_`${err}.schema`, schemaValue)\n      gen.assign(_`${err}.data`, data)\n    }\n  })\n}\n\nfunction addError(gen: CodeGen, errObj: Code): void {\n  const err = gen.const(\"err\", errObj)\n  gen.if(\n    _`${N.vErrors} === null`,\n    () => gen.assign(N.vErrors, _`[${err}]`),\n    _`${N.vErrors}.push(${err})`\n  )\n  gen.code(_`${N.errors}++`)\n}\n\nfunction returnErrors(it: SchemaCxt, errs: Code): void {\n  const {gen, validateName, schemaEnv} = it\n  if (schemaEnv.$async) {\n    gen.throw(_`new ${it.ValidationError as Name}(${errs})`)\n  } else {\n    gen.assign(_`${validateName}.errors`, errs)\n    gen.return(false)\n  }\n}\n\nconst E = {\n  keyword: new Name(\"keyword\"),\n  schemaPath: new Name(\"schemaPath\"), // also used in JTD errors\n  params: new Name(\"params\"),\n  propertyName: new Name(\"propertyName\"),\n  message: new Name(\"message\"),\n  schema: new Name(\"schema\"),\n  parentSchema: new Name(\"parentSchema\"),\n}\n\nfunction errorObjectCode(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths?: ErrorPaths\n): Code {\n  const {createErrors} = cxt.it\n  if (createErrors === false) return _`{}`\n  return errorObject(cxt, error, errorPaths)\n}\n\nfunction errorObject(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths: ErrorPaths = {}\n): Code {\n  const {gen, it} = cxt\n  const keyValues: [Name, SafeExpr | string][] = [\n    errorInstancePath(it, errorPaths),\n    errorSchemaPath(cxt, errorPaths),\n  ]\n  extraErrorProps(cxt, error, keyValues)\n  return gen.object(...keyValues)\n}\n\nfunction errorInstancePath({errorPath}: SchemaCxt, {instancePath}: ErrorPaths): [Name, Code] {\n  const instPath = instancePath\n    ? str`${errorPath}${getErrorPath(instancePath, Type.Str)}`\n    : errorPath\n  return [N.instancePath, strConcat(N.instancePath, instPath)]\n}\n\nfunction errorSchemaPath(\n  {keyword, it: {errSchemaPath}}: KeywordErrorCxt,\n  {schemaPath, parentSchema}: ErrorPaths\n): [Name, string | Code] {\n  let schPath = parentSchema ? errSchemaPath : str`${errSchemaPath}/${keyword}`\n  if (schemaPath) {\n    schPath = str`${schPath}${getErrorPath(schemaPath, Type.Str)}`\n  }\n  return [E.schemaPath, schPath]\n}\n\nfunction extraErrorProps(\n  cxt: KeywordErrorCxt,\n  {params, message}: KeywordErrorDefinition,\n  keyValues: [Name, SafeExpr | string][]\n): void {\n  const {keyword, data, schemaValue, it} = cxt\n  const {opts, propertyName, topSchemaRef, schemaPath} = it\n  keyValues.push(\n    [E.keyword, keyword],\n    [E.params, typeof params == \"function\" ? params(cxt) : params || _`{}`]\n  )\n  if (opts.messages) {\n    keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message])\n  }\n  if (opts.verbose) {\n    keyValues.push(\n      [E.schema, schemaValue],\n      [E.parentSchema, _`${topSchemaRef}${schemaPath}`],\n      [N.data, data]\n    )\n  }\n  if (propertyName) keyValues.push([E.propertyName, propertyName])\n}\n", "import type {KeywordErrorDefinition, KeywordErrorCxt} from \"../../types\"\nimport type {SchemaCxt} from \"..\"\nimport {reportError} from \"../errors\"\nimport {_, Name} from \"../codegen\"\nimport N from \"../names\"\n\nconst boolError: KeywordErrorDefinition = {\n  message: \"boolean schema is false\",\n}\n\nexport function topBoolOrEmptySchema(it: SchemaCxt): void {\n  const {gen, schema, validateName} = it\n  if (schema === false) {\n    falseSchemaError(it, false)\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(N.data)\n  } else {\n    gen.assign(_`${validateName}.errors`, null)\n    gen.return(true)\n  }\n}\n\nexport function boolOrEmptySchema(it: SchemaCxt, valid: Name): void {\n  const {gen, schema} = it\n  if (schema === false) {\n    gen.var(valid, false) // TODO var\n    falseSchemaError(it)\n  } else {\n    gen.var(valid, true) // TODO var\n  }\n}\n\nfunction falseSchemaError(it: SchemaCxt, overrideAllErrors?: boolean): void {\n  const {gen, data} = it\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt: KeywordErrorCxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it,\n  }\n  reportError(cxt, boolError, undefined, overrideAllErrors)\n}\n", "import type {AddedKeywordDefinition} from \"../types\"\n\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"] as const\n\nexport type JSONType = (typeof _jsonTypes)[number]\n\nconst jsonTypes: Set<string> = new Set(_jsonTypes)\n\nexport function isJSONType(x: unknown): x is JSONType {\n  return typeof x == \"string\" && jsonTypes.has(x)\n}\n\ntype ValidationTypes = {\n  [K in JSONType]: boolean | RuleGroup | undefined\n}\n\nexport interface ValidationRules {\n  rules: RuleGroup[]\n  post: RuleGroup\n  all: {[Key in string]?: boolean | Rule} // rules that have to be validated\n  keywords: {[Key in string]?: boolean} // all known keywords (superset of \"all\")\n  types: ValidationTypes\n}\n\nexport interface RuleGroup {\n  type?: JSONType\n  rules: Rule[]\n}\n\n// This interface wraps KeywordDefinition because definition can have multiple keywords\nexport interface Rule {\n  keyword: string\n  definition: AddedKeywordDefinition\n}\n\nexport function getRules(): ValidationRules {\n  const groups: Record<\"number\" | \"string\" | \"array\" | \"object\", RuleGroup> = {\n    number: {type: \"number\", rules: []},\n    string: {type: \"string\", rules: []},\n    array: {type: \"array\", rules: []},\n    object: {type: \"object\", rules: []},\n  }\n  return {\n    types: {...groups, integer: true, boolean: true, null: true},\n    rules: [{rules: []}, groups.number, groups.string, groups.array, groups.object],\n    post: {rules: []},\n    all: {},\n    keywords: {},\n  }\n}\n", "import type {AnySchemaObject} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport type {JSONType, RuleGroup, Rule} from \"../rules\"\n\nexport function schemaHasRulesForType(\n  {schema, self}: SchemaObjCxt,\n  type: JSONType\n): boolean | undefined {\n  const group = self.RULES.types[type]\n  return group && group !== true && shouldUseGroup(schema, group)\n}\n\nexport function shouldUseGroup(schema: AnySchemaObject, group: RuleGroup): boolean {\n  return group.rules.some((rule) => shouldUseRule(schema, rule))\n}\n\nexport function shouldUseRule(schema: AnySchemaObject, rule: Rule): boolean | undefined {\n  return (\n    schema[rule.keyword] !== undefined ||\n    rule.definition.implements?.some((kwd) => schema[kwd] !== undefined)\n  )\n}\n", "import type {\n  KeywordErrorDefinition,\n  KeywordErrorCxt,\n  ErrorObject,\n  AnySchemaObject,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {isJSONType, JSONType} from \"../rules\"\nimport {schemaHasRulesForType} from \"./applicability\"\nimport {reportError} from \"../errors\"\nimport {_, nil, and, not, operators, Code, Name} from \"../codegen\"\nimport {toHash, schemaRefOrVal} from \"../util\"\n\nexport enum DataType {\n  Correct,\n  Wrong,\n}\n\nexport function getSchemaTypes(schema: AnySchemaObject): JSONType[] {\n  const types = getJSONTypes(schema.type)\n  const hasNull = types.includes(\"null\")\n  if (hasNull) {\n    if (schema.nullable === false) throw new Error(\"type: null contradicts nullable: false\")\n  } else {\n    if (!types.length && schema.nullable !== undefined) {\n      throw new Error('\"nullable\" cannot be used without \"type\"')\n    }\n    if (schema.nullable === true) types.push(\"null\")\n  }\n  return types\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport function getJSONTypes(ts: unknown | unknown[]): JSONType[] {\n  const types: unknown[] = Array.isArray(ts) ? ts : ts ? [ts] : []\n  if (types.every(isJSONType)) return types\n  throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"))\n}\n\nexport function coerceAndCheckDataType(it: SchemaObjCxt, types: JSONType[]): boolean {\n  const {gen, data, opts} = it\n  const coerceTo = coerceToTypes(types, opts.coerceTypes)\n  const checkTypes =\n    types.length > 0 &&\n    !(coerceTo.length === 0 && types.length === 1 && schemaHasRulesForType(it, types[0]))\n  if (checkTypes) {\n    const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong)\n    gen.if(wrongType, () => {\n      if (coerceTo.length) coerceData(it, types, coerceTo)\n      else reportTypeError(it)\n    })\n  }\n  return checkTypes\n}\n\nconst COERCIBLE: Set<JSONType> = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"])\nfunction coerceToTypes(types: JSONType[], coerceTypes?: boolean | \"array\"): JSONType[] {\n  return coerceTypes\n    ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n    : []\n}\n\nfunction coerceData(it: SchemaObjCxt, types: JSONType[], coerceTo: JSONType[]): void {\n  const {gen, data, opts} = it\n  const dataType = gen.let(\"dataType\", _`typeof ${data}`)\n  const coerced = gen.let(\"coerced\", _`undefined`)\n  if (opts.coerceTypes === \"array\") {\n    gen.if(_`${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () =>\n      gen\n        .assign(data, _`${data}[0]`)\n        .assign(dataType, _`typeof ${data}`)\n        .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data))\n    )\n  }\n  gen.if(_`${coerced} !== undefined`)\n  for (const t of coerceTo) {\n    if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n      coerceSpecificType(t)\n    }\n  }\n  gen.else()\n  reportTypeError(it)\n  gen.endIf()\n\n  gen.if(_`${coerced} !== undefined`, () => {\n    gen.assign(data, coerced)\n    assignParentData(it, coerced)\n  })\n\n  function coerceSpecificType(t: string): void {\n    switch (t) {\n      case \"string\":\n        gen\n          .elseIf(_`${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n          .assign(coerced, _`\"\" + ${data}`)\n          .elseIf(_`${data} === null`)\n          .assign(coerced, _`\"\"`)\n        return\n      case \"number\":\n        gen\n          .elseIf(\n            _`${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"integer\":\n        gen\n          .elseIf(\n            _`${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"boolean\":\n        gen\n          .elseIf(_`${data} === \"false\" || ${data} === 0 || ${data} === null`)\n          .assign(coerced, false)\n          .elseIf(_`${data} === \"true\" || ${data} === 1`)\n          .assign(coerced, true)\n        return\n      case \"null\":\n        gen.elseIf(_`${data} === \"\" || ${data} === 0 || ${data} === false`)\n        gen.assign(coerced, null)\n        return\n\n      case \"array\":\n        gen\n          .elseIf(\n            _`${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`\n          )\n          .assign(coerced, _`[${data}]`)\n    }\n  }\n}\n\nfunction assignParentData({gen, parentData, parentDataProperty}: SchemaObjCxt, expr: Name): void {\n  // TODO use gen.property\n  gen.if(_`${parentData} !== undefined`, () =>\n    gen.assign(_`${parentData}[${parentDataProperty}]`, expr)\n  )\n}\n\nexport function checkDataType(\n  dataType: JSONType,\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct = DataType.Correct\n): Code {\n  const EQ = correct === DataType.Correct ? operators.EQ : operators.NEQ\n  let cond: Code\n  switch (dataType) {\n    case \"null\":\n      return _`${data} ${EQ} null`\n    case \"array\":\n      cond = _`Array.isArray(${data})`\n      break\n    case \"object\":\n      cond = _`${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`\n      break\n    case \"integer\":\n      cond = numCond(_`!(${data} % 1) && !isNaN(${data})`)\n      break\n    case \"number\":\n      cond = numCond()\n      break\n    default:\n      return _`typeof ${data} ${EQ} ${dataType}`\n  }\n  return correct === DataType.Correct ? cond : not(cond)\n\n  function numCond(_cond: Code = nil): Code {\n    return and(_`typeof ${data} == \"number\"`, _cond, strictNums ? _`isFinite(${data})` : nil)\n  }\n}\n\nexport function checkDataTypes(\n  dataTypes: JSONType[],\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct?: DataType\n): Code {\n  if (dataTypes.length === 1) {\n    return checkDataType(dataTypes[0], data, strictNums, correct)\n  }\n  let cond: Code\n  const types = toHash(dataTypes)\n  if (types.array && types.object) {\n    const notObj = _`typeof ${data} != \"object\"`\n    cond = types.null ? notObj : _`!${data} || ${notObj}`\n    delete types.null\n    delete types.array\n    delete types.object\n  } else {\n    cond = nil\n  }\n  if (types.number) delete types.integer\n  for (const t in types) cond = and(cond, checkDataType(t as JSONType, data, strictNums, correct))\n  return cond\n}\n\nexport type TypeError = ErrorObject<\"type\", {type: string}>\n\nconst typeError: KeywordErrorDefinition = {\n  message: ({schema}) => `must be ${schema}`,\n  params: ({schema, schemaValue}) =>\n    typeof schema == \"string\" ? _`{type: ${schema}}` : _`{type: ${schemaValue}}`,\n}\n\nexport function reportTypeError(it: SchemaObjCxt): void {\n  const cxt = getTypeErrorContext(it)\n  reportError(cxt, typeError)\n}\n\nfunction getTypeErrorContext(it: SchemaObjCxt): KeywordErrorCxt {\n  const {gen, data, schema} = it\n  const schemaCode = schemaRefOrVal(it, schema, \"type\")\n  return {\n    gen,\n    keyword: \"type\",\n    data,\n    schema: schema.type,\n    schemaCode,\n    schemaValue: schemaCode,\n    parentSchema: schema,\n    params: {},\n    it,\n  }\n}\n", "import type {SchemaObjCxt} from \"..\"\nimport {_, getProperty, stringify} from \"../codegen\"\nimport {checkStrictMode} from \"../util\"\n\nexport function assignDefaults(it: SchemaObjCxt, ty?: string): void {\n  const {properties, items} = it.schema\n  if (ty === \"object\" && properties) {\n    for (const key in properties) {\n      assignDefault(it, key, properties[key].default)\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach((sch, i: number) => assignDefault(it, i, sch.default))\n  }\n}\n\nfunction assignDefault(it: SchemaObjCxt, prop: string | number, defaultValue: unknown): void {\n  const {gen, compositeRule, data, opts} = it\n  if (defaultValue === undefined) return\n  const childData = _`${data}${getProperty(prop)}`\n  if (compositeRule) {\n    checkStrictMode(it, `default is ignored for: ${childData}`)\n    return\n  }\n\n  let condition = _`${childData} === undefined`\n  if (opts.useDefaults === \"empty\") {\n    condition = _`${condition} || ${childData} === null || ${childData} === \"\"`\n  }\n  // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n  gen.if(condition, _`${childData} = ${stringify(defaultValue)}`)\n}\n", "import type {AnySchema, SchemaMap} from \"../types\"\nimport type {SchemaCxt} from \"../compile\"\nimport type {KeywordCxt} from \"../compile/validate\"\nimport {CodeGen, _, and, or, not, nil, strConcat, getProperty, Code, Name} from \"../compile/codegen\"\nimport {alwaysValidSchema, Type} from \"../compile/util\"\nimport N from \"../compile/names\"\nimport {useFunc} from \"../compile/util\"\nexport function checkReportMissingProp(cxt: KeywordCxt, prop: string): void {\n  const {gen, data, it} = cxt\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n    cxt.setParams({missingProperty: _`${prop}`}, true)\n    cxt.error()\n  })\n}\n\nexport function checkMissingProp(\n  {gen, data, it: {opts}}: KeywordCxt,\n  properties: string[],\n  missing: Name\n): Code {\n  return or(\n    ...properties.map((prop) =>\n      and(noPropertyInData(gen, data, prop, opts.ownProperties), _`${missing} = ${prop}`)\n    )\n  )\n}\n\nexport function reportMissingProp(cxt: KeywordCxt, missing: Name): void {\n  cxt.setParams({missingProperty: missing}, true)\n  cxt.error()\n}\n\nexport function hasPropFunc(gen: CodeGen): Name {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: _`Object.prototype.hasOwnProperty`,\n  })\n}\n\nexport function isOwnProperty(gen: CodeGen, data: Name, property: Name | string): Code {\n  return _`${hasPropFunc(gen)}.call(${data}, ${property})`\n}\n\nexport function propertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} !== undefined`\n  return ownProperties ? _`${cond} && ${isOwnProperty(gen, data, property)}` : cond\n}\n\nexport function noPropertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} === undefined`\n  return ownProperties ? or(cond, not(isOwnProperty(gen, data, property))) : cond\n}\n\nexport function allSchemaProperties(schemaMap?: SchemaMap): string[] {\n  return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : []\n}\n\nexport function schemaProperties(it: SchemaCxt, schemaMap: SchemaMap): string[] {\n  return allSchemaProperties(schemaMap).filter(\n    (p) => !alwaysValidSchema(it, schemaMap[p] as AnySchema)\n  )\n}\n\nexport function callValidateCode(\n  {schemaCode, data, it: {gen, topSchemaRef, schemaPath, errorPath}, it}: KeywordCxt,\n  func: Code,\n  context: Code,\n  passSchema?: boolean\n): Code {\n  const dataAndSchema = passSchema ? _`${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data\n  const valCxt: [Name, Code | number][] = [\n    [N.instancePath, strConcat(N.instancePath, errorPath)],\n    [N.parentData, it.parentData],\n    [N.parentDataProperty, it.parentDataProperty],\n    [N.rootData, N.rootData],\n  ]\n  if (it.opts.dynamicRef) valCxt.push([N.dynamicAnchors, N.dynamicAnchors])\n  const args = _`${dataAndSchema}, ${gen.object(...valCxt)}`\n  return context !== nil ? _`${func}.call(${context}, ${args})` : _`${func}(${args})`\n}\n\nconst newRegExp = _`new RegExp`\n\nexport function usePattern({gen, it: {opts}}: KeywordCxt, pattern: string): Name {\n  const u = opts.unicodeRegExp ? \"u\" : \"\"\n  const {regExp} = opts.code\n  const rx = regExp(pattern, u)\n\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: _`${regExp.code === \"new RegExp\" ? newRegExp : useFunc(gen, regExp)}(${pattern}, ${u})`,\n  })\n}\n\nexport function validateArray(cxt: KeywordCxt): Name {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  if (it.allErrors) {\n    const validArr = gen.let(\"valid\", true)\n    validateItems(() => gen.assign(validArr, false))\n    return validArr\n  }\n  gen.var(valid, true)\n  validateItems(() => gen.break())\n  return valid\n\n  function validateItems(notValid: () => void): void {\n    const len = gen.const(\"len\", _`${data}.length`)\n    gen.forRange(\"i\", 0, len, (i) => {\n      cxt.subschema(\n        {\n          keyword,\n          dataProp: i,\n          dataPropType: Type.Num,\n        },\n        valid\n      )\n      gen.if(not(valid), notValid)\n    })\n  }\n}\n\nexport function validateUnion(cxt: KeywordCxt): void {\n  const {gen, schema, keyword, it} = cxt\n  /* istanbul ignore if */\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n  const alwaysValid = schema.some((sch: AnySchema) => alwaysValidSchema(it, sch))\n  if (alwaysValid && !it.opts.unevaluated) return\n\n  const valid = gen.let(\"valid\", false)\n  const schValid = gen.name(\"_valid\")\n\n  gen.block(() =>\n    schema.forEach((_sch: AnySchema, i: number) => {\n      const schCxt = cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          compositeRule: true,\n        },\n        schValid\n      )\n      gen.assign(valid, _`${valid} || ${schValid}`)\n      const merged = cxt.mergeValidEvaluated(schCxt, schValid)\n      // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n      if (!merged) gen.if(not(valid))\n    })\n  )\n\n  cxt.result(\n    valid,\n    () => cxt.reset(),\n    () => cxt.error(true)\n  )\n}\n", "import type {KeywordCxt} from \".\"\nimport type {\n  AnySchema,\n  SchemaValidateFunction,\n  AnyValidateFunction,\n  AddedKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, nil, not, stringify, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport type {JSONType} from \"../rules\"\nimport {callValidateCode} from \"../../vocabularies/code\"\nimport {extendErrors} from \"../errors\"\n\ntype KeywordCompilationResult = AnySchema | SchemaValidateFunction | AnyValidateFunction\n\nexport function macroKeywordCode(cxt: KeywordCxt, def: MacroKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, it} = cxt\n  const macroSchema = def.macro.call(it.self, schema, parentSchema, it)\n  const schemaRef = useKeyword(gen, keyword, macroSchema)\n  if (it.opts.validateSchema !== false) it.self.validateSchema(macroSchema, true)\n\n  const valid = gen.name(\"valid\")\n  cxt.subschema(\n    {\n      schema: macroSchema,\n      schemaPath: nil,\n      errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n      topSchemaRef: schemaRef,\n      compositeRule: true,\n    },\n    valid\n  )\n  cxt.pass(valid, () => cxt.error(true))\n}\n\nexport function funcKeywordCode(cxt: KeywordCxt, def: FuncKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, $data, it} = cxt\n  checkAsyncKeyword(it, def)\n  const validate =\n    !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate\n  const validateRef = useKeyword(gen, keyword, validate)\n  const valid = gen.let(\"valid\")\n  cxt.block$data(valid, validateKeyword)\n  cxt.ok(def.valid ?? valid)\n\n  function validateKeyword(): void {\n    if (def.errors === false) {\n      assignValid()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => cxt.error())\n    } else {\n      const ruleErrs = def.async ? validateAsync() : validateSync()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => addErrs(cxt, ruleErrs))\n    }\n  }\n\n  function validateAsync(): Name {\n    const ruleErrs = gen.let(\"ruleErrs\", null)\n    gen.try(\n      () => assignValid(_`await `),\n      (e) =>\n        gen.assign(valid, false).if(\n          _`${e} instanceof ${it.ValidationError as Name}`,\n          () => gen.assign(ruleErrs, _`${e}.errors`),\n          () => gen.throw(e)\n        )\n    )\n    return ruleErrs\n  }\n\n  function validateSync(): Code {\n    const validateErrs = _`${validateRef}.errors`\n    gen.assign(validateErrs, null)\n    assignValid(nil)\n    return validateErrs\n  }\n\n  function assignValid(_await: Code = def.async ? _`await ` : nil): void {\n    const passCxt = it.opts.passContext ? N.this : N.self\n    const passSchema = !((\"compile\" in def && !$data) || def.schema === false)\n    gen.assign(\n      valid,\n      _`${_await}${callValidateCode(cxt, validateRef, passCxt, passSchema)}`,\n      def.modifying\n    )\n  }\n\n  function reportErrs(errors: () => void): void {\n    gen.if(not(def.valid ?? valid), errors)\n  }\n}\n\nfunction modifyData(cxt: KeywordCxt): void {\n  const {gen, data, it} = cxt\n  gen.if(it.parentData, () => gen.assign(data, _`${it.parentData}[${it.parentDataProperty}]`))\n}\n\nfunction addErrs(cxt: KeywordCxt, errs: Code): void {\n  const {gen} = cxt\n  gen.if(\n    _`Array.isArray(${errs})`,\n    () => {\n      gen\n        .assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`)\n        .assign(N.errors, _`${N.vErrors}.length`)\n      extendErrors(cxt)\n    },\n    () => cxt.error()\n  )\n}\n\nfunction checkAsyncKeyword({schemaEnv}: SchemaObjCxt, def: FuncKeywordDefinition): void {\n  if (def.async && !schemaEnv.$async) throw new Error(\"async keyword in sync schema\")\n}\n\nfunction useKeyword(gen: CodeGen, keyword: string, result?: KeywordCompilationResult): Name {\n  if (result === undefined) throw new Error(`keyword \"${keyword}\" failed to compile`)\n  return gen.scopeValue(\n    \"keyword\",\n    typeof result == \"function\" ? {ref: result} : {ref: result, code: stringify(result)}\n  )\n}\n\nexport function validSchemaType(\n  schema: unknown,\n  schemaType: JSONType[],\n  allowUndefined = false\n): boolean {\n  // TODO add tests\n  return (\n    !schemaType.length ||\n    schemaType.some((st) =>\n      st === \"array\"\n        ? Array.isArray(schema)\n        : st === \"object\"\n        ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n        : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")\n    )\n  )\n}\n\nexport function validateKeywordUsage(\n  {schema, opts, self, errSchemaPath}: SchemaObjCxt,\n  def: AddedKeywordDefinition,\n  keyword: string\n): void {\n  /* istanbul ignore if */\n  if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n    throw new Error(\"ajv implementation error\")\n  }\n\n  const deps = def.dependencies\n  if (deps?.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n    throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`)\n  }\n\n  if (def.validateSchema) {\n    const valid = def.validateSchema(schema[keyword])\n    if (!valid) {\n      const msg =\n        `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n        self.errorsText(def.validateSchema.errors)\n      if (opts.validateSchema === \"log\") self.logger.error(msg)\n      else throw new Error(msg)\n    }\n  }\n}\n", "import type {AnySchema} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, str, getProperty, Code, Name} from \"../codegen\"\nimport {escapeFragment, getErrorPath, Type} from \"../util\"\nimport type {JSONType} from \"../rules\"\n\nexport interface SubschemaContext {\n  // TODO use Optional? align with SchemCxt property types\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef?: Code\n  errorPath?: Code\n  dataLevel?: number\n  dataTypes?: JSONType[]\n  data?: Name\n  parentData?: Name\n  parentDataProperty?: Code | number\n  dataNames?: Name[]\n  dataPathArr?: (Code | number)[]\n  propertyName?: Name\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  compositeRule?: true\n  createErrors?: boolean\n  allErrors?: boolean\n}\n\nexport type SubschemaArgs = Partial<{\n  keyword: string\n  schemaProp: string | number\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef: Code\n  data: Name | Code\n  dataProp: Code | string | number\n  dataTypes: JSONType[]\n  definedProperties: Set<string>\n  propertyName: Name\n  dataPropType: Type\n  jtdDiscriminator: string\n  jtdMetadata: boolean\n  compositeRule: true\n  createErrors: boolean\n  allErrors: boolean\n}>\n\nexport function getSubschema(\n  it: SchemaObjCxt,\n  {keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef}: SubschemaArgs\n): SubschemaContext {\n  if (keyword !== undefined && schema !== undefined) {\n    throw new Error('both \"keyword\" and \"schema\" passed, only one allowed')\n  }\n\n  if (keyword !== undefined) {\n    const sch = it.schema[keyword]\n    return schemaProp === undefined\n      ? {\n          schema: sch,\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        }\n      : {\n          schema: sch[schemaProp],\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}${getProperty(schemaProp)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}/${escapeFragment(schemaProp)}`,\n        }\n  }\n\n  if (schema !== undefined) {\n    if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n      throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"')\n    }\n    return {\n      schema,\n      schemaPath,\n      topSchemaRef,\n      errSchemaPath,\n    }\n  }\n\n  throw new Error('either \"keyword\" or \"schema\" must be passed')\n}\n\nexport function extendSubschemaData(\n  subschema: SubschemaContext,\n  it: SchemaObjCxt,\n  {dataProp, dataPropType: dpType, data, dataTypes, propertyName}: SubschemaArgs\n): void {\n  if (data !== undefined && dataProp !== undefined) {\n    throw new Error('both \"data\" and \"dataProp\" passed, only one allowed')\n  }\n\n  const {gen} = it\n\n  if (dataProp !== undefined) {\n    const {errorPath, dataPathArr, opts} = it\n    const nextData = gen.let(\"data\", _`${it.data}${getProperty(dataProp)}`, true)\n    dataContextProps(nextData)\n    subschema.errorPath = str`${errorPath}${getErrorPath(dataProp, dpType, opts.jsPropertySyntax)}`\n    subschema.parentDataProperty = _`${dataProp}`\n    subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty]\n  }\n\n  if (data !== undefined) {\n    const nextData = data instanceof Name ? data : gen.let(\"data\", data, true) // replaceable if used once?\n    dataContextProps(nextData)\n    if (propertyName !== undefined) subschema.propertyName = propertyName\n    // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n  }\n\n  if (dataTypes) subschema.dataTypes = dataTypes\n\n  function dataContextProps(_nextData: Name): void {\n    subschema.data = _nextData\n    subschema.dataLevel = it.dataLevel + 1\n    subschema.dataTypes = []\n    it.definedProperties = new Set<string>()\n    subschema.parentData = it.data\n    subschema.dataNames = [...it.dataNames, _nextData]\n  }\n}\n\nexport function extendSubschemaMode(\n  subschema: SubschemaContext,\n  {jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors}: SubschemaArgs\n): void {\n  if (compositeRule !== undefined) subschema.compositeRule = compositeRule\n  if (createErrors !== undefined) subschema.createErrors = createErrors\n  if (allErrors !== undefined) subschema.allErrors = allErrors\n  subschema.jtdDiscriminator = jtdDiscriminator // not inherited\n  subschema.jtdMetadata = jtdMetadata // not inherited\n}\n", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n", "import type {AnySchema, AnySchemaObject, UriResolver} from \"../types\"\nimport type Ajv from \"../ajv\"\nimport type {URIComponent} from \"fast-uri\"\nimport {eachItem} from \"./util\"\nimport * as equal from \"fast-deep-equal\"\nimport * as traverse from \"json-schema-traverse\"\n\n// the hash of local references inside the schema (created by getSchemaRefs), used for inline resolution\nexport type LocalRefs = {[Ref in string]?: AnySchemaObject}\n\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\",\n  \"const\",\n])\n\nexport function inlineRef(schema: AnySchema, limit: boolean | number = true): boolean {\n  if (typeof schema == \"boolean\") return true\n  if (limit === true) return !hasRef(schema)\n  if (!limit) return false\n  return countKeys(schema) <= limit\n}\n\nconst REF_KEYWORDS = new Set([\n  \"$ref\",\n  \"$recursiveRef\",\n  \"$recursiveAnchor\",\n  \"$dynamicRef\",\n  \"$dynamicAnchor\",\n])\n\nfunction hasRef(schema: AnySchemaObject): boolean {\n  for (const key in schema) {\n    if (REF_KEYWORDS.has(key)) return true\n    const sch = schema[key]\n    if (Array.isArray(sch) && sch.some(hasRef)) return true\n    if (typeof sch == \"object\" && hasRef(sch)) return true\n  }\n  return false\n}\n\nfunction countKeys(schema: AnySchemaObject): number {\n  let count = 0\n  for (const key in schema) {\n    if (key === \"$ref\") return Infinity\n    count++\n    if (SIMPLE_INLINED.has(key)) continue\n    if (typeof schema[key] == \"object\") {\n      eachItem(schema[key], (sch) => (count += countKeys(sch)))\n    }\n    if (count === Infinity) return Infinity\n  }\n  return count\n}\n\nexport function getFullPath(resolver: UriResolver, id = \"\", normalize?: boolean): string {\n  if (normalize !== false) id = normalizeId(id)\n  const p = resolver.parse(id)\n  return _getFullPath(resolver, p)\n}\n\nexport function _getFullPath(resolver: UriResolver, p: URIComponent): string {\n  const serialized = resolver.serialize(p)\n  return serialized.split(\"#\")[0] + \"#\"\n}\n\nconst TRAILING_SLASH_HASH = /#\\/?$/\nexport function normalizeId(id: string | undefined): string {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\"\n}\n\nexport function resolveUrl(resolver: UriResolver, baseId: string, id: string): string {\n  id = normalizeId(id)\n  return resolver.resolve(baseId, id)\n}\n\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i\n\nexport function getSchemaRefs(this: Ajv, schema: AnySchema, baseId: string): LocalRefs {\n  if (typeof schema == \"boolean\") return {}\n  const {schemaId, uriResolver} = this.opts\n  const schId = normalizeId(schema[schemaId] || baseId)\n  const baseIds: {[JsonPtr in string]?: string} = {\"\": schId}\n  const pathPrefix = getFullPath(uriResolver, schId, false)\n  const localRefs: LocalRefs = {}\n  const schemaRefs: Set<string> = new Set()\n\n  traverse(schema, {allKeys: true}, (sch, jsonPtr, _, parentJsonPtr) => {\n    if (parentJsonPtr === undefined) return\n    const fullPath = pathPrefix + jsonPtr\n    let innerBaseId = baseIds[parentJsonPtr]\n    if (typeof sch[schemaId] == \"string\") innerBaseId = addRef.call(this, sch[schemaId])\n    addAnchor.call(this, sch.$anchor)\n    addAnchor.call(this, sch.$dynamicAnchor)\n    baseIds[jsonPtr] = innerBaseId\n\n    function addRef(this: Ajv, ref: string): string {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const _resolve = this.opts.uriResolver.resolve\n      ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref)\n      if (schemaRefs.has(ref)) throw ambiguos(ref)\n      schemaRefs.add(ref)\n      let schOrRef = this.refs[ref]\n      if (typeof schOrRef == \"string\") schOrRef = this.refs[schOrRef]\n      if (typeof schOrRef == \"object\") {\n        checkAmbiguosRef(sch, schOrRef.schema, ref)\n      } else if (ref !== normalizeId(fullPath)) {\n        if (ref[0] === \"#\") {\n          checkAmbiguosRef(sch, localRefs[ref], ref)\n          localRefs[ref] = sch\n        } else {\n          this.refs[ref] = fullPath\n        }\n      }\n      return ref\n    }\n\n    function addAnchor(this: Ajv, anchor: unknown): void {\n      if (typeof anchor == \"string\") {\n        if (!ANCHOR.test(anchor)) throw new Error(`invalid anchor \"${anchor}\"`)\n        addRef.call(this, `#${anchor}`)\n      }\n    }\n  })\n\n  return localRefs\n\n  function checkAmbiguosRef(sch1: AnySchema, sch2: AnySchema | undefined, ref: string): void {\n    if (sch2 !== undefined && !equal(sch1, sch2)) throw ambiguos(ref)\n  }\n\n  function ambiguos(ref: string): Error {\n    return new Error(`reference \"${ref}\" resolves to more than one schema`)\n  }\n}\n", "import type {\n  AddedKeywordDefinition,\n  AnySchema,\n  AnySchemaObject,\n  KeywordErrorCxt,\n  KeywordCxtParams,\n} from \"../../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \"..\"\nimport type {InstanceOptions} from \"../../core\"\nimport {boolOrEmptySchema, topBoolOrEmptySchema} from \"./boolSchema\"\nimport {coerceAndCheckDataType, getSchemaTypes} from \"./dataType\"\nimport {shouldUseGroup, shouldUseRule} from \"./applicability\"\nimport {checkDataType, checkDataTypes, reportTypeError, DataType} from \"./dataType\"\nimport {assignDefaults} from \"./defaults\"\nimport {funcKeywordCode, macroKeywordCode, validateKeywordUsage, validSchemaType} from \"./keyword\"\nimport {getSubschema, extendSubschemaData, SubschemaArgs, extendSubschemaMode} from \"./subschema\"\nimport {_, nil, str, or, not, getProperty, Block, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport {resolveUrl} from \"../resolve\"\nimport {\n  schemaRefOrVal,\n  schemaHasRulesButRef,\n  checkUnknownRules,\n  checkStrictMode,\n  unescapeJsonPointer,\n  mergeEvaluated,\n} from \"../util\"\nimport type {JSONType, Rule, RuleGroup} from \"../rules\"\nimport {\n  ErrorPaths,\n  reportError,\n  reportExtraError,\n  resetErrorsCount,\n  keyword$DataError,\n} from \"../errors\"\n\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nexport function validateFunctionCode(it: SchemaCxt): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      topSchemaObjCode(it)\n      return\n    }\n  }\n  validateFunction(it, () => topBoolOrEmptySchema(it))\n}\n\nfunction validateFunction(\n  {gen, validateName, schema, schemaEnv, opts}: SchemaCxt,\n  body: Block\n): void {\n  if (opts.code.es5) {\n    gen.func(validateName, _`${N.data}, ${N.valCxt}`, schemaEnv.$async, () => {\n      gen.code(_`\"use strict\"; ${funcSourceUrl(schema, opts)}`)\n      destructureValCxtES5(gen, opts)\n      gen.code(body)\n    })\n  } else {\n    gen.func(validateName, _`${N.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () =>\n      gen.code(funcSourceUrl(schema, opts)).code(body)\n    )\n  }\n}\n\nfunction destructureValCxt(opts: InstanceOptions): Code {\n  return _`{${N.instancePath}=\"\", ${N.parentData}, ${N.parentDataProperty}, ${N.rootData}=${\n    N.data\n  }${opts.dynamicRef ? _`, ${N.dynamicAnchors}={}` : nil}}={}`\n}\n\nfunction destructureValCxtES5(gen: CodeGen, opts: InstanceOptions): void {\n  gen.if(\n    N.valCxt,\n    () => {\n      gen.var(N.instancePath, _`${N.valCxt}.${N.instancePath}`)\n      gen.var(N.parentData, _`${N.valCxt}.${N.parentData}`)\n      gen.var(N.parentDataProperty, _`${N.valCxt}.${N.parentDataProperty}`)\n      gen.var(N.rootData, _`${N.valCxt}.${N.rootData}`)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`${N.valCxt}.${N.dynamicAnchors}`)\n    },\n    () => {\n      gen.var(N.instancePath, _`\"\"`)\n      gen.var(N.parentData, _`undefined`)\n      gen.var(N.parentDataProperty, _`undefined`)\n      gen.var(N.rootData, N.data)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`{}`)\n    }\n  )\n}\n\nfunction topSchemaObjCode(it: SchemaObjCxt): void {\n  const {schema, opts, gen} = it\n  validateFunction(it, () => {\n    if (opts.$comment && schema.$comment) commentKeyword(it)\n    checkNoDefault(it)\n    gen.let(N.vErrors, null)\n    gen.let(N.errors, 0)\n    if (opts.unevaluated) resetEvaluated(it)\n    typeAndKeywords(it)\n    returnResults(it)\n  })\n  return\n}\n\nfunction resetEvaluated(it: SchemaObjCxt): void {\n  // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n  const {gen, validateName} = it\n  it.evaluated = gen.const(\"evaluated\", _`${validateName}.evaluated`)\n  gen.if(_`${it.evaluated}.dynamicProps`, () => gen.assign(_`${it.evaluated}.props`, _`undefined`))\n  gen.if(_`${it.evaluated}.dynamicItems`, () => gen.assign(_`${it.evaluated}.items`, _`undefined`))\n}\n\nfunction funcSourceUrl(schema: AnySchema, opts: InstanceOptions): Code {\n  const schId = typeof schema == \"object\" && schema[opts.schemaId]\n  return schId && (opts.code.source || opts.code.process) ? _`/*# sourceURL=${schId} */` : nil\n}\n\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it: SchemaCxt, valid: Name): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      subSchemaObjCode(it, valid)\n      return\n    }\n  }\n  boolOrEmptySchema(it, valid)\n}\n\nfunction schemaCxtHasRules({schema, self}: SchemaCxt): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (self.RULES.all[key]) return true\n  return false\n}\n\nfunction isSchemaObj(it: SchemaCxt): it is SchemaObjCxt {\n  return typeof it.schema != \"boolean\"\n}\n\nfunction subSchemaObjCode(it: SchemaObjCxt, valid: Name): void {\n  const {schema, gen, opts} = it\n  if (opts.$comment && schema.$comment) commentKeyword(it)\n  updateContext(it)\n  checkAsyncSchema(it)\n  const errsCount = gen.const(\"_errs\", N.errors)\n  typeAndKeywords(it, errsCount)\n  // TODO var\n  gen.var(valid, _`${errsCount} === ${N.errors}`)\n}\n\nfunction checkKeywords(it: SchemaObjCxt): void {\n  checkUnknownRules(it)\n  checkRefsAndKeywords(it)\n}\n\nfunction typeAndKeywords(it: SchemaObjCxt, errsCount?: Name): void {\n  if (it.opts.jtd) return schemaKeywords(it, [], false, errsCount)\n  const types = getSchemaTypes(it.schema)\n  const checkedTypes = coerceAndCheckDataType(it, types)\n  schemaKeywords(it, types, !checkedTypes, errsCount)\n}\n\nfunction checkRefsAndKeywords(it: SchemaObjCxt): void {\n  const {schema, errSchemaPath, opts, self} = it\n  if (schema.$ref && opts.ignoreKeywordsWithRef && schemaHasRulesButRef(schema, self.RULES)) {\n    self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`)\n  }\n}\n\nfunction checkNoDefault(it: SchemaObjCxt): void {\n  const {schema, opts} = it\n  if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n    checkStrictMode(it, \"default is ignored in the schema root\")\n  }\n}\n\nfunction updateContext(it: SchemaObjCxt): void {\n  const schId = it.schema[it.opts.schemaId]\n  if (schId) it.baseId = resolveUrl(it.opts.uriResolver, it.baseId, schId)\n}\n\nfunction checkAsyncSchema(it: SchemaObjCxt): void {\n  if (it.schema.$async && !it.schemaEnv.$async) throw new Error(\"async schema in sync schema\")\n}\n\nfunction commentKeyword({gen, schemaEnv, schema, errSchemaPath, opts}: SchemaObjCxt): void {\n  const msg = schema.$comment\n  if (opts.$comment === true) {\n    gen.code(_`${N.self}.logger.log(${msg})`)\n  } else if (typeof opts.$comment == \"function\") {\n    const schemaPath = str`${errSchemaPath}/$comment`\n    const rootName = gen.scopeValue(\"root\", {ref: schemaEnv.root})\n    gen.code(_`${N.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`)\n  }\n}\n\nfunction returnResults(it: SchemaCxt): void {\n  const {gen, schemaEnv, validateName, ValidationError, opts} = it\n  if (schemaEnv.$async) {\n    // TODO assign unevaluated\n    gen.if(\n      _`${N.errors} === 0`,\n      () => gen.return(N.data),\n      () => gen.throw(_`new ${ValidationError as Name}(${N.vErrors})`)\n    )\n  } else {\n    gen.assign(_`${validateName}.errors`, N.vErrors)\n    if (opts.unevaluated) assignEvaluated(it)\n    gen.return(_`${N.errors} === 0`)\n  }\n}\n\nfunction assignEvaluated({gen, evaluated, props, items}: SchemaCxt): void {\n  if (props instanceof Name) gen.assign(_`${evaluated}.props`, props)\n  if (items instanceof Name) gen.assign(_`${evaluated}.items`, items)\n}\n\nfunction schemaKeywords(\n  it: SchemaObjCxt,\n  types: JSONType[],\n  typeErrors: boolean,\n  errsCount?: Name\n): void {\n  const {gen, schema, data, allErrors, opts, self} = it\n  const {RULES} = self\n  if (schema.$ref && (opts.ignoreKeywordsWithRef || !schemaHasRulesButRef(schema, RULES))) {\n    gen.block(() => keywordCode(it, \"$ref\", (RULES.all.$ref as Rule).definition)) // TODO typecast\n    return\n  }\n  if (!opts.jtd) checkStrictTypes(it, types)\n  gen.block(() => {\n    for (const group of RULES.rules) groupKeywords(group)\n    groupKeywords(RULES.post)\n  })\n\n  function groupKeywords(group: RuleGroup): void {\n    if (!shouldUseGroup(schema, group)) return\n    if (group.type) {\n      gen.if(checkDataType(group.type, data, opts.strictNumbers))\n      iterateKeywords(it, group)\n      if (types.length === 1 && types[0] === group.type && typeErrors) {\n        gen.else()\n        reportTypeError(it)\n      }\n      gen.endIf()\n    } else {\n      iterateKeywords(it, group)\n    }\n    // TODO make it \"ok\" call?\n    if (!allErrors) gen.if(_`${N.errors} === ${errsCount || 0}`)\n  }\n}\n\nfunction iterateKeywords(it: SchemaObjCxt, group: RuleGroup): void {\n  const {\n    gen,\n    schema,\n    opts: {useDefaults},\n  } = it\n  if (useDefaults) assignDefaults(it, group.type)\n  gen.block(() => {\n    for (const rule of group.rules) {\n      if (shouldUseRule(schema, rule)) {\n        keywordCode(it, rule.keyword, rule.definition, group.type)\n      }\n    }\n  })\n}\n\nfunction checkStrictTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (it.schemaEnv.meta || !it.opts.strictTypes) return\n  checkContextTypes(it, types)\n  if (!it.opts.allowUnionTypes) checkMultipleTypes(it, types)\n  checkKeywordTypes(it, it.dataTypes)\n}\n\nfunction checkContextTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (!types.length) return\n  if (!it.dataTypes.length) {\n    it.dataTypes = types\n    return\n  }\n  types.forEach((t) => {\n    if (!includesType(it.dataTypes, t)) {\n      strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`)\n    }\n  })\n  narrowSchemaTypes(it, types)\n}\n\nfunction checkMultipleTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n    strictTypesError(it, \"use allowUnionTypes to allow union type keyword\")\n  }\n}\n\nfunction checkKeywordTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  const rules = it.self.RULES.all\n  for (const keyword in rules) {\n    const rule = rules[keyword]\n    if (typeof rule == \"object\" && shouldUseRule(it.schema, rule)) {\n      const {type} = rule.definition\n      if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n        strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`)\n      }\n    }\n  }\n}\n\nfunction hasApplicableType(schTs: JSONType[], kwdT: JSONType): boolean {\n  return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"))\n}\n\nfunction includesType(ts: JSONType[], t: JSONType): boolean {\n  return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"))\n}\n\nfunction narrowSchemaTypes(it: SchemaObjCxt, withTypes: JSONType[]): void {\n  const ts: JSONType[] = []\n  for (const t of it.dataTypes) {\n    if (includesType(withTypes, t)) ts.push(t)\n    else if (withTypes.includes(\"integer\") && t === \"number\") ts.push(\"integer\")\n  }\n  it.dataTypes = ts\n}\n\nfunction strictTypesError(it: SchemaObjCxt, msg: string): void {\n  const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n  msg += ` at \"${schemaPath}\" (strictTypes)`\n  checkStrictMode(it, msg, it.opts.strictTypes)\n}\n\nexport class KeywordCxt implements KeywordErrorCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean\n  readonly keyword: string\n  readonly data: Name // Name referencing the current level of the data instance\n  readonly $data?: string | false\n  schema: any // keyword value in the schema\n  readonly schemaValue: Code | number | boolean // Code reference to keyword schema value or primitive value\n  readonly schemaCode: Code | number | boolean // Code reference to resolved schema value (different if schema is $data)\n  readonly schemaType: JSONType[] // allowed type(s) of keyword value in the schema\n  readonly parentSchema: AnySchemaObject\n  readonly errsCount?: Name // Name reference to the number of validation errors collected before this keyword,\n  // requires option trackErrors in keyword definition\n  params: KeywordCxtParams // object to pass parameters to error messages from keyword code\n  readonly it: SchemaObjCxt // schema compilation context (schema is guaranteed to be an object, not boolean)\n  readonly def: AddedKeywordDefinition\n\n  constructor(it: SchemaObjCxt, def: AddedKeywordDefinition, keyword: string) {\n    validateKeywordUsage(it, def, keyword)\n    this.gen = it.gen\n    this.allErrors = it.allErrors\n    this.keyword = keyword\n    this.data = it.data\n    this.schema = it.schema[keyword]\n    this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data\n    this.schemaValue = schemaRefOrVal(it, this.schema, keyword, this.$data)\n    this.schemaType = def.schemaType\n    this.parentSchema = it.schema\n    this.params = {}\n    this.it = it\n    this.def = def\n\n    if (this.$data) {\n      this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it))\n    } else {\n      this.schemaCode = this.schemaValue\n      if (!validSchemaType(this.schema, def.schemaType, def.allowUndefined)) {\n        throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`)\n      }\n    }\n\n    if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n      this.errsCount = it.gen.const(\"_errs\", N.errors)\n    }\n  }\n\n  result(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.failResult(not(condition), successAction, failAction)\n  }\n\n  failResult(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.gen.if(condition)\n    if (failAction) failAction()\n    else this.error()\n    if (successAction) {\n      this.gen.else()\n      successAction()\n      if (this.allErrors) this.gen.endIf()\n    } else {\n      if (this.allErrors) this.gen.endIf()\n      else this.gen.else()\n    }\n  }\n\n  pass(condition: Code, failAction?: () => void): void {\n    this.failResult(not(condition), undefined, failAction)\n  }\n\n  fail(condition?: Code): void {\n    if (condition === undefined) {\n      this.error()\n      if (!this.allErrors) this.gen.if(false) // this branch will be removed by gen.optimize\n      return\n    }\n    this.gen.if(condition)\n    this.error()\n    if (this.allErrors) this.gen.endIf()\n    else this.gen.else()\n  }\n\n  fail$data(condition: Code): void {\n    if (!this.$data) return this.fail(condition)\n    const {schemaCode} = this\n    this.fail(_`${schemaCode} !== undefined && (${or(this.invalid$data(), condition)})`)\n  }\n\n  error(append?: boolean, errorParams?: KeywordCxtParams, errorPaths?: ErrorPaths): void {\n    if (errorParams) {\n      this.setParams(errorParams)\n      this._error(append, errorPaths)\n      this.setParams({})\n      return\n    }\n    this._error(append, errorPaths)\n  }\n\n  private _error(append?: boolean, errorPaths?: ErrorPaths): void {\n    ;(append ? reportExtraError : reportError)(this, this.def.error, errorPaths)\n  }\n\n  $dataError(): void {\n    reportError(this, this.def.$dataError || keyword$DataError)\n  }\n\n  reset(): void {\n    if (this.errsCount === undefined) throw new Error('add \"trackErrors\" to keyword definition')\n    resetErrorsCount(this.gen, this.errsCount)\n  }\n\n  ok(cond: Code | boolean): void {\n    if (!this.allErrors) this.gen.if(cond)\n  }\n\n  setParams(obj: KeywordCxtParams, assign?: true): void {\n    if (assign) Object.assign(this.params, obj)\n    else this.params = obj\n  }\n\n  block$data(valid: Name, codeBlock: () => void, $dataValid: Code = nil): void {\n    this.gen.block(() => {\n      this.check$data(valid, $dataValid)\n      codeBlock()\n    })\n  }\n\n  check$data(valid: Name = nil, $dataValid: Code = nil): void {\n    if (!this.$data) return\n    const {gen, schemaCode, schemaType, def} = this\n    gen.if(or(_`${schemaCode} === undefined`, $dataValid))\n    if (valid !== nil) gen.assign(valid, true)\n    if (schemaType.length || def.validateSchema) {\n      gen.elseIf(this.invalid$data())\n      this.$dataError()\n      if (valid !== nil) gen.assign(valid, false)\n    }\n    gen.else()\n  }\n\n  invalid$data(): Code {\n    const {gen, schemaCode, schemaType, def, it} = this\n    return or(wrong$DataType(), invalid$DataSchema())\n\n    function wrong$DataType(): Code {\n      if (schemaType.length) {\n        /* istanbul ignore if */\n        if (!(schemaCode instanceof Name)) throw new Error(\"ajv implementation error\")\n        const st = Array.isArray(schemaType) ? schemaType : [schemaType]\n        return _`${checkDataTypes(st, schemaCode, it.opts.strictNumbers, DataType.Wrong)}`\n      }\n      return nil\n    }\n\n    function invalid$DataSchema(): Code {\n      if (def.validateSchema) {\n        const validateSchemaRef = gen.scopeValue(\"validate$data\", {ref: def.validateSchema}) // TODO value.code for standalone\n        return _`!${validateSchemaRef}(${schemaCode})`\n      }\n      return nil\n    }\n  }\n\n  subschema(appl: SubschemaArgs, valid: Name): SchemaCxt {\n    const subschema = getSubschema(this.it, appl)\n    extendSubschemaData(subschema, this.it, appl)\n    extendSubschemaMode(subschema, appl)\n    const nextContext = {...this.it, ...subschema, items: undefined, props: undefined}\n    subschemaCode(nextContext, valid)\n    return nextContext\n  }\n\n  mergeEvaluated(schemaCxt: SchemaCxt, toName?: typeof Name): void {\n    const {it, gen} = this\n    if (!it.opts.unevaluated) return\n    if (it.props !== true && schemaCxt.props !== undefined) {\n      it.props = mergeEvaluated.props(gen, schemaCxt.props, it.props, toName)\n    }\n    if (it.items !== true && schemaCxt.items !== undefined) {\n      it.items = mergeEvaluated.items(gen, schemaCxt.items, it.items, toName)\n    }\n  }\n\n  mergeValidEvaluated(schemaCxt: SchemaCxt, valid: Name): boolean | void {\n    const {it, gen} = this\n    if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n      gen.if(valid, () => this.mergeEvaluated(schemaCxt, Name))\n      return true\n    }\n  }\n}\n\nfunction keywordCode(\n  it: SchemaObjCxt,\n  keyword: string,\n  def: AddedKeywordDefinition,\n  ruleType?: JSONType\n): void {\n  const cxt = new KeywordCxt(it, def, keyword)\n  if (\"code\" in def) {\n    def.code(cxt, ruleType)\n  } else if (cxt.$data && def.validate) {\n    funcKeywordCode(cxt, def)\n  } else if (\"macro\" in def) {\n    macroKeywordCode(cxt, def)\n  } else if (def.compile || def.validate) {\n    funcKeywordCode(cxt, def)\n  }\n}\n\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/\nexport function getData(\n  $data: string,\n  {dataLevel, dataNames, dataPathArr}: SchemaCxt\n): Code | number {\n  let jsonPointer\n  let data: Code\n  if ($data === \"\") return N.rootData\n  if ($data[0] === \"/\") {\n    if (!JSON_POINTER.test($data)) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    jsonPointer = $data\n    data = N.rootData\n  } else {\n    const matches = RELATIVE_JSON_POINTER.exec($data)\n    if (!matches) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    const up: number = +matches[1]\n    jsonPointer = matches[2]\n    if (jsonPointer === \"#\") {\n      if (up >= dataLevel) throw new Error(errorMsg(\"property/index\", up))\n      return dataPathArr[dataLevel - up]\n    }\n    if (up > dataLevel) throw new Error(errorMsg(\"data\", up))\n    data = dataNames[dataLevel - up]\n    if (!jsonPointer) return data\n  }\n\n  let expr = data\n  const segments = jsonPointer.split(\"/\")\n  for (const segment of segments) {\n    if (segment) {\n      data = _`${data}${getProperty(unescapeJsonPointer(segment))}`\n      expr = _`${expr} && ${data}`\n    }\n  }\n  return expr\n\n  function errorMsg(pointerType: string, up: number): string {\n    return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`\n  }\n}\n", "import type {ErrorObject} from \"../types\"\n\nexport default class ValidationError extends Error {\n  readonly errors: Partial<ErrorObject>[]\n  readonly ajv: true\n  readonly validation: true\n\n  constructor(errors: Partial<ErrorObject>[]) {\n    super(\"validation failed\")\n    this.errors = errors\n    this.ajv = this.validation = true\n  }\n}\n", "import {resolveUrl, normalizeId, getFullPath} from \"./resolve\"\nimport type {UriResolver} from \"../types\"\n\nexport default class MissingRefError extends Error {\n  readonly missingRef: string\n  readonly missingSchema: string\n\n  constructor(resolver: UriResolver, baseId: string, ref: string, msg?: string) {\n    super(msg || `can't resolve reference ${ref} from id ${baseId}`)\n    this.missingRef = resolveUrl(resolver, baseId, ref)\n    this.missingSchema = normalizeId(getFullPath(resolver, this.missingRef))\n  }\n}\n", "import type {\n  AnySchema,\n  AnySchemaObject,\n  AnyValidateFunction,\n  AsyncValidateFunction,\n  EvaluatedProperties,\n  EvaluatedItems,\n} from \"../types\"\nimport type Ajv from \"../core\"\nimport type {InstanceOptions} from \"../core\"\nimport {CodeGen, _, nil, stringify, Name, Code, ValueScopeName} from \"./codegen\"\nimport ValidationError from \"../runtime/validation_error\"\nimport N from \"./names\"\nimport {LocalRefs, getFullPath, _getFullPath, inlineRef, normalizeId, resolveUrl} from \"./resolve\"\nimport {schemaHasRulesButRef, unescapeFragment} from \"./util\"\nimport {validateFunctionCode} from \"./validate\"\nimport {URIComponent} from \"fast-uri\"\nimport {JSONType} from \"./rules\"\n\nexport type SchemaRefs = {\n  [Ref in string]?: SchemaEnv | AnySchema\n}\n\nexport interface SchemaCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean // validation mode - whether to collect all errors or break on error\n  readonly data: Name // Name with reference to the current part of data instance\n  readonly parentData: Name // should be used in keywords modifying data\n  readonly parentDataProperty: Code | number // should be used in keywords modifying data\n  readonly dataNames: Name[]\n  readonly dataPathArr: (Code | number)[]\n  readonly dataLevel: number // the level of the currently validated data,\n  // it can be used to access both the property names and the data on all levels from the top.\n  dataTypes: JSONType[] // data types applied to the current part of data instance\n  definedProperties: Set<string> // set of properties to keep track of for required checks\n  readonly topSchemaRef: Code\n  readonly validateName: Name\n  evaluated?: Name\n  readonly ValidationError?: Name\n  readonly schema: AnySchema // current schema object - equal to parentSchema passed via KeywordCxt\n  readonly schemaEnv: SchemaEnv\n  readonly rootId: string\n  baseId: string // the current schema base URI that should be used as the base for resolving URIs in references (\\$ref)\n  readonly schemaPath: Code // the run-time expression that evaluates to the property name of the current schema\n  readonly errSchemaPath: string // this is actual string, should not be changed to Code\n  readonly errorPath: Code\n  readonly propertyName?: Name\n  readonly compositeRule?: boolean // true indicates that the current schema is inside the compound keyword,\n  // where failing some rule doesn't mean validation failure (`anyOf`, `oneOf`, `not`, `if`).\n  // This flag is used to determine whether you can return validation result immediately after any error in case the option `allErrors` is not `true.\n  // You only need to use it if you have many steps in your keywords and potentially can define multiple errors.\n  props?: EvaluatedProperties | Name // properties evaluated by this schema - used by parent schema or assigned to validation function\n  items?: EvaluatedItems | Name // last item evaluated by this schema - used by parent schema or assigned to validation function\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  readonly createErrors?: boolean\n  readonly opts: InstanceOptions // Ajv instance option.\n  readonly self: Ajv // current Ajv instance\n}\n\nexport interface SchemaObjCxt extends SchemaCxt {\n  readonly schema: AnySchemaObject\n}\ninterface SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root?: SchemaEnv\n  readonly baseId?: string\n  readonly schemaPath?: string\n  readonly localRefs?: LocalRefs\n  readonly meta?: boolean\n}\n\nexport class SchemaEnv implements SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root: SchemaEnv\n  baseId: string // TODO possibly, it should be readonly\n  schemaPath?: string\n  localRefs?: LocalRefs\n  readonly meta?: boolean\n  readonly $async?: boolean // true if the current schema is asynchronous.\n  readonly refs: SchemaRefs = {}\n  readonly dynamicAnchors: {[Ref in string]?: true} = {}\n  validate?: AnyValidateFunction\n  validateName?: ValueScopeName\n  serialize?: (data: unknown) => string\n  serializeName?: ValueScopeName\n  parse?: (data: string) => unknown\n  parseName?: ValueScopeName\n\n  constructor(env: SchemaEnvArgs) {\n    let schema: AnySchemaObject | undefined\n    if (typeof env.schema == \"object\") schema = env.schema\n    this.schema = env.schema\n    this.schemaId = env.schemaId\n    this.root = env.root || this\n    this.baseId = env.baseId ?? normalizeId(schema?.[env.schemaId || \"$id\"])\n    this.schemaPath = env.schemaPath\n    this.localRefs = env.localRefs\n    this.meta = env.meta\n    this.$async = schema?.$async\n    this.refs = {}\n  }\n}\n\n// let codeSize = 0\n// let nodeCount = 0\n\n// Compiles schema in SchemaEnv\nexport function compileSchema(this: Ajv, sch: SchemaEnv): SchemaEnv {\n  // TODO refactor - remove compilations\n  const _sch = getCompilingSchema.call(this, sch)\n  if (_sch) return _sch\n  const rootId = getFullPath(this.opts.uriResolver, sch.root.baseId) // TODO if getFullPath removed 1 tests fails\n  const {es5, lines} = this.opts.code\n  const {ownProperties} = this.opts\n  const gen = new CodeGen(this.scope, {es5, lines, ownProperties})\n  let _ValidationError\n  if (sch.$async) {\n    _ValidationError = gen.scopeValue(\"Error\", {\n      ref: ValidationError,\n      code: _`require(\"ajv/dist/runtime/validation_error\").default`,\n    })\n  }\n\n  const validateName = gen.scopeName(\"validate\")\n  sch.validateName = validateName\n\n  const schemaCxt: SchemaCxt = {\n    gen,\n    allErrors: this.opts.allErrors,\n    data: N.data,\n    parentData: N.parentData,\n    parentDataProperty: N.parentDataProperty,\n    dataNames: [N.data],\n    dataPathArr: [nil], // TODO can its length be used as dataLevel if nil is removed?\n    dataLevel: 0,\n    dataTypes: [],\n    definedProperties: new Set<string>(),\n    topSchemaRef: gen.scopeValue(\n      \"schema\",\n      this.opts.code.source === true\n        ? {ref: sch.schema, code: stringify(sch.schema)}\n        : {ref: sch.schema}\n    ),\n    validateName,\n    ValidationError: _ValidationError,\n    schema: sch.schema,\n    schemaEnv: sch,\n    rootId,\n    baseId: sch.baseId || rootId,\n    schemaPath: nil,\n    errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n    errorPath: _`\"\"`,\n    opts: this.opts,\n    self: this,\n  }\n\n  let sourceCode: string | undefined\n  try {\n    this._compilations.add(sch)\n    validateFunctionCode(schemaCxt)\n    gen.optimize(this.opts.code.optimize)\n    // gen.optimize(1)\n    const validateCode = gen.toString()\n    sourceCode = `${gen.scopeRefs(N.scope)}return ${validateCode}`\n    // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n    if (this.opts.code.process) sourceCode = this.opts.code.process(sourceCode, sch)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n    const makeValidate = new Function(`${N.self}`, `${N.scope}`, sourceCode)\n    const validate: AnyValidateFunction = makeValidate(this, this.scope.get())\n    this.scope.value(validateName, {ref: validate})\n\n    validate.errors = null\n    validate.schema = sch.schema\n    validate.schemaEnv = sch\n    if (sch.$async) (validate as AsyncValidateFunction).$async = true\n    if (this.opts.code.source === true) {\n      validate.source = {validateName, validateCode, scopeValues: gen._values}\n    }\n    if (this.opts.unevaluated) {\n      const {props, items} = schemaCxt\n      validate.evaluated = {\n        props: props instanceof Name ? undefined : props,\n        items: items instanceof Name ? undefined : items,\n        dynamicProps: props instanceof Name,\n        dynamicItems: items instanceof Name,\n      }\n      if (validate.source) validate.source.evaluated = stringify(validate.evaluated)\n    }\n    sch.validate = validate\n    return sch\n  } catch (e) {\n    delete sch.validate\n    delete sch.validateName\n    if (sourceCode) this.logger.error(\"Error compiling schema, function code:\", sourceCode)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n    throw e\n  } finally {\n    this._compilations.delete(sch)\n  }\n}\n\nexport function resolveRef(\n  this: Ajv,\n  root: SchemaEnv,\n  baseId: string,\n  ref: string\n): AnySchema | SchemaEnv | undefined {\n  ref = resolveUrl(this.opts.uriResolver, baseId, ref)\n  const schOrFunc = root.refs[ref]\n  if (schOrFunc) return schOrFunc\n\n  let _sch = resolve.call(this, root, ref)\n  if (_sch === undefined) {\n    const schema = root.localRefs?.[ref] // TODO maybe localRefs should hold SchemaEnv\n    const {schemaId} = this.opts\n    if (schema) _sch = new SchemaEnv({schema, schemaId, root, baseId})\n  }\n\n  if (_sch === undefined) return\n  return (root.refs[ref] = inlineOrCompile.call(this, _sch))\n}\n\nfunction inlineOrCompile(this: Ajv, sch: SchemaEnv): AnySchema | SchemaEnv {\n  if (inlineRef(sch.schema, this.opts.inlineRefs)) return sch.schema\n  return sch.validate ? sch : compileSchema.call(this, sch)\n}\n\n// Index of schema compilation in the currently compiled list\nexport function getCompilingSchema(this: Ajv, schEnv: SchemaEnv): SchemaEnv | void {\n  for (const sch of this._compilations) {\n    if (sameSchemaEnv(sch, schEnv)) return sch\n  }\n}\n\nfunction sameSchemaEnv(s1: SchemaEnv, s2: SchemaEnv): boolean {\n  return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId\n}\n\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(\n  this: Ajv,\n  root: SchemaEnv, // information about the root schema for the current schema\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  let sch\n  while (typeof (sch = this.refs[ref]) == \"string\") ref = sch\n  return sch || this.schemas[ref] || resolveSchema.call(this, root, ref)\n}\n\n// Resolve schema, its root and baseId\nexport function resolveSchema(\n  this: Ajv,\n  root: SchemaEnv, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  const p = this.opts.uriResolver.parse(ref)\n  const refPath = _getFullPath(this.opts.uriResolver, p)\n  let baseId = getFullPath(this.opts.uriResolver, root.baseId, undefined)\n  // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n  if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n    return getJsonPointer.call(this, p, root)\n  }\n\n  const id = normalizeId(refPath)\n  const schOrRef = this.refs[id] || this.schemas[id]\n  if (typeof schOrRef == \"string\") {\n    const sch = resolveSchema.call(this, root, schOrRef)\n    if (typeof sch?.schema !== \"object\") return\n    return getJsonPointer.call(this, p, sch)\n  }\n\n  if (typeof schOrRef?.schema !== \"object\") return\n  if (!schOrRef.validate) compileSchema.call(this, schOrRef)\n  if (id === normalizeId(ref)) {\n    const {schema} = schOrRef\n    const {schemaId} = this.opts\n    const schId = schema[schemaId]\n    if (schId) baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    return new SchemaEnv({schema, schemaId, root, baseId})\n  }\n  return getJsonPointer.call(this, p, schOrRef)\n}\n\nconst PREVENT_SCOPE_CHANGE = new Set([\n  \"properties\",\n  \"patternProperties\",\n  \"enum\",\n  \"dependencies\",\n  \"definitions\",\n])\n\nfunction getJsonPointer(\n  this: Ajv,\n  parsedRef: URIComponent,\n  {baseId, schema, root}: SchemaEnv\n): SchemaEnv | undefined {\n  if (parsedRef.fragment?.[0] !== \"/\") return\n  for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n    if (typeof schema === \"boolean\") return\n    const partSchema = schema[unescapeFragment(part)]\n    if (partSchema === undefined) return\n    schema = partSchema\n    // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n    const schId = typeof schema === \"object\" && schema[this.opts.schemaId]\n    if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n      baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    }\n  }\n  let env: SchemaEnv | undefined\n  if (typeof schema != \"boolean\" && schema.$ref && !schemaHasRulesButRef(schema, this.RULES)) {\n    const $ref = resolveUrl(this.opts.uriResolver, baseId, schema.$ref)\n    env = resolveSchema.call(this, root, $ref)\n  }\n  // even though resolution failed we need to return SchemaEnv to throw exception\n  // so that compileAsync loads missing schema.\n  const {schemaId} = this.opts\n  env = env || new SchemaEnv({schema, schemaId, root, baseId})\n  if (env.schema !== env.root.schema) return env\n  return undefined\n}\n", "{\n  \"$id\": \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n  \"description\": \"Meta-schema for $data reference (JSON AnySchema extension proposal)\",\n  \"type\": \"object\",\n  \"required\": [\"$data\"],\n  \"properties\": {\n    \"$data\": {\n      \"type\": \"string\",\n      \"anyOf\": [{\"format\": \"relative-json-pointer\"}, {\"format\": \"json-pointer\"}]\n    }\n  },\n  \"additionalProperties\": false\n}\n", "'use strict'\n\nconst HEX = {\n  0: 0,\n  1: 1,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 5,\n  6: 6,\n  7: 7,\n  8: 8,\n  9: 9,\n  a: 10,\n  A: 10,\n  b: 11,\n  B: 11,\n  c: 12,\n  C: 12,\n  d: 13,\n  D: 13,\n  e: 14,\n  E: 14,\n  f: 15,\n  F: 15\n}\n\nmodule.exports = {\n  HEX\n}\n", "'use strict'\n\nconst { HEX } = require('./scopedChars')\n\nconst IPV4_REG = /^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u\n\nfunction normalizeIPv4 (host) {\n  if (findToken(host, '.') < 3) { return { host, isIPV4: false } }\n  const matches = host.match(IPV4_REG) || []\n  const [address] = matches\n  if (address) {\n    return { host: stripLeadingZeros(address, '.'), isIPV4: true }\n  } else {\n    return { host, isIPV4: false }\n  }\n}\n\n/**\n * @param {string[]} input\n * @param {boolean} [keepZero=false]\n * @returns {string|undefined}\n */\nfunction stringArrayToHexStripped (input, keepZero = false) {\n  let acc = ''\n  let strip = true\n  for (const c of input) {\n    if (HEX[c] === undefined) return undefined\n    if (c !== '0' && strip === true) strip = false\n    if (!strip) acc += c\n  }\n  if (keepZero && acc.length === 0) acc = '0'\n  return acc\n}\n\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  const address = []\n  const buffer = []\n  let isZone = false\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  function consume () {\n    if (buffer.length) {\n      if (isZone === false) {\n        const hex = stringArrayToHexStripped(buffer)\n        if (hex !== undefined) {\n          address.push(hex)\n        } else {\n          output.error = true\n          return false\n        }\n      }\n      buffer.length = 0\n    }\n    return true\n  }\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume()) { break }\n      tokenCount++\n      address.push(':')\n      if (tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i - 1 >= 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      continue\n    } else if (cursor === '%') {\n      if (!consume()) { break }\n      // switch to zone detection\n      isZone = true\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (isZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, escapedHost, isIPV6: true }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\nfunction stripLeadingZeros (str, token) {\n  let out = ''\n  let skip = true\n  const l = str.length\n  for (let i = 0; i < l; i++) {\n    const c = str[i]\n    if (c === '0' && skip) {\n      if ((i + 1 <= l && str[i + 1] === token) || i + 1 === l) {\n        out += c\n        skip = false\n      }\n    } else {\n      if (c === token) {\n        skip = true\n      } else {\n        skip = false\n      }\n      out += c\n    }\n  }\n  return out\n}\n\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\nconst RDS1 = /^\\.\\.?\\//u\nconst RDS2 = /^\\/\\.(?:\\/|$)/u\nconst RDS3 = /^\\/\\.\\.(?:\\/|$)/u\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/u\n\nfunction removeDotSegments (input) {\n  const output = []\n\n  while (input.length) {\n    if (input.match(RDS1)) {\n      input = input.replace(RDS1, '')\n    } else if (input.match(RDS2)) {\n      input = input.replace(RDS2, '/')\n    } else if (input.match(RDS3)) {\n      input = input.replace(RDS3, '/')\n      output.pop()\n    } else if (input === '.' || input === '..') {\n      input = ''\n    } else {\n      const im = input.match(RDS5)\n      if (im) {\n        const s = im[0]\n        input = input.slice(s.length)\n        output.push(s)\n      } else {\n        throw new Error('Unexpected dot segment condition')\n      }\n    }\n  }\n  return output.join('')\n}\n\nfunction normalizeComponentEncoding (components, esc) {\n  const func = esc !== true ? escape : unescape\n  if (components.scheme !== undefined) {\n    components.scheme = func(components.scheme)\n  }\n  if (components.userinfo !== undefined) {\n    components.userinfo = func(components.userinfo)\n  }\n  if (components.host !== undefined) {\n    components.host = func(components.host)\n  }\n  if (components.path !== undefined) {\n    components.path = func(components.path)\n  }\n  if (components.query !== undefined) {\n    components.query = func(components.query)\n  }\n  if (components.fragment !== undefined) {\n    components.fragment = func(components.fragment)\n  }\n  return components\n}\n\nfunction recomposeAuthority (components) {\n  const uriTokens = []\n\n  if (components.userinfo !== undefined) {\n    uriTokens.push(components.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (components.host !== undefined) {\n    let host = unescape(components.host)\n    const ipV4res = normalizeIPv4(host)\n\n    if (ipV4res.isIPV4) {\n      host = ipV4res.host\n    } else {\n      const ipV6res = normalizeIPv6(ipV4res.host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = components.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof components.port === 'number' || typeof components.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(components.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  normalizeIPv4,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n", "'use strict'\n\nconst UUID_REG = /^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nfunction isSecure (wsComponents) {\n  return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === 'wss'\n}\n\nfunction httpParse (components) {\n  if (!components.host) {\n    components.error = components.error || 'HTTP URIs must have a host.'\n  }\n\n  return components\n}\n\nfunction httpSerialize (components) {\n  const secure = String(components.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (components.port === (secure ? 443 : 80) || components.port === '') {\n    components.port = undefined\n  }\n\n  // normalize the empty path\n  if (!components.path) {\n    components.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return components\n}\n\nfunction wsParse (wsComponents) {\n// indicate if the secure flag is set\n  wsComponents.secure = isSecure(wsComponents)\n\n  // construct resouce name\n  wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '')\n  wsComponents.path = undefined\n  wsComponents.query = undefined\n\n  return wsComponents\n}\n\nfunction wsSerialize (wsComponents) {\n// normalize the default port\n  if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === '') {\n    wsComponents.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponents.secure === 'boolean') {\n    wsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws')\n    wsComponents.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponents.resourceName) {\n    const [path, query] = wsComponents.resourceName.split('?')\n    wsComponents.path = (path && path !== '/' ? path : undefined)\n    wsComponents.query = query\n    wsComponents.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponents.fragment = undefined\n\n  return wsComponents\n}\n\nfunction urnParse (urnComponents, options) {\n  if (!urnComponents.path) {\n    urnComponents.error = 'URN can not be parsed'\n    return urnComponents\n  }\n  const matches = urnComponents.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponents.scheme || 'urn'\n    urnComponents.nid = matches[1].toLowerCase()\n    urnComponents.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponents.nid}`\n    const schemeHandler = SCHEMES[urnScheme]\n    urnComponents.path = undefined\n\n    if (schemeHandler) {\n      urnComponents = schemeHandler.parse(urnComponents, options)\n    }\n  } else {\n    urnComponents.error = urnComponents.error || 'URN can not be parsed.'\n  }\n\n  return urnComponents\n}\n\nfunction urnSerialize (urnComponents, options) {\n  const scheme = options.scheme || urnComponents.scheme || 'urn'\n  const nid = urnComponents.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = SCHEMES[urnScheme]\n\n  if (schemeHandler) {\n    urnComponents = schemeHandler.serialize(urnComponents, options)\n  }\n\n  const uriComponents = urnComponents\n  const nss = urnComponents.nss\n  uriComponents.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponents\n}\n\nfunction urnuuidParse (urnComponents, options) {\n  const uuidComponents = urnComponents\n  uuidComponents.uuid = uuidComponents.nss\n  uuidComponents.nss = undefined\n\n  if (!options.tolerant && (!uuidComponents.uuid || !UUID_REG.test(uuidComponents.uuid))) {\n    uuidComponents.error = uuidComponents.error || 'UUID is not valid.'\n  }\n\n  return uuidComponents\n}\n\nfunction urnuuidSerialize (uuidComponents) {\n  const urnComponents = uuidComponents\n  // normalize UUID\n  urnComponents.nss = (uuidComponents.uuid || '').toLowerCase()\n  return urnComponents\n}\n\nconst http = {\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst https = {\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst ws = {\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n}\n\nconst wss = {\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n}\n\nconst urn = {\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n}\n\nconst urnuuid = {\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n}\n\nconst SCHEMES = {\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n}\n\nmodule.exports = SCHEMES\n", "'use strict'\n\nconst { normalizeIPv6, normalizeIPv4, removeDotSegments, recomposeAuthority, normalizeComponentEncoding } = require('./lib/utils')\nconst SCHEMES = require('./lib/schemes')\n\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = serialize(parse(uri, options), options)\n  } else if (typeof uri === 'object') {\n    uri = parse(serialize(uri, options), options)\n  }\n  return uri\n}\n\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = Object.assign({ scheme: 'null' }, options)\n  const resolved = resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  return serialize(resolved, { ...schemelessOptions, skipEscape: true })\n}\n\nfunction resolveComponents (base, relative, options, skipNormalization) {\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base components\n    relative = parse(serialize(relative, options), options) // normalize relative components\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path.charAt(0) === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\nfunction serialize (cmpts, opts) {\n  const components = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = SCHEMES[(options.scheme || components.scheme || '').toLowerCase()]\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options)\n\n  if (components.path !== undefined) {\n    if (!options.skipEscape) {\n      components.path = escape(components.path)\n\n      if (components.scheme !== undefined) {\n        components.path = components.path.split('%3A').join(':')\n      }\n    } else {\n      components.path = unescape(components.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && components.scheme) {\n    uriTokens.push(components.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(components)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (components.path && components.path.charAt(0) !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (components.path !== undefined) {\n    let s = components.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (authority === undefined) {\n      s = s.replace(/^\\/\\//u, '/%2F') // don't allow the path to start with \"//\"\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (components.query !== undefined) {\n    uriTokens.push('?', components.query)\n  }\n\n  if (components.fragment !== undefined) {\n    uriTokens.push('#', components.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst hexLookUp = Array.from({ length: 127 }, (_v, k) => /[^!\"$&'()*+,\\-.;=_`a-z{}~]/u.test(String.fromCharCode(k)))\n\nfunction nonSimpleDomain (value) {\n  let code = 0\n  for (let i = 0, len = value.length; i < len; ++i) {\n    code = value.charCodeAt(i)\n    if (code > 126 || hexLookUp[code]) {\n      return true\n    }\n  }\n  return false\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n  const gotEncoding = uri.indexOf('%') !== -1\n  let isIP = false\n  if (options.reference === 'suffix') uri = (options.scheme ? options.scheme + ':' : '') + '//' + uri\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = normalizeIPv4(parsed.host)\n      if (ipv4result.isIPV4 === false) {\n        const ipv6result = normalizeIPv6(ipv4result.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        parsed.host = ipv4result.host\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = SCHEMES[(options.scheme || parsed.scheme || '').toLowerCase()]\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (gotEncoding && parsed.scheme !== undefined) {\n        parsed.scheme = unescape(parsed.scheme)\n      }\n      if (gotEncoding && parsed.host !== undefined) {\n        parsed.host = unescape(parsed.host)\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponents,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n", "import * as uri from \"fast-uri\"\n\ntype URI = typeof uri & {code: string}\n;(uri as URI).code = 'require(\"ajv/dist/runtime/uri\").default'\n\nexport default uri as URI\n", "export {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  AnyValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport interface Plugin<Opts> {\n  (ajv: Ajv, options?: Opts): Ajv\n  [prop: string]: any\n}\n\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\n\nimport type {\n  Schema,\n  AnySchema,\n  AnySchemaObject,\n  SchemaObject,\n  AsyncSchema,\n  Vocabulary,\n  KeywordDefinition,\n  AddedKeywordDefinition,\n  AnyValidateFunction,\n  ValidateFunction,\n  AsyncValidateFunction,\n  ErrorObject,\n  Format,\n  AddedFormat,\n  RegExpEngine,\n  UriResolver,\n} from \"./types\"\nimport type {JSONSchemaType} from \"./types/json-schema\"\nimport type {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nimport ValidationError from \"./runtime/validation_error\"\nimport MissingRefError from \"./compile/ref_error\"\nimport {getRules, ValidationRules, Rule, RuleGroup, JSONType} from \"./compile/rules\"\nimport {SchemaEnv, compileSchema, resolveSchema} from \"./compile\"\nimport {Code, ValueScope} from \"./compile/codegen\"\nimport {normalizeId, getSchemaRefs} from \"./compile/resolve\"\nimport {getJSONTypes} from \"./compile/validate/dataType\"\nimport {eachItem} from \"./compile/util\"\nimport * as $dataRefSchema from \"./refs/data.json\"\n\nimport DefaultUriResolver from \"./runtime/uri\"\n\nconst defaultRegExp: RegExpEngine = (str, flags) => new RegExp(str, flags)\ndefaultRegExp.code = \"new RegExp\"\n\nconst META_IGNORE_OPTIONS: (keyof Options)[] = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"]\nconst EXT_SCOPE_NAMES = new Set([\n  \"validate\",\n  \"serialize\",\n  \"parse\",\n  \"wrapper\",\n  \"root\",\n  \"schema\",\n  \"keyword\",\n  \"pattern\",\n  \"formats\",\n  \"validate$data\",\n  \"func\",\n  \"obj\",\n  \"Error\",\n])\n\nexport type Options = CurrentOptions & DeprecatedOptions\n\nexport interface CurrentOptions {\n  // strict mode options (NEW)\n  strict?: boolean | \"log\"\n  strictSchema?: boolean | \"log\"\n  strictNumbers?: boolean | \"log\"\n  strictTypes?: boolean | \"log\"\n  strictTuples?: boolean | \"log\"\n  strictRequired?: boolean | \"log\"\n  allowMatchingProperties?: boolean // disables a strict mode restriction\n  allowUnionTypes?: boolean\n  validateFormats?: boolean\n  // validation and reporting options:\n  $data?: boolean\n  allErrors?: boolean\n  verbose?: boolean\n  discriminator?: boolean\n  unicodeRegExp?: boolean\n  timestamp?: \"string\" | \"date\" // JTD only\n  parseDate?: boolean // JTD only\n  allowDate?: boolean // JTD only\n  $comment?:\n    | true\n    | ((comment: string, schemaPath?: string, rootSchema?: AnySchemaObject) => unknown)\n  formats?: {[Name in string]?: Format}\n  keywords?: Vocabulary\n  schemas?: AnySchema[] | {[Key in string]?: AnySchema}\n  logger?: Logger | false\n  loadSchema?: (uri: string) => Promise<AnySchemaObject>\n  // options to modify validated data:\n  removeAdditional?: boolean | \"all\" | \"failing\"\n  useDefaults?: boolean | \"empty\"\n  coerceTypes?: boolean | \"array\"\n  // advanced options:\n  next?: boolean // NEW\n  unevaluated?: boolean // NEW\n  dynamicRef?: boolean // NEW\n  schemaId?: \"id\" | \"$id\"\n  jtd?: boolean // NEW\n  meta?: SchemaObject | boolean\n  defaultMeta?: string | AnySchemaObject\n  validateSchema?: boolean | \"log\"\n  addUsedSchema?: boolean\n  inlineRefs?: boolean | number\n  passContext?: boolean\n  loopRequired?: number\n  loopEnum?: number // NEW\n  ownProperties?: boolean\n  multipleOfPrecision?: number\n  int32range?: boolean // JTD only\n  messages?: boolean\n  code?: CodeOptions // NEW\n  uriResolver?: UriResolver\n}\n\nexport interface CodeOptions {\n  es5?: boolean\n  esm?: boolean\n  lines?: boolean\n  optimize?: boolean | number\n  formats?: Code // code to require (or construct) map of available formats - for standalone code\n  source?: boolean\n  process?: (code: string, schema?: SchemaEnv) => string\n  regExp?: RegExpEngine\n}\n\ninterface InstanceCodeOptions extends CodeOptions {\n  regExp: RegExpEngine\n  optimize: number\n}\n\ninterface DeprecatedOptions {\n  /** @deprecated */\n  ignoreKeywordsWithRef?: boolean\n  /** @deprecated */\n  jsPropertySyntax?: boolean // added instead of jsonPointers\n  /** @deprecated */\n  unicode?: boolean\n}\n\ninterface RemovedOptions {\n  format?: boolean\n  errorDataPath?: \"object\" | \"property\"\n  nullable?: boolean // \"nullable\" keyword is supported by default\n  jsonPointers?: boolean\n  extendRefs?: true | \"ignore\" | \"fail\"\n  missingRefs?: true | \"ignore\" | \"fail\"\n  processCode?: (code: string, schema?: SchemaEnv) => string\n  sourceCode?: boolean\n  strictDefaults?: boolean\n  strictKeywords?: boolean\n  uniqueItems?: boolean\n  unknownFormats?: true | string[] | \"ignore\"\n  cache?: any\n  serialize?: (schema: AnySchema) => unknown\n  ajvErrors?: boolean\n}\n\ntype OptionsInfo<T extends RemovedOptions | DeprecatedOptions> = {\n  [K in keyof T]-?: string | undefined\n}\n\nconst removedOptions: OptionsInfo<RemovedOptions> = {\n  errorDataPath: \"\",\n  format: \"`validateFormats: false` can be used instead.\",\n  nullable: '\"nullable\" keyword is supported by default.',\n  jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n  extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n  missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n  processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n  sourceCode: \"Use option `code: {source: true}`\",\n  strictDefaults: \"It is default now, see option `strict`.\",\n  strictKeywords: \"It is default now, see option `strict`.\",\n  uniqueItems: '\"uniqueItems\" keyword is always validated.',\n  unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n  cache: \"Map is used as cache, schema object as key.\",\n  serialize: \"Map is used as cache, schema object as key.\",\n  ajvErrors: \"It is default now.\",\n}\n\nconst deprecatedOptions: OptionsInfo<DeprecatedOptions> = {\n  ignoreKeywordsWithRef: \"\",\n  jsPropertySyntax: \"\",\n  unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n}\n\ntype RequiredInstanceOptions = {\n  [K in\n    | \"strictSchema\"\n    | \"strictNumbers\"\n    | \"strictTypes\"\n    | \"strictTuples\"\n    | \"strictRequired\"\n    | \"inlineRefs\"\n    | \"loopRequired\"\n    | \"loopEnum\"\n    | \"meta\"\n    | \"messages\"\n    | \"schemaId\"\n    | \"addUsedSchema\"\n    | \"validateSchema\"\n    | \"validateFormats\"\n    | \"int32range\"\n    | \"unicodeRegExp\"\n    | \"uriResolver\"]: NonNullable<Options[K]>\n} & {code: InstanceCodeOptions}\n\nexport type InstanceOptions = Options & RequiredInstanceOptions\n\nconst MAX_EXPRESSION = 200\n\n// eslint-disable-next-line complexity\nfunction requiredOptions(o: Options): RequiredInstanceOptions {\n  const s = o.strict\n  const _optz = o.code?.optimize\n  const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0\n  const regExp = o.code?.regExp ?? defaultRegExp\n  const uriResolver = o.uriResolver ?? DefaultUriResolver\n  return {\n    strictSchema: o.strictSchema ?? s ?? true,\n    strictNumbers: o.strictNumbers ?? s ?? true,\n    strictTypes: o.strictTypes ?? s ?? \"log\",\n    strictTuples: o.strictTuples ?? s ?? \"log\",\n    strictRequired: o.strictRequired ?? s ?? false,\n    code: o.code ? {...o.code, optimize, regExp} : {optimize, regExp},\n    loopRequired: o.loopRequired ?? MAX_EXPRESSION,\n    loopEnum: o.loopEnum ?? MAX_EXPRESSION,\n    meta: o.meta ?? true,\n    messages: o.messages ?? true,\n    inlineRefs: o.inlineRefs ?? true,\n    schemaId: o.schemaId ?? \"$id\",\n    addUsedSchema: o.addUsedSchema ?? true,\n    validateSchema: o.validateSchema ?? true,\n    validateFormats: o.validateFormats ?? true,\n    unicodeRegExp: o.unicodeRegExp ?? true,\n    int32range: o.int32range ?? true,\n    uriResolver: uriResolver,\n  }\n}\n\nexport interface Logger {\n  log(...args: unknown[]): unknown\n  warn(...args: unknown[]): unknown\n  error(...args: unknown[]): unknown\n}\n\nexport default class Ajv {\n  opts: InstanceOptions\n  errors?: ErrorObject[] | null // errors from the last validation\n  logger: Logger\n  // shared external scope values for compiled functions\n  readonly scope: ValueScope\n  readonly schemas: {[Key in string]?: SchemaEnv} = {}\n  readonly refs: {[Ref in string]?: SchemaEnv | string} = {}\n  readonly formats: {[Name in string]?: AddedFormat} = {}\n  readonly RULES: ValidationRules\n  readonly _compilations: Set<SchemaEnv> = new Set()\n  private readonly _loading: {[Ref in string]?: Promise<AnySchemaObject>} = {}\n  private readonly _cache: Map<AnySchema, SchemaEnv> = new Map()\n  private readonly _metaOpts: InstanceOptions\n\n  static ValidationError = ValidationError\n  static MissingRefError = MissingRefError\n\n  constructor(opts: Options = {}) {\n    opts = this.opts = {...opts, ...requiredOptions(opts)}\n    const {es5, lines} = this.opts.code\n\n    this.scope = new ValueScope({scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines})\n    this.logger = getLogger(opts.logger)\n    const formatOpt = opts.validateFormats\n    opts.validateFormats = false\n\n    this.RULES = getRules()\n    checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\")\n    checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\")\n    this._metaOpts = getMetaSchemaOptions.call(this)\n\n    if (opts.formats) addInitialFormats.call(this)\n    this._addVocabularies()\n    this._addDefaultMetaSchema()\n    if (opts.keywords) addInitialKeywords.call(this, opts.keywords)\n    if (typeof opts.meta == \"object\") this.addMetaSchema(opts.meta)\n    addInitialSchemas.call(this)\n    opts.validateFormats = formatOpt\n  }\n\n  _addVocabularies(): void {\n    this.addKeyword(\"$async\")\n  }\n\n  _addDefaultMetaSchema(): void {\n    const {$data, meta, schemaId} = this.opts\n    let _dataRefSchema: SchemaObject = $dataRefSchema\n    if (schemaId === \"id\") {\n      _dataRefSchema = {...$dataRefSchema}\n      _dataRefSchema.id = _dataRefSchema.$id\n      delete _dataRefSchema.$id\n    }\n    if (meta && $data) this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false)\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    const {meta, schemaId} = this.opts\n    return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined)\n  }\n\n  // Validate data using schema\n  // AnySchema will be compiled and cached using schema itself as a key for Map\n  validate(schema: Schema | string, data: unknown): boolean\n  validate(schemaKeyRef: AnySchema | string, data: unknown): boolean | Promise<unknown>\n  validate<T>(schema: Schema | JSONSchemaType<T> | string, data: unknown): data is T\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  validate<T>(schema: JTDSchemaType<T>, data: unknown): data is T\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  validate<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    data: unknown\n  ): data is JTDDataType<T>\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  validate<T>(schema: AsyncSchema, data: unknown | T): Promise<T>\n  validate<T>(schemaKeyRef: AnySchema | string, data: unknown): data is T | Promise<T>\n  validate<T>(\n    schemaKeyRef: AnySchema | string, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data: unknown | T // to be validated\n  ): boolean | Promise<T> {\n    let v: AnyValidateFunction | undefined\n    if (typeof schemaKeyRef == \"string\") {\n      v = this.getSchema<T>(schemaKeyRef)\n      if (!v) throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`)\n    } else {\n      v = this.compile<T>(schemaKeyRef)\n    }\n\n    const valid = v(data)\n    if (!(\"$async\" in v)) this.errors = v.errors\n    return valid\n  }\n\n  // Create validation function for passed schema\n  // _meta: true if schema is a meta-schema. Used internally to compile meta schemas of user-defined keywords.\n  compile<T = unknown>(schema: Schema | JSONSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compile<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  compile<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    _meta?: boolean\n  ): ValidateFunction<JTDDataType<T>>\n  compile<T = unknown>(schema: AsyncSchema, _meta?: boolean): AsyncValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T> {\n    const sch = this._addSchema(schema, _meta)\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T>\n  }\n\n  // Creates validating function for passed schema with asynchronous loading of missing schemas.\n  // `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n  // TODO allow passing schema URI\n  // meta - optional true to compile meta-schema\n  compileAsync<T = unknown>(\n    schema: SchemaObject | JSONSchemaType<T>,\n    _meta?: boolean\n  ): Promise<ValidateFunction<T>>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): Promise<ValidateFunction<T>>\n  compileAsync<T = unknown>(schema: AsyncSchema, meta?: boolean): Promise<AsyncValidateFunction<T>>\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>>\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>> {\n    if (typeof this.opts.loadSchema != \"function\") {\n      throw new Error(\"options.loadSchema should be a function\")\n    }\n    const {loadSchema} = this.opts\n    return runCompileAsync.call(this, schema, meta)\n\n    async function runCompileAsync(\n      this: Ajv,\n      _schema: AnySchemaObject,\n      _meta?: boolean\n    ): Promise<AnyValidateFunction> {\n      await loadMetaSchema.call(this, _schema.$schema)\n      const sch = this._addSchema(_schema, _meta)\n      return sch.validate || _compileAsync.call(this, sch)\n    }\n\n    async function loadMetaSchema(this: Ajv, $ref?: string): Promise<void> {\n      if ($ref && !this.getSchema($ref)) {\n        await runCompileAsync.call(this, {$ref}, true)\n      }\n    }\n\n    async function _compileAsync(this: Ajv, sch: SchemaEnv): Promise<AnyValidateFunction> {\n      try {\n        return this._compileSchemaEnv(sch)\n      } catch (e) {\n        if (!(e instanceof MissingRefError)) throw e\n        checkLoaded.call(this, e)\n        await loadMissingSchema.call(this, e.missingSchema)\n        return _compileAsync.call(this, sch)\n      }\n    }\n\n    function checkLoaded(this: Ajv, {missingSchema: ref, missingRef}: MissingRefError): void {\n      if (this.refs[ref]) {\n        throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`)\n      }\n    }\n\n    async function loadMissingSchema(this: Ajv, ref: string): Promise<void> {\n      const _schema = await _loadSchema.call(this, ref)\n      if (!this.refs[ref]) await loadMetaSchema.call(this, _schema.$schema)\n      if (!this.refs[ref]) this.addSchema(_schema, ref, meta)\n    }\n\n    async function _loadSchema(this: Ajv, ref: string): Promise<AnySchemaObject> {\n      const p = this._loading[ref]\n      if (p) return p\n      try {\n        return await (this._loading[ref] = loadSchema(ref))\n      } finally {\n        delete this._loading[ref]\n      }\n    }\n  }\n\n  // Adds schema to the instance\n  addSchema(\n    schema: AnySchema | AnySchema[], // If array is passed, `key` will be ignored\n    key?: string, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta?: boolean, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n  ): Ajv {\n    if (Array.isArray(schema)) {\n      for (const sch of schema) this.addSchema(sch, undefined, _meta, _validateSchema)\n      return this\n    }\n    let id: string | undefined\n    if (typeof schema === \"object\") {\n      const {schemaId} = this.opts\n      id = schema[schemaId]\n      if (id !== undefined && typeof id != \"string\") {\n        throw new Error(`schema ${schemaId} must be string`)\n      }\n    }\n    key = normalizeId(key || id)\n    this._checkUnique(key)\n    this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true)\n    return this\n  }\n\n  // Add schema that will be used to validate other schemas\n  // options in META_IGNORE_OPTIONS are alway set to false\n  addMetaSchema(\n    schema: AnySchemaObject,\n    key?: string, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n  ): Ajv {\n    this.addSchema(schema, key, true, _validateSchema)\n    return this\n  }\n\n  //  Validate schema against its meta-schema\n  validateSchema(schema: AnySchema, throwOrLogError?: boolean): boolean | Promise<unknown> {\n    if (typeof schema == \"boolean\") return true\n    let $schema: string | AnySchemaObject | undefined\n    $schema = schema.$schema\n    if ($schema !== undefined && typeof $schema != \"string\") {\n      throw new Error(\"$schema must be a string\")\n    }\n    $schema = $schema || this.opts.defaultMeta || this.defaultMeta()\n    if (!$schema) {\n      this.logger.warn(\"meta-schema not available\")\n      this.errors = null\n      return true\n    }\n    const valid = this.validate($schema, schema)\n    if (!valid && throwOrLogError) {\n      const message = \"schema is invalid: \" + this.errorsText()\n      if (this.opts.validateSchema === \"log\") this.logger.error(message)\n      else throw new Error(message)\n    }\n    return valid\n  }\n\n  // Get compiled schema by `key` or `ref`.\n  // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n  getSchema<T = unknown>(keyRef: string): AnyValidateFunction<T> | undefined {\n    let sch\n    while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\") keyRef = sch\n    if (sch === undefined) {\n      const {schemaId} = this.opts\n      const root = new SchemaEnv({schema: {}, schemaId})\n      sch = resolveSchema.call(this, root, keyRef)\n      if (!sch) return\n      this.refs[keyRef] = sch\n    }\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T> | undefined\n  }\n\n  // Remove cached schema(s).\n  // If no parameter is passed all schemas but meta-schemas are removed.\n  // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n  // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n  removeSchema(schemaKeyRef?: AnySchema | string | RegExp): Ajv {\n    if (schemaKeyRef instanceof RegExp) {\n      this._removeAllSchemas(this.schemas, schemaKeyRef)\n      this._removeAllSchemas(this.refs, schemaKeyRef)\n      return this\n    }\n    switch (typeof schemaKeyRef) {\n      case \"undefined\":\n        this._removeAllSchemas(this.schemas)\n        this._removeAllSchemas(this.refs)\n        this._cache.clear()\n        return this\n      case \"string\": {\n        const sch = getSchEnv.call(this, schemaKeyRef)\n        if (typeof sch == \"object\") this._cache.delete(sch.schema)\n        delete this.schemas[schemaKeyRef]\n        delete this.refs[schemaKeyRef]\n        return this\n      }\n      case \"object\": {\n        const cacheKey = schemaKeyRef\n        this._cache.delete(cacheKey)\n        let id = schemaKeyRef[this.opts.schemaId]\n        if (id) {\n          id = normalizeId(id)\n          delete this.schemas[id]\n          delete this.refs[id]\n        }\n        return this\n      }\n      default:\n        throw new Error(\"ajv.removeSchema: invalid parameter\")\n    }\n  }\n\n  // add \"vocabulary\" - a collection of keywords\n  addVocabulary(definitions: Vocabulary): Ajv {\n    for (const def of definitions) this.addKeyword(def)\n    return this\n  }\n\n  addKeyword(\n    kwdOrDef: string | KeywordDefinition,\n    def?: KeywordDefinition // deprecated\n  ): Ajv {\n    let keyword: string | string[]\n    if (typeof kwdOrDef == \"string\") {\n      keyword = kwdOrDef\n      if (typeof def == \"object\") {\n        this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\")\n        def.keyword = keyword\n      }\n    } else if (typeof kwdOrDef == \"object\" && def === undefined) {\n      def = kwdOrDef\n      keyword = def.keyword\n      if (Array.isArray(keyword) && !keyword.length) {\n        throw new Error(\"addKeywords: keyword must be string or non-empty array\")\n      }\n    } else {\n      throw new Error(\"invalid addKeywords parameters\")\n    }\n\n    checkKeyword.call(this, keyword, def)\n    if (!def) {\n      eachItem(keyword, (kwd) => addRule.call(this, kwd))\n      return this\n    }\n    keywordMetaschema.call(this, def)\n    const definition: AddedKeywordDefinition = {\n      ...def,\n      type: getJSONTypes(def.type),\n      schemaType: getJSONTypes(def.schemaType),\n    }\n    eachItem(\n      keyword,\n      definition.type.length === 0\n        ? (k) => addRule.call(this, k, definition)\n        : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t))\n    )\n    return this\n  }\n\n  getKeyword(keyword: string): AddedKeywordDefinition | boolean {\n    const rule = this.RULES.all[keyword]\n    return typeof rule == \"object\" ? rule.definition : !!rule\n  }\n\n  // Remove keyword\n  removeKeyword(keyword: string): Ajv {\n    // TODO return type should be Ajv\n    const {RULES} = this\n    delete RULES.keywords[keyword]\n    delete RULES.all[keyword]\n    for (const group of RULES.rules) {\n      const i = group.rules.findIndex((rule) => rule.keyword === keyword)\n      if (i >= 0) group.rules.splice(i, 1)\n    }\n    return this\n  }\n\n  // Add format\n  addFormat(name: string, format: Format): Ajv {\n    if (typeof format == \"string\") format = new RegExp(format)\n    this.formats[name] = format\n    return this\n  }\n\n  errorsText(\n    errors: ErrorObject[] | null | undefined = this.errors, // optional array of validation errors\n    {separator = \", \", dataVar = \"data\"}: ErrorsTextOptions = {} // optional options with properties `separator` and `dataVar`\n  ): string {\n    if (!errors || errors.length === 0) return \"No errors\"\n    return errors\n      .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n      .reduce((text, msg) => text + separator + msg)\n  }\n\n  $dataMetaSchema(metaSchema: AnySchemaObject, keywordsJsonPointers: string[]): AnySchemaObject {\n    const rules = this.RULES.all\n    metaSchema = JSON.parse(JSON.stringify(metaSchema))\n    for (const jsonPointer of keywordsJsonPointers) {\n      const segments = jsonPointer.split(\"/\").slice(1) // first segment is an empty string\n      let keywords = metaSchema\n      for (const seg of segments) keywords = keywords[seg] as AnySchemaObject\n\n      for (const key in rules) {\n        const rule = rules[key]\n        if (typeof rule != \"object\") continue\n        const {$data} = rule.definition\n        const schema = keywords[key] as AnySchemaObject | undefined\n        if ($data && schema) keywords[key] = schemaOrData(schema)\n      }\n    }\n\n    return metaSchema\n  }\n\n  private _removeAllSchemas(schemas: {[Ref in string]?: SchemaEnv | string}, regex?: RegExp): void {\n    for (const keyRef in schemas) {\n      const sch = schemas[keyRef]\n      if (!regex || regex.test(keyRef)) {\n        if (typeof sch == \"string\") {\n          delete schemas[keyRef]\n        } else if (sch && !sch.meta) {\n          this._cache.delete(sch.schema)\n          delete schemas[keyRef]\n        }\n      }\n    }\n  }\n\n  _addSchema(\n    schema: AnySchema,\n    meta?: boolean,\n    baseId?: string,\n    validateSchema = this.opts.validateSchema,\n    addSchema = this.opts.addUsedSchema\n  ): SchemaEnv {\n    let id: string | undefined\n    const {schemaId} = this.opts\n    if (typeof schema == \"object\") {\n      id = schema[schemaId]\n    } else {\n      if (this.opts.jtd) throw new Error(\"schema must be object\")\n      else if (typeof schema != \"boolean\") throw new Error(\"schema must be object or boolean\")\n    }\n    let sch = this._cache.get(schema)\n    if (sch !== undefined) return sch\n\n    baseId = normalizeId(id || baseId)\n    const localRefs = getSchemaRefs.call(this, schema, baseId)\n    sch = new SchemaEnv({schema, schemaId, meta, baseId, localRefs})\n    this._cache.set(sch.schema, sch)\n    if (addSchema && !baseId.startsWith(\"#\")) {\n      // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n      if (baseId) this._checkUnique(baseId)\n      this.refs[baseId] = sch\n    }\n    if (validateSchema) this.validateSchema(schema, true)\n    return sch\n  }\n\n  private _checkUnique(id: string): void {\n    if (this.schemas[id] || this.refs[id]) {\n      throw new Error(`schema with key or id \"${id}\" already exists`)\n    }\n  }\n\n  private _compileSchemaEnv(sch: SchemaEnv): AnyValidateFunction {\n    if (sch.meta) this._compileMetaSchema(sch)\n    else compileSchema.call(this, sch)\n\n    /* istanbul ignore if */\n    if (!sch.validate) throw new Error(\"ajv implementation error\")\n    return sch.validate\n  }\n\n  private _compileMetaSchema(sch: SchemaEnv): void {\n    const currentOpts = this.opts\n    this.opts = this._metaOpts\n    try {\n      compileSchema.call(this, sch)\n    } finally {\n      this.opts = currentOpts\n    }\n  }\n}\n\nexport interface ErrorsTextOptions {\n  separator?: string\n  dataVar?: string\n}\n\nfunction checkOptions(\n  this: Ajv,\n  checkOpts: OptionsInfo<RemovedOptions | DeprecatedOptions>,\n  options: Options & RemovedOptions,\n  msg: string,\n  log: \"warn\" | \"error\" = \"error\"\n): void {\n  for (const key in checkOpts) {\n    const opt = key as keyof typeof checkOpts\n    if (opt in options) this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`)\n  }\n}\n\nfunction getSchEnv(this: Ajv, keyRef: string): SchemaEnv | string | undefined {\n  keyRef = normalizeId(keyRef) // TODO tests fail without this line\n  return this.schemas[keyRef] || this.refs[keyRef]\n}\n\nfunction addInitialSchemas(this: Ajv): void {\n  const optsSchemas = this.opts.schemas\n  if (!optsSchemas) return\n  if (Array.isArray(optsSchemas)) this.addSchema(optsSchemas)\n  else for (const key in optsSchemas) this.addSchema(optsSchemas[key] as AnySchema, key)\n}\n\nfunction addInitialFormats(this: Ajv): void {\n  for (const name in this.opts.formats) {\n    const format = this.opts.formats[name]\n    if (format) this.addFormat(name, format)\n  }\n}\n\nfunction addInitialKeywords(\n  this: Ajv,\n  defs: Vocabulary | {[K in string]?: KeywordDefinition}\n): void {\n  if (Array.isArray(defs)) {\n    this.addVocabulary(defs)\n    return\n  }\n  this.logger.warn(\"keywords option as map is deprecated, pass array\")\n  for (const keyword in defs) {\n    const def = defs[keyword] as KeywordDefinition\n    if (!def.keyword) def.keyword = keyword\n    this.addKeyword(def)\n  }\n}\n\nfunction getMetaSchemaOptions(this: Ajv): InstanceOptions {\n  const metaOpts = {...this.opts}\n  for (const opt of META_IGNORE_OPTIONS) delete metaOpts[opt]\n  return metaOpts\n}\n\nconst noLogs = {log() {}, warn() {}, error() {}}\n\nfunction getLogger(logger?: Partial<Logger> | false): Logger {\n  if (logger === false) return noLogs\n  if (logger === undefined) return console\n  if (logger.log && logger.warn && logger.error) return logger as Logger\n  throw new Error(\"logger must implement log, warn and error methods\")\n}\n\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i\n\nfunction checkKeyword(this: Ajv, keyword: string | string[], def?: KeywordDefinition): void {\n  const {RULES} = this\n  eachItem(keyword, (kwd) => {\n    if (RULES.keywords[kwd]) throw new Error(`Keyword ${kwd} is already defined`)\n    if (!KEYWORD_NAME.test(kwd)) throw new Error(`Keyword ${kwd} has invalid name`)\n  })\n  if (!def) return\n  if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n    throw new Error('$data keyword must have \"code\" or \"validate\" function')\n  }\n}\n\nfunction addRule(\n  this: Ajv,\n  keyword: string,\n  definition?: AddedKeywordDefinition,\n  dataType?: JSONType\n): void {\n  const post = definition?.post\n  if (dataType && post) throw new Error('keyword with \"post\" flag cannot have \"type\"')\n  const {RULES} = this\n  let ruleGroup = post ? RULES.post : RULES.rules.find(({type: t}) => t === dataType)\n  if (!ruleGroup) {\n    ruleGroup = {type: dataType, rules: []}\n    RULES.rules.push(ruleGroup)\n  }\n  RULES.keywords[keyword] = true\n  if (!definition) return\n\n  const rule: Rule = {\n    keyword,\n    definition: {\n      ...definition,\n      type: getJSONTypes(definition.type),\n      schemaType: getJSONTypes(definition.schemaType),\n    },\n  }\n  if (definition.before) addBeforeRule.call(this, ruleGroup, rule, definition.before)\n  else ruleGroup.rules.push(rule)\n  RULES.all[keyword] = rule\n  definition.implements?.forEach((kwd) => this.addKeyword(kwd))\n}\n\nfunction addBeforeRule(this: Ajv, ruleGroup: RuleGroup, rule: Rule, before: string): void {\n  const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before)\n  if (i >= 0) {\n    ruleGroup.rules.splice(i, 0, rule)\n  } else {\n    ruleGroup.rules.push(rule)\n    this.logger.warn(`rule ${before} is not defined`)\n  }\n}\n\nfunction keywordMetaschema(this: Ajv, def: KeywordDefinition): void {\n  let {metaSchema} = def\n  if (metaSchema === undefined) return\n  if (def.$data && this.opts.$data) metaSchema = schemaOrData(metaSchema)\n  def.validateSchema = this.compile(metaSchema, true)\n}\n\nconst $dataRef = {\n  $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n}\n\nfunction schemaOrData(schema: AnySchema): AnySchemaObject {\n  return {anyOf: [schema, $dataRef]}\n}\n", "import type {CodeKeywordDefinition} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"id\",\n  code() {\n    throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID')\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {callValidateCode} from \"../code\"\nimport {_, nil, stringify, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport {SchemaEnv, resolveRef} from \"../../compile\"\nimport {mergeEvaluated} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"$ref\",\n  schemaType: \"string\",\n  code(cxt: KeywordCxt): void {\n    const {gen, schema: $ref, it} = cxt\n    const {baseId, schemaEnv: env, validateName, opts, self} = it\n    const {root} = env\n    if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId) return callRootRef()\n    const schOrEnv = resolveRef.call(self, root, baseId, $ref)\n    if (schOrEnv === undefined) throw new MissingRefError(it.opts.uriResolver, baseId, $ref)\n    if (schOrEnv instanceof SchemaEnv) return callValidate(schOrEnv)\n    return inlineRefSchema(schOrEnv)\n\n    function callRootRef(): void {\n      if (env === root) return callRef(cxt, validateName, env, env.$async)\n      const rootName = gen.scopeValue(\"root\", {ref: root})\n      return callRef(cxt, _`${rootName}.validate`, root, root.$async)\n    }\n\n    function callValidate(sch: SchemaEnv): void {\n      const v = getValidate(cxt, sch)\n      callRef(cxt, v, sch, sch.$async)\n    }\n\n    function inlineRefSchema(sch: AnySchema): void {\n      const schName = gen.scopeValue(\n        \"schema\",\n        opts.code.source === true ? {ref: sch, code: stringify(sch)} : {ref: sch}\n      )\n      const valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema(\n        {\n          schema: sch,\n          dataTypes: [],\n          schemaPath: nil,\n          topSchemaRef: schName,\n          errSchemaPath: $ref,\n        },\n        valid\n      )\n      cxt.mergeEvaluated(schCxt)\n      cxt.ok(valid)\n    }\n  },\n}\n\nexport function getValidate(cxt: KeywordCxt, sch: SchemaEnv): Code {\n  const {gen} = cxt\n  return sch.validate\n    ? gen.scopeValue(\"validate\", {ref: sch.validate})\n    : _`${gen.scopeValue(\"wrapper\", {ref: sch})}.validate`\n}\n\nexport function callRef(cxt: KeywordCxt, v: Code, sch?: SchemaEnv, $async?: boolean): void {\n  const {gen, it} = cxt\n  const {allErrors, schemaEnv: env, opts} = it\n  const passCxt = opts.passContext ? N.this : nil\n  if ($async) callAsyncRef()\n  else callSyncRef()\n\n  function callAsyncRef(): void {\n    if (!env.$async) throw new Error(\"async schema referenced by sync schema\")\n    const valid = gen.let(\"valid\")\n    gen.try(\n      () => {\n        gen.code(_`await ${callValidateCode(cxt, v, passCxt)}`)\n        addEvaluatedFrom(v) // TODO will not work with async, it has to be returned with the result\n        if (!allErrors) gen.assign(valid, true)\n      },\n      (e) => {\n        gen.if(_`!(${e} instanceof ${it.ValidationError as Name})`, () => gen.throw(e))\n        addErrorsFrom(e)\n        if (!allErrors) gen.assign(valid, false)\n      }\n    )\n    cxt.ok(valid)\n  }\n\n  function callSyncRef(): void {\n    cxt.result(\n      callValidateCode(cxt, v, passCxt),\n      () => addEvaluatedFrom(v),\n      () => addErrorsFrom(v)\n    )\n  }\n\n  function addErrorsFrom(source: Code): void {\n    const errs = _`${source}.errors`\n    gen.assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`) // TODO tagged\n    gen.assign(N.errors, _`${N.vErrors}.length`)\n  }\n\n  function addEvaluatedFrom(source: Code): void {\n    if (!it.opts.unevaluated) return\n    const schEvaluated = sch?.validate?.evaluated\n    // TODO refactor\n    if (it.props !== true) {\n      if (schEvaluated && !schEvaluated.dynamicProps) {\n        if (schEvaluated.props !== undefined) {\n          it.props = mergeEvaluated.props(gen, schEvaluated.props, it.props)\n        }\n      } else {\n        const props = gen.var(\"props\", _`${source}.evaluated.props`)\n        it.props = mergeEvaluated.props(gen, props, it.props, Name)\n      }\n    }\n    if (it.items !== true) {\n      if (schEvaluated && !schEvaluated.dynamicItems) {\n        if (schEvaluated.items !== undefined) {\n          it.items = mergeEvaluated.items(gen, schEvaluated.items, it.items)\n        }\n      } else {\n        const items = gen.var(\"items\", _`${source}.evaluated.items`)\n        it.items = mergeEvaluated.items(gen, items, it.items, Name)\n      }\n    }\n  }\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport idKeyword from \"./id\"\nimport refKeyword from \"./ref\"\n\nconst core: Vocabulary = [\n  \"$schema\",\n  \"$id\",\n  \"$defs\",\n  \"$vocabulary\",\n  {keyword: \"$comment\"},\n  \"definitions\",\n  idKeyword,\n  refKeyword,\n]\n\nexport default core\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators, Code} from \"../../compile/codegen\"\n\nconst ops = operators\n\ntype Kwd = \"maximum\" | \"minimum\" | \"exclusiveMaximum\" | \"exclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  maximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  minimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  exclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  exclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitNumberError = ErrorObject<\n  Kwd,\n  {limit: number; comparison: Comparison},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`must be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    cxt.fail$data(_`${data} ${KWDs[keyword as Kwd].fail} ${schemaCode} || isNaN(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type MultipleOfError = ErrorObject<\n  \"multipleOf\",\n  {multipleOf: number},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must be multiple of ${schemaCode}`,\n  params: ({schemaCode}) => _`{multipleOf: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"multipleOf\",\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schemaCode, it} = cxt\n    // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n    const prec = it.opts.multipleOfPrecision\n    const res = gen.let(\"res\")\n    const invalid = prec\n      ? _`Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n      : _`${res} !== parseInt(${res})`\n    cxt.fail$data(_`(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`)\n  },\n}\n\nexport default def\n", "// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nexport default function ucs2length(str: string): number {\n  const len = str.length\n  let length = 0\n  let pos = 0\n  let value: number\n  while (pos < len) {\n    length++\n    value = str.charCodeAt(pos++)\n    if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos)\n      if ((value & 0xfc00) === 0xdc00) pos++ // low surrogate\n    }\n  }\n  return length\n}\n\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default'\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport ucs2length from \"../../runtime/ucs2length\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} characters`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxLength\", \"minLength\"],\n  type: \"string\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode, it} = cxt\n    const op = keyword === \"maxLength\" ? operators.GT : operators.LT\n    const len =\n      it.opts.unicode === false ? _`${data}.length` : _`${useFunc(cxt.gen, ucs2length)}(${data})`\n    cxt.fail$data(_`${len} ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {usePattern} from \"../code\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type PatternError = ErrorObject<\"pattern\", {pattern: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match pattern \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{pattern: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"pattern\",\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {data, $data, schema, schemaCode, it} = cxt\n    // TODO regexp should be wrapped in try/catchs\n    const u = it.opts.unicodeRegExp ? \"u\" : \"\"\n    const regExp = $data ? _`(new RegExp(${schemaCode}, ${u}))` : usePattern(cxt, schema)\n    cxt.fail$data(_`!${regExp}.test(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} properties`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxProperties\", \"minProperties\"],\n  type: \"object\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxProperties\" ? operators.GT : operators.LT\n    cxt.fail$data(_`Object.keys(${data}).length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {\n  checkReportMissingProp,\n  checkMissingProp,\n  reportMissingProp,\n  propertyInData,\n  noPropertyInData,\n} from \"../code\"\nimport {_, str, nil, not, Name, Code} from \"../../compile/codegen\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nexport type RequiredError = ErrorObject<\n  \"required\",\n  {missingProperty: string},\n  string[] | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {missingProperty}}) => str`must have required property '${missingProperty}'`,\n  params: ({params: {missingProperty}}) => _`{missingProperty: ${missingProperty}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, schemaCode, data, $data, it} = cxt\n    const {opts} = it\n    if (!$data && schema.length === 0) return\n    const useLoop = schema.length >= opts.loopRequired\n    if (it.allErrors) allErrorsMode()\n    else exitOnErrorMode()\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties\n      const {definedProperties} = cxt.it\n      for (const requiredKey of schema) {\n        if (props?.[requiredKey] === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`\n          checkStrictMode(it, msg, it.opts.strictRequired)\n        }\n      }\n    }\n\n    function allErrorsMode(): void {\n      if (useLoop || $data) {\n        cxt.block$data(nil, loopAllRequired)\n      } else {\n        for (const prop of schema) {\n          checkReportMissingProp(cxt, prop)\n        }\n      }\n    }\n\n    function exitOnErrorMode(): void {\n      const missing = gen.let(\"missing\")\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true)\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid))\n        cxt.ok(valid)\n      } else {\n        gen.if(checkMissingProp(cxt, schema, missing))\n        reportMissingProp(cxt, missing)\n        gen.else()\n      }\n    }\n\n    function loopAllRequired(): void {\n      gen.forOf(\"prop\", schemaCode as Code, (prop) => {\n        cxt.setParams({missingProperty: prop})\n        gen.if(noPropertyInData(gen, data, prop, opts.ownProperties), () => cxt.error())\n      })\n    }\n\n    function loopUntilMissing(missing: Name, valid: Name): void {\n      cxt.setParams({missingProperty: missing})\n      gen.forOf(\n        missing,\n        schemaCode as Code,\n        () => {\n          gen.assign(valid, propertyInData(gen, data, missing, opts.ownProperties))\n          gen.if(not(valid), () => {\n            cxt.error()\n            gen.break()\n          })\n        },\n        nil\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} items`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxItems\", \"minItems\"],\n  type: \"array\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxItems\" ? operators.GT : operators.LT\n    cxt.fail$data(_`${data}.length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "// https://github.com/ajv-validator/ajv/issues/889\nimport * as equal from \"fast-deep-equal\"\n\ntype Equal = typeof equal & {code: string}\n;(equal as Equal).code = 'require(\"ajv/dist/runtime/equal\").default'\n\nexport default equal as Equal\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkDataTypes, getSchemaTypes, DataType} from \"../../compile/validate/dataType\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type UniqueItemsError = ErrorObject<\n  \"uniqueItems\",\n  {i: number; j: number},\n  boolean | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {i, j}}) =>\n    str`must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n  params: ({params: {i, j}}) => _`{i: ${i}, j: ${j}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"uniqueItems\",\n  type: \"array\",\n  schemaType: \"boolean\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, parentSchema, schemaCode, it} = cxt\n    if (!$data && !schema) return\n    const valid = gen.let(\"valid\")\n    const itemTypes = parentSchema.items ? getSchemaTypes(parentSchema.items) : []\n    cxt.block$data(valid, validateUniqueItems, _`${schemaCode} === false`)\n    cxt.ok(valid)\n\n    function validateUniqueItems(): void {\n      const i = gen.let(\"i\", _`${data}.length`)\n      const j = gen.let(\"j\")\n      cxt.setParams({i, j})\n      gen.assign(valid, true)\n      gen.if(_`${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j))\n    }\n\n    function canOptimize(): boolean {\n      return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\")\n    }\n\n    function loopN(i: Name, j: Name): void {\n      const item = gen.name(\"item\")\n      const wrongType = checkDataTypes(itemTypes, item, it.opts.strictNumbers, DataType.Wrong)\n      const indices = gen.const(\"indices\", _`{}`)\n      gen.for(_`;${i}--;`, () => {\n        gen.let(item, _`${data}[${i}]`)\n        gen.if(wrongType, _`continue`)\n        if (itemTypes.length > 1) gen.if(_`typeof ${item} == \"string\"`, _`${item} += \"_\"`)\n        gen\n          .if(_`typeof ${indices}[${item}] == \"number\"`, () => {\n            gen.assign(j, _`${indices}[${item}]`)\n            cxt.error()\n            gen.assign(valid, false).break()\n          })\n          .code(_`${indices}[${item}] = ${i}`)\n      })\n    }\n\n    function loopN2(i: Name, j: Name): void {\n      const eql = useFunc(gen, equal)\n      const outer = gen.name(\"outer\")\n      gen.label(outer).for(_`;${i}--;`, () =>\n        gen.for(_`${j} = ${i}; ${j}--;`, () =>\n          gen.if(_`${eql}(${data}[${i}], ${data}[${j}])`, () => {\n            cxt.error()\n            gen.assign(valid, false).break(outer)\n          })\n        )\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type ConstError = ErrorObject<\"const\", {allowedValue: any}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to constant\",\n  params: ({schemaCode}) => _`{allowedValue: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"const\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schemaCode, schema} = cxt\n    if ($data || (schema && typeof schema == \"object\")) {\n      cxt.fail$data(_`!${useFunc(gen, equal)}(${data}, ${schemaCode})`)\n    } else {\n      cxt.fail(_`${schema} !== ${data}`)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, or, Name, Code} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type EnumError = ErrorObject<\"enum\", {allowedValues: any[]}, any[] | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to one of the allowed values\",\n  params: ({schemaCode}) => _`{allowedValues: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"enum\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    if (!$data && schema.length === 0) throw new Error(\"enum must have non-empty array\")\n    const useLoop = schema.length >= it.opts.loopEnum\n    let eql: Name | undefined\n    const getEql = (): Name => (eql ??= useFunc(gen, equal))\n\n    let valid: Code\n    if (useLoop || $data) {\n      valid = gen.let(\"valid\")\n      cxt.block$data(valid, loopEnum)\n    } else {\n      /* istanbul ignore if */\n      if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n      const vSchema = gen.const(\"vSchema\", schemaCode)\n      valid = or(...schema.map((_x: unknown, i: number) => equalCode(vSchema, i)))\n    }\n    cxt.pass(valid)\n\n    function loopEnum(): void {\n      gen.assign(valid, false)\n      gen.forOf(\"v\", schemaCode as Code, (v) =>\n        gen.if(_`${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break())\n      )\n    }\n\n    function equalCode(vSchema: Name, i: number): Code {\n      const sch = schema[i]\n      return typeof sch === \"object\" && sch !== null\n        ? _`${getEql()}(${data}, ${vSchema}[${i}])`\n        : _`${data} === ${sch}`\n    }\n  },\n}\n\nexport default def\n", "import type {ErrorObject, Vocabulary} from \"../../types\"\nimport limitNumber, {LimitNumberError} from \"./limitNumber\"\nimport multipleOf, {MultipleOfError} from \"./multipleOf\"\nimport limitLength from \"./limitLength\"\nimport pattern, {PatternError} from \"./pattern\"\nimport limitProperties from \"./limitProperties\"\nimport required, {RequiredError} from \"./required\"\nimport limitItems from \"./limitItems\"\nimport uniqueItems, {UniqueItemsError} from \"./uniqueItems\"\nimport constKeyword, {ConstError} from \"./const\"\nimport enumKeyword, {EnumError} from \"./enum\"\n\nconst validation: Vocabulary = [\n  // number\n  limitNumber,\n  multipleOf,\n  // string\n  limitLength,\n  pattern,\n  // object\n  limitProperties,\n  required,\n  // array\n  limitItems,\n  uniqueItems,\n  // any\n  {keyword: \"type\", schemaType: [\"string\", \"array\"]},\n  {keyword: \"nullable\", schemaType: \"boolean\"},\n  constKeyword,\n  enumKeyword,\n]\n\nexport default validation\n\ntype LimitError = ErrorObject<\n  \"maxItems\" | \"minItems\" | \"minProperties\" | \"maxProperties\" | \"minLength\" | \"maxLength\",\n  {limit: number},\n  number | {$data: string}\n>\n\nexport type ValidationKeywordError =\n  | LimitError\n  | LimitNumberError\n  | MultipleOfError\n  | PatternError\n  | RequiredError\n  | UniqueItemsError\n  | ConstError\n  | EnumError\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type AdditionalItemsError = ErrorObject<\"additionalItems\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"additionalItems\" as const,\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {parentSchema, it} = cxt\n    const {items} = parentSchema\n    if (!Array.isArray(items)) {\n      checkStrictMode(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas')\n      return\n    }\n    validateAdditionalItems(cxt, items)\n  },\n}\n\nexport function validateAdditionalItems(cxt: KeywordCxt, items: AnySchema[]): void {\n  const {gen, schema, data, keyword, it} = cxt\n  it.items = true\n  const len = gen.const(\"len\", _`${data}.length`)\n  if (schema === false) {\n    cxt.setParams({len: items.length})\n    cxt.pass(_`${len} <= ${items.length}`)\n  } else if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n    const valid = gen.var(\"valid\", _`${len} <= ${items.length}`) // TODO var\n    gen.if(not(valid), () => validateItems(valid))\n    cxt.ok(valid)\n  }\n\n  function validateItems(valid: Name): void {\n    gen.forRange(\"i\", items.length, len, (i) => {\n      cxt.subschema({keyword, dataProp: i, dataPropType: Type.Num}, valid)\n      if (!it.allErrors) gen.if(not(valid), () => gen.break())\n    })\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema, AnySchemaObject} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {alwaysValidSchema, mergeEvaluated, checkStrictMode} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"array\", \"boolean\"],\n  before: \"uniqueItems\",\n  code(cxt: KeywordCxt) {\n    const {schema, it} = cxt\n    if (Array.isArray(schema)) return validateTuple(cxt, \"additionalItems\", schema)\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    cxt.ok(validateArray(cxt))\n  },\n}\n\nexport function validateTuple(\n  cxt: KeywordCxt,\n  extraItems: string,\n  schArr: AnySchema[] = cxt.schema\n): void {\n  const {gen, parentSchema, data, keyword, it} = cxt\n  checkStrictTuple(parentSchema)\n  if (it.opts.unevaluated && schArr.length && it.items !== true) {\n    it.items = mergeEvaluated.items(gen, schArr.length, it.items)\n  }\n  const valid = gen.name(\"valid\")\n  const len = gen.const(\"len\", _`${data}.length`)\n  schArr.forEach((sch: AnySchema, i: number) => {\n    if (alwaysValidSchema(it, sch)) return\n    gen.if(_`${len} > ${i}`, () =>\n      cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          dataProp: i,\n        },\n        valid\n      )\n    )\n    cxt.ok(valid)\n  })\n\n  function checkStrictTuple(sch: AnySchemaObject): void {\n    const {opts, errSchemaPath} = it\n    const l = schArr.length\n    const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false)\n    if (opts.strictTuples && !fullTuple) {\n      const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`\n      checkStrictMode(it, msg, opts.strictTuples)\n    }\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {validateTuple} from \"./items\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"prefixItems\",\n  type: \"array\",\n  schemaType: [\"array\"],\n  before: \"uniqueItems\",\n  code: (cxt) => validateTuple(cxt, \"items\"),\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\nimport {validateAdditionalItems} from \"./additionalItems\"\n\nexport type ItemsError = ErrorObject<\"items\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {schema, parentSchema, it} = cxt\n    const {prefixItems} = parentSchema\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    if (prefixItems) validateAdditionalItems(cxt, prefixItems)\n    else cxt.ok(validateArray(cxt))\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type ContainsError = ErrorObject<\n  \"contains\",\n  {minContains: number; maxContains?: number},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {min, max}}) =>\n    max === undefined\n      ? str`must contain at least ${min} valid item(s)`\n      : str`must contain at least ${min} and no more than ${max} valid item(s)`,\n  params: ({params: {min, max}}) =>\n    max === undefined ? _`{minContains: ${min}}` : _`{minContains: ${min}, maxContains: ${max}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"contains\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    let min: number\n    let max: number | undefined\n    const {minContains, maxContains} = parentSchema\n    if (it.opts.next) {\n      min = minContains === undefined ? 1 : minContains\n      max = maxContains\n    } else {\n      min = 1\n    }\n    const len = gen.const(\"len\", _`${data}.length`)\n    cxt.setParams({min, max})\n    if (max === undefined && min === 0) {\n      checkStrictMode(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`)\n      return\n    }\n    if (max !== undefined && min > max) {\n      checkStrictMode(it, `\"minContains\" > \"maxContains\" is always invalid`)\n      cxt.fail()\n      return\n    }\n    if (alwaysValidSchema(it, schema)) {\n      let cond = _`${len} >= ${min}`\n      if (max !== undefined) cond = _`${cond} && ${len} <= ${max}`\n      cxt.pass(cond)\n      return\n    }\n\n    it.items = true\n    const valid = gen.name(\"valid\")\n    if (max === undefined && min === 1) {\n      validateItems(valid, () => gen.if(valid, () => gen.break()))\n    } else if (min === 0) {\n      gen.let(valid, true)\n      if (max !== undefined) gen.if(_`${data}.length > 0`, validateItemsWithCount)\n    } else {\n      gen.let(valid, false)\n      validateItemsWithCount()\n    }\n    cxt.result(valid, () => cxt.reset())\n\n    function validateItemsWithCount(): void {\n      const schValid = gen.name(\"_valid\")\n      const count = gen.let(\"count\", 0)\n      validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)))\n    }\n\n    function validateItems(_valid: Name, block: () => void): void {\n      gen.forRange(\"i\", 0, len, (i) => {\n        cxt.subschema(\n          {\n            keyword: \"contains\",\n            dataProp: i,\n            dataPropType: Type.Num,\n            compositeRule: true,\n          },\n          _valid\n        )\n        block()\n      })\n    }\n\n    function checkLimits(count: Name): void {\n      gen.code(_`${count}++`)\n      if (max === undefined) {\n        gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true).break())\n      } else {\n        gen.if(_`${count} > ${max}`, () => gen.assign(valid, false).break())\n        if (min === 1) gen.assign(valid, true)\n        else gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true))\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  SchemaMap,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {checkReportMissingProp, checkMissingProp, reportMissingProp, propertyInData} from \"../code\"\n\nexport type PropertyDependencies = {[K in string]?: string[]}\n\nexport interface DependenciesErrorParams {\n  property: string\n  missingProperty: string\n  depsCount: number\n  deps: string // TODO change to string[]\n}\n\ntype SchemaDependencies = SchemaMap\n\nexport type DependenciesError = ErrorObject<\n  \"dependencies\",\n  DependenciesErrorParams,\n  {[K in string]?: string[] | AnySchema}\n>\n\nexport const error: KeywordErrorDefinition = {\n  message: ({params: {property, depsCount, deps}}) => {\n    const property_ies = depsCount === 1 ? \"property\" : \"properties\"\n    return str`must have ${property_ies} ${deps} when property ${property} is present`\n  },\n  params: ({params: {property, depsCount, deps, missingProperty}}) =>\n    _`{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"dependencies\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const [propDeps, schDeps] = splitDependencies(cxt)\n    validatePropertyDeps(cxt, propDeps)\n    validateSchemaDeps(cxt, schDeps)\n  },\n}\n\nfunction splitDependencies({schema}: KeywordCxt): [PropertyDependencies, SchemaDependencies] {\n  const propertyDeps: PropertyDependencies = {}\n  const schemaDeps: SchemaDependencies = {}\n  for (const key in schema) {\n    if (key === \"__proto__\") continue\n    const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps\n    deps[key] = schema[key]\n  }\n  return [propertyDeps, schemaDeps]\n}\n\nexport function validatePropertyDeps(\n  cxt: KeywordCxt,\n  propertyDeps: {[K in string]?: string[]} = cxt.schema\n): void {\n  const {gen, data, it} = cxt\n  if (Object.keys(propertyDeps).length === 0) return\n  const missing = gen.let(\"missing\")\n  for (const prop in propertyDeps) {\n    const deps = propertyDeps[prop] as string[]\n    if (deps.length === 0) continue\n    const hasProperty = propertyInData(gen, data, prop, it.opts.ownProperties)\n    cxt.setParams({\n      property: prop,\n      depsCount: deps.length,\n      deps: deps.join(\", \"),\n    })\n    if (it.allErrors) {\n      gen.if(hasProperty, () => {\n        for (const depProp of deps) {\n          checkReportMissingProp(cxt, depProp)\n        }\n      })\n    } else {\n      gen.if(_`${hasProperty} && (${checkMissingProp(cxt, deps, missing)})`)\n      reportMissingProp(cxt, missing)\n      gen.else()\n    }\n  }\n}\n\nexport function validateSchemaDeps(cxt: KeywordCxt, schemaDeps: SchemaMap = cxt.schema): void {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  for (const prop in schemaDeps) {\n    if (alwaysValidSchema(it, schemaDeps[prop] as AnySchema)) continue\n    gen.if(\n      propertyInData(gen, data, prop, it.opts.ownProperties),\n      () => {\n        const schCxt = cxt.subschema({keyword, schemaProp: prop}, valid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n      },\n      () => gen.var(valid, true) // TODO var\n    )\n    cxt.ok(valid)\n  }\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, not} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type PropertyNamesError = ErrorObject<\"propertyNames\", {propertyName: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: \"property name must be valid\",\n  params: ({params}) => _`{propertyName: ${params.propertyName}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"propertyNames\",\n  type: \"object\",\n  schemaType: [\"object\", \"boolean\"],\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, it} = cxt\n    if (alwaysValidSchema(it, schema)) return\n    const valid = gen.name(\"valid\")\n\n    gen.forIn(\"key\", data, (key) => {\n      cxt.setParams({propertyName: key})\n      cxt.subschema(\n        {\n          keyword: \"propertyNames\",\n          data: key,\n          dataTypes: [\"string\"],\n          propertyName: key,\n          compositeRule: true,\n        },\n        valid\n      )\n      gen.if(not(valid), () => {\n        cxt.error(true)\n        if (!it.allErrors) gen.break()\n      })\n    })\n\n    cxt.ok(valid)\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  AddedKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport {allSchemaProperties, usePattern, isOwnProperty} from \"../code\"\nimport {_, nil, or, not, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport type {SubschemaArgs} from \"../../compile/validate/subschema\"\nimport {alwaysValidSchema, schemaRefOrVal, Type} from \"../../compile/util\"\n\nexport type AdditionalPropertiesError = ErrorObject<\n  \"additionalProperties\",\n  {additionalProperty: string},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must NOT have additional properties\",\n  params: ({params}) => _`{additionalProperty: ${params.additionalProperty}}`,\n}\n\nconst def: CodeKeywordDefinition & AddedKeywordDefinition = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {gen, schema, parentSchema, data, errsCount, it} = cxt\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\")\n    const {allErrors, opts} = it\n    it.props = true\n    if (opts.removeAdditional !== \"all\" && alwaysValidSchema(it, schema)) return\n    const props = allSchemaProperties(parentSchema.properties)\n    const patProps = allSchemaProperties(parentSchema.patternProperties)\n    checkAdditionalProperties()\n    cxt.ok(_`${errsCount} === ${N.errors}`)\n\n    function checkAdditionalProperties(): void {\n      gen.forIn(\"key\", data, (key: Name) => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key)\n        else gen.if(isAdditional(key), () => additionalPropertyCode(key))\n      })\n    }\n\n    function isAdditional(key: Name): Code {\n      let definedProp: Code\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = schemaRefOrVal(it, parentSchema.properties, \"properties\")\n        definedProp = isOwnProperty(gen, propsSchema as Code, key)\n      } else if (props.length) {\n        definedProp = or(...props.map((p) => _`${key} === ${p}`))\n      } else {\n        definedProp = nil\n      }\n      if (patProps.length) {\n        definedProp = or(definedProp, ...patProps.map((p) => _`${usePattern(cxt, p)}.test(${key})`))\n      }\n      return not(definedProp)\n    }\n\n    function deleteAdditional(key: Name): void {\n      gen.code(_`delete ${data}[${key}]`)\n    }\n\n    function additionalPropertyCode(key: Name): void {\n      if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n        deleteAdditional(key)\n        return\n      }\n\n      if (schema === false) {\n        cxt.setParams({additionalProperty: key})\n        cxt.error()\n        if (!allErrors) gen.break()\n        return\n      }\n\n      if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n        const valid = gen.name(\"valid\")\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false)\n          gen.if(not(valid), () => {\n            cxt.reset()\n            deleteAdditional(key)\n          })\n        } else {\n          applyAdditionalSchema(key, valid)\n          if (!allErrors) gen.if(not(valid), () => gen.break())\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key: Name, valid: Name, errors?: false): void {\n      const subschema: SubschemaArgs = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: Type.Str,\n      }\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        })\n      }\n      cxt.subschema(subschema, valid)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {KeywordCxt} from \"../../compile/validate\"\nimport {propertyInData, allSchemaProperties} from \"../code\"\nimport {alwaysValidSchema, toHash, mergeEvaluated} from \"../../compile/util\"\nimport apDef from \"./additionalProperties\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      apDef.code(new KeywordCxt(it, apDef, \"additionalProperties\"))\n    }\n    const allProps = allSchemaProperties(schema)\n    for (const prop of allProps) {\n      it.definedProperties.add(prop)\n    }\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = mergeEvaluated.props(gen, toHash(allProps), it.props)\n    }\n    const properties = allProps.filter((p) => !alwaysValidSchema(it, schema[p]))\n    if (properties.length === 0) return\n    const valid = gen.name(\"valid\")\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop)\n      } else {\n        gen.if(propertyInData(gen, data, prop, it.opts.ownProperties))\n        applyPropertySchema(prop)\n        if (!it.allErrors) gen.else().var(valid, true)\n        gen.endIf()\n      }\n      cxt.it.definedProperties.add(prop)\n      cxt.ok(valid)\n    }\n\n    function hasDefault(prop: string): boolean | undefined {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined\n    }\n\n    function applyPropertySchema(prop: string): void {\n      cxt.subschema(\n        {\n          keyword: \"properties\",\n          schemaProp: prop,\n          dataProp: prop,\n        },\n        valid\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {allSchemaProperties, usePattern} from \"../code\"\nimport {_, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\nimport {evaluatedPropsToName, Type} from \"../../compile/util\"\nimport {AnySchema} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"patternProperties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, parentSchema, it} = cxt\n    const {opts} = it\n    const patterns = allSchemaProperties(schema)\n    const alwaysValidPatterns = patterns.filter((p) =>\n      alwaysValidSchema(it, schema[p] as AnySchema)\n    )\n\n    if (\n      patterns.length === 0 ||\n      (alwaysValidPatterns.length === patterns.length &&\n        (!it.opts.unevaluated || it.props === true))\n    ) {\n      return\n    }\n\n    const checkProperties =\n      opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties\n    const valid = gen.name(\"valid\")\n    if (it.props !== true && !(it.props instanceof Name)) {\n      it.props = evaluatedPropsToName(gen, it.props)\n    }\n    const {props} = it\n    validatePatternProperties()\n\n    function validatePatternProperties(): void {\n      for (const pat of patterns) {\n        if (checkProperties) checkMatchingProperties(pat)\n        if (it.allErrors) {\n          validateProperties(pat)\n        } else {\n          gen.var(valid, true) // TODO var\n          validateProperties(pat)\n          gen.if(valid)\n        }\n      }\n    }\n\n    function checkMatchingProperties(pat: string): void {\n      for (const prop in checkProperties) {\n        if (new RegExp(pat).test(prop)) {\n          checkStrictMode(\n            it,\n            `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`\n          )\n        }\n      }\n    }\n\n    function validateProperties(pat: string): void {\n      gen.forIn(\"key\", data, (key) => {\n        gen.if(_`${usePattern(cxt, pat)}.test(${key})`, () => {\n          const alwaysValid = alwaysValidPatterns.includes(pat)\n          if (!alwaysValid) {\n            cxt.subschema(\n              {\n                keyword: \"patternProperties\",\n                schemaProp: pat,\n                dataProp: key,\n                dataPropType: Type.Str,\n              },\n              valid\n            )\n          }\n\n          if (it.opts.unevaluated && props !== true) {\n            gen.assign(_`${props}[${key}]`, true)\n          } else if (!alwaysValid && !it.allErrors) {\n            // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n            // or if all properties were evaluated (props === true)\n            gen.if(not(valid), () => gen.break())\n          }\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type NotKeywordError = ErrorNoParams<\"not\", AnySchema>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"not\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    if (alwaysValidSchema(it, schema)) {\n      cxt.fail()\n      return\n    }\n\n    const valid = gen.name(\"valid\")\n    cxt.subschema(\n      {\n        keyword: \"not\",\n        compositeRule: true,\n        createErrors: false,\n        allErrors: false,\n      },\n      valid\n    )\n\n    cxt.failResult(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error()\n    )\n  },\n  error: {message: \"must NOT be valid\"},\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport {validateUnion} from \"../code\"\n\nexport type AnyOfError = ErrorNoParams<\"anyOf\", AnySchema[]>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"anyOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  code: validateUnion,\n  error: {message: \"must match a schema in anyOf\"},\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {SchemaCxt} from \"../../compile\"\n\nexport type OneOfError = ErrorObject<\n  \"oneOf\",\n  {passingSchemas: [number, number] | null},\n  AnySchema[]\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must match exactly one schema in oneOf\",\n  params: ({params}) => _`{passingSchemas: ${params.passing}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"oneOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    if (it.opts.discriminator && parentSchema.discriminator) return\n    const schArr: AnySchema[] = schema\n    const valid = gen.let(\"valid\", false)\n    const passing = gen.let(\"passing\", null)\n    const schValid = gen.name(\"_valid\")\n    cxt.setParams({passing})\n    // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n\n    gen.block(validateOneOf)\n\n    cxt.result(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error(true)\n    )\n\n    function validateOneOf(): void {\n      schArr.forEach((sch: AnySchema, i: number) => {\n        let schCxt: SchemaCxt | undefined\n        if (alwaysValidSchema(it, sch)) {\n          gen.var(schValid, true)\n        } else {\n          schCxt = cxt.subschema(\n            {\n              keyword: \"oneOf\",\n              schemaProp: i,\n              compositeRule: true,\n            },\n            schValid\n          )\n        }\n\n        if (i > 0) {\n          gen\n            .if(_`${schValid} && ${valid}`)\n            .assign(valid, false)\n            .assign(passing, _`[${passing}, ${i}]`)\n            .else()\n        }\n\n        gen.if(schValid, () => {\n          gen.assign(valid, true)\n          gen.assign(passing, i)\n          if (schCxt) cxt.mergeEvaluated(schCxt, Name)\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"allOf\",\n  schemaType: \"array\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    const valid = gen.name(\"valid\")\n    schema.forEach((sch: AnySchema, i: number) => {\n      if (alwaysValidSchema(it, sch)) return\n      const schCxt = cxt.subschema({keyword: \"allOf\", schemaProp: i}, valid)\n      cxt.ok(valid)\n      cxt.mergeEvaluated(schCxt)\n    })\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"../../compile\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\n\nexport type IfKeywordError = ErrorObject<\"if\", {failingKeyword: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params}) => str`must match \"${params.ifClause}\" schema`,\n  params: ({params}) => _`{failingKeyword: ${params.ifClause}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"if\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, parentSchema, it} = cxt\n    if (parentSchema.then === undefined && parentSchema.else === undefined) {\n      checkStrictMode(it, '\"if\" without \"then\" and \"else\" is ignored')\n    }\n    const hasThen = hasSchema(it, \"then\")\n    const hasElse = hasSchema(it, \"else\")\n    if (!hasThen && !hasElse) return\n\n    const valid = gen.let(\"valid\", true)\n    const schValid = gen.name(\"_valid\")\n    validateIf()\n    cxt.reset()\n\n    if (hasThen && hasElse) {\n      const ifClause = gen.let(\"ifClause\")\n      cxt.setParams({ifClause})\n      gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause))\n    } else if (hasThen) {\n      gen.if(schValid, validateClause(\"then\"))\n    } else {\n      gen.if(not(schValid), validateClause(\"else\"))\n    }\n\n    cxt.pass(valid, () => cxt.error(true))\n\n    function validateIf(): void {\n      const schCxt = cxt.subschema(\n        {\n          keyword: \"if\",\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        },\n        schValid\n      )\n      cxt.mergeEvaluated(schCxt)\n    }\n\n    function validateClause(keyword: string, ifClause?: Name): () => void {\n      return () => {\n        const schCxt = cxt.subschema({keyword}, schValid)\n        gen.assign(valid, schValid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n        if (ifClause) gen.assign(ifClause, _`${keyword}`)\n        else cxt.setParams({ifClause: keyword})\n      }\n    }\n  },\n}\n\nfunction hasSchema(it: SchemaObjCxt, keyword: string): boolean {\n  const schema = it.schema[keyword]\n  return schema !== undefined && !alwaysValidSchema(it, schema)\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"then\", \"else\"],\n  schemaType: [\"object\", \"boolean\"],\n  code({keyword, parentSchema, it}: KeywordCxt) {\n    if (parentSchema.if === undefined) checkStrictMode(it, `\"${keyword}\" without \"if\" is ignored`)\n  },\n}\n\nexport default def\n", "import type {ErrorNoParams, Vocabulary} from \"../../types\"\nimport additionalItems, {AdditionalItemsError} from \"./additionalItems\"\nimport prefixItems from \"./prefixItems\"\nimport items from \"./items\"\nimport items2020, {ItemsError} from \"./items2020\"\nimport contains, {ContainsError} from \"./contains\"\nimport dependencies, {DependenciesError} from \"./dependencies\"\nimport propertyNames, {PropertyNamesError} from \"./propertyNames\"\nimport additionalProperties, {AdditionalPropertiesError} from \"./additionalProperties\"\nimport properties from \"./properties\"\nimport patternProperties from \"./patternProperties\"\nimport notKeyword, {NotKeywordError} from \"./not\"\nimport anyOf, {AnyOfError} from \"./anyOf\"\nimport oneOf, {OneOfError} from \"./oneOf\"\nimport allOf from \"./allOf\"\nimport ifKeyword, {IfKeywordError} from \"./if\"\nimport thenElse from \"./thenElse\"\n\nexport default function getApplicator(draft2020 = false): Vocabulary {\n  const applicator = [\n    // any\n    notKeyword,\n    anyOf,\n    oneOf,\n    allOf,\n    ifKeyword,\n    thenElse,\n    // object\n    propertyNames,\n    additionalProperties,\n    dependencies,\n    properties,\n    patternProperties,\n  ]\n  // array\n  if (draft2020) applicator.push(prefixItems, items2020)\n  else applicator.push(additionalItems, items)\n  applicator.push(contains)\n  return applicator\n}\n\nexport type ApplicatorKeywordError =\n  | ErrorNoParams<\"false schema\">\n  | AdditionalItemsError\n  | ItemsError\n  | ContainsError\n  | AdditionalPropertiesError\n  | DependenciesError\n  | IfKeywordError\n  | AnyOfError\n  | OneOfError\n  | NotKeywordError\n  | PropertyNamesError\n", "import type {\n  AddedFormat,\n  FormatValidator,\n  AsyncFormatValidator,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, nil, or, Code, getProperty, regexpCode} from \"../../compile/codegen\"\n\ntype FormatValidate =\n  | FormatValidator<string>\n  | FormatValidator<number>\n  | AsyncFormatValidator<string>\n  | AsyncFormatValidator<number>\n  | RegExp\n  | string\n  | true\n\nexport type FormatError = ErrorObject<\"format\", {format: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match format \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{format: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"format\",\n  type: [\"number\", \"string\"],\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt, ruleType?: string) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    const {opts, errSchemaPath, schemaEnv, self} = it\n    if (!opts.validateFormats) return\n\n    if ($data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fDef = gen.const(\"fDef\", _`${fmts}[${schemaCode}]`)\n      const fType = gen.let(\"fType\")\n      const format = gen.let(\"format\")\n      // TODO simplify\n      gen.if(\n        _`typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`,\n        () => gen.assign(fType, _`${fDef}.type || \"string\"`).assign(format, _`${fDef}.validate`),\n        () => gen.assign(fType, _`\"string\"`).assign(format, fDef)\n      )\n      cxt.fail$data(or(unknownFmt(), invalidFmt()))\n\n      function unknownFmt(): Code {\n        if (opts.strictSchema === false) return nil\n        return _`${schemaCode} && !${format}`\n      }\n\n      function invalidFmt(): Code {\n        const callFormat = schemaEnv.$async\n          ? _`(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n          : _`${format}(${data})`\n        const validData = _`(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`\n        return _`${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`\n      }\n    }\n\n    function validateFormat(): void {\n      const formatDef: AddedFormat | undefined = self.formats[schema]\n      if (!formatDef) {\n        unknownFormat()\n        return\n      }\n      if (formatDef === true) return\n      const [fmtType, format, fmtRef] = getFormat(formatDef)\n      if (fmtType === ruleType) cxt.pass(validCondition())\n\n      function unknownFormat(): void {\n        if (opts.strictSchema === false) {\n          self.logger.warn(unknownMsg())\n          return\n        }\n        throw new Error(unknownMsg())\n\n        function unknownMsg(): string {\n          return `unknown format \"${schema as string}\" ignored in schema at path \"${errSchemaPath}\"`\n        }\n      }\n\n      function getFormat(fmtDef: AddedFormat): [string, FormatValidate, Code] {\n        const code =\n          fmtDef instanceof RegExp\n            ? regexpCode(fmtDef)\n            : opts.code.formats\n            ? _`${opts.code.formats}${getProperty(schema)}`\n            : undefined\n        const fmt = gen.scopeValue(\"formats\", {key: schema, ref: fmtDef, code})\n        if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n          return [fmtDef.type || \"string\", fmtDef.validate, _`${fmt}.validate`]\n        }\n\n        return [\"string\", fmtDef, fmt]\n      }\n\n      function validCondition(): Code {\n        if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n          if (!schemaEnv.$async) throw new Error(\"async format in sync schema\")\n          return _`await ${fmtRef}(${data})`\n        }\n        return typeof format == \"function\" ? _`${fmtRef}(${data})` : _`${fmtRef}.test(${data})`\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport formatKeyword from \"./format\"\n\nconst format: Vocabulary = [formatKeyword]\n\nexport default format\n", "import type {Vocabulary} from \"../types\"\n\nexport const metadataVocabulary: Vocabulary = [\n  \"title\",\n  \"description\",\n  \"default\",\n  \"deprecated\",\n  \"readOnly\",\n  \"writeOnly\",\n  \"examples\",\n]\n\nexport const contentVocabulary: Vocabulary = [\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"contentSchema\",\n]\n", "import type {Vocabulary} from \"../types\"\nimport coreVocabulary from \"./core\"\nimport validationVocabulary from \"./validation\"\nimport getApplicatorVocabulary from \"./applicator\"\nimport formatVocabulary from \"./format\"\nimport {metadataVocabulary, contentVocabulary} from \"./metadata\"\n\nconst draft7Vocabularies: Vocabulary[] = [\n  coreVocabulary,\n  validationVocabulary,\n  getApplicatorVocabulary(),\n  formatVocabulary,\n  metadataVocabulary,\n  contentVocabulary,\n]\n\nexport default draft7Vocabularies\n", "import type {ErrorObject} from \"../../types\"\n\nexport enum DiscrError {\n  Tag = \"tag\",\n  Mapping = \"mapping\",\n}\n\nexport type DiscrErrorObj<E extends DiscrError> = ErrorObject<\n  \"discriminator\",\n  {error: E; tag: string; tagValue: unknown},\n  string\n>\n", "import type {CodeKeywordDefinition, AnySchemaObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, getProperty, Name} from \"../../compile/codegen\"\nimport {DiscrError, DiscrErrorObj} from \"../discriminator/types\"\nimport {resolveRef, SchemaEnv} from \"../../compile\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {schemaHasRulesButRef} from \"../../compile/util\"\n\nexport type DiscriminatorError = DiscrErrorObj<DiscrError.Tag> | DiscrErrorObj<DiscrError.Mapping>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {discrError, tagName}}) =>\n    discrError === DiscrError.Tag\n      ? `tag \"${tagName}\" must be string`\n      : `value of tag \"${tagName}\" must be in oneOf`,\n  params: ({params: {discrError, tag, tagName}}) =>\n    _`{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"discriminator\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schema, parentSchema, it} = cxt\n    const {oneOf} = parentSchema\n    if (!it.opts.discriminator) {\n      throw new Error(\"discriminator: requires discriminator option\")\n    }\n    const tagName = schema.propertyName\n    if (typeof tagName != \"string\") throw new Error(\"discriminator: requires propertyName\")\n    if (schema.mapping) throw new Error(\"discriminator: mapping is not supported\")\n    if (!oneOf) throw new Error(\"discriminator: requires oneOf keyword\")\n    const valid = gen.let(\"valid\", false)\n    const tag = gen.const(\"tag\", _`${data}${getProperty(tagName)}`)\n    gen.if(\n      _`typeof ${tag} == \"string\"`,\n      () => validateMapping(),\n      () => cxt.error(false, {discrError: DiscrError.Tag, tag, tagName})\n    )\n    cxt.ok(valid)\n\n    function validateMapping(): void {\n      const mapping = getMapping()\n      gen.if(false)\n      for (const tagValue in mapping) {\n        gen.elseIf(_`${tag} === ${tagValue}`)\n        gen.assign(valid, applyTagSchema(mapping[tagValue]))\n      }\n      gen.else()\n      cxt.error(false, {discrError: DiscrError.Mapping, tag, tagName})\n      gen.endIf()\n    }\n\n    function applyTagSchema(schemaProp?: number): Name {\n      const _valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema({keyword: \"oneOf\", schemaProp}, _valid)\n      cxt.mergeEvaluated(schCxt, Name)\n      return _valid\n    }\n\n    function getMapping(): {[T in string]?: number} {\n      const oneOfMapping: {[T in string]?: number} = {}\n      const topRequired = hasRequired(parentSchema)\n      let tagRequired = true\n      for (let i = 0; i < oneOf.length; i++) {\n        let sch = oneOf[i]\n        if (sch?.$ref && !schemaHasRulesButRef(sch, it.self.RULES)) {\n          const ref = sch.$ref\n          sch = resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref)\n          if (sch instanceof SchemaEnv) sch = sch.schema\n          if (sch === undefined) throw new MissingRefError(it.opts.uriResolver, it.baseId, ref)\n        }\n        const propSch = sch?.properties?.[tagName]\n        if (typeof propSch != \"object\") {\n          throw new Error(\n            `discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`\n          )\n        }\n        tagRequired = tagRequired && (topRequired || hasRequired(sch))\n        addMappings(propSch, i)\n      }\n      if (!tagRequired) throw new Error(`discriminator: \"${tagName}\" must be required`)\n      return oneOfMapping\n\n      function hasRequired({required}: AnySchemaObject): boolean {\n        return Array.isArray(required) && required.includes(tagName)\n      }\n\n      function addMappings(sch: AnySchemaObject, i: number): void {\n        if (sch.const) {\n          addMapping(sch.const, i)\n        } else if (sch.enum) {\n          for (const tagValue of sch.enum) {\n            addMapping(tagValue, i)\n          }\n        } else {\n          throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`)\n        }\n      }\n\n      function addMapping(tagValue: unknown, i: number): void {\n        if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n          throw new Error(`discriminator: \"${tagName}\" values must be unique strings`)\n        }\n        oneOfMapping[tagValue] = i\n      }\n    }\n  },\n}\n\nexport default def\n", "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$id\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Core schema meta-schema\",\n  \"definitions\": {\n    \"schemaArray\": {\n      \"type\": \"array\",\n      \"minItems\": 1,\n      \"items\": {\"$ref\": \"#\"}\n    },\n    \"nonNegativeInteger\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"nonNegativeIntegerDefault0\": {\n      \"allOf\": [{\"$ref\": \"#/definitions/nonNegativeInteger\"}, {\"default\": 0}]\n    },\n    \"simpleTypes\": {\n      \"enum\": [\"array\", \"boolean\", \"integer\", \"null\", \"number\", \"object\", \"string\"]\n    },\n    \"stringArray\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"uniqueItems\": true,\n      \"default\": []\n    }\n  },\n  \"type\": [\"object\", \"boolean\"],\n  \"properties\": {\n    \"$id\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$schema\": {\n      \"type\": \"string\",\n      \"format\": \"uri\"\n    },\n    \"$ref\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$comment\": {\n      \"type\": \"string\"\n    },\n    \"title\": {\n      \"type\": \"string\"\n    },\n    \"description\": {\n      \"type\": \"string\"\n    },\n    \"default\": true,\n    \"readOnly\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"examples\": {\n      \"type\": \"array\",\n      \"items\": true\n    },\n    \"multipleOf\": {\n      \"type\": \"number\",\n      \"exclusiveMinimum\": 0\n    },\n    \"maximum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMaximum\": {\n      \"type\": \"number\"\n    },\n    \"minimum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMinimum\": {\n      \"type\": \"number\"\n    },\n    \"maxLength\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minLength\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"pattern\": {\n      \"type\": \"string\",\n      \"format\": \"regex\"\n    },\n    \"additionalItems\": {\"$ref\": \"#\"},\n    \"items\": {\n      \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/schemaArray\"}],\n      \"default\": true\n    },\n    \"maxItems\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minItems\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"uniqueItems\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"contains\": {\"$ref\": \"#\"},\n    \"maxProperties\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minProperties\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"required\": {\"$ref\": \"#/definitions/stringArray\"},\n    \"additionalProperties\": {\"$ref\": \"#\"},\n    \"definitions\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"properties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"patternProperties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"propertyNames\": {\"format\": \"regex\"},\n      \"default\": {}\n    },\n    \"dependencies\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\n        \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/stringArray\"}]\n      }\n    },\n    \"propertyNames\": {\"$ref\": \"#\"},\n    \"const\": true,\n    \"enum\": {\n      \"type\": \"array\",\n      \"items\": true,\n      \"minItems\": 1,\n      \"uniqueItems\": true\n    },\n    \"type\": {\n      \"anyOf\": [\n        {\"$ref\": \"#/definitions/simpleTypes\"},\n        {\n          \"type\": \"array\",\n          \"items\": {\"$ref\": \"#/definitions/simpleTypes\"},\n          \"minItems\": 1,\n          \"uniqueItems\": true\n        }\n      ]\n    },\n    \"format\": {\"type\": \"string\"},\n    \"contentMediaType\": {\"type\": \"string\"},\n    \"contentEncoding\": {\"type\": \"string\"},\n    \"if\": {\"$ref\": \"#\"},\n    \"then\": {\"$ref\": \"#\"},\n    \"else\": {\"$ref\": \"#\"},\n    \"allOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"anyOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"oneOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"not\": {\"$ref\": \"#\"}\n  },\n  \"default\": true\n}\n", "import type {AnySchemaObject} from \"./types\"\nimport AjvCore from \"./core\"\nimport draft7Vocabularies from \"./vocabularies/draft7\"\nimport discriminator from \"./vocabularies/discriminator\"\nimport * as draft7MetaSchema from \"./refs/json-schema-draft-07.json\"\n\nconst META_SUPPORT_DATA = [\"/properties\"]\n\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\"\n\nexport class Ajv extends AjvCore {\n  _addVocabularies(): void {\n    super._addVocabularies()\n    draft7Vocabularies.forEach((v) => this.addVocabulary(v))\n    if (this.opts.discriminator) this.addKeyword(discriminator)\n  }\n\n  _addDefaultMetaSchema(): void {\n    super._addDefaultMetaSchema()\n    if (!this.opts.meta) return\n    const metaSchema = this.opts.$data\n      ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n      : draft7MetaSchema\n    this.addMetaSchema(metaSchema, META_SCHEMA_ID, false)\n    this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    return (this.opts.defaultMeta =\n      super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined))\n  }\n}\n\nmodule.exports = exports = Ajv\nmodule.exports.Ajv = Ajv\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default Ajv\n\nexport {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  SchemaValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {Plugin, Options, CodeOptions, InstanceOptions, Logger, ErrorsTextOptions} from \"./core\"\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\nexport {default as ValidationError} from \"./runtime/validation_error\"\nexport {default as MissingRefError} from \"./compile/ref_error\"\n", "import type {Plugin, CodeKeywordDefinition, KeywordCxt, ErrorObject, Code} from \"ajv\"\nimport Ajv, {_, str, stringify, Name} from \"ajv\"\nimport {and, or, not, strConcat} from \"ajv/dist/compile/codegen\"\nimport {safeStringify, _Code} from \"ajv/dist/compile/codegen/code\"\nimport {getData} from \"ajv/dist/compile/validate\"\nimport {reportError} from \"ajv/dist/compile/errors\"\nimport N from \"ajv/dist/compile/names\"\n\ntype ErrorsMap<T extends string | number> = {[P in T]?: ErrorObject[]}\n\ntype StringMap = {[P in string]?: string}\n\ntype ErrorMessageSchema = {\n  properties?: StringMap\n  items?: string[]\n  required?: string | StringMap\n  dependencies?: string | StringMap\n  _?: string\n} & {[K in string]?: string | StringMap}\n\ninterface ChildErrors {\n  props?: ErrorsMap<string>\n  items?: ErrorsMap<number>\n}\n\nconst keyword = \"errorMessage\"\n\nconst used: Name = new Name(\"emUsed\")\n\nconst KEYWORD_PROPERTY_PARAMS = {\n  required: \"missingProperty\",\n  dependencies: \"property\",\n  dependentRequired: \"property\",\n}\n\nexport interface ErrorMessageOptions {\n  keepErrors?: boolean\n  singleError?: boolean | string\n}\n\nconst INTERPOLATION = /\\$\\{[^}]+\\}/\nconst INTERPOLATION_REPLACE = /\\$\\{([^}]+)\\}/g\nconst EMPTY_STR = /^\"\"\\s*\\+\\s*|\\s*\\+\\s*\"\"$/g\n\nfunction errorMessage(options: ErrorMessageOptions): CodeKeywordDefinition {\n  return {\n    keyword,\n    schemaType: [\"string\", \"object\"],\n    post: true,\n    code(cxt: KeywordCxt) {\n      const {gen, data, schema, schemaValue, it} = cxt\n      if (it.createErrors === false) return\n      const sch: ErrorMessageSchema | string = schema\n      const instancePath = strConcat(N.instancePath, it.errorPath)\n      gen.if(_`${N.errors} > 0`, () => {\n        if (typeof sch == \"object\") {\n          const [kwdPropErrors, kwdErrors] = keywordErrorsConfig(sch)\n          if (kwdErrors) processKeywordErrors(kwdErrors)\n          if (kwdPropErrors) processKeywordPropErrors(kwdPropErrors)\n          processChildErrors(childErrorsConfig(sch))\n        }\n        const schMessage = typeof sch == \"string\" ? sch : sch._\n        if (schMessage) processAllErrors(schMessage)\n        if (!options.keepErrors) removeUsedErrors()\n      })\n\n      function childErrorsConfig({properties, items}: ErrorMessageSchema): ChildErrors {\n        const errors: ChildErrors = {}\n        if (properties) {\n          errors.props = {}\n          for (const p in properties) errors.props[p] = []\n        }\n        if (items) {\n          errors.items = {}\n          for (let i = 0; i < items.length; i++) errors.items[i] = []\n        }\n        return errors\n      }\n\n      function keywordErrorsConfig(\n        emSchema: ErrorMessageSchema\n      ): [{[K in string]?: ErrorsMap<string>} | undefined, ErrorsMap<string> | undefined] {\n        let propErrors: {[K in string]?: ErrorsMap<string>} | undefined\n        let errors: ErrorsMap<string> | undefined\n\n        for (const k in emSchema) {\n          if (k === \"properties\" || k === \"items\") continue\n          const kwdSch = emSchema[k]\n          if (typeof kwdSch == \"object\") {\n            propErrors ||= {}\n            const errMap: ErrorsMap<string> = (propErrors[k] = {})\n            for (const p in kwdSch) errMap[p] = []\n          } else {\n            errors ||= {}\n            errors[k] = []\n          }\n        }\n        return [propErrors, errors]\n      }\n\n      function processKeywordErrors(kwdErrors: ErrorsMap<string>): void {\n        const kwdErrs = gen.const(\"emErrors\", stringify(kwdErrors))\n        const templates = gen.const(\"templates\", getTemplatesCode(kwdErrors, schema))\n        gen.forOf(\"err\", N.vErrors, (err) =>\n          gen.if(matchKeywordError(err, kwdErrs), () =>\n            gen.code(_`${kwdErrs}[${err}.keyword].push(${err})`).assign(_`${err}.${used}`, true)\n          )\n        )\n        const {singleError} = options\n        if (singleError) {\n          const message = gen.let(\"message\", _`\"\"`)\n          const paramsErrors = gen.let(\"paramsErrors\", _`[]`)\n          loopErrors((key) => {\n            gen.if(message, () =>\n              gen.code(_`${message} += ${typeof singleError == \"string\" ? singleError : \";\"}`)\n            )\n            gen.code(_`${message} += ${errMessage(key)}`)\n            gen.assign(paramsErrors, _`${paramsErrors}.concat(${kwdErrs}[${key}])`)\n          })\n          reportError(cxt, {message, params: _`{errors: ${paramsErrors}}`})\n        } else {\n          loopErrors((key) =>\n            reportError(cxt, {\n              message: errMessage(key),\n              params: _`{errors: ${kwdErrs}[${key}]}`,\n            })\n          )\n        }\n\n        function loopErrors(body: (key: Name) => void): void {\n          gen.forIn(\"key\", kwdErrs, (key) => gen.if(_`${kwdErrs}[${key}].length`, () => body(key)))\n        }\n\n        function errMessage(key: Name): Code {\n          return _`${key} in ${templates} ? ${templates}[${key}]() : ${schemaValue}[${key}]`\n        }\n      }\n\n      function processKeywordPropErrors(kwdPropErrors: {[K in string]?: ErrorsMap<string>}): void {\n        const kwdErrs = gen.const(\"emErrors\", stringify(kwdPropErrors))\n        const templatesCode: [string, Code][] = []\n        for (const k in kwdPropErrors) {\n          templatesCode.push([\n            k,\n            getTemplatesCode(kwdPropErrors[k] as ErrorsMap<string>, schema[k]),\n          ])\n        }\n        const templates = gen.const(\"templates\", gen.object(...templatesCode))\n\n        const kwdPropParams = gen.scopeValue(\"obj\", {\n          ref: KEYWORD_PROPERTY_PARAMS,\n          code: stringify(KEYWORD_PROPERTY_PARAMS),\n        })\n        const propParam = gen.let(\"emPropParams\")\n        const paramsErrors = gen.let(\"emParamsErrors\")\n\n        gen.forOf(\"err\", N.vErrors, (err) =>\n          gen.if(matchKeywordError(err, kwdErrs), () => {\n            gen.assign(propParam, _`${kwdPropParams}[${err}.keyword]`)\n            gen.assign(paramsErrors, _`${kwdErrs}[${err}.keyword][${err}.params[${propParam}]]`)\n            gen.if(paramsErrors, () =>\n              gen.code(_`${paramsErrors}.push(${err})`).assign(_`${err}.${used}`, true)\n            )\n          })\n        )\n\n        gen.forIn(\"key\", kwdErrs, (key) =>\n          gen.forIn(\"keyProp\", _`${kwdErrs}[${key}]`, (keyProp) => {\n            gen.assign(paramsErrors, _`${kwdErrs}[${key}][${keyProp}]`)\n            gen.if(_`${paramsErrors}.length`, () => {\n              const tmpl = gen.const(\n                \"tmpl\",\n                _`${templates}[${key}] && ${templates}[${key}][${keyProp}]`\n              )\n              reportError(cxt, {\n                message: _`${tmpl} ? ${tmpl}() : ${schemaValue}[${key}][${keyProp}]`,\n                params: _`{errors: ${paramsErrors}}`,\n              })\n            })\n          })\n        )\n      }\n\n      function processChildErrors(childErrors: ChildErrors): void {\n        const {props, items} = childErrors\n        if (!props && !items) return\n        const isObj = _`typeof ${data} == \"object\"`\n        const isArr = _`Array.isArray(${data})`\n        const childErrs = gen.let(\"emErrors\")\n        let childKwd: Name\n        let childProp: Code\n        const templates = gen.let(\"templates\")\n        if (props && items) {\n          childKwd = gen.let(\"emChildKwd\")\n          gen.if(isObj)\n          gen.if(\n            isArr,\n            () => {\n              init(items, schema.items)\n              gen.assign(childKwd, str`items`)\n            },\n            () => {\n              init(props, schema.properties)\n              gen.assign(childKwd, str`properties`)\n            }\n          )\n          childProp = _`[${childKwd}]`\n        } else if (items) {\n          gen.if(isArr)\n          init(items, schema.items)\n          childProp = _`.items`\n        } else if (props) {\n          gen.if(and(isObj, not(isArr)))\n          init(props, schema.properties)\n          childProp = _`.properties`\n        }\n\n        gen.forOf(\"err\", N.vErrors, (err) =>\n          ifMatchesChildError(err, childErrs, (child) =>\n            gen.code(_`${childErrs}[${child}].push(${err})`).assign(_`${err}.${used}`, true)\n          )\n        )\n\n        gen.forIn(\"key\", childErrs, (key) =>\n          gen.if(_`${childErrs}[${key}].length`, () => {\n            reportError(cxt, {\n              message: _`${key} in ${templates} ? ${templates}[${key}]() : ${schemaValue}${childProp}[${key}]`,\n              params: _`{errors: ${childErrs}[${key}]}`,\n            })\n            gen.assign(\n              _`${N.vErrors}[${N.errors}-1].instancePath`,\n              _`${instancePath} + \"/\" + ${key}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`\n            )\n          })\n        )\n\n        gen.endIf()\n\n        function init<T extends string | number>(\n          children: ErrorsMap<T>,\n          msgs: {[K in string]?: string}\n        ): void {\n          gen.assign(childErrs, stringify(children))\n          gen.assign(templates, getTemplatesCode(children, msgs))\n        }\n      }\n\n      function processAllErrors(schMessage: string): void {\n        const errs = gen.const(\"emErrs\", _`[]`)\n        gen.forOf(\"err\", N.vErrors, (err) =>\n          gen.if(matchAnyError(err), () =>\n            gen.code(_`${errs}.push(${err})`).assign(_`${err}.${used}`, true)\n          )\n        )\n        gen.if(_`${errs}.length`, () =>\n          reportError(cxt, {\n            message: templateExpr(schMessage),\n            params: _`{errors: ${errs}}`,\n          })\n        )\n      }\n\n      function removeUsedErrors(): void {\n        const errs = gen.const(\"emErrs\", _`[]`)\n        gen.forOf(\"err\", N.vErrors, (err) =>\n          gen.if(_`!${err}.${used}`, () => gen.code(_`${errs}.push(${err})`))\n        )\n        gen.assign(N.vErrors, errs).assign(N.errors, _`${errs}.length`)\n      }\n\n      function matchKeywordError(err: Name, kwdErrs: Name): Code {\n        return and(\n          _`${err}.keyword !== ${keyword}`,\n          _`!${err}.${used}`,\n          _`${err}.instancePath === ${instancePath}`,\n          _`${err}.keyword in ${kwdErrs}`,\n          // TODO match the end of the string?\n          _`${err}.schemaPath.indexOf(${it.errSchemaPath}) === 0`,\n          _`/^\\\\/[^\\\\/]*$/.test(${err}.schemaPath.slice(${it.errSchemaPath.length}))`\n        )\n      }\n\n      function ifMatchesChildError(\n        err: Name,\n        childErrs: Name,\n        thenBody: (child: Name) => void\n      ): void {\n        gen.if(\n          and(\n            _`${err}.keyword !== ${keyword}`,\n            _`!${err}.${used}`,\n            _`${err}.instancePath.indexOf(${instancePath}) === 0`\n          ),\n          () => {\n            const childRegex = gen.scopeValue(\"pattern\", {\n              ref: /^\\/([^/]*)(?:\\/|$)/,\n              code: _`new RegExp(\"^\\\\\\/([^/]*)(?:\\\\\\/|$)\")`,\n            })\n            const matches = gen.const(\n              \"emMatches\",\n              _`${childRegex}.exec(${err}.instancePath.slice(${instancePath}.length))`\n            )\n            const child = gen.const(\n              \"emChild\",\n              _`${matches} && ${matches}[1].replace(/~1/g, \"/\").replace(/~0/g, \"~\")`\n            )\n            gen.if(_`${child} !== undefined && ${child} in ${childErrs}`, () => thenBody(child))\n          }\n        )\n      }\n\n      function matchAnyError(err: Name): Code {\n        return and(\n          _`${err}.keyword !== ${keyword}`,\n          _`!${err}.${used}`,\n          or(\n            _`${err}.instancePath === ${instancePath}`,\n            and(\n              _`${err}.instancePath.indexOf(${instancePath}) === 0`,\n              _`${err}.instancePath[${instancePath}.length] === \"/\"`\n            )\n          ),\n          _`${err}.schemaPath.indexOf(${it.errSchemaPath}) === 0`,\n          _`${err}.schemaPath[${it.errSchemaPath}.length] === \"/\"`\n        )\n      }\n\n      function getTemplatesCode(keys: Record<string, any>, msgs: {[K in string]?: string}): Code {\n        const templatesCode: [string, Code][] = []\n        for (const k in keys) {\n          const msg = msgs[k] as string\n          if (INTERPOLATION.test(msg)) templatesCode.push([k, templateFunc(msg)])\n        }\n        return gen.object(...templatesCode)\n      }\n\n      function templateExpr(msg: string): Code {\n        if (!INTERPOLATION.test(msg)) return stringify(msg)\n        return new _Code(\n          safeStringify(msg)\n            .replace(\n              INTERPOLATION_REPLACE,\n              (_s, ptr) => `\" + JSON.stringify(${getData(ptr, it)}) + \"`\n            )\n            .replace(EMPTY_STR, \"\")\n        )\n      }\n\n      function templateFunc(msg: string): Code {\n        return _`function(){return ${templateExpr(msg)}}`\n      }\n    },\n    metaSchema: {\n      anyOf: [\n        {type: \"string\"},\n        {\n          type: \"object\",\n          properties: {\n            properties: {$ref: \"#/$defs/stringMap\"},\n            items: {$ref: \"#/$defs/stringList\"},\n            required: {$ref: \"#/$defs/stringOrMap\"},\n            dependencies: {$ref: \"#/$defs/stringOrMap\"},\n          },\n          additionalProperties: {type: \"string\"},\n        },\n      ],\n      $defs: {\n        stringMap: {\n          type: \"object\",\n          additionalProperties: {type: \"string\"},\n        },\n        stringOrMap: {\n          anyOf: [{type: \"string\"}, {$ref: \"#/$defs/stringMap\"}],\n        },\n        stringList: {type: \"array\", items: {type: \"string\"}},\n      },\n    },\n  }\n}\n\nconst ajvErrors: Plugin<ErrorMessageOptions> = (\n  ajv: Ajv,\n  options: ErrorMessageOptions = {}\n): Ajv => {\n  if (!ajv.opts.allErrors) throw new Error(\"ajv-errors: Ajv option allErrors must be true\")\n  if (ajv.opts.jsPropertySyntax) {\n    throw new Error(\"ajv-errors: ajv option jsPropertySyntax is not supported\")\n  }\n  return ajv.addKeyword(errorMessage(options))\n}\n\nexport default ajvErrors\nmodule.exports = ajvErrors\nmodule.exports.default = ajvErrors\n", "export { Validator } from './components/Validator';\nexport { checkDuplicateTokens } from './utils/checkDuplicateTokens';\nexport { checkVisualizationsInStructure } from './utils/checkVisualizationsInStructure';\nexport { checkInputsInStructure } from './utils/checkInputsInStructure';\nexport { DashboardValidator } from './validators/DashboardValidator';\n", "\nimport * as defaultImport from \"react\";\nexport * from \"react\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { useCallback, useEffect, useRef } from 'react';\nimport type { useWorkerArgs, EventHandler } from '../types';\n\nexport const useWorker = ({\n    WorkerClass,\n    onMessage,\n    postMessage,\n}: useWorkerArgs) => {\n    const enabled = typeof Worker !== 'undefined';\n    const isFirstRender = useRef(true);\n\n    const createInitialWorker = useCallback(() => {\n        // if this is not the first render, or web workers are not enabled\n        //  we do NOT want to create a Web Worker\n        if (!isFirstRender.current || !enabled) {\n            return undefined;\n        }\n        isFirstRender.current = false;\n        return new WorkerClass();\n    }, [WorkerClass, enabled]);\n\n    const worker = useRef<Worker | undefined>(createInitialWorker());\n\n    useEffect(() => {\n        // needs to be copied to a variable because `ref.current` might be unset by the time the\n        //  cleanup function runs\n        const workerToCleanUp = worker.current;\n        return () => {\n            workerToCleanUp?.terminate?.();\n        };\n    }, []);\n\n    const onMessageHandlerRef = useRef<EventHandler | undefined>();\n    onMessageHandlerRef.current = onMessage;\n\n    const onMessageHandler = useCallback<EventHandler>((...args) => {\n        onMessageHandlerRef.current?.(...args);\n    }, []);\n\n    useEffect(() => {\n        const currentWorker = worker.current;\n\n        if (enabled && currentWorker) {\n            currentWorker.addEventListener('message', onMessageHandler);\n        }\n\n        return () => {\n            if (enabled && currentWorker) {\n                currentWorker.removeEventListener('message', onMessageHandler);\n            }\n        };\n    }, [onMessageHandler, enabled]);\n\n    useEffect(() => {\n        if (enabled && worker.current) {\n            postMessage(worker.current);\n        }\n    }, [enabled, postMessage]);\n\n    return { enabled };\n};\n", "export default function InlineWorker() {\n    const url = URL.createObjectURL(new Blob([\"\\\"use strict\\\";var ud=Object.create;var ts=Object.defineProperty,cd=Object.defineProperties,ld=Object.getOwnPropertyDescriptor,dd=Object.getOwnPropertyDescriptors,fd=Object.getOwnPropertyNames,to=Object.getOwnPropertySymbols,pd=Object.getPrototypeOf,so=Object.prototype.hasOwnProperty,hd=Object.prototype.propertyIsEnumerable;var ro=(e,t,r)=>t in e?ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))so.call(t,r)&&ro(e,r,t[r]);if(to)for(var r of to(t))hd.call(t,r)&&ro(e,r,t[r]);return e},W=(e,t)=>cd(e,dd(t));var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var md=(e,t,r,s)=>{if(t&&typeof t==\\\"object\\\"||typeof t==\\\"function\\\")for(let n of fd(t))!so.call(e,n)&&n!==r&&ts(e,n,{get:()=>t[n],enumerable:!(s=ld(t,n))||s.enumerable});return e};var pe=(e,t,r)=>(r=e!=null?ud(pd(e)):{},md(t||!e||!e.__esModule?ts(r,\\\"default\\\",{value:e,enumerable:!0}):r,e));var et=(e,t,r)=>new Promise((s,n)=>{var o=u=>{try{i(r.next(u))}catch(c){n(c)}},a=u=>{try{i(r.throw(u))}catch(c){n(c)}},i=u=>u.done?s(u.value):Promise.resolve(u.value).then(o,a);i((r=r.apply(e,t)).next())});var Te=d(tt=>{\\\"use strict\\\";Object.defineProperty(tt,\\\"__esModule\\\",{value:!0});tt.gettext=yd;tt._=_d;tt.setSharedTranslator=no;tt.resetSharedTranslator=oo;var rs;function yd(){return rs.apply(void 0,arguments)}function _d(){return rs.apply(void 0,arguments)}function no(e){rs=e}function oo(){no(typeof window!=\\\"undefined\\\"&&window.gettext||function(e){return e})}oo()});var Oo=d((jv,No)=>{var Sd=/\\\\s/;function Pd(e){for(var t=e.length;t--&&Sd.test(e.charAt(t)););return t}No.exports=Pd});var Io=d((kv,To)=>{var Nd=Oo(),Od=/^\\\\s+/;function Td(e){return e&&e.slice(0,Nd(e)+1).replace(Od,\\\"\\\")}To.exports=Td});var St=d((Cv,qo)=>{function Id(e){var t=typeof e;return e!=null&&(t==\\\"object\\\"||t==\\\"function\\\")}qo.exports=Id});var ko=d((Rv,jo)=>{var qd=typeof global==\\\"object\\\"&&global&&global.Object===Object&&global;jo.exports=qd});var Pt=d((Av,Co)=>{var jd=ko(),kd=typeof self==\\\"object\\\"&&self&&self.Object===Object&&self,Cd=jd||kd||Function(\\\"return this\\\")();Co.exports=Cd});var cr=d((Dv,Ro)=>{var Rd=Pt(),Ad=Rd.Symbol;Ro.exports=Ad});var xo=d((Mv,Mo)=>{var Ao=cr(),Do=Object.prototype,Dd=Do.hasOwnProperty,Md=Do.toString,Nt=Ao?Ao.toStringTag:void 0;function xd(e){var t=Dd.call(e,Nt),r=e[Nt];try{e[Nt]=void 0;var s=!0}catch(o){}var n=Md.call(e);return s&&(t?e[Nt]=r:delete e[Nt]),n}Mo.exports=xd});var zo=d((xv,Vo)=>{var Vd=Object.prototype,zd=Vd.toString;function Ld(e){return zd.call(e)}Vo.exports=Ld});var Ot=d((Vv,Fo)=>{var Lo=cr(),Ud=xo(),Fd=zo(),Kd=\\\"[object Null]\\\",Hd=\\\"[object Undefined]\\\",Uo=Lo?Lo.toStringTag:void 0;function Gd(e){return e==null?e===void 0?Hd:Kd:Uo&&Uo in Object(e)?Ud(e):Fd(e)}Fo.exports=Gd});var Tt=d((zv,Ko)=>{function Jd(e){return e!=null&&typeof e==\\\"object\\\"}Ko.exports=Jd});var It=d((Lv,Ho)=>{var Wd=Ot(),Xd=Tt(),Bd=\\\"[object Symbol]\\\";function Yd(e){return typeof e==\\\"symbol\\\"||Xd(e)&&Wd(e)==Bd}Ho.exports=Yd});var lr=d((Uv,Wo)=>{var Zd=Io(),Go=St(),Qd=It(),Jo=NaN,ef=/^[-+]0x[0-9a-f]+$/i,tf=/^0b[01]+$/i,rf=/^0o[0-7]+$/i,sf=parseInt;function nf(e){if(typeof e==\\\"number\\\")return e;if(Qd(e))return Jo;if(Go(e)){var t=typeof e.valueOf==\\\"function\\\"?e.valueOf():e;e=Go(t)?t+\\\"\\\":t}if(typeof e!=\\\"string\\\")return e===0?e:+e;e=Zd(e);var r=tf.test(e);return r||rf.test(e)?sf(e.slice(2),r?2:8):ef.test(e)?Jo:+e}Wo.exports=nf});var Bo=d((Fv,Xo)=>{var of=Ot(),af=Tt(),uf=\\\"[object Number]\\\";function cf(e){return typeof e==\\\"number\\\"||af(e)&&of(e)==uf}Xo.exports=cf});var Qo=d((Kv,Zo)=>{var lf=lr(),Yo=1/0,df=17976931348623157e292;function ff(e){if(!e)return e===0?e:0;if(e=lf(e),e===Yo||e===-Yo){var t=e<0?-1:1;return t*df}return e===e?e:0}Zo.exports=ff});var ss=d((Hv,ea)=>{var pf=Qo();function hf(e){var t=pf(e),r=t%1;return t===t?r?t-r:t:0}ea.exports=hf});var ra=d((Gv,ta)=>{function mf(e,t){for(var r=-1,s=e==null?0:e.length,n=Array(s);++r<s;)n[r]=t(e[r],r,e);return n}ta.exports=mf});var qt=d((Jv,sa)=>{var yf=Array.isArray;sa.exports=yf});var ca=d((Wv,ua)=>{var na=cr(),_f=ra(),gf=qt(),$f=It(),vf=1/0,oa=na?na.prototype:void 0,aa=oa?oa.toString:void 0;function ia(e){if(typeof e==\\\"string\\\")return e;if(gf(e))return _f(e,ia)+\\\"\\\";if($f(e))return aa?aa.call(e):\\\"\\\";var t=e+\\\"\\\";return t==\\\"0\\\"&&1/e==-vf?\\\"-0\\\":t}ua.exports=ia});var dr=d((Xv,la)=>{var bf=ca();function Ef(e){return e==null?\\\"\\\":bf(e)}la.exports=Ef});var pa=d((Bv,fa)=>{var wf=Pt(),Sf=ss(),Pf=lr(),da=dr(),Nf=wf.isFinite,Of=Math.min;function Tf(e){var t=Math[e];return function(r,s){if(r=Pf(r),s=s==null?0:Of(Sf(s),292),s&&Nf(r)){var n=(da(r)+\\\"e\\\").split(\\\"e\\\"),o=t(n[0]+\\\"e\\\"+(+n[1]+s));return n=(da(o)+\\\"e\\\").split(\\\"e\\\"),+(n[0]+\\\"e\\\"+(+n[1]-s))}return t(r)}}fa.exports=Tf});var ma=d((Yv,ha)=>{var If=pa(),qf=If(\\\"round\\\");ha.exports=qf});var ga=d(Fe=>{\\\"use strict\\\";Object.defineProperty(Fe,\\\"__esModule\\\",{value:!0});Fe.strictParseFloat=Af;Fe.roundToDecimal=Df;Fe.floorPowerOfTen=Mf;Fe.isLessThanMinSafeInt=xf;Fe.isGreaterThanMaxSafeInt=Vf;var ya=_a(Bo()),jf=_a(ma());function _a(e){return e&&e.__esModule?e:{default:e}}var kf=/(^[-+]?[0-9]*[.]?[0-9]*$)|(^[-+]?[0-9][.]?[0-9]*e[-+]?[0-9][0-9]*$)/i,Cf=-9007199254740991,Rf=9007199254740991;function Af(e){return kf.test(e)?parseFloat(e):NaN}function Df(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,jf.default)(e,t*-1)}function Mf(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function xf(e){return(0,ya.default)(e)?e<=Cf:!1}function Vf(e){return(0,ya.default)(e)?e>=Rf:!1}});var va=d((Qv,$a)=>{var zf=Object.prototype,Lf=zf.hasOwnProperty;function Uf(e,t){return e!=null&&Lf.call(e,t)}$a.exports=Uf});var Ea=d((eb,ba)=>{var Ff=qt(),Kf=It(),Hf=/\\\\.|\\\\[(?:[^[\\\\]]*|([\\\"'])(?:(?!\\\\1)[^\\\\\\\\]|\\\\\\\\.)*?\\\\1)\\\\]/,Gf=/^\\\\w*$/;function Jf(e,t){if(Ff(e))return!1;var r=typeof e;return r==\\\"number\\\"||r==\\\"symbol\\\"||r==\\\"boolean\\\"||e==null||Kf(e)?!0:Gf.test(e)||!Hf.test(e)||t!=null&&e in Object(t)}ba.exports=Jf});var ns=d((tb,wa)=>{var Wf=Ot(),Xf=St(),Bf=\\\"[object AsyncFunction]\\\",Yf=\\\"[object Function]\\\",Zf=\\\"[object GeneratorFunction]\\\",Qf=\\\"[object Proxy]\\\";function ep(e){if(!Xf(e))return!1;var t=Wf(e);return t==Yf||t==Zf||t==Bf||t==Qf}wa.exports=ep});var Pa=d((rb,Sa)=>{var tp=Pt(),rp=tp[\\\"__core-js_shared__\\\"];Sa.exports=rp});var Ta=d((sb,Oa)=>{var os=Pa(),Na=function(){var e=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||\\\"\\\");return e?\\\"Symbol(src)_1.\\\"+e:\\\"\\\"}();function sp(e){return!!Na&&Na in e}Oa.exports=sp});var qa=d((nb,Ia)=>{var np=Function.prototype,op=np.toString;function ap(e){if(e!=null){try{return op.call(e)}catch(t){}try{return e+\\\"\\\"}catch(t){}}return\\\"\\\"}Ia.exports=ap});var ka=d((ob,ja)=>{var ip=ns(),up=Ta(),cp=St(),lp=qa(),dp=/[\\\\\\\\^$.*+?()[\\\\]{}|]/g,fp=/^\\\\[object .+?Constructor\\\\]$/,pp=Function.prototype,hp=Object.prototype,mp=pp.toString,yp=hp.hasOwnProperty,_p=RegExp(\\\"^\\\"+mp.call(yp).replace(dp,\\\"\\\\\\\\$&\\\").replace(/hasOwnProperty|(function).*?(?=\\\\\\\\\\\\()| for .+?(?=\\\\\\\\\\\\])/g,\\\"$1.*?\\\")+\\\"$\\\");function gp(e){if(!cp(e)||up(e))return!1;var t=ip(e)?_p:fp;return t.test(lp(e))}ja.exports=gp});var Ra=d((ab,Ca)=>{function $p(e,t){return e==null?void 0:e[t]}Ca.exports=$p});var as=d((ib,Aa)=>{var vp=ka(),bp=Ra();function Ep(e,t){var r=bp(e,t);return vp(r)?r:void 0}Aa.exports=Ep});var jt=d((ub,Da)=>{var wp=as(),Sp=wp(Object,\\\"create\\\");Da.exports=Sp});var Va=d((cb,xa)=>{var Ma=jt();function Pp(){this.__data__=Ma?Ma(null):{},this.size=0}xa.exports=Pp});var La=d((lb,za)=>{function Np(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}za.exports=Np});var Fa=d((db,Ua)=>{var Op=jt(),Tp=\\\"__lodash_hash_undefined__\\\",Ip=Object.prototype,qp=Ip.hasOwnProperty;function jp(e){var t=this.__data__;if(Op){var r=t[e];return r===Tp?void 0:r}return qp.call(t,e)?t[e]:void 0}Ua.exports=jp});var Ha=d((fb,Ka)=>{var kp=jt(),Cp=Object.prototype,Rp=Cp.hasOwnProperty;function Ap(e){var t=this.__data__;return kp?t[e]!==void 0:Rp.call(t,e)}Ka.exports=Ap});var Ja=d((pb,Ga)=>{var Dp=jt(),Mp=\\\"__lodash_hash_undefined__\\\";function xp(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Dp&&t===void 0?Mp:t,this}Ga.exports=xp});var Xa=d((hb,Wa)=>{var Vp=Va(),zp=La(),Lp=Fa(),Up=Ha(),Fp=Ja();function rt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}rt.prototype.clear=Vp;rt.prototype.delete=zp;rt.prototype.get=Lp;rt.prototype.has=Up;rt.prototype.set=Fp;Wa.exports=rt});var Ya=d((mb,Ba)=>{function Kp(){this.__data__=[],this.size=0}Ba.exports=Kp});var is=d((yb,Za)=>{function Hp(e,t){return e===t||e!==e&&t!==t}Za.exports=Hp});var kt=d((_b,Qa)=>{var Gp=is();function Jp(e,t){for(var r=e.length;r--;)if(Gp(e[r][0],t))return r;return-1}Qa.exports=Jp});var ti=d((gb,ei)=>{var Wp=kt(),Xp=Array.prototype,Bp=Xp.splice;function Yp(e){var t=this.__data__,r=Wp(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():Bp.call(t,r,1),--this.size,!0}ei.exports=Yp});var si=d(($b,ri)=>{var Zp=kt();function Qp(e){var t=this.__data__,r=Zp(t,e);return r<0?void 0:t[r][1]}ri.exports=Qp});var oi=d((vb,ni)=>{var eh=kt();function th(e){return eh(this.__data__,e)>-1}ni.exports=th});var ii=d((bb,ai)=>{var rh=kt();function sh(e,t){var r=this.__data__,s=rh(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}ai.exports=sh});var ci=d((Eb,ui)=>{var nh=Ya(),oh=ti(),ah=si(),ih=oi(),uh=ii();function st(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}st.prototype.clear=nh;st.prototype.delete=oh;st.prototype.get=ah;st.prototype.has=ih;st.prototype.set=uh;ui.exports=st});var di=d((wb,li)=>{var ch=as(),lh=Pt(),dh=ch(lh,\\\"Map\\\");li.exports=dh});var hi=d((Sb,pi)=>{var fi=Xa(),fh=ci(),ph=di();function hh(){this.size=0,this.__data__={hash:new fi,map:new(ph||fh),string:new fi}}pi.exports=hh});var yi=d((Pb,mi)=>{function mh(e){var t=typeof e;return t==\\\"string\\\"||t==\\\"number\\\"||t==\\\"symbol\\\"||t==\\\"boolean\\\"?e!==\\\"__proto__\\\":e===null}mi.exports=mh});var Ct=d((Nb,_i)=>{var yh=yi();function _h(e,t){var r=e.__data__;return yh(t)?r[typeof t==\\\"string\\\"?\\\"string\\\":\\\"hash\\\"]:r.map}_i.exports=_h});var $i=d((Ob,gi)=>{var gh=Ct();function $h(e){var t=gh(this,e).delete(e);return this.size-=t?1:0,t}gi.exports=$h});var bi=d((Tb,vi)=>{var vh=Ct();function bh(e){return vh(this,e).get(e)}vi.exports=bh});var wi=d((Ib,Ei)=>{var Eh=Ct();function wh(e){return Eh(this,e).has(e)}Ei.exports=wh});var Pi=d((qb,Si)=>{var Sh=Ct();function Ph(e,t){var r=Sh(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}Si.exports=Ph});var Oi=d((jb,Ni)=>{var Nh=hi(),Oh=$i(),Th=bi(),Ih=wi(),qh=Pi();function nt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}nt.prototype.clear=Nh;nt.prototype.delete=Oh;nt.prototype.get=Th;nt.prototype.has=Ih;nt.prototype.set=qh;Ni.exports=nt});var qi=d((kb,Ii)=>{var Ti=Oi(),jh=\\\"Expected a function\\\";function us(e,t){if(typeof e!=\\\"function\\\"||t!=null&&typeof t!=\\\"function\\\")throw new TypeError(jh);var r=function(){var s=arguments,n=t?t.apply(this,s):s[0],o=r.cache;if(o.has(n))return o.get(n);var a=e.apply(this,s);return r.cache=o.set(n,a)||o,a};return r.cache=new(us.Cache||Ti),r}us.Cache=Ti;Ii.exports=us});var ki=d((Cb,ji)=>{var kh=qi(),Ch=500;function Rh(e){var t=kh(e,function(s){return r.size===Ch&&r.clear(),s}),r=t.cache;return t}ji.exports=Rh});var Ri=d((Rb,Ci)=>{var Ah=ki(),Dh=/[^.[\\\\]]+|\\\\[(?:(-?\\\\d+(?:\\\\.\\\\d+)?)|([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2)\\\\]|(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))/g,Mh=/\\\\\\\\(\\\\\\\\)?/g,xh=Ah(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(\\\"\\\"),e.replace(Dh,function(r,s,n,o){t.push(n?o.replace(Mh,\\\"$1\\\"):s||r)}),t});Ci.exports=xh});var Di=d((Ab,Ai)=>{var Vh=qt(),zh=Ea(),Lh=Ri(),Uh=dr();function Fh(e,t){return Vh(e)?e:zh(e,t)?[e]:Lh(Uh(e))}Ai.exports=Fh});var xi=d((Db,Mi)=>{var Kh=Ot(),Hh=Tt(),Gh=\\\"[object Arguments]\\\";function Jh(e){return Hh(e)&&Kh(e)==Gh}Mi.exports=Jh});var Ui=d((Mb,Li)=>{var Vi=xi(),Wh=Tt(),zi=Object.prototype,Xh=zi.hasOwnProperty,Bh=zi.propertyIsEnumerable,Yh=Vi(function(){return arguments}())?Vi:function(e){return Wh(e)&&Xh.call(e,\\\"callee\\\")&&!Bh.call(e,\\\"callee\\\")};Li.exports=Yh});var cs=d((xb,Fi)=>{var Zh=9007199254740991,Qh=/^(?:0|[1-9]\\\\d*)$/;function em(e,t){var r=typeof e;return t=t==null?Zh:t,!!t&&(r==\\\"number\\\"||r!=\\\"symbol\\\"&&Qh.test(e))&&e>-1&&e%1==0&&e<t}Fi.exports=em});var ls=d((Vb,Ki)=>{var tm=9007199254740991;function rm(e){return typeof e==\\\"number\\\"&&e>-1&&e%1==0&&e<=tm}Ki.exports=rm});var Gi=d((zb,Hi)=>{var sm=It(),nm=1/0;function om(e){if(typeof e==\\\"string\\\"||sm(e))return e;var t=e+\\\"\\\";return t==\\\"0\\\"&&1/e==-nm?\\\"-0\\\":t}Hi.exports=om});var Wi=d((Lb,Ji)=>{var am=Di(),im=Ui(),um=qt(),cm=cs(),lm=ls(),dm=Gi();function fm(e,t,r){t=am(t,e);for(var s=-1,n=t.length,o=!1;++s<n;){var a=dm(t[s]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++s!=n?o:(n=e==null?0:e.length,!!n&&lm(n)&&cm(a,n)&&(um(e)||im(e)))}Ji.exports=fm});var Bi=d((Ub,Xi)=>{var pm=va(),hm=Wi();function mm(e,t){return e!=null&&hm(e,t,pm)}Xi.exports=mm});var Zi=d((Fb,Yi)=>{var ym=9007199254740991,_m=Math.floor;function gm(e,t){var r=\\\"\\\";if(!e||t<1||t>ym)return r;do t%2&&(r+=e),t=_m(t/2),t&&(e+=e);while(t);return r}Yi.exports=gm});var eu=d((Kb,Qi)=>{var $m=ns(),vm=ls();function bm(e){return e!=null&&vm(e.length)&&!$m(e)}Qi.exports=bm});var ru=d((Hb,tu)=>{var Em=is(),wm=eu(),Sm=cs(),Pm=St();function Nm(e,t,r){if(!Pm(r))return!1;var s=typeof t;return(s==\\\"number\\\"?wm(r)&&Sm(t,r.length):s==\\\"string\\\"&&t in r)?Em(r[t],e):!1}tu.exports=Nm});var nu=d((Gb,su)=>{var Om=Zi(),Tm=ru(),Im=ss(),qm=dr();function jm(e,t,r){return(r?Tm(e,t,r):t===void 0)?t=1:t=Im(t),Om(qm(e),t)}su.exports=jm});var cu=d(pr=>{\\\"use strict\\\";Object.defineProperty(pr,\\\"__esModule\\\",{value:!0});pr.sprintfFormat=iu;pr.sprintfParse=uu;var km=au(Bi()),Cm=au(nu());function au(e){return e&&e.__esModule?e:{default:e}}function ds(e){\\\"@babel/helpers - typeof\\\";return ds=typeof Symbol==\\\"function\\\"&&typeof Symbol.iterator==\\\"symbol\\\"?function(t){return typeof t}:function(t){return t&&typeof Symbol==\\\"function\\\"&&t.constructor===Symbol&&t!==Symbol.prototype?\\\"symbol\\\":typeof t},ds(e)}var le={notType:/[^T]/,notPrimitive:/[^v]/,number:/[diefg]/,numericArg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\\\\x25]+/,modulo:/^\\\\x25{2}/,placeholder:/^\\\\x25(?:([1-9]\\\\d*)\\\\$|\\\\(([^)]+)\\\\))?(\\\\+)?(0|'[^$])?(-)?(\\\\d+)?(?:\\\\.(\\\\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\\\\d]*)/i,keyAccess:/^\\\\.([a-z_][a-z_\\\\d]*)/i,indexAccess:/^\\\\[(\\\\d+)\\\\]/,sign:/^[+-]/};function ou(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return iu(uu(e),[e].concat(r))}function iu(e,t){var r=e.length,s=1,n,o=\\\"\\\",a,i,u,c,l,f,_,m;for(a=0;a<r;a+=1)if(typeof e[a]==\\\"string\\\")o+=e[a];else if(ds(e[a])===\\\"object\\\"){if(u=e[a],u.keys)for(n=t[s],i=0;i<u.keys.length;i+=1){if(!(0,km.default)(n,u.keys[i]))throw new Error(ou('[sprintf] property \\\"%s\\\" does not exist',u.keys[i]));n=n[u.keys[i]]}else u.paramNo?n=t[u.paramNo]:(n=t[s],s+=1);if(le.notType.test(u.type)&&le.notPrimitive.test(u.type)&&n instanceof Function&&(n=n()),le.numericArg.test(u.type)&&typeof n!=\\\"number\\\"&&Number.isNaN(Number(n)))throw new TypeError(ou(\\\"[sprintf] expecting number but found %T\\\",n));switch(le.number.test(u.type)&&(_=n>=0),u.type){case\\\"b\\\":n=parseInt(n,10).toString(2);break;case\\\"c\\\":n=String.fromCharCode(parseInt(n,10));break;case\\\"d\\\":case\\\"i\\\":n=parseInt(n,10);break;case\\\"j\\\":n=JSON.stringify(n,null,u.width?parseInt(u.width,10):0);break;case\\\"e\\\":n=u.precision?parseFloat(n).toExponential(u.precision):parseFloat(n).toExponential();break;case\\\"f\\\":n=u.precision?parseFloat(n).toFixed(u.precision):parseFloat(n);break;case\\\"g\\\":n=u.precision?String(Number(n.toPrecision(u.precision))):parseFloat(n);break;case\\\"o\\\":n=(parseInt(n,10)>>>0).toString(8);break;case\\\"s\\\":n=String(n),n=u.precision?n.substring(0,u.precision):n;break;case\\\"t\\\":n=String(!!n),n=u.precision?n.substring(0,u.precision):n;break;case\\\"T\\\":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=u.precision?n.substring(0,u.precision):n;break;case\\\"u\\\":n=parseInt(n,10)>>>0;break;case\\\"v\\\":n=n.valueOf(),n=u.precision?n.substring(0,u.precision):n;break;case\\\"x\\\":n=(parseInt(n,10)>>>0).toString(16);break;case\\\"X\\\":n=(parseInt(n,10)>>>0).toString(16).toUpperCase();break}le.json.test(u.type)?o+=n:(le.number.test(u.type)&&(!_||u.sign)?(m=_?\\\"+\\\":\\\"-\\\",n=n.toString().replace(le.sign,\\\"\\\")):m=\\\"\\\",l=u.padChar?u.padChar===\\\"0\\\"?\\\"0\\\":u.padChar.charAt(1):\\\" \\\",f=u.width-(m+n).length,c=u.width&&f>0?(0,Cm.default)(l,f):\\\"\\\",o+=u.align?m+n+c:l===\\\"0\\\"?m+c+n:c+m+n)}return o}var fr=Object.create(null);function uu(e){if(fr[e])return fr[e];for(var t=e,r,s=0,n=[];t;){if((r=le.text.exec(t))!==null)n.push(r[0]);else if((r=le.modulo.exec(t))!==null)n.push(\\\"%\\\");else if((r=le.placeholder.exec(t))!==null){if(r[2]){s|=1;var o=r[2],a=[],i=[];if((a=le.key.exec(o))!==null)for(i.push(a[1]);(o=o.substring(a[0].length))!==\\\"\\\";)if((a=le.keyAccess.exec(o))!==null)i.push(a[1]);else if((a=le.indexAccess.exec(o))!==null)i.push(a[1]);else throw new SyntaxError(\\\"[sprintf] failed to parse named argument key\\\");else throw new SyntaxError(\\\"[sprintf] failed to parse named argument key\\\");r[2]=i}else s|=2;if(s===3)throw new Error(\\\"[sprintf] mixing positional and named placeholders is not (yet) supported\\\");n.push({placeholder:r[0],paramNo:r[1],keys:r[2],sign:r[3],padChar:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else throw new SyntaxError(\\\"[sprintf] unexpected placeholder\\\");t=t.substring(r[0].length)}return fr[e]=n,fr[e]}});var hr=d(ot=>{\\\"use strict\\\";Object.defineProperty(ot,\\\"__esModule\\\",{value:!0});ot.sprintf=te;ot.abbreviateNumber=Dm;ot.bytesToFileSize=Mm;ot.smartTrim=xm;var Rm=Am(lr()),ne=Te(),de=ga(),lu=cu();function Am(e){return e&&e.__esModule?e:{default:e}}function te(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return(0,lu.sprintfFormat)((0,lu.sprintfParse)(e),[e].concat(r))}function Dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:\\\"en-us\\\",r=(0,Rm.default)(e);return r<=1e3?r.toLocaleString(t):r<1e4?te((0,ne._)(\\\"%sK\\\"),(0,de.roundToDecimal)(r/1e3,-2).toLocaleString(t)):r<1e5?te((0,ne._)(\\\"%sK\\\"),(0,de.roundToDecimal)(r/1e3,-1).toLocaleString(t)):r<999500?te((0,ne._)(\\\"%sK\\\"),(0,de.roundToDecimal)(r/1e3,0).toLocaleString(t)):r<1e7?te((0,ne._)(\\\"%sM\\\"),(0,de.roundToDecimal)(r/1e6,-2).toLocaleString(t)):r<1e8?te((0,ne._)(\\\"%sM\\\"),(0,de.roundToDecimal)(r/1e6,-1).toLocaleString(t)):r<9995e5?te((0,ne._)(\\\"%sM\\\"),(0,de.roundToDecimal)(r/1e6,0).toLocaleString(t)):r<1e10?te((0,ne._)(\\\"%sB\\\"),(0,de.roundToDecimal)(r/1e9,-2).toLocaleString(t)):r<1e11?te((0,ne._)(\\\"%sB\\\"),(0,de.roundToDecimal)(r/1e9,-1).toLocaleString(t)):te((0,ne._)(\\\"%sB\\\"),(0,de.roundToDecimal)(r/1e9,0).toLocaleString(t))}function Mm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:\\\"en-us\\\",r=(e||0)/1024;if(r<0)throw new RangeError(\\\"bytes must be >= 0\\\");if(Math.floor(r)===0)return te((0,ne._)(\\\"%s B\\\"),e.toLocaleString(t));var s=r/1024;if(Math.floor(s)===0)return te((0,ne._)(\\\"%s KB\\\"),(0,de.roundToDecimal)(r,-2).toLocaleString(t));var n=s/1024;if(Math.floor(n)===0)return te((0,ne._)(\\\"%s MB\\\"),(0,de.roundToDecimal)(s,-2).toLocaleString(t));var o=n/1024;return Math.floor(o)===0?te((0,ne._)(\\\"%s GB\\\"),(0,de.roundToDecimal)(n,-2).toLocaleString(t)):te((0,ne._)(\\\"%s TB\\\"),(0,de.roundToDecimal)(o,-2).toLocaleString(t))}function xm(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.precomposed,n=s===void 0?!1:s;if(!e||t<1||e.length<=t)return e;var o=n?\\\"\\\\u2026\\\":\\\"...\\\";if(t===1)return\\\"\\\".concat(e[0]).concat(o);var a=Math.ceil(e.length/2),i=e.length-t,u=Math.ceil(i/2),c=i-u;return\\\"\\\".concat(e.substring(0,a-u)).concat(o).concat(e.substring(a+c))}});var at=d(A=>{\\\"use strict\\\";Object.defineProperty(A,\\\"__esModule\\\",{value:!0});A.regexpCode=A.getEsmExportName=A.getProperty=A.safeStringify=A.stringify=A.strConcat=A.addCodeArg=A.str=A._=A.nil=A._Code=A.Name=A.IDENTIFIER=A._CodeOrName=void 0;var At=class{};A._CodeOrName=At;A.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ke=class extends At{constructor(t){if(super(),!A.IDENTIFIER.test(t))throw new Error(\\\"CodeGen: name must be a valid identifier\\\");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};A.Name=Ke;var he=class extends At{constructor(t){super(),this._items=typeof t==\\\"string\\\"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===\\\"\\\"||t==='\\\"\\\"'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,s)=>`${r}${s}`,\\\"\\\")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,s)=>(s instanceof Ke&&(r[s.str]=(r[s.str]||0)+1),r),{})}};A._Code=he;A.nil=new he(\\\"\\\");function yu(e,...t){let r=[e[0]],s=0;for(;s<t.length;)hs(r,t[s]),r.push(e[++s]);return new he(r)}A._=yu;var ps=new he(\\\"+\\\");function _u(e,...t){let r=[Dt(e[0])],s=0;for(;s<t.length;)r.push(ps),hs(r,t[s]),r.push(ps,Dt(e[++s]));return Fm(r),new he(r)}A.str=_u;function hs(e,t){t instanceof he?e.push(...t._items):t instanceof Ke?e.push(t):e.push(Gm(t))}A.addCodeArg=hs;function Fm(e){let t=1;for(;t<e.length-1;){if(e[t]===ps){let r=Km(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]=\\\"+\\\"}t++}}function Km(e,t){if(t==='\\\"\\\"')return e;if(e==='\\\"\\\"')return t;if(typeof e==\\\"string\\\")return t instanceof Ke||e[e.length-1]!=='\\\"'?void 0:typeof t!=\\\"string\\\"?`${e.slice(0,-1)}${t}\\\"`:t[0]==='\\\"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t==\\\"string\\\"&&t[0]==='\\\"'&&!(e instanceof Ke))return`\\\"${e}${t.slice(1)}`}function Hm(e,t){return t.emptyStr()?e:e.emptyStr()?t:_u`${e}${t}`}A.strConcat=Hm;function Gm(e){return typeof e==\\\"number\\\"||typeof e==\\\"boolean\\\"||e===null?e:Dt(Array.isArray(e)?e.join(\\\",\\\"):e)}function Jm(e){return new he(Dt(e))}A.stringify=Jm;function Dt(e){return JSON.stringify(e).replace(/\\\\u2028/g,\\\"\\\\\\\\u2028\\\").replace(/\\\\u2029/g,\\\"\\\\\\\\u2029\\\")}A.safeStringify=Dt;function Wm(e){return typeof e==\\\"string\\\"&&A.IDENTIFIER.test(e)?new he(`.${e}`):yu`[${e}]`}A.getProperty=Wm;function Xm(e){if(typeof e==\\\"string\\\"&&A.IDENTIFIER.test(e))return new he(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}A.getEsmExportName=Xm;function Bm(e){return new he(e.toString())}A.regexpCode=Bm});var _s=d(ae=>{\\\"use strict\\\";Object.defineProperty(ae,\\\"__esModule\\\",{value:!0});ae.ValueScope=ae.ValueScopeName=ae.Scope=ae.varKinds=ae.UsedValueState=void 0;var oe=at(),ms=class extends Error{constructor(t){super(`CodeGen: \\\"code\\\" for ${t} not defined`),this.value=t.value}},_r;(function(e){e[e.Started=0]=\\\"Started\\\",e[e.Completed=1]=\\\"Completed\\\"})(_r||(ae.UsedValueState=_r={}));ae.varKinds={const:new oe.Name(\\\"const\\\"),let:new oe.Name(\\\"let\\\"),var:new oe.Name(\\\"var\\\")};var gr=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof oe.Name?t:this.name(t)}name(t){return new oe.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix \\\"${t}\\\" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};ae.Scope=gr;var $r=class extends oe.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:s}){this.value=t,this.scopePath=(0,oe._)`.${new oe.Name(r)}[${s}]`}};ae.ValueScopeName=$r;var Ym=(0,oe._)`\\\\n`,ys=class extends gr{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts=W(L({},t),{_n:t.lines?Ym:oe.nil})}get(){return this._scope}name(t){return new $r(t,this._newName(t))}value(t,r){var s;if(r.ref===void 0)throw new Error(\\\"CodeGen: ref must be passed in value\\\");let n=this.toName(t),{prefix:o}=n,a=(s=r.key)!==null&&s!==void 0?s:r.ref,i=this._values[o];if(i){let l=i.get(a);if(l)return l}else i=this._values[o]=new Map;i.set(a,n);let u=this._scope[o]||(this._scope[o]=[]),c=u.length;return u[c]=r.ref,n.setValue(r,{property:o,itemIndex:c}),n}getValue(t,r){let s=this._values[t];if(s)return s.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name \\\"${s}\\\" has no value`);return(0,oe._)`${t}${s.scopePath}`})}scopeCode(t=this._values,r,s){return this._reduceValues(t,n=>{if(n.value===void 0)throw new Error(`CodeGen: name \\\"${n}\\\" has no value`);return n.value.code},r,s)}_reduceValues(t,r,s={},n){let o=oe.nil;for(let a in t){let i=t[a];if(!i)continue;let u=s[a]=s[a]||new Map;i.forEach(c=>{if(u.has(c))return;u.set(c,_r.Started);let l=r(c);if(l){let f=this.opts.es5?ae.varKinds.var:ae.varKinds.const;o=(0,oe._)`${o}${f} ${c} = ${l};${this.opts._n}`}else if(l=n==null?void 0:n(c))o=(0,oe._)`${o}${l}${this.opts._n}`;else throw new ms(c);u.set(c,_r.Completed)})}return o}};ae.ValueScope=ys});var I=d(T=>{\\\"use strict\\\";Object.defineProperty(T,\\\"__esModule\\\",{value:!0});T.or=T.and=T.not=T.CodeGen=T.operators=T.varKinds=T.ValueScopeName=T.ValueScope=T.Scope=T.Name=T.regexpCode=T.stringify=T.getProperty=T.nil=T.strConcat=T.str=T._=void 0;var C=at(),ge=_s(),Ce=at();Object.defineProperty(T,\\\"_\\\",{enumerable:!0,get:function(){return Ce._}});Object.defineProperty(T,\\\"str\\\",{enumerable:!0,get:function(){return Ce.str}});Object.defineProperty(T,\\\"strConcat\\\",{enumerable:!0,get:function(){return Ce.strConcat}});Object.defineProperty(T,\\\"nil\\\",{enumerable:!0,get:function(){return Ce.nil}});Object.defineProperty(T,\\\"getProperty\\\",{enumerable:!0,get:function(){return Ce.getProperty}});Object.defineProperty(T,\\\"stringify\\\",{enumerable:!0,get:function(){return Ce.stringify}});Object.defineProperty(T,\\\"regexpCode\\\",{enumerable:!0,get:function(){return Ce.regexpCode}});Object.defineProperty(T,\\\"Name\\\",{enumerable:!0,get:function(){return Ce.Name}});var wr=_s();Object.defineProperty(T,\\\"Scope\\\",{enumerable:!0,get:function(){return wr.Scope}});Object.defineProperty(T,\\\"ValueScope\\\",{enumerable:!0,get:function(){return wr.ValueScope}});Object.defineProperty(T,\\\"ValueScopeName\\\",{enumerable:!0,get:function(){return wr.ValueScopeName}});Object.defineProperty(T,\\\"varKinds\\\",{enumerable:!0,get:function(){return wr.varKinds}});T.operators={GT:new C._Code(\\\">\\\"),GTE:new C._Code(\\\">=\\\"),LT:new C._Code(\\\"<\\\"),LTE:new C._Code(\\\"<=\\\"),EQ:new C._Code(\\\"===\\\"),NEQ:new C._Code(\\\"!==\\\"),NOT:new C._Code(\\\"!\\\"),OR:new C._Code(\\\"||\\\"),AND:new C._Code(\\\"&&\\\"),ADD:new C._Code(\\\"+\\\")};var Ie=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},gs=class extends Ie{constructor(t,r,s){super(),this.varKind=t,this.name=r,this.rhs=s}render({es5:t,_n:r}){let s=t?ge.varKinds.var:this.varKind,n=this.rhs===void 0?\\\"\\\":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=ut(this.rhs,t,r)),this}get names(){return this.rhs instanceof C._CodeOrName?this.rhs.names:{}}},vr=class extends Ie{constructor(t,r,s){super(),this.lhs=t,this.rhs=r,this.sideEffects=s}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof C.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=ut(this.rhs,t,r),this}get names(){let t=this.lhs instanceof C.Name?{}:L({},this.lhs.names);return Er(t,this.rhs)}},$s=class extends vr{constructor(t,r,s,n){super(t,s,n),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},vs=class extends Ie{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},bs=class extends Ie{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:\\\"\\\"};`+t}},Es=class extends Ie{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},ws=class extends Ie{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=ut(this.code,t,r),this}get names(){return this.code instanceof C._CodeOrName?this.code.names:{}}},Mt=class extends Ie{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,s)=>r+s.render(t),\\\"\\\")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let s=t[r].optimizeNodes();Array.isArray(s)?t.splice(r,1,...s):s?t[r]=s:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:s}=this,n=s.length;for(;n--;){let o=s[n];o.optimizeNames(t,r)||(Zm(t,o.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Je(t,r.names),{})}},qe=class extends Mt{render(t){return\\\"{\\\"+t._n+super.render(t)+\\\"}\\\"+t._n}},Ss=class extends Mt{},it=class extends qe{};it.kind=\\\"else\\\";var He=class e extends qe{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+=\\\"else \\\"+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new it(s):s}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(gu(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=ut(this.condition,t,r),this}get names(){let t=super.names;return Er(t,this.condition),this.else&&Je(t,this.else.names),t}};He.kind=\\\"if\\\";var Ge=class extends qe{};Ge.kind=\\\"for\\\";var Ps=class extends Ge{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=ut(this.iteration,t,r),this}get names(){return Je(super.names,this.iteration.names)}},Ns=class extends Ge{constructor(t,r,s,n){super(),this.varKind=t,this.name=r,this.from=s,this.to=n}render(t){let r=t.es5?ge.varKinds.var:this.varKind,{name:s,from:n,to:o}=this;return`for(${r} ${s}=${n}; ${s}<${o}; ${s}++)`+super.render(t)}get names(){let t=Er(super.names,this.from);return Er(t,this.to)}},br=class extends Ge{constructor(t,r,s,n){super(),this.loop=t,this.varKind=r,this.name=s,this.iterable=n}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=ut(this.iterable,t,r),this}get names(){return Je(super.names,this.iterable.names)}},xt=class extends qe{constructor(t,r,s){super(),this.name=t,this.args=r,this.async=s}render(t){return`${this.async?\\\"async \\\":\\\"\\\"}function ${this.name}(${this.args})`+super.render(t)}};xt.kind=\\\"func\\\";var Vt=class extends Mt{render(t){return\\\"return \\\"+super.render(t)}};Vt.kind=\\\"return\\\";var Os=class extends qe{render(t){let r=\\\"try\\\"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var s,n;return super.optimizeNames(t,r),(s=this.catch)===null||s===void 0||s.optimizeNames(t,r),(n=this.finally)===null||n===void 0||n.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Je(t,this.catch.names),this.finally&&Je(t,this.finally.names),t}},zt=class extends qe{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};zt.kind=\\\"catch\\\";var Lt=class extends qe{render(t){return\\\"finally\\\"+super.render(t)}};Lt.kind=\\\"finally\\\";var Ts=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=W(L({},r),{_n:r.lines?`\\n`:\\\"\\\"}),this._extScope=t,this._scope=new ge.Scope({parent:t}),this._nodes=[new Ss]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let s=this._extScope.value(t,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,s,n){let o=this._scope.toName(r);return s!==void 0&&n&&(this._constants[o.str]=s),this._leafNode(new gs(t,o,s)),o}const(t,r,s){return this._def(ge.varKinds.const,t,r,s)}let(t,r,s){return this._def(ge.varKinds.let,t,r,s)}var(t,r,s){return this._def(ge.varKinds.var,t,r,s)}assign(t,r,s){return this._leafNode(new vr(t,r,s))}add(t,r){return this._leafNode(new $s(t,T.operators.ADD,r))}code(t){return typeof t==\\\"function\\\"?t():t!==C.nil&&this._leafNode(new ws(t)),this}object(...t){let r=[\\\"{\\\"];for(let[s,n]of t)r.length>1&&r.push(\\\",\\\"),r.push(s),(s!==n||this.opts.es5)&&(r.push(\\\":\\\"),(0,C.addCodeArg)(r,n));return r.push(\\\"}\\\"),new C._Code(r)}if(t,r,s){if(this._blockNode(new He(t)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: \\\"else\\\" body without \\\"then\\\" body');return this}elseIf(t){return this._elseNode(new He(t))}else(){return this._elseNode(new it)}endIf(){return this._endBlockNode(He,it)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Ps(t),r)}forRange(t,r,s,n,o=this.opts.es5?ge.varKinds.var:ge.varKinds.let){let a=this._scope.toName(t);return this._for(new Ns(o,a,r,s),()=>n(a))}forOf(t,r,s,n=ge.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let a=r instanceof C.Name?r:this.var(\\\"_arr\\\",r);return this.forRange(\\\"_i\\\",0,(0,C._)`${a}.length`,i=>{this.var(o,(0,C._)`${a}[${i}]`),s(o)})}return this._for(new br(\\\"of\\\",n,o,r),()=>s(o))}forIn(t,r,s,n=this.opts.es5?ge.varKinds.var:ge.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,C._)`Object.keys(${r})`,s);let o=this._scope.toName(t);return this._for(new br(\\\"in\\\",n,o,r),()=>s(o))}endFor(){return this._endBlockNode(Ge)}label(t){return this._leafNode(new vs(t))}break(t){return this._leafNode(new bs(t))}return(t){let r=new Vt;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: \\\"return\\\" should have one node');return this._endBlockNode(Vt)}try(t,r,s){if(!r&&!s)throw new Error('CodeGen: \\\"try\\\" without \\\"catch\\\" and \\\"finally\\\"');let n=new Os;if(this._blockNode(n),this.code(t),r){let o=this.name(\\\"e\\\");this._currNode=n.catch=new zt(o),r(o)}return s&&(this._currNode=n.finally=new Lt,this.code(s)),this._endBlockNode(zt,Lt)}throw(t){return this._leafNode(new Es(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error(\\\"CodeGen: not in self-balancing block\\\");let s=this._nodes.length-r;if(s<0||t!==void 0&&s!==t)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=C.nil,s,n){return this._blockNode(new xt(t,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(xt)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let s=this._currNode;if(s instanceof t||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block \\\"${r?`${t.kind}/${r.kind}`:t.kind}\\\"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof He))throw new Error('CodeGen: \\\"else\\\" without \\\"if\\\"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};T.CodeGen=Ts;function Je(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function Er(e,t){return t instanceof C._CodeOrName?Je(e,t.names):e}function ut(e,t,r){if(e instanceof C.Name)return s(e);if(!n(e))return e;return new C._Code(e._items.reduce((o,a)=>(a instanceof C.Name&&(a=s(a)),a instanceof C._Code?o.push(...a._items):o.push(a),o),[]));function s(o){let a=r[o.str];return a===void 0||t[o.str]!==1?o:(delete t[o.str],a)}function n(o){return o instanceof C._Code&&o._items.some(a=>a instanceof C.Name&&t[a.str]===1&&r[a.str]!==void 0)}}function Zm(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function gu(e){return typeof e==\\\"boolean\\\"||typeof e==\\\"number\\\"||e===null?!e:(0,C._)`!${Is(e)}`}T.not=gu;var Qm=$u(T.operators.AND);function ey(...e){return e.reduce(Qm)}T.and=ey;var ty=$u(T.operators.OR);function ry(...e){return e.reduce(ty)}T.or=ry;function $u(e){return(t,r)=>t===C.nil?r:r===C.nil?t:(0,C._)`${Is(t)} ${e} ${Is(r)}`}function Is(e){return e instanceof C.Name?e:(0,C._)`(${e})`}});var D=d(q=>{\\\"use strict\\\";Object.defineProperty(q,\\\"__esModule\\\",{value:!0});q.checkStrictMode=q.getErrorPath=q.Type=q.useFunc=q.setEvaluated=q.evaluatedPropsToName=q.mergeEvaluated=q.eachItem=q.unescapeJsonPointer=q.escapeJsonPointer=q.escapeFragment=q.unescapeFragment=q.schemaRefOrVal=q.schemaHasRulesButRef=q.schemaHasRules=q.checkUnknownRules=q.alwaysValidSchema=q.toHash=void 0;var U=I(),sy=at();function ny(e){let t={};for(let r of e)t[r]=!0;return t}q.toHash=ny;function oy(e,t){return typeof t==\\\"boolean\\\"?t:Object.keys(t).length===0?!0:(Eu(e,t),!wu(t,e.self.RULES.all))}q.alwaysValidSchema=oy;function Eu(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||typeof t==\\\"boolean\\\")return;let n=s.RULES.keywords;for(let o in t)n[o]||Nu(e,`unknown keyword: \\\"${o}\\\"`)}q.checkUnknownRules=Eu;function wu(e,t){if(typeof e==\\\"boolean\\\")return!e;for(let r in e)if(t[r])return!0;return!1}q.schemaHasRules=wu;function ay(e,t){if(typeof e==\\\"boolean\\\")return!e;for(let r in e)if(r!==\\\"$ref\\\"&&t.all[r])return!0;return!1}q.schemaHasRulesButRef=ay;function iy({topSchemaRef:e,schemaPath:t},r,s,n){if(!n){if(typeof r==\\\"number\\\"||typeof r==\\\"boolean\\\")return r;if(typeof r==\\\"string\\\")return(0,U._)`${r}`}return(0,U._)`${e}${t}${(0,U.getProperty)(s)}`}q.schemaRefOrVal=iy;function uy(e){return Su(decodeURIComponent(e))}q.unescapeFragment=uy;function cy(e){return encodeURIComponent(js(e))}q.escapeFragment=cy;function js(e){return typeof e==\\\"number\\\"?`${e}`:e.replace(/~/g,\\\"~0\\\").replace(/\\\\//g,\\\"~1\\\")}q.escapeJsonPointer=js;function Su(e){return e.replace(/~1/g,\\\"/\\\").replace(/~0/g,\\\"~\\\")}q.unescapeJsonPointer=Su;function ly(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}q.eachItem=ly;function vu({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(n,o,a,i)=>{let u=a===void 0?o:a instanceof U.Name?(o instanceof U.Name?e(n,o,a):t(n,o,a),a):o instanceof U.Name?(t(n,a,o),o):r(o,a);return i===U.Name&&!(u instanceof U.Name)?s(n,u):u}}q.mergeEvaluated={props:vu({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,U._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,U._)`${r} || {}`).code((0,U._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,U._)`${r} || {}`),ks(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:L(L({},e),t),resultToName:Pu}),items:vu({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,U._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,U._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var(\\\"items\\\",t)})};function Pu(e,t){if(t===!0)return e.var(\\\"props\\\",!0);let r=e.var(\\\"props\\\",(0,U._)`{}`);return t!==void 0&&ks(e,r,t),r}q.evaluatedPropsToName=Pu;function ks(e,t,r){Object.keys(r).forEach(s=>e.assign((0,U._)`${t}${(0,U.getProperty)(s)}`,!0))}q.setEvaluated=ks;var bu={};function dy(e,t){return e.scopeValue(\\\"func\\\",{ref:t,code:bu[t.code]||(bu[t.code]=new sy._Code(t.code))})}q.useFunc=dy;var qs;(function(e){e[e.Num=0]=\\\"Num\\\",e[e.Str=1]=\\\"Str\\\"})(qs||(q.Type=qs={}));function fy(e,t,r){if(e instanceof U.Name){let s=t===qs.Num;return r?s?(0,U._)`\\\"[\\\" + ${e} + \\\"]\\\"`:(0,U._)`\\\"['\\\" + ${e} + \\\"']\\\"`:s?(0,U._)`\\\"/\\\" + ${e}`:(0,U._)`\\\"/\\\" + ${e}.replace(/~/g, \\\"~0\\\").replace(/\\\\\\\\//g, \\\"~1\\\")`}return r?(0,U.getProperty)(e).toString():\\\"/\\\"+js(e)}q.getErrorPath=fy;function Nu(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}q.checkStrictMode=Nu});var we=d(Cs=>{\\\"use strict\\\";Object.defineProperty(Cs,\\\"__esModule\\\",{value:!0});var Z=I(),py={data:new Z.Name(\\\"data\\\"),valCxt:new Z.Name(\\\"valCxt\\\"),instancePath:new Z.Name(\\\"instancePath\\\"),parentData:new Z.Name(\\\"parentData\\\"),parentDataProperty:new Z.Name(\\\"parentDataProperty\\\"),rootData:new Z.Name(\\\"rootData\\\"),dynamicAnchors:new Z.Name(\\\"dynamicAnchors\\\"),vErrors:new Z.Name(\\\"vErrors\\\"),errors:new Z.Name(\\\"errors\\\"),this:new Z.Name(\\\"this\\\"),self:new Z.Name(\\\"self\\\"),scope:new Z.Name(\\\"scope\\\"),json:new Z.Name(\\\"json\\\"),jsonPos:new Z.Name(\\\"jsonPos\\\"),jsonLen:new Z.Name(\\\"jsonLen\\\"),jsonPart:new Z.Name(\\\"jsonPart\\\")};Cs.default=py});var ct=d(Q=>{\\\"use strict\\\";Object.defineProperty(Q,\\\"__esModule\\\",{value:!0});Q.extendErrors=Q.resetErrorsCount=Q.reportExtraError=Q.reportError=Q.keyword$DataError=Q.keywordError=void 0;var R=I(),Sr=D(),re=we();Q.keywordError={message:({keyword:e})=>(0,R.str)`must pass \\\"${e}\\\" keyword validation`};Q.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,R.str)`\\\"${e}\\\" keyword must be ${t} ($data)`:(0,R.str)`\\\"${e}\\\" keyword is invalid ($data)`};function hy(e,t=Q.keywordError,r,s){let{it:n}=e,{gen:o,compositeRule:a,allErrors:i}=n,u=Iu(e,t,r);(s!=null?s:a||i)?Ou(o,u):Tu(n,(0,R._)`[${u}]`)}Q.reportError=hy;function my(e,t=Q.keywordError,r){let{it:s}=e,{gen:n,compositeRule:o,allErrors:a}=s,i=Iu(e,t,r);Ou(n,i),o||a||Tu(s,re.default.vErrors)}Q.reportExtraError=my;function yy(e,t){e.assign(re.default.errors,t),e.if((0,R._)`${re.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,R._)`${re.default.vErrors}.length`,t),()=>e.assign(re.default.vErrors,null)))}Q.resetErrorsCount=yy;function _y({gen:e,keyword:t,schemaValue:r,data:s,errsCount:n,it:o}){if(n===void 0)throw new Error(\\\"ajv implementation error\\\");let a=e.name(\\\"err\\\");e.forRange(\\\"i\\\",n,re.default.errors,i=>{e.const(a,(0,R._)`${re.default.vErrors}[${i}]`),e.if((0,R._)`${a}.instancePath === undefined`,()=>e.assign((0,R._)`${a}.instancePath`,(0,R.strConcat)(re.default.instancePath,o.errorPath))),e.assign((0,R._)`${a}.schemaPath`,(0,R.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,R._)`${a}.schema`,r),e.assign((0,R._)`${a}.data`,s))})}Q.extendErrors=_y;function Ou(e,t){let r=e.const(\\\"err\\\",t);e.if((0,R._)`${re.default.vErrors} === null`,()=>e.assign(re.default.vErrors,(0,R._)`[${r}]`),(0,R._)`${re.default.vErrors}.push(${r})`),e.code((0,R._)`${re.default.errors}++`)}function Tu(e,t){let{gen:r,validateName:s,schemaEnv:n}=e;n.$async?r.throw((0,R._)`new ${e.ValidationError}(${t})`):(r.assign((0,R._)`${s}.errors`,t),r.return(!1))}var We={keyword:new R.Name(\\\"keyword\\\"),schemaPath:new R.Name(\\\"schemaPath\\\"),params:new R.Name(\\\"params\\\"),propertyName:new R.Name(\\\"propertyName\\\"),message:new R.Name(\\\"message\\\"),schema:new R.Name(\\\"schema\\\"),parentSchema:new R.Name(\\\"parentSchema\\\")};function Iu(e,t,r){let{createErrors:s}=e.it;return s===!1?(0,R._)`{}`:gy(e,t,r)}function gy(e,t,r={}){let{gen:s,it:n}=e,o=[$y(n,r),vy(e,r)];return by(e,t,o),s.object(...o)}function $y({errorPath:e},{instancePath:t}){let r=t?(0,R.str)`${e}${(0,Sr.getErrorPath)(t,Sr.Type.Str)}`:e;return[re.default.instancePath,(0,R.strConcat)(re.default.instancePath,r)]}function vy({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:s}){let n=s?t:(0,R.str)`${t}/${e}`;return r&&(n=(0,R.str)`${n}${(0,Sr.getErrorPath)(r,Sr.Type.Str)}`),[We.schemaPath,n]}function by(e,{params:t,message:r},s){let{keyword:n,data:o,schemaValue:a,it:i}=e,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=i;s.push([We.keyword,n],[We.params,typeof t==\\\"function\\\"?t(e):t||(0,R._)`{}`]),u.messages&&s.push([We.message,typeof r==\\\"function\\\"?r(e):r]),u.verbose&&s.push([We.schema,a],[We.parentSchema,(0,R._)`${l}${f}`],[re.default.data,o]),c&&s.push([We.propertyName,c])}});var ju=d(lt=>{\\\"use strict\\\";Object.defineProperty(lt,\\\"__esModule\\\",{value:!0});lt.boolOrEmptySchema=lt.topBoolOrEmptySchema=void 0;var Ey=ct(),wy=I(),Sy=we(),Py={message:\\\"boolean schema is false\\\"};function Ny(e){let{gen:t,schema:r,validateName:s}=e;r===!1?qu(e,!1):typeof r==\\\"object\\\"&&r.$async===!0?t.return(Sy.default.data):(t.assign((0,wy._)`${s}.errors`,null),t.return(!0))}lt.topBoolOrEmptySchema=Ny;function Oy(e,t){let{gen:r,schema:s}=e;s===!1?(r.var(t,!1),qu(e)):r.var(t,!0)}lt.boolOrEmptySchema=Oy;function qu(e,t){let{gen:r,data:s}=e,n={gen:r,keyword:\\\"false schema\\\",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Ey.reportError)(n,Py,void 0,t)}});var Rs=d(dt=>{\\\"use strict\\\";Object.defineProperty(dt,\\\"__esModule\\\",{value:!0});dt.getRules=dt.isJSONType=void 0;var Ty=[\\\"string\\\",\\\"number\\\",\\\"integer\\\",\\\"boolean\\\",\\\"null\\\",\\\"object\\\",\\\"array\\\"],Iy=new Set(Ty);function qy(e){return typeof e==\\\"string\\\"&&Iy.has(e)}dt.isJSONType=qy;function jy(){let e={number:{type:\\\"number\\\",rules:[]},string:{type:\\\"string\\\",rules:[]},array:{type:\\\"array\\\",rules:[]},object:{type:\\\"object\\\",rules:[]}};return{types:W(L({},e),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}dt.getRules=jy});var As=d(Re=>{\\\"use strict\\\";Object.defineProperty(Re,\\\"__esModule\\\",{value:!0});Re.shouldUseRule=Re.shouldUseGroup=Re.schemaHasRulesForType=void 0;function ky({schema:e,self:t},r){let s=t.RULES.types[r];return s&&s!==!0&&ku(e,s)}Re.schemaHasRulesForType=ky;function ku(e,t){return t.rules.some(r=>Cu(e,r))}Re.shouldUseGroup=ku;function Cu(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}Re.shouldUseRule=Cu});var Ut=d(ee=>{\\\"use strict\\\";Object.defineProperty(ee,\\\"__esModule\\\",{value:!0});ee.reportTypeError=ee.checkDataTypes=ee.checkDataType=ee.coerceAndCheckDataType=ee.getJSONTypes=ee.getSchemaTypes=ee.DataType=void 0;var Cy=Rs(),Ry=As(),Ay=ct(),P=I(),Ru=D(),ft;(function(e){e[e.Correct=0]=\\\"Correct\\\",e[e.Wrong=1]=\\\"Wrong\\\"})(ft||(ee.DataType=ft={}));function Dy(e){let t=Au(e.type);if(t.includes(\\\"null\\\")){if(e.nullable===!1)throw new Error(\\\"type: null contradicts nullable: false\\\")}else{if(!t.length&&e.nullable!==void 0)throw new Error('\\\"nullable\\\" cannot be used without \\\"type\\\"');e.nullable===!0&&t.push(\\\"null\\\")}return t}ee.getSchemaTypes=Dy;function Au(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(Cy.isJSONType))return t;throw new Error(\\\"type must be JSONType or JSONType[]: \\\"+t.join(\\\",\\\"))}ee.getJSONTypes=Au;function My(e,t){let{gen:r,data:s,opts:n}=e,o=xy(t,n.coerceTypes),a=t.length>0&&!(o.length===0&&t.length===1&&(0,Ry.schemaHasRulesForType)(e,t[0]));if(a){let i=Ms(t,s,n.strictNumbers,ft.Wrong);r.if(i,()=>{o.length?Vy(e,t,o):xs(e)})}return a}ee.coerceAndCheckDataType=My;var Du=new Set([\\\"string\\\",\\\"number\\\",\\\"integer\\\",\\\"boolean\\\",\\\"null\\\"]);function xy(e,t){return t?e.filter(r=>Du.has(r)||t===\\\"array\\\"&&r===\\\"array\\\"):[]}function Vy(e,t,r){let{gen:s,data:n,opts:o}=e,a=s.let(\\\"dataType\\\",(0,P._)`typeof ${n}`),i=s.let(\\\"coerced\\\",(0,P._)`undefined`);o.coerceTypes===\\\"array\\\"&&s.if((0,P._)`${a} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,(0,P._)`${n}[0]`).assign(a,(0,P._)`typeof ${n}`).if(Ms(t,n,o.strictNumbers),()=>s.assign(i,n))),s.if((0,P._)`${i} !== undefined`);for(let c of r)(Du.has(c)||c===\\\"array\\\"&&o.coerceTypes===\\\"array\\\")&&u(c);s.else(),xs(e),s.endIf(),s.if((0,P._)`${i} !== undefined`,()=>{s.assign(n,i),zy(e,i)});function u(c){switch(c){case\\\"string\\\":s.elseIf((0,P._)`${a} == \\\"number\\\" || ${a} == \\\"boolean\\\"`).assign(i,(0,P._)`\\\"\\\" + ${n}`).elseIf((0,P._)`${n} === null`).assign(i,(0,P._)`\\\"\\\"`);return;case\\\"number\\\":s.elseIf((0,P._)`${a} == \\\"boolean\\\" || ${n} === null\\n              || (${a} == \\\"string\\\" && ${n} && ${n} == +${n})`).assign(i,(0,P._)`+${n}`);return;case\\\"integer\\\":s.elseIf((0,P._)`${a} === \\\"boolean\\\" || ${n} === null\\n              || (${a} === \\\"string\\\" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(i,(0,P._)`+${n}`);return;case\\\"boolean\\\":s.elseIf((0,P._)`${n} === \\\"false\\\" || ${n} === 0 || ${n} === null`).assign(i,!1).elseIf((0,P._)`${n} === \\\"true\\\" || ${n} === 1`).assign(i,!0);return;case\\\"null\\\":s.elseIf((0,P._)`${n} === \\\"\\\" || ${n} === 0 || ${n} === false`),s.assign(i,null);return;case\\\"array\\\":s.elseIf((0,P._)`${a} === \\\"string\\\" || ${a} === \\\"number\\\"\\n              || ${a} === \\\"boolean\\\" || ${n} === null`).assign(i,(0,P._)`[${n}]`)}}}function zy({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,P._)`${t} !== undefined`,()=>e.assign((0,P._)`${t}[${r}]`,s))}function Ds(e,t,r,s=ft.Correct){let n=s===ft.Correct?P.operators.EQ:P.operators.NEQ,o;switch(e){case\\\"null\\\":return(0,P._)`${t} ${n} null`;case\\\"array\\\":o=(0,P._)`Array.isArray(${t})`;break;case\\\"object\\\":o=(0,P._)`${t} && typeof ${t} == \\\"object\\\" && !Array.isArray(${t})`;break;case\\\"integer\\\":o=a((0,P._)`!(${t} % 1) && !isNaN(${t})`);break;case\\\"number\\\":o=a();break;default:return(0,P._)`typeof ${t} ${n} ${e}`}return s===ft.Correct?o:(0,P.not)(o);function a(i=P.nil){return(0,P.and)((0,P._)`typeof ${t} == \\\"number\\\"`,i,r?(0,P._)`isFinite(${t})`:P.nil)}}ee.checkDataType=Ds;function Ms(e,t,r,s){if(e.length===1)return Ds(e[0],t,r,s);let n,o=(0,Ru.toHash)(e);if(o.array&&o.object){let a=(0,P._)`typeof ${t} != \\\"object\\\"`;n=o.null?a:(0,P._)`!${t} || ${a}`,delete o.null,delete o.array,delete o.object}else n=P.nil;o.number&&delete o.integer;for(let a in o)n=(0,P.and)(n,Ds(a,t,r,s));return n}ee.checkDataTypes=Ms;var Ly={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e==\\\"string\\\"?(0,P._)`{type: ${e}}`:(0,P._)`{type: ${t}}`};function xs(e){let t=Uy(e);(0,Ay.reportError)(t,Ly)}ee.reportTypeError=xs;function Uy(e){let{gen:t,data:r,schema:s}=e,n=(0,Ru.schemaRefOrVal)(e,s,\\\"type\\\");return{gen:t,keyword:\\\"type\\\",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:e}}});var xu=d(Pr=>{\\\"use strict\\\";Object.defineProperty(Pr,\\\"__esModule\\\",{value:!0});Pr.assignDefaults=void 0;var pt=I(),Fy=D();function Ky(e,t){let{properties:r,items:s}=e.schema;if(t===\\\"object\\\"&&r)for(let n in r)Mu(e,n,r[n].default);else t===\\\"array\\\"&&Array.isArray(s)&&s.forEach((n,o)=>Mu(e,o,n.default))}Pr.assignDefaults=Ky;function Mu(e,t,r){let{gen:s,compositeRule:n,data:o,opts:a}=e;if(r===void 0)return;let i=(0,pt._)`${o}${(0,pt.getProperty)(t)}`;if(n){(0,Fy.checkStrictMode)(e,`default is ignored for: ${i}`);return}let u=(0,pt._)`${i} === undefined`;a.useDefaults===\\\"empty\\\"&&(u=(0,pt._)`${u} || ${i} === null || ${i} === \\\"\\\"`),s.if(u,(0,pt._)`${i} = ${(0,pt.stringify)(r)}`)}});var me=d(z=>{\\\"use strict\\\";Object.defineProperty(z,\\\"__esModule\\\",{value:!0});z.validateUnion=z.validateArray=z.usePattern=z.callValidateCode=z.schemaProperties=z.allSchemaProperties=z.noPropertyInData=z.propertyInData=z.isOwnProperty=z.hasPropFunc=z.reportMissingProp=z.checkMissingProp=z.checkReportMissingProp=void 0;var F=I(),Vs=D(),Ae=we(),Hy=D();function Gy(e,t){let{gen:r,data:s,it:n}=e;r.if(Ls(r,s,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,F._)`${t}`},!0),e.error()})}z.checkReportMissingProp=Gy;function Jy({gen:e,data:t,it:{opts:r}},s,n){return(0,F.or)(...s.map(o=>(0,F.and)(Ls(e,t,o,r.ownProperties),(0,F._)`${n} = ${o}`)))}z.checkMissingProp=Jy;function Wy(e,t){e.setParams({missingProperty:t},!0),e.error()}z.reportMissingProp=Wy;function Vu(e){return e.scopeValue(\\\"func\\\",{ref:Object.prototype.hasOwnProperty,code:(0,F._)`Object.prototype.hasOwnProperty`})}z.hasPropFunc=Vu;function zs(e,t,r){return(0,F._)`${Vu(e)}.call(${t}, ${r})`}z.isOwnProperty=zs;function Xy(e,t,r,s){let n=(0,F._)`${t}${(0,F.getProperty)(r)} !== undefined`;return s?(0,F._)`${n} && ${zs(e,t,r)}`:n}z.propertyInData=Xy;function Ls(e,t,r,s){let n=(0,F._)`${t}${(0,F.getProperty)(r)} === undefined`;return s?(0,F.or)(n,(0,F.not)(zs(e,t,r))):n}z.noPropertyInData=Ls;function zu(e){return e?Object.keys(e).filter(t=>t!==\\\"__proto__\\\"):[]}z.allSchemaProperties=zu;function By(e,t){return zu(t).filter(r=>!(0,Vs.alwaysValidSchema)(e,t[r]))}z.schemaProperties=By;function Yy({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:o},it:a},i,u,c){let l=c?(0,F._)`${e}, ${t}, ${s}${n}`:t,f=[[Ae.default.instancePath,(0,F.strConcat)(Ae.default.instancePath,o)],[Ae.default.parentData,a.parentData],[Ae.default.parentDataProperty,a.parentDataProperty],[Ae.default.rootData,Ae.default.rootData]];a.opts.dynamicRef&&f.push([Ae.default.dynamicAnchors,Ae.default.dynamicAnchors]);let _=(0,F._)`${l}, ${r.object(...f)}`;return u!==F.nil?(0,F._)`${i}.call(${u}, ${_})`:(0,F._)`${i}(${_})`}z.callValidateCode=Yy;var Zy=(0,F._)`new RegExp`;function Qy({gen:e,it:{opts:t}},r){let s=t.unicodeRegExp?\\\"u\\\":\\\"\\\",{regExp:n}=t.code,o=n(r,s);return e.scopeValue(\\\"pattern\\\",{key:o.toString(),ref:o,code:(0,F._)`${n.code===\\\"new RegExp\\\"?Zy:(0,Hy.useFunc)(e,n)}(${r}, ${s})`})}z.usePattern=Qy;function e_(e){let{gen:t,data:r,keyword:s,it:n}=e,o=t.name(\\\"valid\\\");if(n.allErrors){let i=t.let(\\\"valid\\\",!0);return a(()=>t.assign(i,!1)),i}return t.var(o,!0),a(()=>t.break()),o;function a(i){let u=t.const(\\\"len\\\",(0,F._)`${r}.length`);t.forRange(\\\"i\\\",0,u,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Vs.Type.Num},o),t.if((0,F.not)(o),i)})}}z.validateArray=e_;function t_(e){let{gen:t,schema:r,keyword:s,it:n}=e;if(!Array.isArray(r))throw new Error(\\\"ajv implementation error\\\");if(r.some(u=>(0,Vs.alwaysValidSchema)(n,u))&&!n.opts.unevaluated)return;let a=t.let(\\\"valid\\\",!1),i=t.name(\\\"_valid\\\");t.block(()=>r.forEach((u,c)=>{let l=e.subschema({keyword:s,schemaProp:c,compositeRule:!0},i);t.assign(a,(0,F._)`${a} || ${i}`),e.mergeValidEvaluated(l,i)||t.if((0,F.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}z.validateUnion=t_});var Fu=d(Se=>{\\\"use strict\\\";Object.defineProperty(Se,\\\"__esModule\\\",{value:!0});Se.validateKeywordUsage=Se.validSchemaType=Se.funcKeywordCode=Se.macroKeywordCode=void 0;var se=I(),Xe=we(),r_=me(),s_=ct();function n_(e,t){let{gen:r,keyword:s,schema:n,parentSchema:o,it:a}=e,i=t.macro.call(a.self,n,o,a),u=Uu(r,s,i);a.opts.validateSchema!==!1&&a.self.validateSchema(i,!0);let c=r.name(\\\"valid\\\");e.subschema({schema:i,schemaPath:se.nil,errSchemaPath:`${a.errSchemaPath}/${s}`,topSchemaRef:u,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Se.macroKeywordCode=n_;function o_(e,t){var r;let{gen:s,keyword:n,schema:o,parentSchema:a,$data:i,it:u}=e;i_(u,t);let c=!i&&t.compile?t.compile.call(u.self,o,a,u):t.validate,l=Uu(s,n,c),f=s.let(\\\"valid\\\");e.block$data(f,_),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function _(){if(t.errors===!1)p(),t.modifying&&Lu(e),y(()=>e.error());else{let $=t.async?m():h();t.modifying&&Lu(e),y(()=>a_(e,$))}}function m(){let $=s.let(\\\"ruleErrs\\\",null);return s.try(()=>p((0,se._)`await `),j=>s.assign(f,!1).if((0,se._)`${j} instanceof ${u.ValidationError}`,()=>s.assign($,(0,se._)`${j}.errors`),()=>s.throw(j))),$}function h(){let $=(0,se._)`${l}.errors`;return s.assign($,null),p(se.nil),$}function p($=t.async?(0,se._)`await `:se.nil){let j=u.opts.passContext?Xe.default.this:Xe.default.self,N=!(\\\"compile\\\"in t&&!i||t.schema===!1);s.assign(f,(0,se._)`${$}${(0,r_.callValidateCode)(e,l,j,N)}`,t.modifying)}function y($){var j;s.if((0,se.not)((j=t.valid)!==null&&j!==void 0?j:f),$)}}Se.funcKeywordCode=o_;function Lu(e){let{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,(0,se._)`${s.parentData}[${s.parentDataProperty}]`))}function a_(e,t){let{gen:r}=e;r.if((0,se._)`Array.isArray(${t})`,()=>{r.assign(Xe.default.vErrors,(0,se._)`${Xe.default.vErrors} === null ? ${t} : ${Xe.default.vErrors}.concat(${t})`).assign(Xe.default.errors,(0,se._)`${Xe.default.vErrors}.length`),(0,s_.extendErrors)(e)},()=>e.error())}function i_({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error(\\\"async keyword in sync schema\\\")}function Uu(e,t,r){if(r===void 0)throw new Error(`keyword \\\"${t}\\\" failed to compile`);return e.scopeValue(\\\"keyword\\\",typeof r==\\\"function\\\"?{ref:r}:{ref:r,code:(0,se.stringify)(r)})}function u_(e,t,r=!1){return!t.length||t.some(s=>s===\\\"array\\\"?Array.isArray(e):s===\\\"object\\\"?e&&typeof e==\\\"object\\\"&&!Array.isArray(e):typeof e==s||r&&typeof e==\\\"undefined\\\")}Se.validSchemaType=u_;function c_({schema:e,opts:t,self:r,errSchemaPath:s},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error(\\\"ajv implementation error\\\");let a=n.dependencies;if(a!=null&&a.some(i=>!Object.prototype.hasOwnProperty.call(e,i)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(\\\",\\\")}`);if(n.validateSchema&&!n.validateSchema(e[o])){let u=`keyword \\\"${o}\\\" value is invalid at path \\\"${s}\\\": `+r.errorsText(n.validateSchema.errors);if(t.validateSchema===\\\"log\\\")r.logger.error(u);else throw new Error(u)}}Se.validateKeywordUsage=c_});var Hu=d(De=>{\\\"use strict\\\";Object.defineProperty(De,\\\"__esModule\\\",{value:!0});De.extendSubschemaMode=De.extendSubschemaData=De.getSubschema=void 0;var Pe=I(),Ku=D();function l_(e,{keyword:t,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&s!==void 0)throw new Error('both \\\"keyword\\\" and \\\"schema\\\" passed, only one allowed');if(t!==void 0){let i=e.schema[t];return r===void 0?{schema:i,schemaPath:(0,Pe._)`${e.schemaPath}${(0,Pe.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:(0,Pe._)`${e.schemaPath}${(0,Pe.getProperty)(t)}${(0,Pe.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ku.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||o===void 0||a===void 0)throw new Error('\\\"schemaPath\\\", \\\"errSchemaPath\\\" and \\\"topSchemaRef\\\" are required with \\\"schema\\\"');return{schema:s,schemaPath:n,topSchemaRef:a,errSchemaPath:o}}throw new Error('either \\\"keyword\\\" or \\\"schema\\\" must be passed')}De.getSubschema=l_;function d_(e,t,{dataProp:r,dataPropType:s,data:n,dataTypes:o,propertyName:a}){if(n!==void 0&&r!==void 0)throw new Error('both \\\"data\\\" and \\\"dataProp\\\" passed, only one allowed');let{gen:i}=t;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=t,_=i.let(\\\"data\\\",(0,Pe._)`${t.data}${(0,Pe.getProperty)(r)}`,!0);u(_),e.errorPath=(0,Pe.str)`${c}${(0,Ku.getErrorPath)(r,s,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Pe._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(n!==void 0){let c=n instanceof Pe.Name?n:i.let(\\\"data\\\",n,!0);u(c),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function u(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}De.extendSubschemaData=d_;function f_(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:o}){s!==void 0&&(e.compositeRule=s),n!==void 0&&(e.createErrors=n),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}De.extendSubschemaMode=f_});var Us=d((EE,Gu)=>{\\\"use strict\\\";Gu.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t==\\\"object\\\"&&typeof r==\\\"object\\\"){if(t.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!==0;){var a=o[n];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var Wu=d((wE,Ju)=>{\\\"use strict\\\";var Me=Ju.exports=function(e,t,r){typeof t==\\\"function\\\"&&(r=t,t={}),r=t.cb||r;var s=typeof r==\\\"function\\\"?r:r.pre||function(){},n=r.post||function(){};Nr(t,s,n,e,\\\"\\\",e)};Me.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Me.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Me.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Me.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Nr(e,t,r,s,n,o,a,i,u,c){if(s&&typeof s==\\\"object\\\"&&!Array.isArray(s)){t(s,n,o,a,i,u,c);for(var l in s){var f=s[l];if(Array.isArray(f)){if(l in Me.arrayKeywords)for(var _=0;_<f.length;_++)Nr(e,t,r,f[_],n+\\\"/\\\"+l+\\\"/\\\"+_,o,n,l,s,_)}else if(l in Me.propsKeywords){if(f&&typeof f==\\\"object\\\")for(var m in f)Nr(e,t,r,f[m],n+\\\"/\\\"+l+\\\"/\\\"+p_(m),o,n,l,s,m)}else(l in Me.keywords||e.allKeys&&!(l in Me.skipKeywords))&&Nr(e,t,r,f,n+\\\"/\\\"+l,o,n,l,s)}r(s,n,o,a,i,u,c)}}function p_(e){return e.replace(/~/g,\\\"~0\\\").replace(/\\\\//g,\\\"~1\\\")}});var Ft=d(ie=>{\\\"use strict\\\";Object.defineProperty(ie,\\\"__esModule\\\",{value:!0});ie.getSchemaRefs=ie.resolveUrl=ie.normalizeId=ie._getFullPath=ie.getFullPath=ie.inlineRef=void 0;var h_=D(),m_=Us(),y_=Wu(),__=new Set([\\\"type\\\",\\\"format\\\",\\\"pattern\\\",\\\"maxLength\\\",\\\"minLength\\\",\\\"maxProperties\\\",\\\"minProperties\\\",\\\"maxItems\\\",\\\"minItems\\\",\\\"maximum\\\",\\\"minimum\\\",\\\"uniqueItems\\\",\\\"multipleOf\\\",\\\"required\\\",\\\"enum\\\",\\\"const\\\"]);function g_(e,t=!0){return typeof e==\\\"boolean\\\"?!0:t===!0?!Fs(e):t?Xu(e)<=t:!1}ie.inlineRef=g_;var $_=new Set([\\\"$ref\\\",\\\"$recursiveRef\\\",\\\"$recursiveAnchor\\\",\\\"$dynamicRef\\\",\\\"$dynamicAnchor\\\"]);function Fs(e){for(let t in e){if($_.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(Fs)||typeof r==\\\"object\\\"&&Fs(r))return!0}return!1}function Xu(e){let t=0;for(let r in e){if(r===\\\"$ref\\\")return 1/0;if(t++,!__.has(r)&&(typeof e[r]==\\\"object\\\"&&(0,h_.eachItem)(e[r],s=>t+=Xu(s)),t===1/0))return 1/0}return t}function Bu(e,t=\\\"\\\",r){r!==!1&&(t=ht(t));let s=e.parse(t);return Yu(e,s)}ie.getFullPath=Bu;function Yu(e,t){return e.serialize(t).split(\\\"#\\\")[0]+\\\"#\\\"}ie._getFullPath=Yu;var v_=/#\\\\/?$/;function ht(e){return e?e.replace(v_,\\\"\\\"):\\\"\\\"}ie.normalizeId=ht;function b_(e,t,r){return r=ht(r),e.resolve(t,r)}ie.resolveUrl=b_;var E_=/^[a-z_][-a-z0-9._]*$/i;function w_(e,t){if(typeof e==\\\"boolean\\\")return{};let{schemaId:r,uriResolver:s}=this.opts,n=ht(e[r]||t),o={\\\"\\\":n},a=Bu(s,n,!1),i={},u=new Set;return y_(e,{allKeys:!0},(f,_,m,h)=>{if(h===void 0)return;let p=a+_,y=o[h];typeof f[r]==\\\"string\\\"&&(y=$.call(this,f[r])),j.call(this,f.$anchor),j.call(this,f.$dynamicAnchor),o[_]=y;function $(N){let V=this.opts.uriResolver.resolve;if(N=ht(y?V(y,N):N),u.has(N))throw l(N);u.add(N);let S=this.refs[N];return typeof S==\\\"string\\\"&&(S=this.refs[S]),typeof S==\\\"object\\\"?c(f,S.schema,N):N!==ht(p)&&(N[0]===\\\"#\\\"?(c(f,i[N],N),i[N]=f):this.refs[N]=p),N}function j(N){if(typeof N==\\\"string\\\"){if(!E_.test(N))throw new Error(`invalid anchor \\\"${N}\\\"`);$.call(this,`#${N}`)}}}),i;function c(f,_,m){if(_!==void 0&&!m_(f,_))throw l(m)}function l(f){return new Error(`reference \\\"${f}\\\" resolves to more than one schema`)}}ie.getSchemaRefs=w_});var mt=d(xe=>{\\\"use strict\\\";Object.defineProperty(xe,\\\"__esModule\\\",{value:!0});xe.getData=xe.KeywordCxt=xe.validateFunctionCode=void 0;var rc=ju(),Zu=Ut(),Hs=As(),Or=Ut(),S_=xu(),Ht=Fu(),Ks=Hu(),b=I(),w=we(),P_=Ft(),je=D(),Kt=ct();function N_(e){if(oc(e)&&(ac(e),nc(e))){I_(e);return}sc(e,()=>(0,rc.topBoolOrEmptySchema)(e))}xe.validateFunctionCode=N_;function sc({gen:e,validateName:t,schema:r,schemaEnv:s,opts:n},o){n.code.es5?e.func(t,(0,b._)`${w.default.data}, ${w.default.valCxt}`,s.$async,()=>{e.code((0,b._)`\\\"use strict\\\"; ${Qu(r,n)}`),T_(e,n),e.code(o)}):e.func(t,(0,b._)`${w.default.data}, ${O_(n)}`,s.$async,()=>e.code(Qu(r,n)).code(o))}function O_(e){return(0,b._)`{${w.default.instancePath}=\\\"\\\", ${w.default.parentData}, ${w.default.parentDataProperty}, ${w.default.rootData}=${w.default.data}${e.dynamicRef?(0,b._)`, ${w.default.dynamicAnchors}={}`:b.nil}}={}`}function T_(e,t){e.if(w.default.valCxt,()=>{e.var(w.default.instancePath,(0,b._)`${w.default.valCxt}.${w.default.instancePath}`),e.var(w.default.parentData,(0,b._)`${w.default.valCxt}.${w.default.parentData}`),e.var(w.default.parentDataProperty,(0,b._)`${w.default.valCxt}.${w.default.parentDataProperty}`),e.var(w.default.rootData,(0,b._)`${w.default.valCxt}.${w.default.rootData}`),t.dynamicRef&&e.var(w.default.dynamicAnchors,(0,b._)`${w.default.valCxt}.${w.default.dynamicAnchors}`)},()=>{e.var(w.default.instancePath,(0,b._)`\\\"\\\"`),e.var(w.default.parentData,(0,b._)`undefined`),e.var(w.default.parentDataProperty,(0,b._)`undefined`),e.var(w.default.rootData,w.default.data),t.dynamicRef&&e.var(w.default.dynamicAnchors,(0,b._)`{}`)})}function I_(e){let{schema:t,opts:r,gen:s}=e;sc(e,()=>{r.$comment&&t.$comment&&uc(e),R_(e),s.let(w.default.vErrors,null),s.let(w.default.errors,0),r.unevaluated&&q_(e),ic(e),M_(e)})}function q_(e){let{gen:t,validateName:r}=e;e.evaluated=t.const(\\\"evaluated\\\",(0,b._)`${r}.evaluated`),t.if((0,b._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,b._)`${e.evaluated}.props`,(0,b._)`undefined`)),t.if((0,b._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,b._)`${e.evaluated}.items`,(0,b._)`undefined`))}function Qu(e,t){let r=typeof e==\\\"object\\\"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,b._)`/*# sourceURL=${r} */`:b.nil}function j_(e,t){if(oc(e)&&(ac(e),nc(e))){k_(e,t);return}(0,rc.boolOrEmptySchema)(e,t)}function nc({schema:e,self:t}){if(typeof e==\\\"boolean\\\")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function oc(e){return typeof e.schema!=\\\"boolean\\\"}function k_(e,t){let{schema:r,gen:s,opts:n}=e;n.$comment&&r.$comment&&uc(e),A_(e),D_(e);let o=s.const(\\\"_errs\\\",w.default.errors);ic(e,o),s.var(t,(0,b._)`${o} === ${w.default.errors}`)}function ac(e){(0,je.checkUnknownRules)(e),C_(e)}function ic(e,t){if(e.opts.jtd)return ec(e,[],!1,t);let r=(0,Zu.getSchemaTypes)(e.schema),s=(0,Zu.coerceAndCheckDataType)(e,r);ec(e,r,!s,t)}function C_(e){let{schema:t,errSchemaPath:r,opts:s,self:n}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,je.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path \\\"${r}\\\"`)}function R_(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,je.checkStrictMode)(e,\\\"default is ignored in the schema root\\\")}function A_(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,P_.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function D_(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error(\\\"async schema in sync schema\\\")}function uc({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:n}){let o=r.$comment;if(n.$comment===!0)e.code((0,b._)`${w.default.self}.logger.log(${o})`);else if(typeof n.$comment==\\\"function\\\"){let a=(0,b.str)`${s}/$comment`,i=e.scopeValue(\\\"root\\\",{ref:t.root});e.code((0,b._)`${w.default.self}.opts.$comment(${o}, ${a}, ${i}.schema)`)}}function M_(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:n,opts:o}=e;r.$async?t.if((0,b._)`${w.default.errors} === 0`,()=>t.return(w.default.data),()=>t.throw((0,b._)`new ${n}(${w.default.vErrors})`)):(t.assign((0,b._)`${s}.errors`,w.default.vErrors),o.unevaluated&&x_(e),t.return((0,b._)`${w.default.errors} === 0`))}function x_({gen:e,evaluated:t,props:r,items:s}){r instanceof b.Name&&e.assign((0,b._)`${t}.props`,r),s instanceof b.Name&&e.assign((0,b._)`${t}.items`,s)}function ec(e,t,r,s){let{gen:n,schema:o,data:a,allErrors:i,opts:u,self:c}=e,{RULES:l}=c;if(o.$ref&&(u.ignoreKeywordsWithRef||!(0,je.schemaHasRulesButRef)(o,l))){n.block(()=>lc(e,\\\"$ref\\\",l.all.$ref.definition));return}u.jtd||V_(e,t),n.block(()=>{for(let _ of l.rules)f(_);f(l.post)});function f(_){(0,Hs.shouldUseGroup)(o,_)&&(_.type?(n.if((0,Or.checkDataType)(_.type,a,u.strictNumbers)),tc(e,_),t.length===1&&t[0]===_.type&&r&&(n.else(),(0,Or.reportTypeError)(e)),n.endIf()):tc(e,_),i||n.if((0,b._)`${w.default.errors} === ${s||0}`))}}function tc(e,t){let{gen:r,schema:s,opts:{useDefaults:n}}=e;n&&(0,S_.assignDefaults)(e,t.type),r.block(()=>{for(let o of t.rules)(0,Hs.shouldUseRule)(s,o)&&lc(e,o.keyword,o.definition,t.type)})}function V_(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(z_(e,t),e.opts.allowUnionTypes||L_(e,t),U_(e,e.dataTypes))}function z_(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{cc(e.dataTypes,r)||Gs(e,`type \\\"${r}\\\" not allowed by context \\\"${e.dataTypes.join(\\\",\\\")}\\\"`)}),K_(e,t)}}function L_(e,t){t.length>1&&!(t.length===2&&t.includes(\\\"null\\\"))&&Gs(e,\\\"use allowUnionTypes to allow union type keyword\\\")}function U_(e,t){let r=e.self.RULES.all;for(let s in r){let n=r[s];if(typeof n==\\\"object\\\"&&(0,Hs.shouldUseRule)(e.schema,n)){let{type:o}=n.definition;o.length&&!o.some(a=>F_(t,a))&&Gs(e,`missing type \\\"${o.join(\\\",\\\")}\\\" for keyword \\\"${s}\\\"`)}}}function F_(e,t){return e.includes(t)||t===\\\"number\\\"&&e.includes(\\\"integer\\\")}function cc(e,t){return e.includes(t)||t===\\\"integer\\\"&&e.includes(\\\"number\\\")}function K_(e,t){let r=[];for(let s of e.dataTypes)cc(t,s)?r.push(s):t.includes(\\\"integer\\\")&&s===\\\"number\\\"&&r.push(\\\"integer\\\");e.dataTypes=r}function Gs(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at \\\"${r}\\\" (strictTypes)`,(0,je.checkStrictMode)(e,t,e.opts.strictTypes)}var Tr=class{constructor(t,r,s){if((0,Ht.validateKeywordUsage)(t,r,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,je.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const(\\\"vSchema\\\",dc(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Ht.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);(\\\"code\\\"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const(\\\"_errs\\\",w.default.errors))}result(t,r,s){this.failResult((0,b.not)(t),r,s)}failResult(t,r,s){this.gen.if(t),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,b.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,b._)`${r} !== undefined && (${(0,b.or)(this.invalid$data(),t)})`)}error(t,r,s){if(r){this.setParams(r),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,r){(t?Kt.reportExtraError:Kt.reportError)(this,this.def.error,r)}$dataError(){(0,Kt.reportError)(this,this.def.$dataError||Kt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add \\\"trackErrors\\\" to keyword definition');(0,Kt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,s=b.nil){this.gen.block(()=>{this.check$data(t,s),r()})}check$data(t=b.nil,r=b.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:o,def:a}=this;s.if((0,b.or)((0,b._)`${n} === undefined`,r)),t!==b.nil&&s.assign(t,!0),(o.length||a.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==b.nil&&s.assign(t,!1)),s.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:s,def:n,it:o}=this;return(0,b.or)(a(),i());function a(){if(s.length){if(!(r instanceof b.Name))throw new Error(\\\"ajv implementation error\\\");let u=Array.isArray(s)?s:[s];return(0,b._)`${(0,Or.checkDataTypes)(u,r,o.opts.strictNumbers,Or.DataType.Wrong)}`}return b.nil}function i(){if(n.validateSchema){let u=t.scopeValue(\\\"validate$data\\\",{ref:n.validateSchema});return(0,b._)`!${u}(${r})`}return b.nil}}subschema(t,r){let s=(0,Ks.getSubschema)(this.it,t);(0,Ks.extendSubschemaData)(s,this.it,t),(0,Ks.extendSubschemaMode)(s,t);let n=W(L(L({},this.it),s),{items:void 0,props:void 0});return j_(n,r),n}mergeEvaluated(t,r){let{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=je.mergeEvaluated.props(n,t.props,s.props,r)),s.items!==!0&&t.items!==void 0&&(s.items=je.mergeEvaluated.items(n,t.items,s.items,r)))}mergeValidEvaluated(t,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(t,b.Name)),!0}};xe.KeywordCxt=Tr;function lc(e,t,r,s){let n=new Tr(e,r,t);\\\"code\\\"in r?r.code(n,s):n.$data&&r.validate?(0,Ht.funcKeywordCode)(n,r):\\\"macro\\\"in r?(0,Ht.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Ht.funcKeywordCode)(n,r)}var H_=/^\\\\/(?:[^~]|~0|~1)*$/,G_=/^([0-9]+)(#|\\\\/(?:[^~]|~0|~1)*)?$/;function dc(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let n,o;if(e===\\\"\\\")return w.default.rootData;if(e[0]===\\\"/\\\"){if(!H_.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,o=w.default.rootData}else{let c=G_.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+c[1];if(n=c[2],n===\\\"#\\\"){if(l>=t)throw new Error(u(\\\"property/index\\\",l));return s[t-l]}if(l>t)throw new Error(u(\\\"data\\\",l));if(o=r[t-l],!n)return o}let a=o,i=n.split(\\\"/\\\");for(let c of i)c&&(o=(0,b._)`${o}${(0,b.getProperty)((0,je.unescapeJsonPointer)(c))}`,a=(0,b._)`${a} && ${o}`);return a;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${t}`}}xe.getData=dc});var Ir=d(Ws=>{\\\"use strict\\\";Object.defineProperty(Ws,\\\"__esModule\\\",{value:!0});var Js=class extends Error{constructor(t){super(\\\"validation failed\\\"),this.errors=t,this.ajv=this.validation=!0}};Ws.default=Js});var Gt=d(Ys=>{\\\"use strict\\\";Object.defineProperty(Ys,\\\"__esModule\\\",{value:!0});var Xs=Ft(),Bs=class extends Error{constructor(t,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Xs.resolveUrl)(t,r,s),this.missingSchema=(0,Xs.normalizeId)((0,Xs.getFullPath)(t,this.missingRef))}};Ys.default=Bs});var jr=d(ye=>{\\\"use strict\\\";Object.defineProperty(ye,\\\"__esModule\\\",{value:!0});ye.resolveSchema=ye.getCompilingSchema=ye.resolveRef=ye.compileSchema=ye.SchemaEnv=void 0;var $e=I(),J_=Ir(),Be=we(),ve=Ft(),fc=D(),W_=mt(),yt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema==\\\"object\\\"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ve.normalizeId)(s==null?void 0:s[t.schemaId||\\\"$id\\\"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s==null?void 0:s.$async,this.refs={}}};ye.SchemaEnv=yt;function Qs(e){let t=pc.call(this,e);if(t)return t;let r=(0,ve.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:o}=this.opts,a=new $e.CodeGen(this.scope,{es5:s,lines:n,ownProperties:o}),i;e.$async&&(i=a.scopeValue(\\\"Error\\\",{ref:J_.default,code:(0,$e._)`require(\\\"ajv/dist/runtime/validation_error\\\").default`}));let u=a.scopeName(\\\"validate\\\");e.validateName=u;let c={gen:a,allErrors:this.opts.allErrors,data:Be.default.data,parentData:Be.default.parentData,parentDataProperty:Be.default.parentDataProperty,dataNames:[Be.default.data],dataPathArr:[$e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue(\\\"schema\\\",this.opts.code.source===!0?{ref:e.schema,code:(0,$e.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:$e.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?\\\"\\\":\\\"#\\\"),errorPath:(0,$e._)`\\\"\\\"`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,W_.validateFunctionCode)(c),a.optimize(this.opts.code.optimize);let f=a.toString();l=`${a.scopeRefs(Be.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let m=new Function(`${Be.default.self}`,`${Be.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:m}),m.errors=null,m.schema=e.schema,m.schemaEnv=e,e.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:u,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){let{props:h,items:p}=c;m.evaluated={props:h instanceof $e.Name?void 0:h,items:p instanceof $e.Name?void 0:p,dynamicProps:h instanceof $e.Name,dynamicItems:p instanceof $e.Name},m.source&&(m.source.evaluated=(0,$e.stringify)(m.evaluated))}return e.validate=m,e}catch(f){throw delete e.validate,delete e.validateName,l&&this.logger.error(\\\"Error compiling schema, function code:\\\",l),f}finally{this._compilations.delete(e)}}ye.compileSchema=Qs;function X_(e,t,r){var s;r=(0,ve.resolveUrl)(this.opts.uriResolver,t,r);let n=e.refs[r];if(n)return n;let o=Z_.call(this,e,r);if(o===void 0){let a=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:i}=this.opts;a&&(o=new yt({schema:a,schemaId:i,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=B_.call(this,o)}ye.resolveRef=X_;function B_(e){return(0,ve.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Qs.call(this,e)}function pc(e){for(let t of this._compilations)if(Y_(t,e))return t}ye.getCompilingSchema=pc;function Y_(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Z_(e,t){let r;for(;typeof(r=this.refs[t])==\\\"string\\\";)t=r;return r||this.schemas[t]||qr.call(this,e,t)}function qr(e,t){let r=this.opts.uriResolver.parse(t),s=(0,ve._getFullPath)(this.opts.uriResolver,r),n=(0,ve.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===n)return Zs.call(this,r,e);let o=(0,ve.normalizeId)(s),a=this.refs[o]||this.schemas[o];if(typeof a==\\\"string\\\"){let i=qr.call(this,e,a);return typeof(i==null?void 0:i.schema)!=\\\"object\\\"?void 0:Zs.call(this,r,i)}if(typeof(a==null?void 0:a.schema)==\\\"object\\\"){if(a.validate||Qs.call(this,a),o===(0,ve.normalizeId)(t)){let{schema:i}=a,{schemaId:u}=this.opts,c=i[u];return c&&(n=(0,ve.resolveUrl)(this.opts.uriResolver,n,c)),new yt({schema:i,schemaId:u,root:e,baseId:n})}return Zs.call(this,r,a)}}ye.resolveSchema=qr;var Q_=new Set([\\\"properties\\\",\\\"patternProperties\\\",\\\"enum\\\",\\\"dependencies\\\",\\\"definitions\\\"]);function Zs(e,{baseId:t,schema:r,root:s}){var n;if(((n=e.fragment)===null||n===void 0?void 0:n[0])!==\\\"/\\\")return;for(let i of e.fragment.slice(1).split(\\\"/\\\")){if(typeof r==\\\"boolean\\\")return;let u=r[(0,fc.unescapeFragment)(i)];if(u===void 0)return;r=u;let c=typeof r==\\\"object\\\"&&r[this.opts.schemaId];!Q_.has(i)&&c&&(t=(0,ve.resolveUrl)(this.opts.uriResolver,t,c))}let o;if(typeof r!=\\\"boolean\\\"&&r.$ref&&!(0,fc.schemaHasRulesButRef)(r,this.RULES)){let i=(0,ve.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=qr.call(this,s,i)}let{schemaId:a}=this.opts;if(o=o||new yt({schema:r,schemaId:a,root:s,baseId:t}),o.schema!==o.root.schema)return o}});var hc=d((qE,eg)=>{eg.exports={$id:\\\"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\\\",description:\\\"Meta-schema for $data reference (JSON AnySchema extension proposal)\\\",type:\\\"object\\\",required:[\\\"$data\\\"],properties:{$data:{type:\\\"string\\\",anyOf:[{format:\\\"relative-json-pointer\\\"},{format:\\\"json-pointer\\\"}]}},additionalProperties:!1}});var yc=d((jE,mc)=>{\\\"use strict\\\";var tg={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};mc.exports={HEX:tg}});var Sc=d((kE,wc)=>{\\\"use strict\\\";var{HEX:rg}=yc();function vc(e){if(Ec(e,\\\".\\\")<3)return{host:e,isIPV4:!1};let t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:ng(r,\\\".\\\"),isIPV4:!0}:{host:e,isIPV4:!1}}function en(e,t=!1){let r=\\\"\\\",s=!0;for(let n of e){if(rg[n]===void 0)return;n!==\\\"0\\\"&&s===!0&&(s=!1),s||(r+=n)}return t&&r.length===0&&(r=\\\"0\\\"),r}function sg(e){let t=0,r={error:!1,address:\\\"\\\",zone:\\\"\\\"},s=[],n=[],o=!1,a=!1,i=!1;function u(){if(n.length){if(o===!1){let c=en(n);if(c!==void 0)s.push(c);else return r.error=!0,!1}n.length=0}return!0}for(let c=0;c<e.length;c++){let l=e[c];if(!(l===\\\"[\\\"||l===\\\"]\\\"))if(l===\\\":\\\"){if(a===!0&&(i=!0),!u())break;if(t++,s.push(\\\":\\\"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===\\\":\\\"&&(a=!0);continue}else if(l===\\\"%\\\"){if(!u())break;o=!0}else{n.push(l);continue}}return n.length&&(o?r.zone=n.join(\\\"\\\"):i?s.push(n.join(\\\"\\\")):s.push(en(n))),r.address=s.join(\\\"\\\"),r}function bc(e,t={}){if(Ec(e,\\\":\\\")<2)return{host:e,isIPV6:!1};let r=sg(e);if(r.error)return{host:e,isIPV6:!1};{let s=r.address,n=r.address;return r.zone&&(s+=\\\"%\\\"+r.zone,n+=\\\"%25\\\"+r.zone),{host:s,escapedHost:n,isIPV6:!0}}}function ng(e,t){let r=\\\"\\\",s=!0,n=e.length;for(let o=0;o<n;o++){let a=e[o];a===\\\"0\\\"&&s?(o+1<=n&&e[o+1]===t||o+1===n)&&(r+=a,s=!1):(a===t?s=!0:s=!1,r+=a)}return r}function Ec(e,t){let r=0;for(let s=0;s<e.length;s++)e[s]===t&&r++;return r}var _c=/^\\\\.\\\\.?\\\\//u,gc=/^\\\\/\\\\.(?:\\\\/|$)/u,$c=/^\\\\/\\\\.\\\\.(?:\\\\/|$)/u,og=/^\\\\/?(?:.|\\\\n)*?(?=\\\\/|$)/u;function ag(e){let t=[];for(;e.length;)if(e.match(_c))e=e.replace(_c,\\\"\\\");else if(e.match(gc))e=e.replace(gc,\\\"/\\\");else if(e.match($c))e=e.replace($c,\\\"/\\\"),t.pop();else if(e===\\\".\\\"||e===\\\"..\\\")e=\\\"\\\";else{let r=e.match(og);if(r){let s=r[0];e=e.slice(s.length),t.push(s)}else throw new Error(\\\"Unexpected dot segment condition\\\")}return t.join(\\\"\\\")}function ig(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function ug(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push(\\\"@\\\")),e.host!==void 0){let s=unescape(e.host),n=vc(s);if(n.isIPV4)s=n.host;else{let o=bc(n.host,{isIPV4:!1});o.isIPV6===!0?s=`[${o.escapedHost}]`:s=e.host}r.push(s)}return(typeof e.port==\\\"number\\\"||typeof e.port==\\\"string\\\")&&(r.push(\\\":\\\"),r.push(String(e.port))),r.length?r.join(\\\"\\\"):void 0}wc.exports={recomposeAuthority:ug,normalizeComponentEncoding:ig,removeDotSegments:ag,normalizeIPv4:vc,normalizeIPv6:bc,stringArrayToHexStripped:en}});var qc=d((CE,Ic)=>{\\\"use strict\\\";var cg=/^[\\\\da-f]{8}\\\\b-[\\\\da-f]{4}\\\\b-[\\\\da-f]{4}\\\\b-[\\\\da-f]{4}\\\\b-[\\\\da-f]{12}$/iu,lg=/([\\\\da-z][\\\\d\\\\-a-z]{0,31}):((?:[\\\\w!$'()*+,\\\\-.:;=@]|%[\\\\da-f]{2})+)/iu;function Pc(e){return typeof e.secure==\\\"boolean\\\"?e.secure:String(e.scheme).toLowerCase()===\\\"wss\\\"}function Nc(e){return e.host||(e.error=e.error||\\\"HTTP URIs must have a host.\\\"),e}function Oc(e){let t=String(e.scheme).toLowerCase()===\\\"https\\\";return(e.port===(t?443:80)||e.port===\\\"\\\")&&(e.port=void 0),e.path||(e.path=\\\"/\\\"),e}function dg(e){return e.secure=Pc(e),e.resourceName=(e.path||\\\"/\\\")+(e.query?\\\"?\\\"+e.query:\\\"\\\"),e.path=void 0,e.query=void 0,e}function fg(e){if((e.port===(Pc(e)?443:80)||e.port===\\\"\\\")&&(e.port=void 0),typeof e.secure==\\\"boolean\\\"&&(e.scheme=e.secure?\\\"wss\\\":\\\"ws\\\",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split(\\\"?\\\");e.path=t&&t!==\\\"/\\\"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function pg(e,t){if(!e.path)return e.error=\\\"URN can not be parsed\\\",e;let r=e.path.match(lg);if(r){let s=t.scheme||e.scheme||\\\"urn\\\";e.nid=r[1].toLowerCase(),e.nss=r[2];let n=`${s}:${t.nid||e.nid}`,o=tn[n];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||\\\"URN can not be parsed.\\\";return e}function hg(e,t){let r=t.scheme||e.scheme||\\\"urn\\\",s=e.nid.toLowerCase(),n=`${r}:${t.nid||s}`,o=tn[n];o&&(e=o.serialize(e,t));let a=e,i=e.nss;return a.path=`${s||t.nid}:${i}`,t.skipEscape=!0,a}function mg(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!cg.test(r.uuid))&&(r.error=r.error||\\\"UUID is not valid.\\\"),r}function yg(e){let t=e;return t.nss=(e.uuid||\\\"\\\").toLowerCase(),t}var Tc={scheme:\\\"http\\\",domainHost:!0,parse:Nc,serialize:Oc},_g={scheme:\\\"https\\\",domainHost:Tc.domainHost,parse:Nc,serialize:Oc},kr={scheme:\\\"ws\\\",domainHost:!0,parse:dg,serialize:fg},gg={scheme:\\\"wss\\\",domainHost:kr.domainHost,parse:kr.parse,serialize:kr.serialize},$g={scheme:\\\"urn\\\",parse:pg,serialize:hg,skipNormalize:!0},vg={scheme:\\\"urn:uuid\\\",parse:mg,serialize:yg,skipNormalize:!0},tn={http:Tc,https:_g,ws:kr,wss:gg,urn:$g,\\\"urn:uuid\\\":vg};Ic.exports=tn});var kc=d((RE,Rr)=>{\\\"use strict\\\";var{normalizeIPv6:bg,normalizeIPv4:Eg,removeDotSegments:Jt,recomposeAuthority:wg,normalizeComponentEncoding:Cr}=Sc(),rn=qc();function Sg(e,t){return typeof e==\\\"string\\\"?e=Ne(ke(e,t),t):typeof e==\\\"object\\\"&&(e=ke(Ne(e,t),t)),e}function Pg(e,t,r){let s=Object.assign({scheme:\\\"null\\\"},r),n=jc(ke(e,s),ke(t,s),s,!0);return Ne(n,W(L({},s),{skipEscape:!0}))}function jc(e,t,r,s){let n={};return s||(e=ke(Ne(e,r),r),t=ke(Ne(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=Jt(t.path||\\\"\\\"),n.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=Jt(t.path||\\\"\\\"),n.query=t.query):(t.path?(t.path.charAt(0)===\\\"/\\\"?n.path=Jt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?n.path=\\\"/\\\"+t.path:e.path?n.path=e.path.slice(0,e.path.lastIndexOf(\\\"/\\\")+1)+t.path:n.path=t.path,n.path=Jt(n.path)),n.query=t.query):(n.path=e.path,t.query!==void 0?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function Ng(e,t,r){return typeof e==\\\"string\\\"?(e=unescape(e),e=Ne(Cr(ke(e,r),!0),W(L({},r),{skipEscape:!0}))):typeof e==\\\"object\\\"&&(e=Ne(Cr(e,!0),W(L({},r),{skipEscape:!0}))),typeof t==\\\"string\\\"?(t=unescape(t),t=Ne(Cr(ke(t,r),!0),W(L({},r),{skipEscape:!0}))):typeof t==\\\"object\\\"&&(t=Ne(Cr(t,!0),W(L({},r),{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()}function Ne(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:\\\"\\\"},s=Object.assign({},t),n=[],o=rn[(s.scheme||r.scheme||\\\"\\\").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split(\\\"%3A\\\").join(\\\":\\\")))),s.reference!==\\\"suffix\\\"&&r.scheme&&n.push(r.scheme,\\\":\\\");let a=wg(r,s);if(a!==void 0&&(s.reference!==\\\"suffix\\\"&&n.push(\\\"//\\\"),n.push(a),r.path&&r.path.charAt(0)!==\\\"/\\\"&&n.push(\\\"/\\\")),r.path!==void 0){let i=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(i=Jt(i)),a===void 0&&(i=i.replace(/^\\\\/\\\\//u,\\\"/%2F\\\")),n.push(i)}return r.query!==void 0&&n.push(\\\"?\\\",r.query),r.fragment!==void 0&&n.push(\\\"#\\\",r.fragment),n.join(\\\"\\\")}var Og=Array.from({length:127},(e,t)=>/[^!\\\"$&'()*+,\\\\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function Tg(e){let t=0;for(let r=0,s=e.length;r<s;++r)if(t=e.charCodeAt(r),t>126||Og[t])return!0;return!1}var Ig=/^(?:([^#/:?]+):)?(?:\\\\/\\\\/((?:([^#/?@]*)@)?(\\\\[[^#/?\\\\]]+\\\\]|[^#/:?]*)(?::(\\\\d*))?))?([^#?]*)(?:\\\\?([^#]*))?(?:#((?:.|[\\\\n\\\\r])*))?/u;function ke(e,t){let r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:\\\"\\\",port:void 0,path:\\\"\\\",query:void 0,fragment:void 0},n=e.indexOf(\\\"%\\\")!==-1,o=!1;r.reference===\\\"suffix\\\"&&(e=(r.scheme?r.scheme+\\\":\\\":\\\"\\\")+\\\"//\\\"+e);let a=e.match(Ig);if(a){if(s.scheme=a[1],s.userinfo=a[3],s.host=a[4],s.port=parseInt(a[5],10),s.path=a[6]||\\\"\\\",s.query=a[7],s.fragment=a[8],isNaN(s.port)&&(s.port=a[5]),s.host){let u=Eg(s.host);if(u.isIPV4===!1){let c=bg(u.host,{isIPV4:!1});s.host=c.host.toLowerCase(),o=c.isIPV6}else s.host=u.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference=\\\"same-document\\\":s.scheme===void 0?s.reference=\\\"relative\\\":s.fragment===void 0?s.reference=\\\"absolute\\\":s.reference=\\\"uri\\\",r.reference&&r.reference!==\\\"suffix\\\"&&r.reference!==s.reference&&(s.error=s.error||\\\"URI is not a \\\"+r.reference+\\\" reference.\\\");let i=rn[(r.scheme||s.scheme||\\\"\\\").toLowerCase()];if(!r.unicodeSupport&&(!i||!i.unicodeSupport)&&s.host&&(r.domainHost||i&&i.domainHost)&&o===!1&&Tg(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(u){s.error=s.error||\\\"Host's domain name can not be converted to ASCII: \\\"+u}(!i||i&&!i.skipNormalize)&&(n&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),n&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),i&&i.parse&&i.parse(s,r)}else s.error=s.error||\\\"URI can not be parsed.\\\";return s}var sn={SCHEMES:rn,normalize:Sg,resolve:Pg,resolveComponents:jc,equal:Ng,serialize:Ne,parse:ke};Rr.exports=sn;Rr.exports.default=sn;Rr.exports.fastUri=sn});var Rc=d(nn=>{\\\"use strict\\\";Object.defineProperty(nn,\\\"__esModule\\\",{value:!0});var Cc=kc();Cc.code='require(\\\"ajv/dist/runtime/uri\\\").default';nn.default=Cc});var Uc=d(B=>{\\\"use strict\\\";Object.defineProperty(B,\\\"__esModule\\\",{value:!0});B.CodeGen=B.Name=B.nil=B.stringify=B.str=B._=B.KeywordCxt=void 0;var qg=mt();Object.defineProperty(B,\\\"KeywordCxt\\\",{enumerable:!0,get:function(){return qg.KeywordCxt}});var _t=I();Object.defineProperty(B,\\\"_\\\",{enumerable:!0,get:function(){return _t._}});Object.defineProperty(B,\\\"str\\\",{enumerable:!0,get:function(){return _t.str}});Object.defineProperty(B,\\\"stringify\\\",{enumerable:!0,get:function(){return _t.stringify}});Object.defineProperty(B,\\\"nil\\\",{enumerable:!0,get:function(){return _t.nil}});Object.defineProperty(B,\\\"Name\\\",{enumerable:!0,get:function(){return _t.Name}});Object.defineProperty(B,\\\"CodeGen\\\",{enumerable:!0,get:function(){return _t.CodeGen}});var jg=Ir(),Vc=Gt(),kg=Rs(),Wt=jr(),Cg=I(),Xt=Ft(),Ar=Ut(),an=D(),Ac=hc(),Rg=Rc(),zc=(e,t)=>new RegExp(e,t);zc.code=\\\"new RegExp\\\";var Ag=[\\\"removeAdditional\\\",\\\"useDefaults\\\",\\\"coerceTypes\\\"],Dg=new Set([\\\"validate\\\",\\\"serialize\\\",\\\"parse\\\",\\\"wrapper\\\",\\\"root\\\",\\\"schema\\\",\\\"keyword\\\",\\\"pattern\\\",\\\"formats\\\",\\\"validate$data\\\",\\\"func\\\",\\\"obj\\\",\\\"Error\\\"]),Mg={errorDataPath:\\\"\\\",format:\\\"`validateFormats: false` can be used instead.\\\",nullable:'\\\"nullable\\\" keyword is supported by default.',jsonPointers:\\\"Deprecated jsPropertySyntax can be used instead.\\\",extendRefs:\\\"Deprecated ignoreKeywordsWithRef can be used instead.\\\",missingRefs:\\\"Pass empty schema with $id that should be ignored to ajv.addSchema.\\\",processCode:\\\"Use option `code: {process: (code, schemaEnv: object) => string}`\\\",sourceCode:\\\"Use option `code: {source: true}`\\\",strictDefaults:\\\"It is default now, see option `strict`.\\\",strictKeywords:\\\"It is default now, see option `strict`.\\\",uniqueItems:'\\\"uniqueItems\\\" keyword is always validated.',unknownFormats:\\\"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\\\",cache:\\\"Map is used as cache, schema object as key.\\\",serialize:\\\"Map is used as cache, schema object as key.\\\",ajvErrors:\\\"It is default now.\\\"},xg={ignoreKeywordsWithRef:\\\"\\\",jsPropertySyntax:\\\"\\\",unicode:'\\\"minLength\\\"/\\\"maxLength\\\" account for unicode characters by default.'},Dc=200;function Vg(e){var t,r,s,n,o,a,i,u,c,l,f,_,m,h,p,y,$,j,N,V,S,v,E,O,x;let H=e.strict,G=(t=e.code)===null||t===void 0?void 0:t.optimize,k=G===!0||G===void 0?1:G||0,M=(s=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:zc,fe=(n=e.uriResolver)!==null&&n!==void 0?n:Rg.default;return{strictSchema:(a=(o=e.strictSchema)!==null&&o!==void 0?o:H)!==null&&a!==void 0?a:!0,strictNumbers:(u=(i=e.strictNumbers)!==null&&i!==void 0?i:H)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=e.strictTypes)!==null&&c!==void 0?c:H)!==null&&l!==void 0?l:\\\"log\\\",strictTuples:(_=(f=e.strictTuples)!==null&&f!==void 0?f:H)!==null&&_!==void 0?_:\\\"log\\\",strictRequired:(h=(m=e.strictRequired)!==null&&m!==void 0?m:H)!==null&&h!==void 0?h:!1,code:e.code?W(L({},e.code),{optimize:k,regExp:M}):{optimize:k,regExp:M},loopRequired:(p=e.loopRequired)!==null&&p!==void 0?p:Dc,loopEnum:(y=e.loopEnum)!==null&&y!==void 0?y:Dc,meta:($=e.meta)!==null&&$!==void 0?$:!0,messages:(j=e.messages)!==null&&j!==void 0?j:!0,inlineRefs:(N=e.inlineRefs)!==null&&N!==void 0?N:!0,schemaId:(V=e.schemaId)!==null&&V!==void 0?V:\\\"$id\\\",addUsedSchema:(S=e.addUsedSchema)!==null&&S!==void 0?S:!0,validateSchema:(v=e.validateSchema)!==null&&v!==void 0?v:!0,validateFormats:(E=e.validateFormats)!==null&&E!==void 0?E:!0,unicodeRegExp:(O=e.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(x=e.int32range)!==null&&x!==void 0?x:!0,uriResolver:fe}}var Bt=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts=L(L({},t),Vg(t));let{es5:r,lines:s}=this.opts.code;this.scope=new Cg.ValueScope({scope:{},prefixes:Dg,es5:r,lines:s}),this.logger=Hg(t.logger);let n=t.validateFormats;t.validateFormats=!1,this.RULES=(0,kg.getRules)(),Mc.call(this,Mg,t,\\\"NOT SUPPORTED\\\"),Mc.call(this,xg,t,\\\"DEPRECATED\\\",\\\"warn\\\"),this._metaOpts=Fg.call(this),t.formats&&Lg.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Ug.call(this,t.keywords),typeof t.meta==\\\"object\\\"&&this.addMetaSchema(t.meta),zg.call(this),t.validateFormats=n}_addVocabularies(){this.addKeyword(\\\"$async\\\")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:s}=this.opts,n=Ac;s===\\\"id\\\"&&(n=L({},Ac),n.id=n.$id,delete n.$id),r&&t&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t==\\\"object\\\"?t[r]||t:void 0}validate(t,r){let s;if(typeof t==\\\"string\\\"){if(s=this.getSchema(t),!s)throw new Error(`no schema with key or ref \\\"${t}\\\"`)}else s=this.compile(t);let n=s(r);return\\\"$async\\\"in s||(this.errors=s.errors),n}compile(t,r){let s=this._addSchema(t,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(t,r){if(typeof this.opts.loadSchema!=\\\"function\\\")throw new Error(\\\"options.loadSchema should be a function\\\");let{loadSchema:s}=this.opts;return n.call(this,t,r);function n(l,f){return et(this,null,function*(){yield o.call(this,l.$schema);let _=this._addSchema(l,f);return _.validate||a.call(this,_)})}function o(l){return et(this,null,function*(){l&&!this.getSchema(l)&&(yield n.call(this,{$ref:l},!0))})}function a(l){return et(this,null,function*(){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof Vc.default))throw f;return i.call(this,f),yield u.call(this,f.missingSchema),a.call(this,l)}})}function i({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}function u(l){return et(this,null,function*(){let f=yield c.call(this,l);this.refs[l]||(yield o.call(this,f.$schema)),this.refs[l]||this.addSchema(f,l,r)})}function c(l){return et(this,null,function*(){let f=this._loading[l];if(f)return f;try{return yield this._loading[l]=s(l)}finally{delete this._loading[l]}})}}addSchema(t,r,s,n=this.opts.validateSchema){if(Array.isArray(t)){for(let a of t)this.addSchema(a,void 0,s,n);return this}let o;if(typeof t==\\\"object\\\"){let{schemaId:a}=this.opts;if(o=t[a],o!==void 0&&typeof o!=\\\"string\\\")throw new Error(`schema ${a} must be string`)}return r=(0,Xt.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(t,s,r,n,!0),this}addMetaSchema(t,r,s=this.opts.validateSchema){return this.addSchema(t,r,!0,s),this}validateSchema(t,r){if(typeof t==\\\"boolean\\\")return!0;let s;if(s=t.$schema,s!==void 0&&typeof s!=\\\"string\\\")throw new Error(\\\"$schema must be a string\\\");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn(\\\"meta-schema not available\\\"),this.errors=null,!0;let n=this.validate(s,t);if(!n&&r){let o=\\\"schema is invalid: \\\"+this.errorsText();if(this.opts.validateSchema===\\\"log\\\")this.logger.error(o);else throw new Error(o)}return n}getSchema(t){let r;for(;typeof(r=xc.call(this,t))==\\\"string\\\";)t=r;if(r===void 0){let{schemaId:s}=this.opts,n=new Wt.SchemaEnv({schema:{},schemaId:s});if(r=Wt.resolveSchema.call(this,n,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case\\\"undefined\\\":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case\\\"string\\\":{let r=xc.call(this,t);return typeof r==\\\"object\\\"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case\\\"object\\\":{let r=t;this._cache.delete(r);let s=t[this.opts.schemaId];return s&&(s=(0,Xt.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error(\\\"ajv.removeSchema: invalid parameter\\\")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let s;if(typeof t==\\\"string\\\")s=t,typeof r==\\\"object\\\"&&(this.logger.warn(\\\"these parameters are deprecated, see docs for addKeyword\\\"),r.keyword=s);else if(typeof t==\\\"object\\\"&&r===void 0){if(r=t,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error(\\\"addKeywords: keyword must be string or non-empty array\\\")}else throw new Error(\\\"invalid addKeywords parameters\\\");if(Jg.call(this,s,r),!r)return(0,an.eachItem)(s,o=>on.call(this,o)),this;Xg.call(this,r);let n=W(L({},r),{type:(0,Ar.getJSONTypes)(r.type),schemaType:(0,Ar.getJSONTypes)(r.schemaType)});return(0,an.eachItem)(s,n.type.length===0?o=>on.call(this,o,n):o=>n.type.forEach(a=>on.call(this,o,n,a))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r==\\\"object\\\"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let s of r.rules){let n=s.rules.findIndex(o=>o.keyword===t);n>=0&&s.rules.splice(n,1)}return this}addFormat(t,r){return typeof r==\\\"string\\\"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=\\\", \\\",dataVar:s=\\\"data\\\"}={}){return!t||t.length===0?\\\"No errors\\\":t.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(t,r){let s=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let n of r){let o=n.split(\\\"/\\\").slice(1),a=t;for(let i of o)a=a[i];for(let i in s){let u=s[i];if(typeof u!=\\\"object\\\")continue;let{$data:c}=u.definition,l=a[i];c&&l&&(a[i]=Lc(l))}}return t}_removeAllSchemas(t,r){for(let s in t){let n=t[s];(!r||r.test(s))&&(typeof n==\\\"string\\\"?delete t[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete t[s]))}}_addSchema(t,r,s,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let a,{schemaId:i}=this.opts;if(typeof t==\\\"object\\\")a=t[i];else{if(this.opts.jtd)throw new Error(\\\"schema must be object\\\");if(typeof t!=\\\"boolean\\\")throw new Error(\\\"schema must be object or boolean\\\")}let u=this._cache.get(t);if(u!==void 0)return u;s=(0,Xt.normalizeId)(a||s);let c=Xt.getSchemaRefs.call(this,t,s);return u=new Wt.SchemaEnv({schema:t,schemaId:i,meta:r,baseId:s,localRefs:c}),this._cache.set(u.schema,u),o&&!s.startsWith(\\\"#\\\")&&(s&&this._checkUnique(s),this.refs[s]=u),n&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id \\\"${t}\\\" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Wt.compileSchema.call(this,t),!t.validate)throw new Error(\\\"ajv implementation error\\\");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Wt.compileSchema.call(this,t)}finally{this.opts=r}}};Bt.ValidationError=jg.default;Bt.MissingRefError=Vc.default;B.default=Bt;function Mc(e,t,r,s=\\\"error\\\"){for(let n in e){let o=n;o in t&&this.logger[s](`${r}: option ${n}. ${e[o]}`)}}function xc(e){return e=(0,Xt.normalizeId)(e),this.schemas[e]||this.refs[e]}function zg(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function Lg(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function Ug(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn(\\\"keywords option as map is deprecated, pass array\\\");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function Fg(){let e=L({},this.opts);for(let t of Ag)delete e[t];return e}var Kg={log(){},warn(){},error(){}};function Hg(e){if(e===!1)return Kg;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error(\\\"logger must implement log, warn and error methods\\\")}var Gg=/^[a-z_$][a-z0-9_$:-]*$/i;function Jg(e,t){let{RULES:r}=this;if((0,an.eachItem)(e,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!Gg.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!t&&t.$data&&!(\\\"code\\\"in t||\\\"validate\\\"in t))throw new Error('$data keyword must have \\\"code\\\" or \\\"validate\\\" function')}function on(e,t,r){var s;let n=t==null?void 0:t.post;if(r&&n)throw new Error('keyword with \\\"post\\\" flag cannot have \\\"type\\\"');let{RULES:o}=this,a=n?o.post:o.rules.find(({type:u})=>u===r);if(a||(a={type:r,rules:[]},o.rules.push(a)),o.keywords[e]=!0,!t)return;let i={keyword:e,definition:W(L({},t),{type:(0,Ar.getJSONTypes)(t.type),schemaType:(0,Ar.getJSONTypes)(t.schemaType)})};t.before?Wg.call(this,a,i,t.before):a.rules.push(i),o.all[e]=i,(s=t.implements)===null||s===void 0||s.forEach(u=>this.addKeyword(u))}function Wg(e,t,r){let s=e.rules.findIndex(n=>n.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Xg(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Lc(t)),e.validateSchema=this.compile(t,!0))}var Bg={$ref:\\\"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\\\"};function Lc(e){return{anyOf:[e,Bg]}}});var Fc=d(un=>{\\\"use strict\\\";Object.defineProperty(un,\\\"__esModule\\\",{value:!0});var Yg={keyword:\\\"id\\\",code(){throw new Error('NOT SUPPORTED: keyword \\\"id\\\", use \\\"$id\\\" for schema ID')}};un.default=Yg});var Jc=d(Ye=>{\\\"use strict\\\";Object.defineProperty(Ye,\\\"__esModule\\\",{value:!0});Ye.callRef=Ye.getValidate=void 0;var Zg=Gt(),Kc=me(),ue=I(),gt=we(),Hc=jr(),Dr=D(),Qg={keyword:\\\"$ref\\\",schemaType:\\\"string\\\",code(e){let{gen:t,schema:r,it:s}=e,{baseId:n,schemaEnv:o,validateName:a,opts:i,self:u}=s,{root:c}=o;if((r===\\\"#\\\"||r===\\\"#/\\\")&&n===c.baseId)return f();let l=Hc.resolveRef.call(u,c,n,r);if(l===void 0)throw new Zg.default(s.opts.uriResolver,n,r);if(l instanceof Hc.SchemaEnv)return _(l);return m(l);function f(){if(o===c)return Mr(e,a,o,o.$async);let h=t.scopeValue(\\\"root\\\",{ref:c});return Mr(e,(0,ue._)`${h}.validate`,c,c.$async)}function _(h){let p=Gc(e,h);Mr(e,p,h,h.$async)}function m(h){let p=t.scopeValue(\\\"schema\\\",i.code.source===!0?{ref:h,code:(0,ue.stringify)(h)}:{ref:h}),y=t.name(\\\"valid\\\"),$=e.subschema({schema:h,dataTypes:[],schemaPath:ue.nil,topSchemaRef:p,errSchemaPath:r},y);e.mergeEvaluated($),e.ok(y)}}};function Gc(e,t){let{gen:r}=e;return t.validate?r.scopeValue(\\\"validate\\\",{ref:t.validate}):(0,ue._)`${r.scopeValue(\\\"wrapper\\\",{ref:t})}.validate`}Ye.getValidate=Gc;function Mr(e,t,r,s){let{gen:n,it:o}=e,{allErrors:a,schemaEnv:i,opts:u}=o,c=u.passContext?gt.default.this:ue.nil;s?l():f();function l(){if(!i.$async)throw new Error(\\\"async schema referenced by sync schema\\\");let h=n.let(\\\"valid\\\");n.try(()=>{n.code((0,ue._)`await ${(0,Kc.callValidateCode)(e,t,c)}`),m(t),a||n.assign(h,!0)},p=>{n.if((0,ue._)`!(${p} instanceof ${o.ValidationError})`,()=>n.throw(p)),_(p),a||n.assign(h,!1)}),e.ok(h)}function f(){e.result((0,Kc.callValidateCode)(e,t,c),()=>m(t),()=>_(t))}function _(h){let p=(0,ue._)`${h}.errors`;n.assign(gt.default.vErrors,(0,ue._)`${gt.default.vErrors} === null ? ${p} : ${gt.default.vErrors}.concat(${p})`),n.assign(gt.default.errors,(0,ue._)`${gt.default.vErrors}.length`)}function m(h){var p;if(!o.opts.unevaluated)return;let y=(p=r==null?void 0:r.validate)===null||p===void 0?void 0:p.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=Dr.mergeEvaluated.props(n,y.props,o.props));else{let $=n.var(\\\"props\\\",(0,ue._)`${h}.evaluated.props`);o.props=Dr.mergeEvaluated.props(n,$,o.props,ue.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=Dr.mergeEvaluated.items(n,y.items,o.items));else{let $=n.var(\\\"items\\\",(0,ue._)`${h}.evaluated.items`);o.items=Dr.mergeEvaluated.items(n,$,o.items,ue.Name)}}}Ye.callRef=Mr;Ye.default=Qg});var Wc=d(cn=>{\\\"use strict\\\";Object.defineProperty(cn,\\\"__esModule\\\",{value:!0});var e0=Fc(),t0=Jc(),r0=[\\\"$schema\\\",\\\"$id\\\",\\\"$defs\\\",\\\"$vocabulary\\\",{keyword:\\\"$comment\\\"},\\\"definitions\\\",e0.default,t0.default];cn.default=r0});var Xc=d(ln=>{\\\"use strict\\\";Object.defineProperty(ln,\\\"__esModule\\\",{value:!0});var xr=I(),Ve=xr.operators,Vr={maximum:{okStr:\\\"<=\\\",ok:Ve.LTE,fail:Ve.GT},minimum:{okStr:\\\">=\\\",ok:Ve.GTE,fail:Ve.LT},exclusiveMaximum:{okStr:\\\"<\\\",ok:Ve.LT,fail:Ve.GTE},exclusiveMinimum:{okStr:\\\">\\\",ok:Ve.GT,fail:Ve.LTE}},s0={message:({keyword:e,schemaCode:t})=>(0,xr.str)`must be ${Vr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,xr._)`{comparison: ${Vr[e].okStr}, limit: ${t}}`},n0={keyword:Object.keys(Vr),type:\\\"number\\\",schemaType:\\\"number\\\",$data:!0,error:s0,code(e){let{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,xr._)`${r} ${Vr[t].fail} ${s} || isNaN(${r})`)}};ln.default=n0});var Bc=d(dn=>{\\\"use strict\\\";Object.defineProperty(dn,\\\"__esModule\\\",{value:!0});var Yt=I(),o0={message:({schemaCode:e})=>(0,Yt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Yt._)`{multipleOf: ${e}}`},a0={keyword:\\\"multipleOf\\\",type:\\\"number\\\",schemaType:\\\"number\\\",$data:!0,error:o0,code(e){let{gen:t,data:r,schemaCode:s,it:n}=e,o=n.opts.multipleOfPrecision,a=t.let(\\\"res\\\"),i=o?(0,Yt._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,Yt._)`${a} !== parseInt(${a})`;e.fail$data((0,Yt._)`(${s} === 0 || (${a} = ${r}/${s}, ${i}))`)}};dn.default=a0});var Zc=d(fn=>{\\\"use strict\\\";Object.defineProperty(fn,\\\"__esModule\\\",{value:!0});function Yc(e){let t=e.length,r=0,s=0,n;for(;s<t;)r++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<t&&(n=e.charCodeAt(s),(n&64512)===56320&&s++);return r}fn.default=Yc;Yc.code='require(\\\"ajv/dist/runtime/ucs2length\\\").default'});var Qc=d(pn=>{\\\"use strict\\\";Object.defineProperty(pn,\\\"__esModule\\\",{value:!0});var Ze=I(),i0=D(),u0=Zc(),c0={message({keyword:e,schemaCode:t}){let r=e===\\\"maxLength\\\"?\\\"more\\\":\\\"fewer\\\";return(0,Ze.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Ze._)`{limit: ${e}}`},l0={keyword:[\\\"maxLength\\\",\\\"minLength\\\"],type:\\\"string\\\",schemaType:\\\"number\\\",$data:!0,error:c0,code(e){let{keyword:t,data:r,schemaCode:s,it:n}=e,o=t===\\\"maxLength\\\"?Ze.operators.GT:Ze.operators.LT,a=n.opts.unicode===!1?(0,Ze._)`${r}.length`:(0,Ze._)`${(0,i0.useFunc)(e.gen,u0.default)}(${r})`;e.fail$data((0,Ze._)`${a} ${o} ${s}`)}};pn.default=l0});var el=d(hn=>{\\\"use strict\\\";Object.defineProperty(hn,\\\"__esModule\\\",{value:!0});var d0=me(),zr=I(),f0={message:({schemaCode:e})=>(0,zr.str)`must match pattern \\\"${e}\\\"`,params:({schemaCode:e})=>(0,zr._)`{pattern: ${e}}`},p0={keyword:\\\"pattern\\\",type:\\\"string\\\",schemaType:\\\"string\\\",$data:!0,error:f0,code(e){let{data:t,$data:r,schema:s,schemaCode:n,it:o}=e,a=o.opts.unicodeRegExp?\\\"u\\\":\\\"\\\",i=r?(0,zr._)`(new RegExp(${n}, ${a}))`:(0,d0.usePattern)(e,s);e.fail$data((0,zr._)`!${i}.test(${t})`)}};hn.default=p0});var tl=d(mn=>{\\\"use strict\\\";Object.defineProperty(mn,\\\"__esModule\\\",{value:!0});var Zt=I(),h0={message({keyword:e,schemaCode:t}){let r=e===\\\"maxProperties\\\"?\\\"more\\\":\\\"fewer\\\";return(0,Zt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Zt._)`{limit: ${e}}`},m0={keyword:[\\\"maxProperties\\\",\\\"minProperties\\\"],type:\\\"object\\\",schemaType:\\\"number\\\",$data:!0,error:h0,code(e){let{keyword:t,data:r,schemaCode:s}=e,n=t===\\\"maxProperties\\\"?Zt.operators.GT:Zt.operators.LT;e.fail$data((0,Zt._)`Object.keys(${r}).length ${n} ${s}`)}};mn.default=m0});var rl=d(yn=>{\\\"use strict\\\";Object.defineProperty(yn,\\\"__esModule\\\",{value:!0});var Qt=me(),er=I(),y0=D(),_0={message:({params:{missingProperty:e}})=>(0,er.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,er._)`{missingProperty: ${e}}`},g0={keyword:\\\"required\\\",type:\\\"object\\\",schemaType:\\\"array\\\",$data:!0,error:_0,code(e){let{gen:t,schema:r,schemaCode:s,data:n,$data:o,it:a}=e,{opts:i}=a;if(!o&&r.length===0)return;let u=r.length>=i.loopRequired;if(a.allErrors?c():l(),i.strictRequired){let m=e.parentSchema.properties,{definedProperties:h}=e.it;for(let p of r)if((m==null?void 0:m[p])===void 0&&!h.has(p)){let y=a.schemaEnv.baseId+a.errSchemaPath,$=`required property \\\"${p}\\\" is not defined at \\\"${y}\\\" (strictRequired)`;(0,y0.checkStrictMode)(a,$,a.opts.strictRequired)}}function c(){if(u||o)e.block$data(er.nil,f);else for(let m of r)(0,Qt.checkReportMissingProp)(e,m)}function l(){let m=t.let(\\\"missing\\\");if(u||o){let h=t.let(\\\"valid\\\",!0);e.block$data(h,()=>_(m,h)),e.ok(h)}else t.if((0,Qt.checkMissingProp)(e,r,m)),(0,Qt.reportMissingProp)(e,m),t.else()}function f(){t.forOf(\\\"prop\\\",s,m=>{e.setParams({missingProperty:m}),t.if((0,Qt.noPropertyInData)(t,n,m,i.ownProperties),()=>e.error())})}function _(m,h){e.setParams({missingProperty:m}),t.forOf(m,s,()=>{t.assign(h,(0,Qt.propertyInData)(t,n,m,i.ownProperties)),t.if((0,er.not)(h),()=>{e.error(),t.break()})},er.nil)}}};yn.default=g0});var sl=d(_n=>{\\\"use strict\\\";Object.defineProperty(_n,\\\"__esModule\\\",{value:!0});var tr=I(),$0={message({keyword:e,schemaCode:t}){let r=e===\\\"maxItems\\\"?\\\"more\\\":\\\"fewer\\\";return(0,tr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,tr._)`{limit: ${e}}`},v0={keyword:[\\\"maxItems\\\",\\\"minItems\\\"],type:\\\"array\\\",schemaType:\\\"number\\\",$data:!0,error:$0,code(e){let{keyword:t,data:r,schemaCode:s}=e,n=t===\\\"maxItems\\\"?tr.operators.GT:tr.operators.LT;e.fail$data((0,tr._)`${r}.length ${n} ${s}`)}};_n.default=v0});var Lr=d(gn=>{\\\"use strict\\\";Object.defineProperty(gn,\\\"__esModule\\\",{value:!0});var nl=Us();nl.code='require(\\\"ajv/dist/runtime/equal\\\").default';gn.default=nl});var ol=d(vn=>{\\\"use strict\\\";Object.defineProperty(vn,\\\"__esModule\\\",{value:!0});var $n=Ut(),Y=I(),b0=D(),E0=Lr(),w0={message:({params:{i:e,j:t}})=>(0,Y.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Y._)`{i: ${e}, j: ${t}}`},S0={keyword:\\\"uniqueItems\\\",type:\\\"array\\\",schemaType:\\\"boolean\\\",$data:!0,error:w0,code(e){let{gen:t,data:r,$data:s,schema:n,parentSchema:o,schemaCode:a,it:i}=e;if(!s&&!n)return;let u=t.let(\\\"valid\\\"),c=o.items?(0,$n.getSchemaTypes)(o.items):[];e.block$data(u,l,(0,Y._)`${a} === false`),e.ok(u);function l(){let h=t.let(\\\"i\\\",(0,Y._)`${r}.length`),p=t.let(\\\"j\\\");e.setParams({i:h,j:p}),t.assign(u,!0),t.if((0,Y._)`${h} > 1`,()=>(f()?_:m)(h,p))}function f(){return c.length>0&&!c.some(h=>h===\\\"object\\\"||h===\\\"array\\\")}function _(h,p){let y=t.name(\\\"item\\\"),$=(0,$n.checkDataTypes)(c,y,i.opts.strictNumbers,$n.DataType.Wrong),j=t.const(\\\"indices\\\",(0,Y._)`{}`);t.for((0,Y._)`;${h}--;`,()=>{t.let(y,(0,Y._)`${r}[${h}]`),t.if($,(0,Y._)`continue`),c.length>1&&t.if((0,Y._)`typeof ${y} == \\\"string\\\"`,(0,Y._)`${y} += \\\"_\\\"`),t.if((0,Y._)`typeof ${j}[${y}] == \\\"number\\\"`,()=>{t.assign(p,(0,Y._)`${j}[${y}]`),e.error(),t.assign(u,!1).break()}).code((0,Y._)`${j}[${y}] = ${h}`)})}function m(h,p){let y=(0,b0.useFunc)(t,E0.default),$=t.name(\\\"outer\\\");t.label($).for((0,Y._)`;${h}--;`,()=>t.for((0,Y._)`${p} = ${h}; ${p}--;`,()=>t.if((0,Y._)`${y}(${r}[${h}], ${r}[${p}])`,()=>{e.error(),t.assign(u,!1).break($)})))}}};vn.default=S0});var al=d(En=>{\\\"use strict\\\";Object.defineProperty(En,\\\"__esModule\\\",{value:!0});var bn=I(),P0=D(),N0=Lr(),O0={message:\\\"must be equal to constant\\\",params:({schemaCode:e})=>(0,bn._)`{allowedValue: ${e}}`},T0={keyword:\\\"const\\\",$data:!0,error:O0,code(e){let{gen:t,data:r,$data:s,schemaCode:n,schema:o}=e;s||o&&typeof o==\\\"object\\\"?e.fail$data((0,bn._)`!${(0,P0.useFunc)(t,N0.default)}(${r}, ${n})`):e.fail((0,bn._)`${o} !== ${r}`)}};En.default=T0});var il=d(wn=>{\\\"use strict\\\";Object.defineProperty(wn,\\\"__esModule\\\",{value:!0});var rr=I(),I0=D(),q0=Lr(),j0={message:\\\"must be equal to one of the allowed values\\\",params:({schemaCode:e})=>(0,rr._)`{allowedValues: ${e}}`},k0={keyword:\\\"enum\\\",schemaType:\\\"array\\\",$data:!0,error:j0,code(e){let{gen:t,data:r,$data:s,schema:n,schemaCode:o,it:a}=e;if(!s&&n.length===0)throw new Error(\\\"enum must have non-empty array\\\");let i=n.length>=a.opts.loopEnum,u,c=()=>u!=null?u:u=(0,I0.useFunc)(t,q0.default),l;if(i||s)l=t.let(\\\"valid\\\"),e.block$data(l,f);else{if(!Array.isArray(n))throw new Error(\\\"ajv implementation error\\\");let m=t.const(\\\"vSchema\\\",o);l=(0,rr.or)(...n.map((h,p)=>_(m,p)))}e.pass(l);function f(){t.assign(l,!1),t.forOf(\\\"v\\\",o,m=>t.if((0,rr._)`${c()}(${r}, ${m})`,()=>t.assign(l,!0).break()))}function _(m,h){let p=n[h];return typeof p==\\\"object\\\"&&p!==null?(0,rr._)`${c()}(${r}, ${m}[${h}])`:(0,rr._)`${r} === ${p}`}}};wn.default=k0});var ul=d(Sn=>{\\\"use strict\\\";Object.defineProperty(Sn,\\\"__esModule\\\",{value:!0});var C0=Xc(),R0=Bc(),A0=Qc(),D0=el(),M0=tl(),x0=rl(),V0=sl(),z0=ol(),L0=al(),U0=il(),F0=[C0.default,R0.default,A0.default,D0.default,M0.default,x0.default,V0.default,z0.default,{keyword:\\\"type\\\",schemaType:[\\\"string\\\",\\\"array\\\"]},{keyword:\\\"nullable\\\",schemaType:\\\"boolean\\\"},L0.default,U0.default];Sn.default=F0});var Nn=d(sr=>{\\\"use strict\\\";Object.defineProperty(sr,\\\"__esModule\\\",{value:!0});sr.validateAdditionalItems=void 0;var Qe=I(),Pn=D(),K0={message:({params:{len:e}})=>(0,Qe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Qe._)`{limit: ${e}}`},H0={keyword:\\\"additionalItems\\\",type:\\\"array\\\",schemaType:[\\\"boolean\\\",\\\"object\\\"],before:\\\"uniqueItems\\\",error:K0,code(e){let{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,Pn.checkStrictMode)(r,'\\\"additionalItems\\\" is ignored when \\\"items\\\" is not an array of schemas');return}cl(e,s)}};function cl(e,t){let{gen:r,schema:s,data:n,keyword:o,it:a}=e;a.items=!0;let i=r.const(\\\"len\\\",(0,Qe._)`${n}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,Qe._)`${i} <= ${t.length}`);else if(typeof s==\\\"object\\\"&&!(0,Pn.alwaysValidSchema)(a,s)){let c=r.var(\\\"valid\\\",(0,Qe._)`${i} <= ${t.length}`);r.if((0,Qe.not)(c),()=>u(c)),e.ok(c)}function u(c){r.forRange(\\\"i\\\",t.length,i,l=>{e.subschema({keyword:o,dataProp:l,dataPropType:Pn.Type.Num},c),a.allErrors||r.if((0,Qe.not)(c),()=>r.break())})}}sr.validateAdditionalItems=cl;sr.default=H0});var On=d(nr=>{\\\"use strict\\\";Object.defineProperty(nr,\\\"__esModule\\\",{value:!0});nr.validateTuple=void 0;var ll=I(),Ur=D(),G0=me(),J0={keyword:\\\"items\\\",type:\\\"array\\\",schemaType:[\\\"object\\\",\\\"array\\\",\\\"boolean\\\"],before:\\\"uniqueItems\\\",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return dl(e,\\\"additionalItems\\\",t);r.items=!0,!(0,Ur.alwaysValidSchema)(r,t)&&e.ok((0,G0.validateArray)(e))}};function dl(e,t,r=e.schema){let{gen:s,parentSchema:n,data:o,keyword:a,it:i}=e;l(n),i.opts.unevaluated&&r.length&&i.items!==!0&&(i.items=Ur.mergeEvaluated.items(s,r.length,i.items));let u=s.name(\\\"valid\\\"),c=s.const(\\\"len\\\",(0,ll._)`${o}.length`);r.forEach((f,_)=>{(0,Ur.alwaysValidSchema)(i,f)||(s.if((0,ll._)`${c} > ${_}`,()=>e.subschema({keyword:a,schemaProp:_,dataProp:_},u)),e.ok(u))});function l(f){let{opts:_,errSchemaPath:m}=i,h=r.length,p=h===f.minItems&&(h===f.maxItems||f[t]===!1);if(_.strictTuples&&!p){let y=`\\\"${a}\\\" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path \\\"${m}\\\"`;(0,Ur.checkStrictMode)(i,y,_.strictTuples)}}}nr.validateTuple=dl;nr.default=J0});var fl=d(Tn=>{\\\"use strict\\\";Object.defineProperty(Tn,\\\"__esModule\\\",{value:!0});var W0=On(),X0={keyword:\\\"prefixItems\\\",type:\\\"array\\\",schemaType:[\\\"array\\\"],before:\\\"uniqueItems\\\",code:e=>(0,W0.validateTuple)(e,\\\"items\\\")};Tn.default=X0});var hl=d(In=>{\\\"use strict\\\";Object.defineProperty(In,\\\"__esModule\\\",{value:!0});var pl=I(),B0=D(),Y0=me(),Z0=Nn(),Q0={message:({params:{len:e}})=>(0,pl.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,pl._)`{limit: ${e}}`},e$={keyword:\\\"items\\\",type:\\\"array\\\",schemaType:[\\\"object\\\",\\\"boolean\\\"],before:\\\"uniqueItems\\\",error:Q0,code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:n}=r;s.items=!0,!(0,B0.alwaysValidSchema)(s,t)&&(n?(0,Z0.validateAdditionalItems)(e,n):e.ok((0,Y0.validateArray)(e)))}};In.default=e$});var ml=d(qn=>{\\\"use strict\\\";Object.defineProperty(qn,\\\"__esModule\\\",{value:!0});var _e=I(),Fr=D(),t$={message:({params:{min:e,max:t}})=>t===void 0?(0,_e.str)`must contain at least ${e} valid item(s)`:(0,_e.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,_e._)`{minContains: ${e}}`:(0,_e._)`{minContains: ${e}, maxContains: ${t}}`},r$={keyword:\\\"contains\\\",type:\\\"array\\\",schemaType:[\\\"object\\\",\\\"boolean\\\"],before:\\\"uniqueItems\\\",trackErrors:!0,error:t$,code(e){let{gen:t,schema:r,parentSchema:s,data:n,it:o}=e,a,i,{minContains:u,maxContains:c}=s;o.opts.next?(a=u===void 0?1:u,i=c):a=1;let l=t.const(\\\"len\\\",(0,_e._)`${n}.length`);if(e.setParams({min:a,max:i}),i===void 0&&a===0){(0,Fr.checkStrictMode)(o,'\\\"minContains\\\" == 0 without \\\"maxContains\\\": \\\"contains\\\" keyword ignored');return}if(i!==void 0&&a>i){(0,Fr.checkStrictMode)(o,'\\\"minContains\\\" > \\\"maxContains\\\" is always invalid'),e.fail();return}if((0,Fr.alwaysValidSchema)(o,r)){let p=(0,_e._)`${l} >= ${a}`;i!==void 0&&(p=(0,_e._)`${p} && ${l} <= ${i}`),e.pass(p);return}o.items=!0;let f=t.name(\\\"valid\\\");i===void 0&&a===1?m(f,()=>t.if(f,()=>t.break())):a===0?(t.let(f,!0),i!==void 0&&t.if((0,_e._)`${n}.length > 0`,_)):(t.let(f,!1),_()),e.result(f,()=>e.reset());function _(){let p=t.name(\\\"_valid\\\"),y=t.let(\\\"count\\\",0);m(p,()=>t.if(p,()=>h(y)))}function m(p,y){t.forRange(\\\"i\\\",0,l,$=>{e.subschema({keyword:\\\"contains\\\",dataProp:$,dataPropType:Fr.Type.Num,compositeRule:!0},p),y()})}function h(p){t.code((0,_e._)`${p}++`),i===void 0?t.if((0,_e._)`${p} >= ${a}`,()=>t.assign(f,!0).break()):(t.if((0,_e._)`${p} > ${i}`,()=>t.assign(f,!1).break()),a===1?t.assign(f,!0):t.if((0,_e._)`${p} >= ${a}`,()=>t.assign(f,!0)))}}};qn.default=r$});var gl=d(Oe=>{\\\"use strict\\\";Object.defineProperty(Oe,\\\"__esModule\\\",{value:!0});Oe.validateSchemaDeps=Oe.validatePropertyDeps=Oe.error=void 0;var jn=I(),s$=D(),or=me();Oe.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let s=t===1?\\\"property\\\":\\\"properties\\\";return(0,jn.str)`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>(0,jn._)`{property: ${e},\\n    missingProperty: ${s},\\n    depsCount: ${t},\\n    deps: ${r}}`};var n$={keyword:\\\"dependencies\\\",type:\\\"object\\\",schemaType:\\\"object\\\",error:Oe.error,code(e){let[t,r]=o$(e);yl(e,t),_l(e,r)}};function o$({schema:e}){let t={},r={};for(let s in e){if(s===\\\"__proto__\\\")continue;let n=Array.isArray(e[s])?t:r;n[s]=e[s]}return[t,r]}function yl(e,t=e.schema){let{gen:r,data:s,it:n}=e;if(Object.keys(t).length===0)return;let o=r.let(\\\"missing\\\");for(let a in t){let i=t[a];if(i.length===0)continue;let u=(0,or.propertyInData)(r,s,a,n.opts.ownProperties);e.setParams({property:a,depsCount:i.length,deps:i.join(\\\", \\\")}),n.allErrors?r.if(u,()=>{for(let c of i)(0,or.checkReportMissingProp)(e,c)}):(r.if((0,jn._)`${u} && (${(0,or.checkMissingProp)(e,i,o)})`),(0,or.reportMissingProp)(e,o),r.else())}}Oe.validatePropertyDeps=yl;function _l(e,t=e.schema){let{gen:r,data:s,keyword:n,it:o}=e,a=r.name(\\\"valid\\\");for(let i in t)(0,s$.alwaysValidSchema)(o,t[i])||(r.if((0,or.propertyInData)(r,s,i,o.opts.ownProperties),()=>{let u=e.subschema({keyword:n,schemaProp:i},a);e.mergeValidEvaluated(u,a)},()=>r.var(a,!0)),e.ok(a))}Oe.validateSchemaDeps=_l;Oe.default=n$});var vl=d(kn=>{\\\"use strict\\\";Object.defineProperty(kn,\\\"__esModule\\\",{value:!0});var $l=I(),a$=D(),i$={message:\\\"property name must be valid\\\",params:({params:e})=>(0,$l._)`{propertyName: ${e.propertyName}}`},u$={keyword:\\\"propertyNames\\\",type:\\\"object\\\",schemaType:[\\\"object\\\",\\\"boolean\\\"],error:i$,code(e){let{gen:t,schema:r,data:s,it:n}=e;if((0,a$.alwaysValidSchema)(n,r))return;let o=t.name(\\\"valid\\\");t.forIn(\\\"key\\\",s,a=>{e.setParams({propertyName:a}),e.subschema({keyword:\\\"propertyNames\\\",data:a,dataTypes:[\\\"string\\\"],propertyName:a,compositeRule:!0},o),t.if((0,$l.not)(o),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(o)}};kn.default=u$});var Rn=d(Cn=>{\\\"use strict\\\";Object.defineProperty(Cn,\\\"__esModule\\\",{value:!0});var Kr=me(),be=I(),c$=we(),Hr=D(),l$={message:\\\"must NOT have additional properties\\\",params:({params:e})=>(0,be._)`{additionalProperty: ${e.additionalProperty}}`},d$={keyword:\\\"additionalProperties\\\",type:[\\\"object\\\"],schemaType:[\\\"boolean\\\",\\\"object\\\"],allowUndefined:!0,trackErrors:!0,error:l$,code(e){let{gen:t,schema:r,parentSchema:s,data:n,errsCount:o,it:a}=e;if(!o)throw new Error(\\\"ajv implementation error\\\");let{allErrors:i,opts:u}=a;if(a.props=!0,u.removeAdditional!==\\\"all\\\"&&(0,Hr.alwaysValidSchema)(a,r))return;let c=(0,Kr.allSchemaProperties)(s.properties),l=(0,Kr.allSchemaProperties)(s.patternProperties);f(),e.ok((0,be._)`${o} === ${c$.default.errors}`);function f(){t.forIn(\\\"key\\\",n,y=>{!c.length&&!l.length?h(y):t.if(_(y),()=>h(y))})}function _(y){let $;if(c.length>8){let j=(0,Hr.schemaRefOrVal)(a,s.properties,\\\"properties\\\");$=(0,Kr.isOwnProperty)(t,j,y)}else c.length?$=(0,be.or)(...c.map(j=>(0,be._)`${y} === ${j}`)):$=be.nil;return l.length&&($=(0,be.or)($,...l.map(j=>(0,be._)`${(0,Kr.usePattern)(e,j)}.test(${y})`))),(0,be.not)($)}function m(y){t.code((0,be._)`delete ${n}[${y}]`)}function h(y){if(u.removeAdditional===\\\"all\\\"||u.removeAdditional&&r===!1){m(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),i||t.break();return}if(typeof r==\\\"object\\\"&&!(0,Hr.alwaysValidSchema)(a,r)){let $=t.name(\\\"valid\\\");u.removeAdditional===\\\"failing\\\"?(p(y,$,!1),t.if((0,be.not)($),()=>{e.reset(),m(y)})):(p(y,$),i||t.if((0,be.not)($),()=>t.break()))}}function p(y,$,j){let N={keyword:\\\"additionalProperties\\\",dataProp:y,dataPropType:Hr.Type.Str};j===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(N,$)}}};Cn.default=d$});var wl=d(Dn=>{\\\"use strict\\\";Object.defineProperty(Dn,\\\"__esModule\\\",{value:!0});var f$=mt(),bl=me(),An=D(),El=Rn(),p$={keyword:\\\"properties\\\",type:\\\"object\\\",schemaType:\\\"object\\\",code(e){let{gen:t,schema:r,parentSchema:s,data:n,it:o}=e;o.opts.removeAdditional===\\\"all\\\"&&s.additionalProperties===void 0&&El.default.code(new f$.KeywordCxt(o,El.default,\\\"additionalProperties\\\"));let a=(0,bl.allSchemaProperties)(r);for(let f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=An.mergeEvaluated.props(t,(0,An.toHash)(a),o.props));let i=a.filter(f=>!(0,An.alwaysValidSchema)(o,r[f]));if(i.length===0)return;let u=t.name(\\\"valid\\\");for(let f of i)c(f)?l(f):(t.if((0,bl.propertyInData)(t,n,f,o.opts.ownProperties)),l(f),o.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function c(f){return o.opts.useDefaults&&!o.compositeRule&&r[f].default!==void 0}function l(f){e.subschema({keyword:\\\"properties\\\",schemaProp:f,dataProp:f},u)}}};Dn.default=p$});var Ol=d(Mn=>{\\\"use strict\\\";Object.defineProperty(Mn,\\\"__esModule\\\",{value:!0});var Sl=me(),Gr=I(),Pl=D(),Nl=D(),h$={keyword:\\\"patternProperties\\\",type:\\\"object\\\",schemaType:\\\"object\\\",code(e){let{gen:t,schema:r,data:s,parentSchema:n,it:o}=e,{opts:a}=o,i=(0,Sl.allSchemaProperties)(r),u=i.filter(p=>(0,Pl.alwaysValidSchema)(o,r[p]));if(i.length===0||u.length===i.length&&(!o.opts.unevaluated||o.props===!0))return;let c=a.strictSchema&&!a.allowMatchingProperties&&n.properties,l=t.name(\\\"valid\\\");o.props!==!0&&!(o.props instanceof Gr.Name)&&(o.props=(0,Nl.evaluatedPropsToName)(t,o.props));let{props:f}=o;_();function _(){for(let p of i)c&&m(p),o.allErrors?h(p):(t.var(l,!0),h(p),t.if(l))}function m(p){for(let y in c)new RegExp(p).test(y)&&(0,Pl.checkStrictMode)(o,`property ${y} matches pattern ${p} (use allowMatchingProperties)`)}function h(p){t.forIn(\\\"key\\\",s,y=>{t.if((0,Gr._)`${(0,Sl.usePattern)(e,p)}.test(${y})`,()=>{let $=u.includes(p);$||e.subschema({keyword:\\\"patternProperties\\\",schemaProp:p,dataProp:y,dataPropType:Nl.Type.Str},l),o.opts.unevaluated&&f!==!0?t.assign((0,Gr._)`${f}[${y}]`,!0):!$&&!o.allErrors&&t.if((0,Gr.not)(l),()=>t.break())})})}}};Mn.default=h$});var Tl=d(xn=>{\\\"use strict\\\";Object.defineProperty(xn,\\\"__esModule\\\",{value:!0});var m$=D(),y$={keyword:\\\"not\\\",schemaType:[\\\"object\\\",\\\"boolean\\\"],trackErrors:!0,code(e){let{gen:t,schema:r,it:s}=e;if((0,m$.alwaysValidSchema)(s,r)){e.fail();return}let n=t.name(\\\"valid\\\");e.subschema({keyword:\\\"not\\\",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:\\\"must NOT be valid\\\"}};xn.default=y$});var Il=d(Vn=>{\\\"use strict\\\";Object.defineProperty(Vn,\\\"__esModule\\\",{value:!0});var _$=me(),g$={keyword:\\\"anyOf\\\",schemaType:\\\"array\\\",trackErrors:!0,code:_$.validateUnion,error:{message:\\\"must match a schema in anyOf\\\"}};Vn.default=g$});var ql=d(zn=>{\\\"use strict\\\";Object.defineProperty(zn,\\\"__esModule\\\",{value:!0});var Jr=I(),$$=D(),v$={message:\\\"must match exactly one schema in oneOf\\\",params:({params:e})=>(0,Jr._)`{passingSchemas: ${e.passing}}`},b$={keyword:\\\"oneOf\\\",schemaType:\\\"array\\\",trackErrors:!0,error:v$,code(e){let{gen:t,schema:r,parentSchema:s,it:n}=e;if(!Array.isArray(r))throw new Error(\\\"ajv implementation error\\\");if(n.opts.discriminator&&s.discriminator)return;let o=r,a=t.let(\\\"valid\\\",!1),i=t.let(\\\"passing\\\",null),u=t.name(\\\"_valid\\\");e.setParams({passing:i}),t.block(c),e.result(a,()=>e.reset(),()=>e.error(!0));function c(){o.forEach((l,f)=>{let _;(0,$$.alwaysValidSchema)(n,l)?t.var(u,!0):_=e.subschema({keyword:\\\"oneOf\\\",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,Jr._)`${u} && ${a}`).assign(a,!1).assign(i,(0,Jr._)`[${i}, ${f}]`).else(),t.if(u,()=>{t.assign(a,!0),t.assign(i,f),_&&e.mergeEvaluated(_,Jr.Name)})})}}};zn.default=b$});var jl=d(Ln=>{\\\"use strict\\\";Object.defineProperty(Ln,\\\"__esModule\\\",{value:!0});var E$=D(),w$={keyword:\\\"allOf\\\",schemaType:\\\"array\\\",code(e){let{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error(\\\"ajv implementation error\\\");let n=t.name(\\\"valid\\\");r.forEach((o,a)=>{if((0,E$.alwaysValidSchema)(s,o))return;let i=e.subschema({keyword:\\\"allOf\\\",schemaProp:a},n);e.ok(n),e.mergeEvaluated(i)})}};Ln.default=w$});var Rl=d(Un=>{\\\"use strict\\\";Object.defineProperty(Un,\\\"__esModule\\\",{value:!0});var Wr=I(),Cl=D(),S$={message:({params:e})=>(0,Wr.str)`must match \\\"${e.ifClause}\\\" schema`,params:({params:e})=>(0,Wr._)`{failingKeyword: ${e.ifClause}}`},P$={keyword:\\\"if\\\",schemaType:[\\\"object\\\",\\\"boolean\\\"],trackErrors:!0,error:S$,code(e){let{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,Cl.checkStrictMode)(s,'\\\"if\\\" without \\\"then\\\" and \\\"else\\\" is ignored');let n=kl(s,\\\"then\\\"),o=kl(s,\\\"else\\\");if(!n&&!o)return;let a=t.let(\\\"valid\\\",!0),i=t.name(\\\"_valid\\\");if(u(),e.reset(),n&&o){let l=t.let(\\\"ifClause\\\");e.setParams({ifClause:l}),t.if(i,c(\\\"then\\\",l),c(\\\"else\\\",l))}else n?t.if(i,c(\\\"then\\\")):t.if((0,Wr.not)(i),c(\\\"else\\\"));e.pass(a,()=>e.error(!0));function u(){let l=e.subschema({keyword:\\\"if\\\",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(l)}function c(l,f){return()=>{let _=e.subschema({keyword:l},i);t.assign(a,i),e.mergeValidEvaluated(_,a),f?t.assign(f,(0,Wr._)`${l}`):e.setParams({ifClause:l})}}}};function kl(e,t){let r=e.schema[t];return r!==void 0&&!(0,Cl.alwaysValidSchema)(e,r)}Un.default=P$});var Al=d(Fn=>{\\\"use strict\\\";Object.defineProperty(Fn,\\\"__esModule\\\",{value:!0});var N$=D(),O$={keyword:[\\\"then\\\",\\\"else\\\"],schemaType:[\\\"object\\\",\\\"boolean\\\"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,N$.checkStrictMode)(r,`\\\"${e}\\\" without \\\"if\\\" is ignored`)}};Fn.default=O$});var Dl=d(Kn=>{\\\"use strict\\\";Object.defineProperty(Kn,\\\"__esModule\\\",{value:!0});var T$=Nn(),I$=fl(),q$=On(),j$=hl(),k$=ml(),C$=gl(),R$=vl(),A$=Rn(),D$=wl(),M$=Ol(),x$=Tl(),V$=Il(),z$=ql(),L$=jl(),U$=Rl(),F$=Al();function K$(e=!1){let t=[x$.default,V$.default,z$.default,L$.default,U$.default,F$.default,R$.default,A$.default,C$.default,D$.default,M$.default];return e?t.push(I$.default,j$.default):t.push(T$.default,q$.default),t.push(k$.default),t}Kn.default=K$});var Ml=d(Hn=>{\\\"use strict\\\";Object.defineProperty(Hn,\\\"__esModule\\\",{value:!0});var J=I(),H$={message:({schemaCode:e})=>(0,J.str)`must match format \\\"${e}\\\"`,params:({schemaCode:e})=>(0,J._)`{format: ${e}}`},G$={keyword:\\\"format\\\",type:[\\\"number\\\",\\\"string\\\"],schemaType:\\\"string\\\",$data:!0,error:H$,code(e,t){let{gen:r,data:s,$data:n,schema:o,schemaCode:a,it:i}=e,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=i;if(!u.validateFormats)return;n?_():m();function _(){let h=r.scopeValue(\\\"formats\\\",{ref:f.formats,code:u.code.formats}),p=r.const(\\\"fDef\\\",(0,J._)`${h}[${a}]`),y=r.let(\\\"fType\\\"),$=r.let(\\\"format\\\");r.if((0,J._)`typeof ${p} == \\\"object\\\" && !(${p} instanceof RegExp)`,()=>r.assign(y,(0,J._)`${p}.type || \\\"string\\\"`).assign($,(0,J._)`${p}.validate`),()=>r.assign(y,(0,J._)`\\\"string\\\"`).assign($,p)),e.fail$data((0,J.or)(j(),N()));function j(){return u.strictSchema===!1?J.nil:(0,J._)`${a} && !${$}`}function N(){let V=l.$async?(0,J._)`(${p}.async ? await ${$}(${s}) : ${$}(${s}))`:(0,J._)`${$}(${s})`,S=(0,J._)`(typeof ${$} == \\\"function\\\" ? ${V} : ${$}.test(${s}))`;return(0,J._)`${$} && ${$} !== true && ${y} === ${t} && !${S}`}}function m(){let h=f.formats[o];if(!h){j();return}if(h===!0)return;let[p,y,$]=N(h);p===t&&e.pass(V());function j(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format \\\"${o}\\\" ignored in schema at path \\\"${c}\\\"`}}function N(S){let v=S instanceof RegExp?(0,J.regexpCode)(S):u.code.formats?(0,J._)`${u.code.formats}${(0,J.getProperty)(o)}`:void 0,E=r.scopeValue(\\\"formats\\\",{key:o,ref:S,code:v});return typeof S==\\\"object\\\"&&!(S instanceof RegExp)?[S.type||\\\"string\\\",S.validate,(0,J._)`${E}.validate`]:[\\\"string\\\",S,E]}function V(){if(typeof h==\\\"object\\\"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error(\\\"async format in sync schema\\\");return(0,J._)`await ${$}(${s})`}return typeof y==\\\"function\\\"?(0,J._)`${$}(${s})`:(0,J._)`${$}.test(${s})`}}}};Hn.default=G$});var xl=d(Gn=>{\\\"use strict\\\";Object.defineProperty(Gn,\\\"__esModule\\\",{value:!0});var J$=Ml(),W$=[J$.default];Gn.default=W$});var Vl=d($t=>{\\\"use strict\\\";Object.defineProperty($t,\\\"__esModule\\\",{value:!0});$t.contentVocabulary=$t.metadataVocabulary=void 0;$t.metadataVocabulary=[\\\"title\\\",\\\"description\\\",\\\"default\\\",\\\"deprecated\\\",\\\"readOnly\\\",\\\"writeOnly\\\",\\\"examples\\\"];$t.contentVocabulary=[\\\"contentMediaType\\\",\\\"contentEncoding\\\",\\\"contentSchema\\\"]});var Ll=d(Jn=>{\\\"use strict\\\";Object.defineProperty(Jn,\\\"__esModule\\\",{value:!0});var X$=Wc(),B$=ul(),Y$=Dl(),Z$=xl(),zl=Vl(),Q$=[X$.default,B$.default,(0,Y$.default)(),Z$.default,zl.metadataVocabulary,zl.contentVocabulary];Jn.default=Q$});var Fl=d(Xr=>{\\\"use strict\\\";Object.defineProperty(Xr,\\\"__esModule\\\",{value:!0});Xr.DiscrError=void 0;var Ul;(function(e){e.Tag=\\\"tag\\\",e.Mapping=\\\"mapping\\\"})(Ul||(Xr.DiscrError=Ul={}))});var Hl=d(Xn=>{\\\"use strict\\\";Object.defineProperty(Xn,\\\"__esModule\\\",{value:!0});var vt=I(),Wn=Fl(),Kl=jr(),ev=Gt(),tv=D(),rv={message:({params:{discrError:e,tagName:t}})=>e===Wn.DiscrError.Tag?`tag \\\"${t}\\\" must be string`:`value of tag \\\"${t}\\\" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,vt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},sv={keyword:\\\"discriminator\\\",type:\\\"object\\\",schemaType:\\\"object\\\",error:rv,code(e){let{gen:t,data:r,schema:s,parentSchema:n,it:o}=e,{oneOf:a}=n;if(!o.opts.discriminator)throw new Error(\\\"discriminator: requires discriminator option\\\");let i=s.propertyName;if(typeof i!=\\\"string\\\")throw new Error(\\\"discriminator: requires propertyName\\\");if(s.mapping)throw new Error(\\\"discriminator: mapping is not supported\\\");if(!a)throw new Error(\\\"discriminator: requires oneOf keyword\\\");let u=t.let(\\\"valid\\\",!1),c=t.const(\\\"tag\\\",(0,vt._)`${r}${(0,vt.getProperty)(i)}`);t.if((0,vt._)`typeof ${c} == \\\"string\\\"`,()=>l(),()=>e.error(!1,{discrError:Wn.DiscrError.Tag,tag:c,tagName:i})),e.ok(u);function l(){let m=_();t.if(!1);for(let h in m)t.elseIf((0,vt._)`${c} === ${h}`),t.assign(u,f(m[h]));t.else(),e.error(!1,{discrError:Wn.DiscrError.Mapping,tag:c,tagName:i}),t.endIf()}function f(m){let h=t.name(\\\"valid\\\"),p=e.subschema({keyword:\\\"oneOf\\\",schemaProp:m},h);return e.mergeEvaluated(p,vt.Name),h}function _(){var m;let h={},p=$(n),y=!0;for(let V=0;V<a.length;V++){let S=a[V];if(S!=null&&S.$ref&&!(0,tv.schemaHasRulesButRef)(S,o.self.RULES)){let E=S.$ref;if(S=Kl.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,E),S instanceof Kl.SchemaEnv&&(S=S.schema),S===void 0)throw new ev.default(o.opts.uriResolver,o.baseId,E)}let v=(m=S==null?void 0:S.properties)===null||m===void 0?void 0:m[i];if(typeof v!=\\\"object\\\")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \\\"properties/${i}\\\"`);y=y&&(p||$(S)),j(v,V)}if(!y)throw new Error(`discriminator: \\\"${i}\\\" must be required`);return h;function $({required:V}){return Array.isArray(V)&&V.includes(i)}function j(V,S){if(V.const)N(V.const,S);else if(V.enum)for(let v of V.enum)N(v,S);else throw new Error(`discriminator: \\\"properties/${i}\\\" must have \\\"const\\\" or \\\"enum\\\"`)}function N(V,S){if(typeof V!=\\\"string\\\"||V in h)throw new Error(`discriminator: \\\"${i}\\\" values must be unique strings`);h[V]=S}}}};Xn.default=sv});var Gl=d((Sw,nv)=>{nv.exports={$schema:\\\"http://json-schema.org/draft-07/schema#\\\",$id:\\\"http://json-schema.org/draft-07/schema#\\\",title:\\\"Core schema meta-schema\\\",definitions:{schemaArray:{type:\\\"array\\\",minItems:1,items:{$ref:\\\"#\\\"}},nonNegativeInteger:{type:\\\"integer\\\",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:\\\"#/definitions/nonNegativeInteger\\\"},{default:0}]},simpleTypes:{enum:[\\\"array\\\",\\\"boolean\\\",\\\"integer\\\",\\\"null\\\",\\\"number\\\",\\\"object\\\",\\\"string\\\"]},stringArray:{type:\\\"array\\\",items:{type:\\\"string\\\"},uniqueItems:!0,default:[]}},type:[\\\"object\\\",\\\"boolean\\\"],properties:{$id:{type:\\\"string\\\",format:\\\"uri-reference\\\"},$schema:{type:\\\"string\\\",format:\\\"uri\\\"},$ref:{type:\\\"string\\\",format:\\\"uri-reference\\\"},$comment:{type:\\\"string\\\"},title:{type:\\\"string\\\"},description:{type:\\\"string\\\"},default:!0,readOnly:{type:\\\"boolean\\\",default:!1},examples:{type:\\\"array\\\",items:!0},multipleOf:{type:\\\"number\\\",exclusiveMinimum:0},maximum:{type:\\\"number\\\"},exclusiveMaximum:{type:\\\"number\\\"},minimum:{type:\\\"number\\\"},exclusiveMinimum:{type:\\\"number\\\"},maxLength:{$ref:\\\"#/definitions/nonNegativeInteger\\\"},minLength:{$ref:\\\"#/definitions/nonNegativeIntegerDefault0\\\"},pattern:{type:\\\"string\\\",format:\\\"regex\\\"},additionalItems:{$ref:\\\"#\\\"},items:{anyOf:[{$ref:\\\"#\\\"},{$ref:\\\"#/definitions/schemaArray\\\"}],default:!0},maxItems:{$ref:\\\"#/definitions/nonNegativeInteger\\\"},minItems:{$ref:\\\"#/definitions/nonNegativeIntegerDefault0\\\"},uniqueItems:{type:\\\"boolean\\\",default:!1},contains:{$ref:\\\"#\\\"},maxProperties:{$ref:\\\"#/definitions/nonNegativeInteger\\\"},minProperties:{$ref:\\\"#/definitions/nonNegativeIntegerDefault0\\\"},required:{$ref:\\\"#/definitions/stringArray\\\"},additionalProperties:{$ref:\\\"#\\\"},definitions:{type:\\\"object\\\",additionalProperties:{$ref:\\\"#\\\"},default:{}},properties:{type:\\\"object\\\",additionalProperties:{$ref:\\\"#\\\"},default:{}},patternProperties:{type:\\\"object\\\",additionalProperties:{$ref:\\\"#\\\"},propertyNames:{format:\\\"regex\\\"},default:{}},dependencies:{type:\\\"object\\\",additionalProperties:{anyOf:[{$ref:\\\"#\\\"},{$ref:\\\"#/definitions/stringArray\\\"}]}},propertyNames:{$ref:\\\"#\\\"},const:!0,enum:{type:\\\"array\\\",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:\\\"#/definitions/simpleTypes\\\"},{type:\\\"array\\\",items:{$ref:\\\"#/definitions/simpleTypes\\\"},minItems:1,uniqueItems:!0}]},format:{type:\\\"string\\\"},contentMediaType:{type:\\\"string\\\"},contentEncoding:{type:\\\"string\\\"},if:{$ref:\\\"#\\\"},then:{$ref:\\\"#\\\"},else:{$ref:\\\"#\\\"},allOf:{$ref:\\\"#/definitions/schemaArray\\\"},anyOf:{$ref:\\\"#/definitions/schemaArray\\\"},oneOf:{$ref:\\\"#/definitions/schemaArray\\\"},not:{$ref:\\\"#\\\"}},default:!0}});var Yn=d((K,Bn)=>{\\\"use strict\\\";Object.defineProperty(K,\\\"__esModule\\\",{value:!0});K.MissingRefError=K.ValidationError=K.CodeGen=K.Name=K.nil=K.stringify=K.str=K._=K.KeywordCxt=K.Ajv=void 0;var ov=Uc(),av=Ll(),iv=Hl(),Jl=Gl(),uv=[\\\"/properties\\\"],Br=\\\"http://json-schema.org/draft-07/schema\\\",bt=class extends ov.default{_addVocabularies(){super._addVocabularies(),av.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(iv.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(Jl,uv):Jl;this.addMetaSchema(t,Br,!1),this.refs[\\\"http://json-schema.org/schema\\\"]=Br}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Br)?Br:void 0)}};K.Ajv=bt;Bn.exports=K=bt;Bn.exports.Ajv=bt;Object.defineProperty(K,\\\"__esModule\\\",{value:!0});K.default=bt;var cv=mt();Object.defineProperty(K,\\\"KeywordCxt\\\",{enumerable:!0,get:function(){return cv.KeywordCxt}});var Et=I();Object.defineProperty(K,\\\"_\\\",{enumerable:!0,get:function(){return Et._}});Object.defineProperty(K,\\\"str\\\",{enumerable:!0,get:function(){return Et.str}});Object.defineProperty(K,\\\"stringify\\\",{enumerable:!0,get:function(){return Et.stringify}});Object.defineProperty(K,\\\"nil\\\",{enumerable:!0,get:function(){return Et.nil}});Object.defineProperty(K,\\\"Name\\\",{enumerable:!0,get:function(){return Et.Name}});Object.defineProperty(K,\\\"CodeGen\\\",{enumerable:!0,get:function(){return Et.CodeGen}});var lv=Ir();Object.defineProperty(K,\\\"ValidationError\\\",{enumerable:!0,get:function(){return lv.default}});var dv=Gt();Object.defineProperty(K,\\\"MissingRefError\\\",{enumerable:!0,get:function(){return dv.default}})});var Yl=d((Qn,eo)=>{\\\"use strict\\\";Object.defineProperty(Qn,\\\"__esModule\\\",{value:!0});var g=Yn(),ze=I(),Wl=at(),fv=mt(),ar=ct(),Ee=we(),Yr=\\\"errorMessage\\\",Le=new g.Name(\\\"emUsed\\\"),Xl={required:\\\"missingProperty\\\",dependencies:\\\"property\\\",dependentRequired:\\\"property\\\"},Bl=/\\\\$\\\\{[^}]+\\\\}/,pv=/\\\\$\\\\{([^}]+)\\\\}/g,hv=/^\\\"\\\"\\\\s*\\\\+\\\\s*|\\\\s*\\\\+\\\\s*\\\"\\\"$/g;function mv(e){return{keyword:Yr,schemaType:[\\\"string\\\",\\\"object\\\"],post:!0,code(t){let{gen:r,data:s,schema:n,schemaValue:o,it:a}=t;if(a.createErrors===!1)return;let i=n,u=ze.strConcat(Ee.default.instancePath,a.errorPath);r.if(g._`${Ee.default.errors} > 0`,()=>{if(typeof i==\\\"object\\\"){let[E,O]=l(i);O&&f(O),E&&_(E),m(c(i))}let v=typeof i==\\\"string\\\"?i:i._;v&&h(v),e.keepErrors||p()});function c({properties:v,items:E}){let O={};if(v){O.props={};for(let x in v)O.props[x]=[]}if(E){O.items={};for(let x=0;x<E.length;x++)O.items[x]=[]}return O}function l(v){let E,O;for(let x in v){if(x===\\\"properties\\\"||x===\\\"items\\\")continue;let H=v[x];if(typeof H==\\\"object\\\"){E||(E={});let G=E[x]={};for(let k in H)G[k]=[]}else O||(O={}),O[x]=[]}return[E,O]}function f(v){let E=r.const(\\\"emErrors\\\",g.stringify(v)),O=r.const(\\\"templates\\\",N(v,n));r.forOf(\\\"err\\\",Ee.default.vErrors,k=>r.if(y(k,E),()=>r.code(g._`${E}[${k}.keyword].push(${k})`).assign(g._`${k}.${Le}`,!0)));let{singleError:x}=e;if(x){let k=r.let(\\\"message\\\",g._`\\\"\\\"`),M=r.let(\\\"paramsErrors\\\",g._`[]`);H(fe=>{r.if(k,()=>r.code(g._`${k} += ${typeof x==\\\"string\\\"?x:\\\";\\\"}`)),r.code(g._`${k} += ${G(fe)}`),r.assign(M,g._`${M}.concat(${E}[${fe}])`)}),ar.reportError(t,{message:k,params:g._`{errors: ${M}}`})}else H(k=>ar.reportError(t,{message:G(k),params:g._`{errors: ${E}[${k}]}`}));function H(k){r.forIn(\\\"key\\\",E,M=>r.if(g._`${E}[${M}].length`,()=>k(M)))}function G(k){return g._`${k} in ${O} ? ${O}[${k}]() : ${o}[${k}]`}}function _(v){let E=r.const(\\\"emErrors\\\",g.stringify(v)),O=[];for(let M in v)O.push([M,N(v[M],n[M])]);let x=r.const(\\\"templates\\\",r.object(...O)),H=r.scopeValue(\\\"obj\\\",{ref:Xl,code:g.stringify(Xl)}),G=r.let(\\\"emPropParams\\\"),k=r.let(\\\"emParamsErrors\\\");r.forOf(\\\"err\\\",Ee.default.vErrors,M=>r.if(y(M,E),()=>{r.assign(G,g._`${H}[${M}.keyword]`),r.assign(k,g._`${E}[${M}.keyword][${M}.params[${G}]]`),r.if(k,()=>r.code(g._`${k}.push(${M})`).assign(g._`${M}.${Le}`,!0))})),r.forIn(\\\"key\\\",E,M=>r.forIn(\\\"keyProp\\\",g._`${E}[${M}]`,fe=>{r.assign(k,g._`${E}[${M}][${fe}]`),r.if(g._`${k}.length`,()=>{let Ue=r.const(\\\"tmpl\\\",g._`${x}[${M}] && ${x}[${M}][${fe}]`);ar.reportError(t,{message:g._`${Ue} ? ${Ue}() : ${o}[${M}][${fe}]`,params:g._`{errors: ${k}}`})})}))}function m(v){let{props:E,items:O}=v;if(!E&&!O)return;let x=g._`typeof ${s} == \\\"object\\\"`,H=g._`Array.isArray(${s})`,G=r.let(\\\"emErrors\\\"),k,M,fe=r.let(\\\"templates\\\");E&&O?(k=r.let(\\\"emChildKwd\\\"),r.if(x),r.if(H,()=>{Ue(O,n.items),r.assign(k,g.str`items`)},()=>{Ue(E,n.properties),r.assign(k,g.str`properties`)}),M=g._`[${k}]`):O?(r.if(H),Ue(O,n.items),M=g._`.items`):E&&(r.if(ze.and(x,ze.not(H))),Ue(E,n.properties),M=g._`.properties`),r.forOf(\\\"err\\\",Ee.default.vErrors,ce=>$(ce,G,es=>r.code(g._`${G}[${es}].push(${ce})`).assign(g._`${ce}.${Le}`,!0))),r.forIn(\\\"key\\\",G,ce=>r.if(g._`${G}[${ce}].length`,()=>{ar.reportError(t,{message:g._`${ce} in ${fe} ? ${fe}[${ce}]() : ${o}${M}[${ce}]`,params:g._`{errors: ${G}[${ce}]}`}),r.assign(g._`${Ee.default.vErrors}[${Ee.default.errors}-1].instancePath`,g._`${u} + \\\"/\\\" + ${ce}.replace(/~/g, \\\"~0\\\").replace(/\\\\\\\\//g, \\\"~1\\\")`)})),r.endIf();function Ue(ce,es){r.assign(G,g.stringify(ce)),r.assign(fe,N(ce,es))}}function h(v){let E=r.const(\\\"emErrs\\\",g._`[]`);r.forOf(\\\"err\\\",Ee.default.vErrors,O=>r.if(j(O),()=>r.code(g._`${E}.push(${O})`).assign(g._`${O}.${Le}`,!0))),r.if(g._`${E}.length`,()=>ar.reportError(t,{message:V(v),params:g._`{errors: ${E}}`}))}function p(){let v=r.const(\\\"emErrs\\\",g._`[]`);r.forOf(\\\"err\\\",Ee.default.vErrors,E=>r.if(g._`!${E}.${Le}`,()=>r.code(g._`${v}.push(${E})`))),r.assign(Ee.default.vErrors,v).assign(Ee.default.errors,g._`${v}.length`)}function y(v,E){return ze.and(g._`${v}.keyword !== ${Yr}`,g._`!${v}.${Le}`,g._`${v}.instancePath === ${u}`,g._`${v}.keyword in ${E}`,g._`${v}.schemaPath.indexOf(${a.errSchemaPath}) === 0`,g._`/^\\\\\\\\/[^\\\\\\\\/]*$/.test(${v}.schemaPath.slice(${a.errSchemaPath.length}))`)}function $(v,E,O){r.if(ze.and(g._`${v}.keyword !== ${Yr}`,g._`!${v}.${Le}`,g._`${v}.instancePath.indexOf(${u}) === 0`),()=>{let x=r.scopeValue(\\\"pattern\\\",{ref:/^\\\\/([^/]*)(?:\\\\/|$)/,code:g._`new RegExp(\\\"^\\\\\\\\\\\\/([^/]*)(?:\\\\\\\\\\\\/|$)\\\")`}),H=r.const(\\\"emMatches\\\",g._`${x}.exec(${v}.instancePath.slice(${u}.length))`),G=r.const(\\\"emChild\\\",g._`${H} && ${H}[1].replace(/~1/g, \\\"/\\\").replace(/~0/g, \\\"~\\\")`);r.if(g._`${G} !== undefined && ${G} in ${E}`,()=>O(G))})}function j(v){return ze.and(g._`${v}.keyword !== ${Yr}`,g._`!${v}.${Le}`,ze.or(g._`${v}.instancePath === ${u}`,ze.and(g._`${v}.instancePath.indexOf(${u}) === 0`,g._`${v}.instancePath[${u}.length] === \\\"/\\\"`)),g._`${v}.schemaPath.indexOf(${a.errSchemaPath}) === 0`,g._`${v}.schemaPath[${a.errSchemaPath}.length] === \\\"/\\\"`)}function N(v,E){let O=[];for(let x in v){let H=E[x];Bl.test(H)&&O.push([x,S(H)])}return r.object(...O)}function V(v){return Bl.test(v)?new Wl._Code(Wl.safeStringify(v).replace(pv,(E,O)=>`\\\" + JSON.stringify(${fv.getData(O,a)}) + \\\"`).replace(hv,\\\"\\\")):g.stringify(v)}function S(v){return g._`function(){return ${V(v)}}`}},metaSchema:{anyOf:[{type:\\\"string\\\"},{type:\\\"object\\\",properties:{properties:{$ref:\\\"#/$defs/stringMap\\\"},items:{$ref:\\\"#/$defs/stringList\\\"},required:{$ref:\\\"#/$defs/stringOrMap\\\"},dependencies:{$ref:\\\"#/$defs/stringOrMap\\\"}},additionalProperties:{type:\\\"string\\\"}}],$defs:{stringMap:{type:\\\"object\\\",additionalProperties:{type:\\\"string\\\"}},stringOrMap:{anyOf:[{type:\\\"string\\\"},{$ref:\\\"#/$defs/stringMap\\\"}]},stringList:{type:\\\"array\\\",items:{type:\\\"string\\\"}}}}}}var Zn=(e,t={})=>{if(!e.opts.allErrors)throw new Error(\\\"ajv-errors: Ajv option allErrors must be true\\\");if(e.opts.jsPropertySyntax)throw new Error(\\\"ajv-errors: ajv option jsPropertySyntax is not supported\\\");return e.addKeyword(mv(t))};Qn.default=Zn;eo.exports=Zn;eo.exports.default=Zn});var wo=pe(Te());var X=pe(Te()),ao=(0,X._)(\\\"Error: Token duplicated across multiple inputs\\\"),io=(0,X._)(\\\"Error: Item duplicated in layout structure\\\"),uo=(0,X._)(\\\"Error: Input duplicated in both layout structure and global inputs\\\"),co=(0,X._)(\\\"Error: Input in layout structure does not exist\\\"),lo=(0,X._)(\\\"Error: Input in global input structure does not exist\\\"),fo=(0,X._)(\\\"Error: Input is not present in the global inputs structure or layout structure\\\"),po=(0,X._)(\\\"Error: Visualization in layout structure does not exist\\\"),ho=(0,X._)(\\\"Error: Visualization is not present in layout structure\\\"),mo=(0,X._)(\\\"When a data source is unnamed, generated tokens for the search results and job status will not be available\\\"),yo=(0,X._)(\\\"When a data source is configured with an invalid name, generated tokens for the search results and job status will not be available\\\"),_o=(0,X._)(\\\"When multiple data sources have the same name, generated tokens for the search results and job status may be unpredictable\\\"),go=(0,X._)(\\\"Error: Layout id is not present in layoutDefinitions\\\"),$o=(0,X._)(\\\"Error: Layout id duplicated across multiple tabs\\\"),vo=(0,X._)('Error: Multiple conditions are configured with the name \\\"%(conditionName)s\\\"'),bo=(0,X._)(\\\"Since the condition name is used as a token, there can be no duplicate names\\\"),Eo=(0,X._)(\\\"Condition %(id)s cannot be used in both showConditions and hideConditions configurations for the same dashboard element\\\");var gd=Object.freeze({}),So=e=>{let t={},r=[],{inputs:s}=e;return Object.entries(s!=null?s:{}).forEach(([n,o])=>{let{token:a}=o.options||gd;a!==void 0&&(a in t?t[a].push(n):t[a]=[n])}),Object.entries(t).forEach(([n,o])=>{if(o.length>1){let a=o[o.length-1],i=o.slice(0,-1).join(\\\", \\\");r.push({instancePath:ao,message:(0,wo._)(`${i} and ${a} have the same token (${n})`)})}}),r};var ur=pe(Te());var wt=e=>!!e&&!Array.isArray(e)&&typeof e==\\\"object\\\";var $d=e=>Array.isArray(e)&&e.filter(t=>t!==void 0).length===0,vd=e=>wt(e)&&Object.keys(e).length===0,ir=e=>e===null||typeof e==\\\"undefined\\\"||typeof e==\\\"string\\\"&&!e||typeof e!=\\\"string\\\"&&typeof e!=\\\"object\\\"||$d(e)||vd(e);var bd=e=>{var t,r;return(r=(t=e.layout)==null?void 0:t.globalInputs)!=null?r:[]},Ed=e=>{var s,n;let t=(n=(s=e.layout)==null?void 0:s.layoutDefinitions)!=null?n:{},r=new Set;return Object.values(t).forEach(o=>{var a,i;!Array.isArray(o.structure)||!((i=(a=o.structure)==null?void 0:a[0])!=null&&i.item)||o.structure.forEach(u=>{u.type===\\\"input\\\"&&r.add(u.item)})}),r},wd=e=>{var t;return Object.keys((t=e.inputs)!=null?t:{})},Po=e=>{var a;let t=wd(e),r=(a=e.inputs)!=null?a:{},s=bd(e),n=Ed(e),o=[];return t.forEach(i=>{!s.includes(i)&&!n.has(i)&&o.push({instancePath:fo,message:(0,ur._)(`Input \\\"${i}\\\" is defined but not used in either the Global Inputs Structure or in any Layout Structure`)})}),s.forEach((i,u)=>{ir(r[i])&&o.push({instancePath:lo,message:(0,ur._)(`Input item ${u} references an input \\\"${i}\\\" that does not exist`)}),n.has(i)&&o.push({instancePath:uo,message:(0,ur._)(`Input \\\"${i}\\\" exists in both layout structure and global inputs`)})}),o};var mr=pe(hr()),yr=pe(Te());var Vm=({dataSource:e})=>{var t;return e.name||((t=e.options)==null?void 0:t.ref)},zm=(e,t)=>!t.has(e)&&/^([ \\\\w-.]+)$/.test(e)&&e!==\\\"default\\\",du=(e,t=[])=>{let{dataSources:r={}}=e,s=new Set(t),n=new Set,o=new Set;return Object.keys(r).reduce((a,i)=>{var c;if(!((c=r[i].options)!=null&&c.enableSmartSources))return a;let u=Vm({dataSource:r[i]});return u?(zm(u,s)?n.has(u)&&!o.has(u)&&(a.push({instancePath:(0,mr.sprintf)((0,yr._)('Error: Multiple data sources are configured with the name \\\"%(dsName)s\\\"'),{dsName:u}),message:_o}),o.add(u)):a.push({instancePath:(0,mr.sprintf)((0,yr._)('Error: The data source \\\"%(dsName)s\\\" has an invalid name'),{dsName:u}),message:yo}),n.add(u),a):(a.push({instancePath:(0,mr.sprintf)((0,yr._)('Error: The data source \\\"%(dsId)s\\\" is unnamed'),{dsId:i}),message:mo}),a)},[])};var fu=pe(Te());var pu=e=>{var n,o,a,i,u;let t=[],r=(a=(o=(n=e.layout)==null?void 0:n.tabs)==null?void 0:o.items)!=null?a:[],s=(u=(i=e.layout)==null?void 0:i.layoutDefinitions)!=null?u:{};return r.forEach(({layoutId:c})=>{typeof s[c]==\\\"undefined\\\"&&t.push({instancePath:go,message:(0,fu._)(`Layout \\\"${c}\\\" does not reference an existing layout definition`)})}),t};var Rt=pe(Te());var Lm=e=>{var s,n;let t=(n=(s=e.layout)==null?void 0:s.layoutDefinitions)!=null?n:{},r=new Set;return Object.values(t).forEach(o=>{var a,i;!Array.isArray(o.structure)||!((i=(a=o.structure)==null?void 0:a[0])!=null&&i.item)||o.structure.forEach(u=>{u.type!==\\\"input\\\"&&r.add(u.item)})}),r},Um=({visualizations:e,inputs:t,layoutId:r,layoutDefinition:s,errors:n})=>{var i,u;let o=new Set;if(!Array.isArray(s.structure)||!((u=(i=s.structure)==null?void 0:i[0])!=null&&u.item))return;s.structure.forEach((c,l)=>{o.has(c.item)&&n.push({instancePath:io,message:(0,Rt._)(`Structure item ${l} has the same key \\\"${c.item}\\\" as another structure item in layout ${r}`)}),c.type!==\\\"input\\\"&&!wt(e==null?void 0:e[c.item])&&n.push({instancePath:po,message:(0,Rt._)(`Structure item ${l} references a visualization \\\"${c.item}\\\" that does not exist in layout ${r}`)}),c.type===\\\"input\\\"&&!wt(t==null?void 0:t[c.item])&&n.push({instancePath:co,message:(0,Rt._)(`Structure item ${l} references an input \\\"${c.item}\\\" that does not exist in layout ${r}`)}),o.add(c.item)})},hu=e=>{var a,i,u,c;let t=[],r=(a=e.visualizations)!=null?a:{},s=(i=e.inputs)!=null?i:{},n=(c=(u=e.layout)==null?void 0:u.layoutDefinitions)!=null?c:{},o=Lm(e);return Object.entries(n).forEach(([l,f])=>Um({visualizations:r,inputs:s,layoutId:l,layoutDefinition:f,errors:t})),Object.keys(r).forEach(l=>{o.has(l)||t.push({instancePath:ho,message:(0,Rt._)(`Visualization \\\"${l}\\\" is not present in any Layout Structure`)})}),t};var fs=pe(Te());var mu=e=>{var n,o,a;let t={},r=[];return((a=(o=(n=e.layout)==null?void 0:n.tabs)==null?void 0:o.items)!=null?a:[]).forEach(({layoutId:i,label:u})=>{var l;let c=u!=null?u:(0,fs._)(\\\"[Unnamed Tab]\\\");i!==void 0&&((l=t[i])!=null||(t[i]=[]),t[i].push(c))}),Object.entries(t).forEach(([i,u])=>{if(u.length>1){let c=u[u.length-1],l=u.slice(0,-1).join(\\\", \\\");r.push({instancePath:$o,message:(0,fs._)(`${l} and ${c} have the same layout (${i})`)})}}),r};var Ql=pe(Yn()),ed=pe(Yl());var Zl=(e,t)=>{let r={};return(...s)=>{let n=t(...s);return r[n]||(r[n]=e(...s)),r[n]}};var Zr=new Ql.default({allErrors:!0,allowMatchingProperties:!0,allowUnionTypes:!0,code:{optimize:typeof Worker==\\\"undefined\\\"?!1:1}});(0,ed.default)(Zr);var td=Zl(e=>(e!=null&&e.$id&&Zr.getSchema(e.$id)&&Zr.removeSchema(e.$id),Zr.compile(e)),JSON.stringify);var rd=pe(hr());var sd=e=>{var n,o;let t=(o=(n=e.expressions)==null?void 0:n.conditions)!=null?o:{},r=new Set,s=new Set;return Object.keys(t).reduce((a,i)=>{let u=t[i];return u.name&&(r.has(u.name)&&!s.has(u.name)&&(a.push({instancePath:(0,rd.sprintf)(vo,{conditionName:u.name}),message:bo}),s.add(u.name)),r.add(u.name)),a},[])};var od=pe(hr());var yv=e=>Array.isArray(e==null?void 0:e.showConditions)&&(Array.isArray(e==null?void 0:e.conditions)||Array.isArray(e==null?void 0:e.hideConditions)),_v=e=>{if(!yv(e))return[];let{showConditions:t,hideConditions:r,conditions:s}=e,n=new Set([...r!=null?r:[],...s!=null?s:[]]);return(t!=null?t:[]).reduce((o,a,i)=>(n.has(a)&&o.push([a,i]),o),[])},nd=({stanza:e,stanzaName:t})=>{let r=[];return Object.entries(e!=null?e:{}).forEach(([s,n])=>{var u;let o=(u=n==null?void 0:n.containerOptions)==null?void 0:u.visibility,a=_v(o);if(!a.length)return;let i=`/${t}/${s}/containerOptions/visibility/showConditions`;a.forEach(([c,l])=>{r.push({instancePath:`${i}/${l}`,message:(0,od.sprintf)(Eo,{id:c})})})}),r},ad=e=>[...nd({stanza:e.inputs,stanzaName:\\\"inputs\\\"}),...nd({stanza:e.visualizations,stanzaName:\\\"visualizations\\\"})];var Qr=class{constructor(){this.validateDefinition=null}setSchema(t){if(!(t!=null&&t.$id))return null;try{this.validateDefinition=td(t)}catch(r){return r}return null}validate(t,r){var o,a;if(!this.validateDefinition)throw new Error(\\\"setSchema must be called first\\\");if(!this.validateDefinition(t)&&((a=(o=this.validateDefinition)==null?void 0:o.errors)!=null&&a.length))return this.validateDefinition.errors;let n=[...So(t),...hu(t),...Po(t),...du(t,r),...pu(t),...mu(t),...sd(t),...ad(t)];return ir(n)?null:n}};var id=e=>{let{schema:t,definition:r,readOnlyTokenNamespaces:s}=e.data,n=new Qr,o=n.setSchema(t);return o||n.validate(r,s)};var gv=self,$v=e=>postMessage(id(e));gv.addEventListener(\\\"message\\\",$v);\\n\"], {type: 'text/javascript'}));\n    const worker = new Worker(url);\n    URL.revokeObjectURL(url);\n    return worker;\n}", "\nimport * as defaultImport from \"@splunk/ui-utils/i18n\";\nexport * from \"@splunk/ui-utils/i18n\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { _ } from '@splunk/ui-utils/i18n';\n\nexport const DUPLICATE_INPUT_TOKEN = _(\n    'Error: Token duplicated across multiple inputs'\n);\n\nexport const DUPLICATE_ITEM = _('Error: Item duplicated in layout structure');\n\nexport const DUPLICATE_INPUT = _(\n    'Error: Input duplicated in both layout structure and global inputs'\n);\n\nexport const CANVAS_INPUT_NONEXISTENT = _(\n    'Error: Input in layout structure does not exist'\n);\n\nexport const GLOBAL_INPUT_NONEXISTENT = _(\n    'Error: Input in global input structure does not exist'\n);\n\nexport const GLOBAL_INPUT_NOT_PRESENT = _(\n    'Error: Input is not present in the global inputs structure or layout structure'\n);\n\nexport const VISUALIZATION_NONEXISTENT = _(\n    'Error: Visualization in layout structure does not exist'\n);\n\nexport const VISUALIZATION_NOT_PRESENT = _(\n    'Error: Visualization is not present in layout structure'\n);\n\nexport const CANNOT_CREATE_DS_TOKENS_UNNAMED = _(\n    'When a data source is unnamed, generated tokens for the search results and job status will not be available'\n);\n\nexport const CANNOT_CREATE_DS_TOKENS_INVALID = _(\n    'When a data source is configured with an invalid name, generated tokens for the search results and job status will not be available'\n);\n\nexport const CANNOT_ENSURE_DS_TOKEN_STABILITY = _(\n    'When multiple data sources have the same name, generated tokens for the search results and job status may be unpredictable'\n);\n\nexport const LAYOUT_ID_NONEXISTENT = _(\n    'Error: Layout id is not present in layoutDefinitions'\n);\n\nexport const DUPLICATE_LAYOUT_ID = _(\n    'Error: Layout id duplicated across multiple tabs'\n);\n\nexport const DUPLICATE_CONDITION_NAME_PATH = _(\n    'Error: Multiple conditions are configured with the name \"%(conditionName)s\"'\n);\n\nexport const DUPLICATE_CONDITION_NAME_MESSAGE = _(\n    'Since the condition name is used as a token, there can be no duplicate names'\n);\n\nexport const CONDITION_USED_FOR_SHOW_AND_HIDE_MESSAGE = _(\n    'Condition %(id)s cannot be used in both showConditions and hideConditions configurations for the same dashboard element'\n);\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport type { DashboardJSON, InputOptions } from '@splunk/dashboard-types';\nimport { DUPLICATE_INPUT_TOKEN } from './messages';\nimport type { ValidationErrors } from '../types';\n\nconst EmptyInputOptions: InputOptions = Object.freeze({}) as InputOptions;\n\n/**\n * check duplication of inputs tokens\n * @method checkDuplicateTokens\n * @returns {Array} errors\n */\nexport const checkDuplicateTokens = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const cache: Record<string, string[]> = {};\n    const errors: ValidationErrors = [];\n\n    const { inputs } = definition;\n\n    Object.entries(inputs ?? {}).forEach(([key, input]) => {\n        const { token } = input.options || EmptyInputOptions;\n        if (token === undefined) {\n            return;\n        }\n\n        if (token in cache) {\n            cache[token].push(key);\n        } else {\n            cache[token] = [key];\n        }\n    });\n\n    Object.entries(cache).forEach(([token, keys]) => {\n        if (keys.length > 1) {\n            const lastKey = keys[keys.length - 1];\n            const msg = keys.slice(0, -1).join(', ');\n            errors.push({\n                instancePath: DUPLICATE_INPUT_TOKEN,\n                message: _(\n                    `${msg} and ${lastKey} have the same token (${token})`\n                ),\n            });\n        }\n    });\n\n    return errors;\n};\n", "// This file can probably have more type guards added later\n\n/**\n * @method isPlainObject\n * @description TypeScript type guard (narrow the possible types) to detect plain objects\n * @param val Variable which may be a plain object\n * @returns true of the parameter is truthy, not an array, and has the type 'object'\n */\nexport const isPlainObject = (val: unknown): val is object =>\n    !!val && !Array.isArray(val) && typeof val === 'object';\n", "import { isPlainObject } from './typeGuards';\n\n/**\n * @method isEmptyArray\n * @description Check if an unknown variable is an empty array\n * @param val Variable which may be an array with no elements or all `undefined` elements\n * @returns true if the parameter is an array with length 0 or an array in which all elements are `undefined`\n */\nexport const isEmptyArray = (val: unknown): boolean =>\n    Array.isArray(val) && val.filter((v) => v !== undefined).length === 0;\n\n/**\n * @method isEmptyObject\n * @description Check if an unknown variable is an empty plain object\n * @param val Variable which may be a keyless plain object\n * @returns true if parameter is record collection with no keys\n */\nexport const isEmptyObject = (val: unknown): boolean =>\n    isPlainObject(val) && Object.keys(val).length === 0;\n\n/**\n * @method isEmpty\n * @description Detect if an object is considered \"empty\" (see return info for what is empty)\n * @param {any} val Variable which may be an empty object\n * @returns boolean true if parameter is null, undefined, an empty string, an\n * object with no keys, an array with no DEFINED values (arrays with only `undefined`\n * will be considered empty), or a non-object+non-string (such as a function)\n */\nexport const isEmpty = (val: unknown): boolean =>\n    val === null || // null\n    typeof val === 'undefined' || // undefined\n    (typeof val === 'string' && !val) || // Empty string\n    (typeof val !== 'string' && typeof val !== 'object') || // Non-object/non-string (things such as functions)\n    isEmptyArray(val) || // Empty array or array with only `undefined` elements\n    isEmptyObject(val); // Record collection with no keys\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport type { DashboardJSON, StructureItem } from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport {\n    GLOBAL_INPUT_NONEXISTENT,\n    GLOBAL_INPUT_NOT_PRESENT,\n    DUPLICATE_INPUT,\n} from './messages';\nimport { isEmpty } from './isEmpty';\n\nconst getGlobalInputIds = (definition: DashboardJSON): string[] =>\n    definition.layout?.globalInputs ?? [];\n\nconst getLayoutInputIds = (definition: DashboardJSON) => {\n    const layouts = definition.layout?.layoutDefinitions ?? {};\n    const inputIds = new Set<string>();\n    Object.values(layouts).forEach((layout) => {\n        // See if it is safe to cast layout structure to StructureItem[]\n        if (!Array.isArray(layout.structure) || !layout.structure?.[0]?.item) {\n            return;\n        }\n\n        (layout.structure as StructureItem[]).forEach((item) => {\n            if (item.type === 'input') {\n                inputIds.add(item.item);\n            }\n        });\n    });\n\n    return inputIds;\n};\n\nconst getInputStanzaIds = (definition: DashboardJSON) =>\n    Object.keys(definition.inputs ?? {});\n\nexport const checkInputsInStructure = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const inputIds = getInputStanzaIds(definition);\n    const inputs = definition.inputs ?? {};\n    const globalInputs = getGlobalInputIds(definition);\n    const layoutInputIds = getLayoutInputIds(definition);\n\n    const errors: ValidationErrors = [];\n\n    inputIds.forEach((inputId) => {\n        if (!globalInputs.includes(inputId) && !layoutInputIds.has(inputId)) {\n            errors.push({\n                instancePath: GLOBAL_INPUT_NOT_PRESENT,\n                message: _(\n                    `Input \"${inputId}\" is defined but not used in either the Global Inputs Structure or in any Layout Structure`\n                ),\n            });\n        }\n    });\n\n    globalInputs.forEach((inputId, idx) => {\n        if (isEmpty(inputs[inputId])) {\n            errors.push({\n                instancePath: GLOBAL_INPUT_NONEXISTENT,\n                message: _(\n                    `Input item ${idx} references an input \"${inputId}\" that does not exist`\n                ),\n            });\n        }\n        if (layoutInputIds.has(inputId)) {\n            errors.push({\n                instancePath: DUPLICATE_INPUT,\n                message: _(\n                    `Input \"${inputId}\" exists in both layout structure and global inputs`\n                ),\n            });\n        }\n    });\n\n    return errors;\n};\n", "\nimport * as defaultImport from \"@splunk/ui-utils/format\";\nexport * from \"@splunk/ui-utils/format\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { sprintf } from '@splunk/ui-utils/format';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport type {\n    DashboardJSON,\n    DataSourceDefinition,\n} from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport {\n    CANNOT_CREATE_DS_TOKENS_UNNAMED,\n    CANNOT_CREATE_DS_TOKENS_INVALID,\n    CANNOT_ENSURE_DS_TOKEN_STABILITY,\n} from './messages';\n\n// TODO: Revisit this in the future to see if there's a way to leverage the preset\n// This would ideally be handled with the below but the preset can't be posted to a worker\n// usePreset().getPresetDefinition().dataSources[dataSource.type].config.getDataSourceName({ dataSource })\nconst getDSName = ({\n    dataSource,\n}: {\n    dataSource: DataSourceDefinition;\n}): string | undefined => {\n    return dataSource.name || (dataSource.options?.ref as string | undefined);\n};\n\n// This checks that the datasource name isn't a readonly token namespace and\n// validates using a regex which is basically just TOKEN_NAMESPACE_PREFIX_PATTERN\n// from dashboard-util. The import from dashboard-util isn't used because that would\n// require that the utils package is not externalized when bundling the worker code\n// (this method executes from the worker's thread and cannot use externalized code)\nconst isDataSourceNameValid = (\n    dsName: string,\n    readOnlyTokenNamespaces: Set<string>\n): boolean =>\n    !readOnlyTokenNamespaces.has(dsName) &&\n    /^([ \\w-.]+)$/.test(dsName) &&\n    dsName !== 'default'; // DEFAULT_TOKEN_NAMESPACE may not be in readOnlyTokenNamespaces\n\nexport const checkInvalidSmartSources = (\n    definition: DashboardJSON,\n    readOnlyTokenNamespaces: string[] = []\n): ValidationErrors => {\n    const { dataSources = {} } = definition;\n    const readOnlyTokenNamespacesSet = new Set<string>(readOnlyTokenNamespaces);\n\n    const seenSmartSources = new Set<string>();\n    const clashingNamesErrors = new Set<string>();\n\n    return Object.keys(dataSources).reduce<ValidationErrors>((errors, dsId) => {\n        if (!dataSources[dsId].options?.enableSmartSources) {\n            return errors;\n        }\n\n        const dsName = getDSName({ dataSource: dataSources[dsId] });\n        if (!dsName) {\n            // Data source has an empty/missing name\n            errors.push({\n                instancePath: sprintf(\n                    _('Error: The data source \"%(dsId)s\" is unnamed'),\n                    { dsId }\n                ),\n                message: CANNOT_CREATE_DS_TOKENS_UNNAMED,\n            });\n\n            return errors;\n        }\n\n        if (!isDataSourceNameValid(dsName, readOnlyTokenNamespacesSet)) {\n            // Data source has an invalid name\n            errors.push({\n                instancePath: sprintf(\n                    _(\n                        'Error: The data source \"%(dsName)s\" has an invalid name'\n                    ),\n                    {\n                        dsName,\n                    }\n                ),\n                message: CANNOT_CREATE_DS_TOKENS_INVALID,\n            });\n        } else if (\n            seenSmartSources.has(dsName) &&\n            !clashingNamesErrors.has(dsName)\n        ) {\n            // Duplicate names across data sources. Only push one of this error.\n            errors.push({\n                instancePath: sprintf(\n                    _(\n                        'Error: Multiple data sources are configured with the name \"%(dsName)s\"'\n                    ),\n                    {\n                        dsName,\n                    }\n                ),\n                message: CANNOT_ENSURE_DS_TOKEN_STABILITY,\n            });\n\n            clashingNamesErrors.add(dsName);\n        }\n\n        seenSmartSources.add(dsName);\n        return errors;\n    }, []);\n};\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport type { DashboardJSON } from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport { LAYOUT_ID_NONEXISTENT } from './messages';\n\nexport const checkLayoutsInTabs = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const errors: ValidationErrors = [];\n\n    const tabs = definition.layout?.tabs?.items ?? [];\n    const layouts = definition.layout?.layoutDefinitions ?? {};\n\n    tabs.forEach(({ layoutId }) => {\n        if (typeof layouts[layoutId] === 'undefined') {\n            errors.push({\n                instancePath: LAYOUT_ID_NONEXISTENT,\n                message: _(\n                    `Layout \"${layoutId}\" does not reference an existing layout definition`\n                ),\n            });\n        }\n    });\n\n    return errors;\n};\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport type {\n    DashboardJSON,\n    RootInputsDefinition,\n    RootVisualizationsDefinition,\n    StructureItem,\n    LayoutDefinitionItem,\n} from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport {\n    DUPLICATE_ITEM,\n    VISUALIZATION_NONEXISTENT,\n    VISUALIZATION_NOT_PRESENT,\n    CANVAS_INPUT_NONEXISTENT,\n} from './messages';\nimport { isPlainObject } from './typeGuards';\n\nconst getLayoutVizIds = (definition: DashboardJSON) => {\n    const layouts = definition.layout?.layoutDefinitions ?? {};\n    const vizIds = new Set<string>();\n    Object.values(layouts).forEach((layout) => {\n        // See if it is safe to cast layout structure to StructureItem[]\n        if (!Array.isArray(layout.structure) || !layout.structure?.[0]?.item) {\n            return;\n        }\n\n        (layout.structure as StructureItem[]).forEach((item) => {\n            if (item.type !== 'input') {\n                vizIds.add(item.item);\n            }\n        });\n    });\n\n    return vizIds;\n};\n\nexport const checkStructure = ({\n    visualizations,\n    inputs,\n    layoutId,\n    layoutDefinition,\n    errors,\n}: {\n    visualizations: RootVisualizationsDefinition;\n    inputs: RootInputsDefinition;\n    layoutId: string;\n    layoutDefinition: LayoutDefinitionItem;\n    errors: ValidationErrors;\n}) => {\n    const seen = new Set<StructureItem['item']>();\n\n    // Make sure we can understand the layout structure\n    if (\n        !Array.isArray(layoutDefinition.structure) ||\n        !layoutDefinition.structure?.[0]?.item\n    ) {\n        return;\n    }\n\n    const structure = layoutDefinition.structure as StructureItem[];\n\n    structure.forEach((item, idx) => {\n        if (seen.has(item.item)) {\n            errors.push({\n                instancePath: DUPLICATE_ITEM,\n                message: _(\n                    `Structure item ${idx} has the same key \"${item.item}\" as another structure item in layout ${layoutId}`\n                ),\n            });\n        }\n\n        if (\n            item.type !== 'input' &&\n            !isPlainObject(visualizations?.[item.item])\n        ) {\n            errors.push({\n                instancePath: VISUALIZATION_NONEXISTENT,\n                message: _(\n                    `Structure item ${idx} references a visualization \"${item.item}\" that does not exist in layout ${layoutId}`\n                ),\n            });\n        }\n\n        if (item.type === 'input' && !isPlainObject(inputs?.[item.item])) {\n            errors.push({\n                instancePath: CANVAS_INPUT_NONEXISTENT,\n                message: _(\n                    `Structure item ${idx} references an input \"${item.item}\" that does not exist in layout ${layoutId}`\n                ),\n            });\n        }\n\n        seen.add(item.item);\n    });\n};\n\nexport const checkVisualizationsInStructure = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const errors: ValidationErrors = [];\n\n    const visualizations = definition.visualizations ?? {};\n    const inputs = definition.inputs ?? {};\n    const layouts = definition.layout?.layoutDefinitions ?? {};\n    const layoutVizIds = getLayoutVizIds(definition);\n\n    Object.entries(layouts).forEach(([layoutId, layout]) =>\n        checkStructure({\n            visualizations,\n            inputs,\n            layoutId,\n            layoutDefinition: layout,\n            errors,\n        })\n    );\n\n    Object.keys(visualizations).forEach((vizId) => {\n        if (!layoutVizIds.has(vizId)) {\n            errors.push({\n                instancePath: VISUALIZATION_NOT_PRESENT,\n                message: _(\n                    `Visualization \"${vizId}\" is not present in any Layout Structure`\n                ),\n            });\n        }\n    });\n\n    return errors;\n};\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport type { DashboardJSON } from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport { DUPLICATE_LAYOUT_ID } from './messages';\n\n/**\n * check layoutId is unique for each tab\n * @method checkDuplicateLayoutsInTabs\n * @returns {Array} errors\n */\n\nexport const checkDuplicateLayoutsInTabs = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const cache: Record<string, string[]> = {};\n    const errors: ValidationErrors = [];\n\n    const tabs = definition.layout?.tabs?.items ?? [];\n\n    tabs.forEach(({ layoutId, label }) => {\n        const tabLabel = label ?? _('[Unnamed Tab]');\n\n        if (layoutId === undefined) {\n            return;\n        }\n        cache[layoutId] ??= [];\n        cache[layoutId].push(tabLabel);\n    });\n\n    Object.entries(cache).forEach(([layoutId, labels]) => {\n        if (labels.length > 1) {\n            const lastLabel = labels[labels.length - 1];\n            const msg = labels.slice(0, -1).join(', ');\n            errors.push({\n                instancePath: DUPLICATE_LAYOUT_ID,\n                message: _(\n                    `${msg} and ${lastLabel} have the same layout (${layoutId})`\n                ),\n            });\n        }\n    });\n\n    return errors;\n};\n", "\nimport * as defaultImport from \"ajv\";\nexport * from \"ajv\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"ajv-errors\";\nexport * from \"ajv-errors\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const memoize = <T extends (...args: any[]) => any>(\n    func: T,\n    resolver: (...args: Parameters<T>) => string\n): T => {\n    const memoizedComputations: Record<string, ReturnType<T>> = {};\n\n    return ((...args: Parameters<T>): ReturnType<T> => {\n        const argKey = resolver(...args);\n        if (!memoizedComputations[argKey]) {\n            memoizedComputations[argKey] = func(...args);\n        }\n\n        return memoizedComputations[argKey];\n    }) as T;\n};\n", "import type { DashboardJSON } from '@splunk/dashboard-types';\nimport Ajv from 'ajv';\nimport AjvErrors from 'ajv-errors';\nimport type { JSONSchemaType, ValidateFunction } from 'ajv';\nimport { memoize } from './memoize';\n\nconst ajv = new Ajv({\n    allErrors: true,\n    // This is to make sure the definition `defaults` can have both `properties` and `patternProperties`\n    allowMatchingProperties: true,\n    // todo: lots of viz schemas violate this rule, will fix them later\n    allowUnionTypes: true,\n    code: {\n        // Don't optimize when web worker support isn't detected. All supported browser targets do support\n        // web workers, so this likely indicates a test environment where the code optimization will error\n        optimize: typeof Worker === 'undefined' ? false : 1,\n    },\n});\n\n// Support custom error messages if provided by the schemas\nAjvErrors(ajv);\n\n// We hash the string representation of the the schema to use as the memoize resolver.\nexport const memoizedSchemaCompile = memoize(\n    (\n        newSchema: JSONSchemaType<DashboardJSON>\n    ): ValidateFunction<DashboardJSON> => {\n        // Prevent warnings when adding a new schema with the same id\n        if (newSchema?.$id && ajv.getSchema(newSchema.$id)) {\n            ajv.removeSchema(newSchema.$id);\n        }\n\n        return ajv.compile(newSchema);\n    },\n    JSON.stringify\n);\n", "import { sprintf } from '@splunk/ui-utils/format';\nimport type { DashboardJSON } from '@splunk/dashboard-types';\nimport type { ValidationErrors } from '../types';\nimport {\n    DUPLICATE_CONDITION_NAME_MESSAGE,\n    DUPLICATE_CONDITION_NAME_PATH,\n} from './messages';\n\nexport const checkInvalidConditions = (\n    definition: DashboardJSON\n): ValidationErrors => {\n    const conditions = definition.expressions?.conditions ?? {};\n\n    const seenConditionNames = new Set<string>();\n    const clashingConditionNames = new Set<string>();\n\n    return Object.keys(conditions).reduce<ValidationErrors>(\n        (errors, conditionId) => {\n            const condition = conditions[conditionId];\n\n            if (!condition.name) {\n                // if the condition doesn't have a name, the error will be captured by the schema\n                return errors;\n            }\n\n            if (\n                seenConditionNames.has(condition.name) &&\n                !clashingConditionNames.has(condition.name)\n            ) {\n                // Duplicate names across conditions. Only push an error for the first encounter\n                errors.push({\n                    instancePath: sprintf(DUPLICATE_CONDITION_NAME_PATH, {\n                        conditionName: condition.name,\n                    }),\n                    message: DUPLICATE_CONDITION_NAME_MESSAGE,\n                });\n\n                clashingConditionNames.add(condition.name);\n            }\n\n            seenConditionNames.add(condition.name);\n            return errors;\n        },\n        []\n    );\n};\n", "import { sprintf } from '@splunk/ui-utils/format';\nimport type {\n    DashboardJSON,\n    ItemVisibilityOptions,\n    RootInputsDefinition,\n    RootVisualizationsDefinition,\n} from '@splunk/dashboard-types';\nimport { CONDITION_USED_FOR_SHOW_AND_HIDE_MESSAGE } from '../utils/messages';\nimport type { ValidationErrors } from '../types';\n\nconst couldHaveConflictingConditions = (\n    arg0?: ItemVisibilityOptions\n): arg0 is ItemVisibilityOptions =>\n    Array.isArray(arg0?.showConditions) &&\n    (Array.isArray(arg0?.conditions) || Array.isArray(arg0?.hideConditions));\n\nconst getInvalidConditions = (visibilityOptions: ItemVisibilityOptions) => {\n    if (!couldHaveConflictingConditions(visibilityOptions)) {\n        return [];\n    }\n\n    const { showConditions, hideConditions, conditions } = visibilityOptions;\n    const rejects = new Set([...(hideConditions ?? []), ...(conditions ?? [])]);\n    return (showConditions ?? []).reduce<[string, number][]>(\n        (accum, id, idx) => {\n            if (rejects.has(id)) {\n                accum.push([id, idx]);\n            }\n\n            return accum;\n        },\n        []\n    );\n};\n\nconst checkStanza = ({\n    stanza,\n    stanzaName,\n}: {\n    stanza?: RootInputsDefinition | RootVisualizationsDefinition;\n    stanzaName: string;\n}) => {\n    const errors: ValidationErrors = [];\n\n    Object.entries(stanza ?? {}).forEach(([itemId, itemDefinition]) => {\n        const visibilityOptions = itemDefinition?.containerOptions?.visibility;\n\n        const offendingIds = getInvalidConditions(visibilityOptions);\n        if (!offendingIds.length) {\n            return;\n        }\n\n        const instancePath = `/${stanzaName}/${itemId}/containerOptions/visibility/showConditions`;\n        offendingIds.forEach(([id, idx]) => {\n            errors.push({\n                instancePath: `${instancePath}/${idx}`,\n                message: sprintf(CONDITION_USED_FOR_SHOW_AND_HIDE_MESSAGE, {\n                    id,\n                }),\n            });\n        });\n    });\n\n    return errors;\n};\n\nexport const validateNoMixedShowHideConditions = (\n    definition: DashboardJSON\n): ValidationErrors => [\n    ...checkStanza({ stanza: definition.inputs, stanzaName: 'inputs' }),\n    ...checkStanza({\n        stanza: definition.visualizations,\n        stanzaName: 'visualizations',\n    }),\n];\n", "import type { ErrorObject, ValidateFunction, JSONSchemaType } from 'ajv';\nimport type { DashboardJSON } from '@splunk/dashboard-types';\n\nimport type { ValidationErrors } from '../types';\n\n// Split the checks into individual files to make the tests more readable\nimport { checkDuplicateTokens } from '../utils/checkDuplicateTokens';\nimport { checkInputsInStructure } from '../utils/checkInputsInStructure';\nimport { checkInvalidSmartSources } from '../utils/checkInvalidSmartSources';\nimport { checkLayoutsInTabs } from '../utils/checkLayoutsInTabs';\nimport { checkVisualizationsInStructure } from '../utils/checkVisualizationsInStructure';\nimport { checkDuplicateLayoutsInTabs } from '../utils/checkDuplicateLayoutsInTabs';\nimport { memoizedSchemaCompile } from '../utils/memoizedSchemaCompile';\nimport { isEmpty } from '../utils/isEmpty';\nimport { checkInvalidConditions } from '../utils/checkInvalidConditions';\nimport { validateNoMixedShowHideConditions } from '../utils/validateNoMixedShowHideConditions';\n\n/**\n * A dashboard definition validation class\n * @class DashboardValidator\n */\nexport class DashboardValidator {\n    // Make this property protected so that in the unit tests the\n    // class can be extended and this property can be validated.\n    protected validateDefinition: ValidateFunction | null = null;\n\n    /**\n     * set up customized schema\n     * @method setSchema\n     * @param {Object} newSchema\n     * @returns {Object} error\n     */\n    setSchema(newSchema: JSONSchemaType<DashboardJSON>): Error | null {\n        if (!newSchema?.$id) {\n            return null;\n        }\n\n        try {\n            this.validateDefinition = memoizedSchemaCompile(newSchema);\n        } catch (error) {\n            return error as Error;\n        }\n\n        return null;\n    }\n\n    /**\n     * Validates the current definition\n     * @method validate\n     * @returns {Array} list of errors, or null\n     */\n    validate(\n        definition: DashboardJSON,\n        readOnlyTokenNamespaces?: string[]\n    ): ErrorObject[] | ValidationErrors | null {\n        if (!this.validateDefinition) {\n            throw new Error('setSchema must be called first');\n        }\n        const valid = this.validateDefinition(definition);\n\n        if (!valid && this.validateDefinition?.errors?.length) {\n            return this.validateDefinition.errors;\n        }\n\n        const res = [\n            ...checkDuplicateTokens(definition),\n            ...checkVisualizationsInStructure(definition),\n            ...checkInputsInStructure(definition),\n            ...checkInvalidSmartSources(definition, readOnlyTokenNamespaces),\n            ...checkLayoutsInTabs(definition),\n            ...checkDuplicateLayoutsInTabs(definition),\n            ...checkInvalidConditions(definition),\n            ...validateNoMixedShowHideConditions(definition),\n        ];\n\n        return isEmpty(res) ? null : res;\n    }\n}\n", "import { DashboardValidator } from '../validators/DashboardValidator';\n\n// Split this from the worker for testability\nexport const handleEvent = (event: MessageEvent) => {\n    const { schema, definition, readOnlyTokenNamespaces } = event.data;\n    const validator = new DashboardValidator();\n\n    const errors = validator.setSchema(schema);\n    if (errors) {\n        return errors;\n    }\n\n    return validator.validate(definition, readOnlyTokenNamespaces);\n};\n", "import { memo, useCallback, useEffect } from 'react';\nimport { useWorker } from '../hooks/useWorker';\n/* @ts-expect-error TS1192 */\nimport ValidationWorker from '../workers/validation.worker.ts';\nimport type { ValidatorArgs, useWorkerArgs } from '../types';\nimport { handleEvent } from '../workers/validationEventHandler';\n\nconst defaultReadOnlyTokenNamespaces: string[] = [];\n\nconst ValidatorComponent = ({\n    schema,\n    definition,\n    onError,\n    readOnlyTokenNamespaces = defaultReadOnlyTokenNamespaces,\n}: ValidatorArgs) => {\n    const onMessage = useCallback(\n        ({ data }: { data: ReturnType<typeof handleEvent> }) => {\n            if (data) {\n                onError(data);\n            }\n        },\n        [onError]\n    );\n\n    const postMessage = useCallback(\n        (worker: Worker) => {\n            worker.postMessage({ schema, definition, readOnlyTokenNamespaces });\n        },\n        [schema, definition, readOnlyTokenNamespaces]\n    );\n\n    // Attempt to use a web worker for validation checking\n    const { enabled } = useWorker({\n        WorkerClass: ValidationWorker as useWorkerArgs['WorkerClass'],\n        onMessage,\n        postMessage,\n    });\n\n    // `useWorker` hook will return an `enabled` boolean indicating if Web Worker\n    // support exists in the target environment\n    useEffect(() => {\n        if (!enabled) {\n            onMessage({\n                data: handleEvent(\n                    new MessageEvent('pseudoValidationEvent', {\n                        data: { schema, definition, readOnlyTokenNamespaces },\n                    })\n                ),\n            });\n        }\n    }, [definition, enabled, schema, readOnlyTokenNamespaces, onMessage]);\n\n    return null;\n};\n\nconst isEqual = (arg0: unknown, arg1: unknown): boolean =>\n    arg0 === arg1 || JSON.stringify(arg0) === JSON.stringify(arg1);\n\nexport const Validator = memo(\n    ValidatorComponent,\n    (prevProps, nextProps) =>\n        prevProps.onError === nextProps.onError &&\n        isEqual(prevProps.schema, nextProps.schema) &&\n        isEqual(prevProps.definition, nextProps.definition) &&\n        isEqual(\n            prevProps.readOnlyTokenNamespaces,\n            nextProps.readOnlyTokenNamespaces\n        )\n);\n", "import * as React from 'react';\nimport debounce from 'lodash/debounce.js';\nimport throttle from 'lodash/throttle.js';\nimport type { DebouncedFunc } from 'lodash';\n\nimport { OnRefChangeType, Props } from './types.js';\n\nexport type PatchedResizeObserverCallback = DebouncedFunc<ResizeObserverCallback> | ResizeObserverCallback;\n\n/**\n * Wraps the resize callback with a lodash debounce / throttle based on the refresh mode\n */\nexport const patchResizeCallback = (\n  resizeCallback: ResizeObserverCallback,\n  refreshMode: Props['refreshMode'],\n  refreshRate: Props['refreshRate'],\n  refreshOptions: Props['refreshOptions'],\n): PatchedResizeObserverCallback => {\n  switch (refreshMode) {\n    case 'debounce':\n      return debounce(resizeCallback, refreshRate, refreshOptions);\n    case 'throttle':\n      return throttle(resizeCallback, refreshRate, refreshOptions);\n    default:\n      return resizeCallback;\n  }\n};\n\n/**\n * A custom hook that converts a callback to a ref to avoid triggering re-renders when passed as a\n * prop or avoid re-executing effects when passed as a dependency\n */\nexport const useCallbackRef =\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  <T extends (...args: any[]) => any>(callback: T | undefined): T => {\n    const callbackRef = React.useRef(callback);\n\n    React.useEffect(() => {\n      callbackRef.current = callback;\n    });\n\n    return React.useMemo(() => ((...args) => callbackRef.current?.(...args)) as T, []);\n  };\n\n/** `useRef` hook doesn't handle conditional rendering or dynamic ref changes.\n * This hook creates a proxy that ensures that `refElement` is updated whenever the ref is changed. */\nexport const useRefProxy =\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  <T extends HTMLElement = any>(targetRef: React.MutableRefObject<T | null> | undefined) => {\n    // we are going to use this ref to store the last element that was passed to the hook\n    const [refElement, setRefElement] = React.useState<T | null>(targetRef?.current || null);\n\n    // if targetRef is passed, we need to update the refElement\n    // we have to use setTimeout because ref get assigned after the hook is called\n    // in the future releases we are going to remove targetRef and force users to use ref returned by the hook\n    if (targetRef) {\n      setTimeout(() => {\n        if (targetRef.current !== refElement) {\n          setRefElement(targetRef.current);\n        }\n      }, 0);\n    }\n\n    // this is a memo that will be called every time the ref is changed\n    // This proxy will properly call setState either when the ref is called as a function or when `.current` is set\n    // we call setState inside to trigger rerender\n    const refProxy: OnRefChangeType<T> = React.useMemo(\n      () =>\n        new Proxy(\n          (node) => {\n            if (node !== refElement) {\n              setRefElement(node);\n            }\n          },\n          {\n            get(target, prop) {\n              if (prop === 'current') {\n                return refElement;\n              }\n              return target[prop];\n            },\n            set(target, prop, value) {\n              if (prop === 'current') {\n                setRefElement(value);\n              } else {\n                target[prop] = value;\n              }\n              return true;\n            },\n          },\n        ),\n      [refElement],\n    );\n\n    return { refProxy, refElement, setRefElement };\n  };\n\n/** Calculates the dimensions of the element based on the current box model.\n * @see https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model\n */\nexport const getDimensions = (entry: ResizeObserverEntry, box: ResizeObserverBoxOptions | undefined) => {\n  // Value\t          Border\t  Padding\t  Inner Content\n  // ---------------------------------------------------\n  // 'border-box'\t    Yes\t      Yes\t      Yes\n  // 'content-box'\t  No\t      No\t      Yes\n  //  undefined       No\t      No?\t      Yes\n\n  const borderBox = entry.borderBoxSize?.[0];\n  const contentBox = entry.contentBoxSize?.[0];\n\n  if (box === 'border-box' && borderBox) {\n    return {\n      width: borderBox.inlineSize,\n      height: borderBox.blockSize,\n    };\n  }\n\n  if (box === 'content-box' && contentBox) {\n    return {\n      width: contentBox.inlineSize,\n      height: contentBox.blockSize,\n    };\n  }\n\n  return {\n    width: entry.contentRect.width,\n    height: entry.contentRect.height,\n  };\n};\n", "import { useEffect, useState, useRef, useCallback } from 'react';\nimport type { DebouncedFunc } from 'lodash';\n\nimport { getDimensions, patchResizeCallback, useCallbackRef, useRefProxy } from './utils.js';\n\nimport type { Dimensions, UseResizeDetectorReturn, useResizeDetectorProps } from './types.js';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction useResizeDetector<T extends HTMLElement = any>({\n  skipOnMount = false,\n  refreshMode,\n  refreshRate = 1000,\n  refreshOptions,\n  handleWidth = true,\n  handleHeight = true,\n  targetRef,\n  observerOptions,\n  onResize,\n}: useResizeDetectorProps<T> = {}): UseResizeDetectorReturn<T> {\n  // If `skipOnMount` is enabled, skip the first resize event\n  const skipResize = useRef<boolean>(skipOnMount);\n\n  // Wrap the `onResize` callback with a ref to avoid re-renders\n  const onResizeRef = useCallbackRef(onResize);\n\n  const [size, setSize] = useState<Dimensions>({\n    width: undefined,\n    height: undefined,\n  });\n\n  // Create a proxy ref to handle conditional rendering and dynamic ref changes of the target element\n  const { refProxy, refElement } = useRefProxy<T>(targetRef);\n\n  const { box } = observerOptions || {};\n\n  const resizeCallback: ResizeObserverCallback = useCallback(\n    (entries: ResizeObserverEntry[]) => {\n      if (!handleWidth && !handleHeight) return;\n\n      if (skipResize.current) {\n        skipResize.current = false;\n        return;\n      }\n\n      // Only update the size if one of the observed dimensions has changed\n      const shouldSetSize = (prevSize: Dimensions, nextSize: Dimensions) =>\n        (handleWidth && prevSize.width !== nextSize.width) || (handleHeight && prevSize.height !== nextSize.height);\n\n      entries.forEach((entry) => {\n        const dimensions = getDimensions(entry, box);\n        setSize((prevSize) => {\n          if (!shouldSetSize(prevSize, dimensions)) return prevSize;\n          onResizeRef?.({\n            width: dimensions.width,\n            height: dimensions.height,\n            entry,\n          });\n          return dimensions;\n        });\n      });\n    },\n    [handleWidth, handleHeight, skipResize, box],\n  );\n\n  // Throttle/Debounce the resize event if refreshMode is configured\n  const resizeHandler = useCallback(patchResizeCallback(resizeCallback, refreshMode, refreshRate, refreshOptions), [\n    resizeCallback,\n    refreshMode,\n    refreshRate,\n    refreshOptions,\n  ]);\n\n  // Attach ResizeObserver to the element\n  useEffect(() => {\n    let resizeObserver: ResizeObserver | undefined;\n    if (refElement) {\n      try {\n        resizeObserver = new window.ResizeObserver(resizeHandler);\n        resizeObserver.observe(refElement, observerOptions);\n      } catch (error) {\n        console.warn('ResizeObserver not supported or failed to initialize:', error);\n      }\n    }\n    // If refElement is not available, reset the size\n    else if (size.width || size.height) {\n      onResizeRef?.({\n        width: null,\n        height: null,\n        entry: null,\n      });\n      setSize({ width: undefined, height: undefined });\n    }\n\n    // Disconnect the ResizeObserver when the component is unmounted\n    return () => {\n      resizeObserver?.disconnect?.();\n      (resizeHandler as DebouncedFunc<ResizeObserverCallback>).cancel?.();\n    };\n  }, [resizeHandler, refElement]);\n\n  return { ref: refProxy, ...size };\n}\n\nexport default useResizeDetector;\n", "export { default as useResizeDetector } from './useResizeDetector.js';\n//# sourceMappingURL=index.js.map\n", "/******/ (() => {\n    // webpackBootstrap\n    /******/ \"use strict\";\n    /******/ // The require scope\n    /******/    var e = {};\n    /******/\n    /************************************************************************/\n    /******/ /* webpack/runtime/compat get default export */\n    /******/    (() => {\n        /******/ // getDefaultExport function for compatibility with non-harmony modules\n        /******/ e.n = t => {\n            /******/ var n = t && t.__esModule ? \n            /******/ () => t[\"default\"]\n            /******/ : () => t\n            /******/;\n            e.d(n, {\n                a: n\n            });\n            /******/            return n;\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/define property getters */\n    /******/    (() => {\n        /******/ // define getter functions for harmony exports\n        /******/ e.d = (t, n) => {\n            /******/ for (var r in n) {\n                /******/ if (e.o(n, r) && !e.o(t, r)) {\n                    /******/ Object.defineProperty(t, r, {\n                        enumerable: true,\n                        get: n[r]\n                    });\n                    /******/                }\n                /******/            }\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/hasOwnProperty shorthand */\n    /******/    (() => {\n        /******/ e.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t)\n        /******/;\n    })();\n    /******/\n    /******/ /* webpack/runtime/make namespace object */\n    /******/    (() => {\n        /******/ // define __esModule on exports\n        /******/ e.r = e => {\n            /******/ if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n                /******/ Object.defineProperty(e, Symbol.toStringTag, {\n                    value: \"Module\"\n                });\n                /******/            }\n            /******/            Object.defineProperty(e, \"__esModule\", {\n                value: true\n            });\n            /******/        };\n        /******/    })();\n    /******/\n    /************************************************************************/    var t = {};\n    // ESM COMPAT FLAG\n        e.r(t);\n    // EXPORTS\n        e.d(t, {\n        Tab: () => /* reexport */ ne,\n        default: () => /* reexport */ je\n    });\n    // CONCATENATED MODULE: external \"react\"\n    const n = require(\"react\");\n    var r =  e.n(n);\n    // CONCATENATED MODULE: external \"prop-types\"\n    const a = require(\"prop-types\");\n    var i =  e.n(a);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/usePrevious\"\n    const o = require(\"@splunk/react-ui/usePrevious\");\n    var l =  e.n(o);\n    // CONCATENATED MODULE: external \"lodash/omit\"\n    const u = require(\"lodash/omit\");\n    var c =  e.n(u);\n    // CONCATENATED MODULE: external \"@splunk/react-icons/DotsThreeVertical\"\n    const s = require(\"@splunk/react-icons/DotsThreeVertical\");\n    var d =  e.n(s);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Dropdown\"\n    const f = require(\"@splunk/react-ui/Dropdown\");\n    var v =  e.n(f);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Popover\"\n    const b = require(\"@splunk/react-ui/Popover\");\n    var p =  e.n(b);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/ScreenReaderContent\"\n    const m = require(\"@splunk/react-ui/ScreenReaderContent\");\n    var g =  e.n(m);\n    // CONCATENATED MODULE: external \"@splunk/ui-utils/i18n\"\n    const y = require(\"@splunk/ui-utils/i18n\");\n    // CONCATENATED MODULE: external \"@splunk/ui-utils/id\"\n    const h = require(\"@splunk/ui-utils/id\");\n    // CONCATENATED MODULE: ./src/TabBar/TabBarContext.tsx\n    var S = function e() {\n        return undefined;\n    };\n    var w =  (0, n.createContext)({\n        isMenuOpen: false,\n        onMenuOpen: S,\n        onMenuClose: S,\n        registerTab: S\n    });\n    w.displayName = \"TabBar\";\n    /* harmony default export */    const C = w;\n    // CONCATENATED MODULE: external \"styled-components\"\n    const O = require(\"styled-components\");\n    var x =  e.n(O);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Clickable\"\n    const I = require(\"@splunk/react-ui/Clickable\");\n    var k =  e.n(I);\n    // CONCATENATED MODULE: external \"@splunk/themes\"\n    const T = require(\"@splunk/themes\");\n    // CONCATENATED MODULE: ./src/TabBar/TabStyles.ts\n    var j = (0, O.css)([ \"color:\", \";\" ], T.variables.contentColorActive);\n    var P = \"2px\";\n    var E = (0, T.pickVariant)(\"$layout\", {\n        horizontal: (0, O.css)([ \"background:\", \";height:\", \";\" ], T.variables.contentColorAccentWeak, P),\n        vertical: (0, O.css)([ \"background:\", \";width:\", \";\" ], T.variables.contentColorAccentWeak, P)\n    });\n    var M = function e(t) {\n        var n = t.$hasIcon, r = t.$hasMenu, a = t.$iconPosition;\n        if (a === \"above\" && n && r) {\n            return (0, O.css)([ \"grid-template-areas:'icon icon icon' 'menu-counter-neg-space label menu' 'gutter gutter gutter' 'underline underline underline';grid-template-columns:\", \" 1fr min-content;grid-template-rows:repeat(2,auto) \", \" auto;\" ], T.variables.spacingXSmall, T.variables.spacingXSmall);\n        }\n        if (a === \"above\" && n) {\n            return (0, O.css)([ \"grid-template-areas:'icon' 'label' 'gutter' 'underline';grid-template-columns:1fr;grid-template-rows:repeat(2,auto) \", \" auto;\" ], T.variables.spacingXSmall);\n        }\n        if (a === \"left\" && n && r) {\n            return (0, O.css)([ \"grid-template-areas:'menu-counter-neg-space icon label menu' 'underline underline underline underline';grid-template-columns:\", \" min-content 1fr min-content;\" ], T.variables.spacingXSmall);\n        }\n        if (a === \"left\" && n) {\n            return (0, O.css)([ \"grid-template-areas:'icon label' 'underline underline';grid-template-columns:min-content 1fr;\" ]);\n        }\n        if (r) {\n            return (0, O.css)([ \"grid-template-areas:'menu-counter-neg-space label menu' 'underline underline underline';grid-template-columns:\", \" minmax(auto,min-content) min-content;\" ], T.variables.spacingXSmall);\n        }\n        return (0, O.css)([ \"grid-template-areas:'label' 'underline';grid-template-columns:minmax(auto,min-content);\" ]);\n    };\n    var $ = function e(t) {\n        var n = t.$hasIcon, r = t.$iconPosition;\n        if (r === \"above\" && n) {\n            return (0, O.css)([ \"grid-template-areas:'icon gutter underline' 'label gutter underline';grid-template-columns:1fr \", \" \", \";\" ], T.variables.spacingXSmall, P);\n        }\n        if (r === \"left\" && n) {\n            return (0, O.css)([ \"grid-template-areas:'icon label gutter underline';grid-template-columns:min-content 1fr \", \" \", \";\" ], T.variables.spacingXSmall, P);\n        }\n        return (0, O.css)([ \"grid-template-areas:'label gutter underline';grid-template-columns:1fr \", \" \", \";\" ], T.variables.spacingXSmall, P);\n    };\n    var A = x()(k()).withConfig({\n        displayName: \"TabStyles__StyledClickable\",\n        componentId: \"sc-1ry8mzj-0\"\n    })([ \"color:\", \";column-gap:\", \";display:grid;justify-content:center;align-items:baseline;min-height:\", \";position:relative;\", \" \", \" \", \";&[aria-selected='true']{cursor:default;color:\", \";font-weight:\", \";}&[aria-selected='false']{box-shadow:none;font-weight:\", \";&:hover:not([disabled]){\", \"}&[aria-haspopup='true']{\", \"}}&:focus{box-shadow:\", \";color:\", \";}\" ], T.variables.contentColorDefault, T.variables.spacingXSmall, T.variables.inputHeight, (function(e) {\n        var t = e.$maxTabWidth;\n        return t && (0, O.css)([ \"max-width:\", \"px;\" ], t);\n    }), (function(e) {\n        var t = e.$hasIcon, n = e.$hasMenu, r = e.$iconPosition, a = e.$layout;\n        if (a === \"vertical\") {\n            return $({\n                $hasIcon: t,\n                $iconPosition: r\n            });\n        }\n        return M({\n            $hasIcon: t,\n            $hasMenu: n,\n            $iconPosition: r\n        });\n    }), (0, T.pickVariant)(\"$layout\", {\n        horizontal: (0, O.css)([ \"margin-bottom:1px;\" ]),\n        vertical: (0, O.css)([ \"align-items:center;right:1px;\" ])\n    }), T.variables.contentColorActive, T.variables.fontWeightBold, T.variables.fontWeightSemiBold, j, j, T.variables.focusShadow, T.variables.contentColorActive);\n    var z = x().div.withConfig({\n        displayName: \"TabStyles__StyledUnderline\",\n        componentId: \"sc-1ry8mzj-1\"\n    })([ \"grid-area:underline;position:absolute;\", \";[aria-selected='true'] > &&{background-color:\", \";\", \";}\", \":hover:not([disabled]):not([aria-selected='true']) > &&{\", \";}[aria-selected='false'][aria-haspopup='true'] > &&{\", \"}\" ], (0, \n    T.pickVariant)(\"$layout\", {\n        horizontal: (0, O.css)([ \"bottom:-1px;height:0;width:100%;transition:height 0.2s;\" ]),\n        vertical: (0, O.css)([ \"width:1px;height:100%;right:-1px;transition:width 0.2s;\" ])\n    }), T.variables.contentColorAccent, (0, T.pickVariant)(\"$layout\", {\n        horizontal: (0, O.css)([ \"height:\", \";\" ], P),\n        vertical: (0, O.css)([ \"width:\", \";\" ], P)\n    }), /* sc-sel */ A, E, E);\n    var _ = x().span.withConfig({\n        displayName: \"TabStyles__StyledMenu\",\n        componentId: \"sc-1ry8mzj-2\"\n    })([ \"display:inline-block;grid-area:menu;margin-left:4px;> svg{transform:translateY(-1px);}border-radius:\", \";cursor:pointer;\", \" &:hover{background-color:\", \";border-color:\", \";}\", \"[aria-haspopup='true'] &,\", \":hover &,\", \":focus &{visibility:visible;}\" ], T.variables.borderRadius, (0, \n    T.pickVariant)(\"$active\", {\n        false: (0, O.css)([ \"visibility:hidden;\" ])\n    }), T.variables.interactiveColorOverlayHover, T.variables.interactiveColorBorderHover, /* sc-sel */ A, /* sc-sel */ A, /* sc-sel */ A);\n    var D = x().span.withConfig({\n        displayName: \"TabStyles__StyledIcon\",\n        componentId: \"sc-1ry8mzj-3\"\n    })([ \"grid-area:icon;\", \"\" ], (0, T.pickVariant)(\"$iconPosition\", {\n        above: (0, O.css)([ \"display:flex;justify-content:center;\" ]),\n        left: (0, O.css)([ \"> svg{transform:translateY(-1px);}\" ])\n    }));\n    var N = x().div.withConfig({\n        displayName: \"TabStyles__StyledContent\",\n        componentId: \"sc-1ry8mzj-4\"\n    })([ \"display:inline-flex;align-items:baseline;grid-area:label;min-width:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;\", \"\" ], (function(e) {\n        var t = e.$iconPosition;\n        return t === \"above\" && (0, O.css)([ \"justify-content:center;text-align:center;\" ]);\n    }));\n    var R = x().div.withConfig({\n        displayName: \"TabStyles__StyledLabel\",\n        componentId: \"sc-1ry8mzj-5\"\n    })([ \"&::after{display:block;content:attr(data-title);font-weight:\", \";height:0;color:transparent;overflow:hidden;visibility:hidden;white-space:nowrap;}\" ], T.variables.fontWeightBold);\n    var q = x().span.withConfig({\n        displayName: \"TabStyles__StyledCount\",\n        componentId: \"sc-1ry8mzj-6\"\n    })([ \"background:\", \";border-radius:18px;color:\", \";display:inline-block;font-size:\", \";line-height:10px;margin-inline-start:0.3em;padding:0.4em 0.6em;&[disabled]{color:\", \";}\" ], T.variables.neutral100, T.variables.contentColorDefault, T.variables.fontSizeSmall, T.variables.contentColorDisabled);\n    var V = x().div.withConfig({\n        displayName: \"TabStyles__StyledTooltipContent\",\n        componentId: \"sc-1ry8mzj-7\"\n    })([ \"padding:8px;font-size:\", \";\" ], T.variables.fontSizeSmall);\n    // CONCATENATED MODULE: ./src/utils/getCountValue.ts\n    // A utility for max count\n    var W = function e(t, n) {\n        if (t > n) {\n            return \"\".concat(n, \"+\");\n        }\n        return t;\n    };\n    // CONCATENATED MODULE: ./src/utils/updateReactRef.ts\n    /**\n * Updates a React ref. Callback refs and object refs (from `createRef` and `useRef`) are supported.\n *\n * @param ref - The React callback or object ref. Can be `null` or `undefined`.\n * @param current - The new value of the ref.\n */\n    function X(e, t) {\n        if (e) {\n            if (typeof e === \"function\") {\n                e(t);\n            } else {\n                // the public signature of this util uses React.Ref<T> to mirror the way React types refs.\n                // the intention here is to signal \"we will take care of setting 'current', not you\".\n                e.current = t;\n // eslint-disable-line no-param-reassign\n                        }\n        }\n    }\n    // CONCATENATED MODULE: ./src/TabBar/Tab.tsx\n    function B() {\n        return B = Object.assign ? Object.assign.bind() : function(e) {\n            for (var t = 1; t < arguments.length; t++) {\n                var n = arguments[t];\n                for (var r in n) {\n                    ({}).hasOwnProperty.call(n, r) && (e[r] = n[r]);\n                }\n            }\n            return e;\n        }, B.apply(null, arguments);\n    }\n    function F(e, t) {\n        return Y(e) || K(e, t) || H(e, t) || L();\n    }\n    function L() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    function H(e, t) {\n        if (e) {\n            if (\"string\" == typeof e) return U(e, t);\n            var n = {}.toString.call(e).slice(8, -1);\n            return \"Object\" === n && e.constructor && (n = e.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(e) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? U(e, t) : void 0;\n        }\n    }\n    function U(e, t) {\n        (null == t || t > e.length) && (t = e.length);\n        for (var n = 0, r = Array(t); n < t; n++) {\n            r[n] = e[n];\n        }\n        return r;\n    }\n    function K(e, t) {\n        var n = null == e ? null : \"undefined\" != typeof Symbol && e[Symbol.iterator] || e[\"@@iterator\"];\n        if (null != n) {\n            var r, a, i, o, l = [], u = !0, c = !1;\n            try {\n                if (i = (n = n.call(e)).next, 0 === t) {\n                    if (Object(n) !== n) return;\n                    u = !1;\n                } else for (;!(u = (r = i.call(n)).done) && (l.push(r.value), l.length !== t); u = !0) {\n                }\n            } catch (e) {\n                c = !0, a = e;\n            } finally {\n                try {\n                    if (!u && null != n[\"return\"] && (o = n[\"return\"](), Object(o) !== o)) return;\n                } finally {\n                    if (c) throw a;\n                }\n            }\n            return l;\n        }\n    }\n    function Y(e) {\n        if (Array.isArray(e)) return e;\n    }\n    function G(e, t) {\n        if (null == e) return {};\n        var n, r, a = J(e, t);\n        if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n            for (r = 0; r < i.length; r++) {\n                n = i[r], -1 === t.indexOf(n) && {}.propertyIsEnumerable.call(e, n) && (a[n] = e[n]);\n            }\n        }\n        return a;\n    }\n    function J(e, t) {\n        if (null == e) return {};\n        var n = {};\n        for (var r in e) {\n            if ({}.hasOwnProperty.call(e, r)) {\n                if (-1 !== t.indexOf(r)) continue;\n                n[r] = e[r];\n            }\n        }\n        return n;\n    }\n    var Q = {\n        ariaControls: i().string,\n        count: i().number,\n        disabled: i().bool,\n        elementRef: i().oneOfType([ i().func, i().object ]),\n        icon: i().node,\n        id: i().string,\n        label: i().oneOfType([ i().string, i().element ]),\n        /** @private Maximum count number in tab label */\n        maxCount: i().number,\n        tabId: i().string,\n        to: i().string,\n        tooltip: i().node,\n        /**\n   * @private\n   * Accepts a Menu component that is rendered for that Tab.\n   * Is not compatible with `count`.\n   * The `menu` prop is only supported in horizontal layout due to both design constraints as well as keyboard support.\n   */\n        menu: i().node,\n        /**\n   * @private\n   * Internal prop injected by TabBar to track order.\n   */\n        index: i().number\n    };\n    var Z = {\n        tension: 400\n    };\n    var ee = [ \"offScreen\", \"escapeKey\" ];\n    var te = function e(t) {\n        var a = t.ariaControls, i = t.count, o = t.disabled, l = t.elementRef, u = t.icon, s = t.label, f = t.maxCount, b = t.tabId, m = t.to, S = t.tooltip, w = t.menu, O = t.index, x = G(t, [ \"ariaControls\", \"count\", \"disabled\", \"elementRef\", \"icon\", \"label\", \"maxCount\", \"tabId\", \"to\", \"tooltip\", \"menu\", \"index\" ]);\n        // @docs-props-type TabPropsBase\n                var I = (0, n.useState)(false), k = F(I, 2), T = k[0], j = k[1];\n        var P = (0, n.useState)(null), E = F(P, 2), M = E[0], $ = E[1];\n        var L = (0, n.useContext)(C), H = L.activeTabId, U = L.disabled, K = L.focusedTabId, Y = L.iconPosition, J = Y === void 0 ? \"above\" : Y, Q = L.isMenuOpen, te = L.layout, ne = te === void 0 ? \"horizontal\" : te, re = L.maxTabWidth, ae = L.onClick, ie = L.onFocus, oe = L.onMenuOpen, le = L.onMenuClose, ue = L.registerTab;\n        var ce = (0, n.useState)((0, h.createDOMID)(\"aria-id\")), se = F(ce, 1), de = se[0];\n        var fe = (0, n.useState)((0, h.createDOMID)(\"menu-description\")), ve = F(fe, 1), be = ve[0];\n        var pe = (0, n.useState)((0, h.createDOMID)(\"popover\")), me = F(pe, 1), ge = me[0];\n        var ye = (0, n.useMemo)((function() {\n            return b || (0, h.createGUID)();\n        }), [ b ]);\n        var he = U || o ? \"disabled\" : false;\n        var Se = s ? s.toString() : \"\";\n        var we = H === ye;\n        // title is used for CSS styling in TabStyles. labelValue and countValue needs to be included in the title.\n                var Ce = (0, n.useMemo)((function() {\n            // SUI-6877: if the label isn't a string, don't attempt to do this since it'll just be wrong\n            return s && typeof s === \"string\" ? Se : \"\";\n        }), [ s, Se ]);\n        var Oe = (0, n.useCallback)((function() {\n            M === null || M === void 0 ? void 0 : M.focus();\n        }), [ M ]);\n        var xe = (0, n.useCallback)((function(e) {\n            $(e);\n            X(l, e);\n            // Register with index, assert index is defined as it's injected by TabBar\n                        ue({\n                tabId: ye,\n                element: e,\n                index: O\n            });\n        }), [ l, ue, ye, O ]);\n        var Ie = (0, n.useCallback)((function() {\n            j(true);\n        }), []);\n        var ke = (0, n.useCallback)((function() {\n            j(false);\n        }), []);\n        var Te = (0, n.useCallback)((function(e) {\n            // preserve the previous behaviour from 2ad8e7eaf47 to avoid firing unnecessary onChange events\n            // while preventing the \"to\" prop from incorrectly triggering <Clickable>'s providedOnClick on the active tab\n            if (!we) {\n                ae === null || ae === void 0 ? void 0 : ae(e, {\n                    tabId: ye\n                });\n            }\n            if (m == null || m != null && we) {\n                e.preventDefault();\n            }\n        }), [ we, ae, ye, m ]);\n        var je = (0, n.useCallback)((function(e) {\n            Ie();\n            ie === null || ie === void 0 ? void 0 : ie(e, {\n                tabId: ye\n            });\n        }), [ Ie, ie, ye ]);\n        var Pe = (0, n.useCallback)((function() {\n            Oe();\n        }), [ Oe ]);\n        var Ee = (0, n.useCallback)((function() {\n            ke();\n        }), [ ke ]);\n        var Me = (0, n.useCallback)((function(e) {\n            // prevent clicking on the menu icon from changing the active tab\n            e.stopPropagation();\n            oe(ye);\n        }), [ oe, ye ]);\n        var $e = K === ye && Q && !!w;\n        var Ae =  r().createElement(_, {\n            $active: we,\n            \"data-test\": \"menu-toggle\",\n            tabIndex: -1,\n            onFocus: Pe\n        },  r().createElement(d(), null));\n        var ze = function e(t) {\n            \n            return r().createElement(r().Fragment, null, t,  r().createElement(v(), {\n                toggle: Ae,\n                align: \"center\",\n                onRequestOpen: Me,\n                onRequestClose: le,\n                open: $e\n            }, w));\n        };\n        var _e = x[\"data-title\"];\n        var De =  r().createElement(N, {\n            \"data-test\": \"label\",\n            $iconPosition: J\n        },  r().createElement(R, {\n            \"data-title\": _e || Ce\n        }, s), !w && (i === 0 || i) &&  r().createElement(r().Fragment, null,  r().createElement(g(), null, \"\"),  r().createElement(q, {\n            \"data-test\": \"count\",\n            disabled: !!he\n        }, f ? W(i, f) : i)), !!w &&  r().createElement(g(), {\n            \"aria-hidden\": true,\n            id: be\n        }, (0, y._)(\"Press Shift + F10 to open the tabs menu\")));\n        \n        // TODO: Fix the ts error: https://splunk.atlassian.net/browse/SUI-5569\n        // eslint-disable-next-line\n        // @ts-ignore-next-line\n        return r().createElement(A, B({\n            $hasIcon: !!u,\n            $hasMenu: !!w,\n            $iconPosition: J,\n            $layout: ne,\n            $maxTabWidth: re,\n            \"aria-controls\": a,\n            \"aria-selected\": we,\n            \"aria-labelledby\": de,\n            \"aria-describedby\": w ? be : undefined,\n            \"aria-haspopup\": $e,\n            \"data-test\": \"tab\",\n            \"data-test-tab-id\": ye,\n            \"data-test-popover-id\": S ? ge : undefined,\n            \"data-test-disabled\": he || undefined,\n            disabled: he,\n            elementRef: xe,\n            onClick: Te,\n            onFocus: je,\n            onMouseEnter: Ie,\n            onBlur: Ee,\n            onMouseLeave: ke,\n            role: \"tab\",\n            tabIndex: we ? undefined : -1,\n            to: m\n        }, c()(x, \"elementRef\")), u &&  r().createElement(D, {\n            $iconPosition: J\n        }, u), w && ne === \"horizontal\" ? ze(De) : De,  r().createElement(z, {\n            $layout: ne\n        }), !o && S &&  r().createElement(p(), {\n            role: \"tooltip\",\n            anchor: M,\n            animationConfig: Z,\n            closeReasons: ee,\n            defaultPlacement: ne === \"vertical\" ? \"right\" : \"above\",\n            id: ge,\n            open: !!M && T,\n            align: \"center\"\n        },  r().createElement(V, null, S)), S &&  r().createElement(g(), {\n            \"aria-hidden\": \"true\",\n            id: de\n        }, S));\n    };\n    te.propTypes = Q;\n    te.as = \"Tab\";\n    /* harmony default export */    const ne = te;\n    // CONCATENATED MODULE: ./src/TabBar/TabBarStyles.ts\n    var re = x().div.withConfig({\n        displayName: \"TabBarStyles__Styled\",\n        componentId: \"sc-1t85fen-0\"\n    })([ \"\", \" position:relative;&::before{content:'';display:block;position:absolute;left:0;top:0;right:0;bottom:0;border:0 solid \", \";}\", \";\" ], T.mixins.reset(\"flex\"), T.variables.neutral300, (0, \n    T.pickVariant)(\"$layout\", {\n        horizontal: (0, O.css)([ \"column-gap:\", \";&::before{border-bottom-width:1px;}\" ], T.variables.spacingXLarge),\n        vertical: (0, O.css)([ \"display:inline-flex;flex-direction:column;row-gap:\", \";&::before{border-right-width:1px;}\" ], T.variables.spacingXLarge)\n    }));\n    // CONCATENATED MODULE: ./src/TabBar/tabBarUtils.tsx\n    // A utility for keyboard navigation for TabBar\n    function ae(e, t, n) {\n        for (var r = 0; r < e.length; r += 1) {\n            var a = (r + n) % e.length;\n            var i = e[a].element;\n            if (i instanceof HTMLButtonElement && i.disabled !== true) {\n                return e[a];\n            }\n        }\n        return e[t];\n    }\n    function ie(e, t, n) {\n        for (var r = e.length; r > 0; r -= 1) {\n            var a = (r + n) % e.length;\n            var i = e[a].element;\n            if (i instanceof HTMLButtonElement && i.disabled !== true) {\n                return e[a];\n            }\n        }\n        return e[t];\n    }\n    // CONCATENATED MODULE: ./src/utils/useDeprecate.tsx\n    var oe = \"is deprecated and will be removed in the next major version.\";\n    var le = function e(t) {\n        var n = t.additionalMessage, r = n === void 0 ? \"\" : n, a = t.componentName;\n        useEffect((function() {\n            if (false) {}\n        }), [ r, a ]);\n    };\n    var ue = function e(t) {\n        var r = t.additionalMessage, a = r === void 0 ? \"\" : r, i = t.componentName, o = t.propName, l = t.propValue;\n        (0, n.useEffect)((function() {\n            if (false) {}\n        }), [ a, i, o, l ]);\n    };\n    var ce = function e(t) {\n        var n = t.additionalMessage, r = n === void 0 ? \"\" : n, a = t.componentName, i = t.deprecatedPropValue, o = t.propName, l = t.propValue;\n        useEffect((function() {\n            if (false) {}\n        }), [ r, a, o, l, i ]);\n    };\n    // CONCATENATED MODULE: ./src/TabBar/TabBar.tsx\n    function se(e) {\n        \"@babel/helpers - typeof\";\n        return se = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(e) {\n            return typeof e;\n        } : function(e) {\n            return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n        }, se(e);\n    }\n    function de() {\n        return de = Object.assign ? Object.assign.bind() : function(e) {\n            for (var t = 1; t < arguments.length; t++) {\n                var n = arguments[t];\n                for (var r in n) {\n                    ({}).hasOwnProperty.call(n, r) && (e[r] = n[r]);\n                }\n            }\n            return e;\n        }, de.apply(null, arguments);\n    }\n    function fe(e, t) {\n        if (null == e) return {};\n        var n, r, a = ve(e, t);\n        if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n            for (r = 0; r < i.length; r++) {\n                n = i[r], -1 === t.indexOf(n) && {}.propertyIsEnumerable.call(e, n) && (a[n] = e[n]);\n            }\n        }\n        return a;\n    }\n    function ve(e, t) {\n        if (null == e) return {};\n        var n = {};\n        for (var r in e) {\n            if ({}.hasOwnProperty.call(e, r)) {\n                if (-1 !== t.indexOf(r)) continue;\n                n[r] = e[r];\n            }\n        }\n        return n;\n    }\n    function be(e, t) {\n        var n = Object.keys(e);\n        if (Object.getOwnPropertySymbols) {\n            var r = Object.getOwnPropertySymbols(e);\n            t && (r = r.filter((function(t) {\n                return Object.getOwnPropertyDescriptor(e, t).enumerable;\n            }))), n.push.apply(n, r);\n        }\n        return n;\n    }\n    function pe(e) {\n        for (var t = 1; t < arguments.length; t++) {\n            var n = null != arguments[t] ? arguments[t] : {};\n            t % 2 ? be(Object(n), !0).forEach((function(t) {\n                me(e, t, n[t]);\n            })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : be(Object(n)).forEach((function(t) {\n                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n            }));\n        }\n        return e;\n    }\n    function me(e, t, n) {\n        return (t = ge(t)) in e ? Object.defineProperty(e, t, {\n            value: n,\n            enumerable: !0,\n            configurable: !0,\n            writable: !0\n        }) : e[t] = n, e;\n    }\n    function ge(e) {\n        var t = ye(e, \"string\");\n        return \"symbol\" == se(t) ? t : t + \"\";\n    }\n    function ye(e, t) {\n        if (\"object\" != se(e) || !e) return e;\n        var n = e[Symbol.toPrimitive];\n        if (void 0 !== n) {\n            var r = n.call(e, t || \"default\");\n            if (\"object\" != se(r)) return r;\n            throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n        }\n        return (\"string\" === t ? String : Number)(e);\n    }\n    function he(e, t) {\n        return xe(e) || Oe(e, t) || we(e, t) || Se();\n    }\n    function Se() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    function we(e, t) {\n        if (e) {\n            if (\"string\" == typeof e) return Ce(e, t);\n            var n = {}.toString.call(e).slice(8, -1);\n            return \"Object\" === n && e.constructor && (n = e.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(e) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Ce(e, t) : void 0;\n        }\n    }\n    function Ce(e, t) {\n        (null == t || t > e.length) && (t = e.length);\n        for (var n = 0, r = Array(t); n < t; n++) {\n            r[n] = e[n];\n        }\n        return r;\n    }\n    function Oe(e, t) {\n        var n = null == e ? null : \"undefined\" != typeof Symbol && e[Symbol.iterator] || e[\"@@iterator\"];\n        if (null != n) {\n            var r, a, i, o, l = [], u = !0, c = !1;\n            try {\n                if (i = (n = n.call(e)).next, 0 === t) {\n                    if (Object(n) !== n) return;\n                    u = !1;\n                } else for (;!(u = (r = i.call(n)).done) && (l.push(r.value), l.length !== t); u = !0) {\n                }\n            } catch (e) {\n                c = !0, a = e;\n            } finally {\n                try {\n                    if (!u && null != n[\"return\"] && (o = n[\"return\"](), Object(o) !== o)) return;\n                } finally {\n                    if (c) throw a;\n                }\n            }\n            return l;\n        }\n    }\n    function xe(e) {\n        if (Array.isArray(e)) return e;\n    }\n    /** @public */\n    /** @public */    var Ie = {\n        autoActivate: i().bool,\n        activeTabId: i().string,\n        children: i().node,\n        /** @private */\n        disabled: i().bool,\n        elementRef: i().oneOfType([ i().func, i().object ]),\n        iconPosition: i().oneOf([ \"above\", \"left\" ]),\n        layout: i().oneOf([ \"horizontal\", \"vertical\" ]),\n        maxTabWidth: i().number,\n        onChange: i().func\n    };\n    var ke = function e(t) {\n        return Array.from(t.entries()).sort((function(e, t) {\n            var n = he(e, 2), r = n[1].index;\n            var a = he(t, 2), i = a[1].index;\n            return r - i;\n        })).map((function(e) {\n            var t = he(e, 2), n = t[0], r = t[1];\n            return pe({\n                tabId: n\n            }, r);\n        }));\n    };\n    function Te(e) {\n        var t;\n        var a = e.activeTabId, i = e.autoActivate, o = e.children, u = e.disabled, c = u === void 0 ? false : u, s = e.elementRef, d = e.iconPosition, f = d === void 0 ? \"left\" : d, v = e.layout, b = v === void 0 ? \"horizontal\" : v, p = e.maxTabWidth, m = e.onChange, g = fe(e, [ \"activeTabId\", \"autoActivate\", \"children\", \"disabled\", \"elementRef\", \"iconPosition\", \"layout\", \"maxTabWidth\", \"onChange\" ]);\n        // @docs-props-type TabBarPropsBase\n        // eslint-disable-next-line prefer-rest-params\n                var y = (t = arguments[0]) === null || t === void 0 ? void 0 : t.iconPosition;\n        ue({\n            componentName: \"TabBar and TabLayout\",\n            propName: \"iconPosition\",\n            propValue: y\n        });\n        var h = (0, n.useState)(false), S = he(h, 2), w = S[0], O = S[1];\n        var x = (0, n.useState)(a), I = he(x, 2), k = I[0], T = I[1];\n // need to keep track of the focused tabId in a ref to avoid re-generating registerTab\n        // because every time `registerTab` changes, it calls `ref` on all tabs\n                var j = (0, n.useRef)(a);\n        j.current = k;\n        // If the tab that was focused is removed, we need to keep track of what index it was last at\n                var P = (0, n.useRef)();\n        var E = (0, n.useRef)(null);\n        // map of tabId to tab element and index\n                var M = (0, n.useRef)();\n        if (!M.current) {\n            M.current = new Map;\n        }\n        var $ = b === \"vertical\" ? \"ArrowDown\" : \"ArrowRight\";\n        var A = b === \"vertical\" ? \"ArrowUp\" : \"ArrowLeft\";\n        // focus the tab belonging to the given tabId\n                var z = (0, n.useCallback)((function(e) {\n            var t;\n            if (!e) {\n                return;\n            }\n            var n = (t = M.current) === null || t === void 0 ? void 0 : t.get(e);\n            if (!n) {\n                var r = ke(M.current);\n                var a = r[0];\n                if (a) {\n                    var i;\n                    T(e);\n                    (i = a.element) === null || i === void 0 ? void 0 : i.focus();\n                }\n                return;\n            }\n            T(e);\n            n.element.focus();\n        }), []);\n        var _ = (0, n.useCallback)((function(e) {\n            var t = e.tabId, n = e.element, r = e.index;\n            if (n) {\n                var a;\n                (a = M.current) === null || a === void 0 ? void 0 : a.set(t, {\n                    element: n,\n                    index: r\n                });\n            } else {\n                var i;\n                (i = M.current) === null || i === void 0 ? void 0 : i[\"delete\"](t);\n                // if the tab being removed is the focused tab, keep track of its last known index\n                                if (j.current === t) {\n                    P.current = r;\n                }\n            }\n        }), []);\n        var D = (0, n.useCallback)((function(e) {\n            E.current = e;\n            X(s, e);\n        }), [ s, E ]);\n        // callback to handle focus event sent from a Tab\n                var N = (0, n.useCallback)((function(e, t) {\n            var n = t.tabId;\n            if (document.activeElement === e.target && k === n) {\n                // tab already focused, no need to continue\n                return;\n            }\n            z(n);\n            if (i && a !== n) {\n                m === null || m === void 0 ? void 0 : m(e, {\n                    selectedTabId: n\n                });\n            }\n        }), [ a, i, k, z, m ]);\n        var R = (0, n.useCallback)((function(e, t) {\n            var n = t.tabId;\n            z(n);\n            m === null || m === void 0 ? void 0 : m(e, {\n                selectedTabId: n\n            });\n        }), [ z, m ]);\n        var q = (0, n.useCallback)((function(e) {\n            // if command key on Mac was pressed ignore\n            if (e.nativeEvent.metaKey) {\n                return;\n            }\n            var t = ke(M.current);\n            var n = k ? t.findIndex((function(e) {\n                return e.tabId === k;\n            })) : -1;\n            var r = t.map((function(e) {\n                return e.element;\n            }));\n            var a = n === -1 ? 0 : n;\n            var i = e.key;\n            var o;\n            if (i === $) {\n                o = ae(t, a, a + 1);\n            } else if (i === A) {\n                o = ie(t, a, a - 1);\n            } else if (i === \"Home\") {\n                o = ae(t, a, 0);\n            } else if (i === \"End\") {\n                o = ie(t, a, r.length - 1);\n            } else if (b === \"horizontal\" && e.shiftKey && i === \"F10\") {\n                O((function(e) {\n                    if (e) {\n                        var t = r[a];\n                        t === null || t === void 0 ? void 0 : t.focus();\n                    }\n                    return !e;\n                }));\n            } else if (b === \"horizontal\" && i === \"ArrowDown\") {\n                O(true);\n            }\n            if (o) {\n                z(o.tabId);\n                e.preventDefault();\n            }\n        }), [ k, z, b, $, A ]);\n        var V = (0, n.useCallback)((function(e) {\n            z(e);\n // in case they clicked on a menu of tab they were not even focused on yet\n                        O(true);\n        }), [ z ]);\n        var W = (0, n.useCallback)((function(e) {\n            var t = e.event;\n            // prevent content clicks/enter key from changing the active tab\n                        t === null || t === void 0 ? void 0 : t.stopPropagation();\n            O(false);\n        }), []);\n        var B = (0, n.useMemo)((function() {\n            return {\n                disabled: c,\n                focusedTabId: k,\n                iconPosition: f,\n                layout: b,\n                maxTabWidth: p,\n                onClick: R,\n                onFocus: N,\n                onMenuOpen: V,\n                onMenuClose: W,\n                isMenuOpen: w,\n                registerTab: _,\n                activeTabId: a\n            };\n        }), [ c, k, f, b, R, N, p, V, W, w, _, a ]);\n        var F = (0, n.useMemo)((function() {\n            return n.Children.toArray(o).filter(n.isValidElement).map((function(e, t) {\n                if (e.type.as === \"Tab\") {\n                    \n                    return (0, n.cloneElement)(e, {\n                        index: t\n                    });\n                }\n                return e;\n            }));\n        }), [ o ]);\n        var L = l()(F);\n        (0, n.useEffect)((function() {\n            // if the focused tab is removed, focus the next tab\n            if (L !== F) {\n                var e;\n                var t = ke(M.current);\n                if (t.find((function(e) {\n                    return e.tabId === j.current;\n                }))) {\n                    // focused tab is still present\n                    return;\n                }\n                var n = Math.min((e = P.current) !== null && e !== void 0 ? e : 0, t.length - 1);\n                var r = t[n];\n                if (r) {\n                    z(r.tabId);\n                }\n            }\n        }), [ F, z, L ]);\n        \n        return r().createElement(re, de({\n            \"data-tab-layout\": b,\n            \"data-test-active-tab-id\": a,\n            \"data-test\": \"tab-bar\",\n            role: \"tablist\",\n            ref: D,\n            $layout: b,\n            onKeyDown: q\n        }, g),  r().createElement(C.Provider, {\n            value: B\n        }, F));\n    }\n    Te.propTypes = Ie;\n    Te.Tab = ne;\n    /* harmony default export */    const je = Te;\n    // CONCATENATED MODULE: ./src/TabBar/index.ts\n    module.exports = t;\n    /******/})();", "/******/ (() => {\n    // webpackBootstrap\n    /******/ \"use strict\";\n    /******/ // The require scope\n    /******/    var e = {};\n    /******/\n    /************************************************************************/\n    /******/ /* webpack/runtime/compat get default export */\n    /******/    (() => {\n        /******/ // getDefaultExport function for compatibility with non-harmony modules\n        /******/ e.n = r => {\n            /******/ var t = r && r.__esModule ? \n            /******/ () => r[\"default\"]\n            /******/ : () => r\n            /******/;\n            e.d(t, {\n                a: t\n            });\n            /******/            return t;\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/define property getters */\n    /******/    (() => {\n        /******/ // define getter functions for harmony exports\n        /******/ e.d = (r, t) => {\n            /******/ for (var n in t) {\n                /******/ if (e.o(t, n) && !e.o(r, n)) {\n                    /******/ Object.defineProperty(r, n, {\n                        enumerable: true,\n                        get: t[n]\n                    });\n                    /******/                }\n                /******/            }\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/hasOwnProperty shorthand */\n    /******/    (() => {\n        /******/ e.o = (e, r) => Object.prototype.hasOwnProperty.call(e, r)\n        /******/;\n    })();\n    /******/\n    /******/ /* webpack/runtime/make namespace object */\n    /******/    (() => {\n        /******/ // define __esModule on exports\n        /******/ e.r = e => {\n            /******/ if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n                /******/ Object.defineProperty(e, Symbol.toStringTag, {\n                    value: \"Module\"\n                });\n                /******/            }\n            /******/            Object.defineProperty(e, \"__esModule\", {\n                value: true\n            });\n            /******/        };\n        /******/    })();\n    /******/\n    /************************************************************************/    var r = {};\n    // ESM COMPAT FLAG\n        e.r(r);\n    // EXPORTS\n        e.d(r, {\n        default: () => /* binding */ s\n    });\n    // CONCATENATED MODULE: external \"react\"\n    const t = require(\"react\");\n    var n =  e.n(t);\n    // CONCATENATED MODULE: external \"@splunk/react-icons/IconProvider\"\n    const l = require(\"@splunk/react-icons/IconProvider\");\n    // CONCATENATED MODULE: external \"@splunk/react-icons/SVG\"\n    const a = require(\"@splunk/react-icons/SVG\");\n    var o =  e.n(a);\n    // CONCATENATED MODULE: ./src/icons/PlusCircle.tsx\n    function u(e, r) {\n        if (null == e) return {};\n        var t, n, l = i(e, r);\n        if (Object.getOwnPropertySymbols) {\n            var a = Object.getOwnPropertySymbols(e);\n            for (n = 0; n < a.length; n++) {\n                t = a[n], -1 === r.indexOf(t) && {}.propertyIsEnumerable.call(e, t) && (l[t] = e[t]);\n            }\n        }\n        return l;\n    }\n    function i(e, r) {\n        if (null == e) return {};\n        var t = {};\n        for (var n in e) {\n            if ({}.hasOwnProperty.call(e, n)) {\n                if (-1 !== r.indexOf(n)) continue;\n                t[n] = e[n];\n            }\n        }\n        return t;\n    }\n    // This file is auto-generated.\n    // Do not edit this file manually. Changes will be lost upon regeneration.\n    // To modify the icon file template, update 'scripts/templates.ts'.\n        var c = new Map;\n    c.set(\"outlined\", (function() {\n        \n        return n().createElement(n().Fragment, null,  n().createElement(\"path\", {\n            d: \"M12 7.00427C12.5523 7.00427 13 7.45199 13 8.00427V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8.00427C11 7.45199 11.4477 7.00427 12 7.00427Z\"\n        }),  n().createElement(\"path\", {\n            fillRule: \"evenodd\",\n            clipRule: \"evenodd\",\n            d: \"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z\"\n        }));\n    }));\n    c.set(\"filled\", (function() {\n        \n        return n().createElement(n().Fragment, null,  n().createElement(\"path\", {\n            fillRule: \"evenodd\",\n            clipRule: \"evenodd\",\n            d: \"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM13 8.00427C13 7.45199 12.5523 7.00427 12 7.00427C11.4477 7.00427 11 7.45199 11 8.00427V11H8C7.44772 11 7 11.4477 7 12C7 12.5523 7.44772 13 8 13H11V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V13H16C16.5523 13 17 12.5523 17 12C17 11.4477 16.5523 11 16 11H13V8.00427Z\"\n        }));\n    }));\n    var d = [ \"default\", \"outlined\", \"filled\" ];\n    var f = function e(r) {\n        return d.indexOf(r) >= 0;\n    };\n    var v = function e(r) {\n        return r === \"default\" || r && !f(r) ? \"outlined\" : r;\n    };\n    /**\n * @description Add Action, Increase, Zoom In represents an action to add/increase/zoom in\n * @category Actions\n * @keywords button, action, increase/decrease, +\n * @variants outlined,filled\n */    var C = function e(r) {\n        var a = r.children, i = r.variant, d = i === void 0 ? \"default\" : i, f = u(r, [ \"children\", \"variant\" ]);\n        var C = v(d);\n        var s = \"pluscircle-\".concat(C);\n        var p = (0, t.useContext)(l.IconContext);\n        var m = c.get(C);\n        if (false) {}\n        if (p && m) {\n            var y = p.toRender, b = p.addIcon;\n            b(s, m());\n            if (!y) {\n                return null;\n            }\n        }\n        \n        return n().createElement(o(), f, a, p ?  n().createElement(\"use\", {\n            href: \"#\".concat(s)\n        }) : !!m && m());\n    };\n    /* harmony default export */    const s = C;\n    module.exports = r;\n    /******/})();", "/******/ (() => {\n    // webpackBootstrap\n    /******/ \"use strict\";\n    /******/ // The require scope\n    /******/    var e = {};\n    /******/\n    /************************************************************************/\n    /******/ /* webpack/runtime/compat get default export */\n    /******/    (() => {\n        /******/ // getDefaultExport function for compatibility with non-harmony modules\n        /******/ e.n = n => {\n            /******/ var r = n && n.__esModule ? \n            /******/ () => n[\"default\"]\n            /******/ : () => n\n            /******/;\n            e.d(r, {\n                a: r\n            });\n            /******/            return r;\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/define property getters */\n    /******/    (() => {\n        /******/ // define getter functions for harmony exports\n        /******/ e.d = (n, r) => {\n            /******/ for (var t in r) {\n                /******/ if (e.o(r, t) && !e.o(n, t)) {\n                    /******/ Object.defineProperty(n, t, {\n                        enumerable: true,\n                        get: r[t]\n                    });\n                    /******/                }\n                /******/            }\n            /******/        };\n        /******/    })();\n    /******/\n    /******/ /* webpack/runtime/hasOwnProperty shorthand */\n    /******/    (() => {\n        /******/ e.o = (e, n) => Object.prototype.hasOwnProperty.call(e, n)\n        /******/;\n    })();\n    /******/\n    /******/ /* webpack/runtime/make namespace object */\n    /******/    (() => {\n        /******/ // define __esModule on exports\n        /******/ e.r = e => {\n            /******/ if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n                /******/ Object.defineProperty(e, Symbol.toStringTag, {\n                    value: \"Module\"\n                });\n                /******/            }\n            /******/            Object.defineProperty(e, \"__esModule\", {\n                value: true\n            });\n            /******/        };\n        /******/    })();\n    /******/\n    /************************************************************************/    var n = {};\n    // ESM COMPAT FLAG\n        e.r(n);\n    // EXPORTS\n        e.d(n, {\n        Item: () => /* reexport */ k,\n        default: () => /* reexport */ B\n    });\n    // CONCATENATED MODULE: external \"react\"\n    const r = require(\"react\");\n    var t =  e.n(r);\n    // CONCATENATED MODULE: external \"prop-types\"\n    const a = require(\"prop-types\");\n    var i =  e.n(a);\n    // CONCATENATED MODULE: external \"@splunk/react-icons/CaretSmallDown\"\n    const o = require(\"@splunk/react-icons/CaretSmallDown\");\n    var l =  e.n(o);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Dropdown\"\n    const c = require(\"@splunk/react-ui/Dropdown\");\n    var u =  e.n(c);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Menu\"\n    const p = require(\"@splunk/react-ui/Menu\");\n    var s =  e.n(p);\n    // CONCATENATED MODULE: external \"@splunk/ui-utils/i18n\"\n    const d = require(\"@splunk/ui-utils/i18n\");\n    // CONCATENATED MODULE: external \"lodash/omit\"\n    const f = require(\"lodash/omit\");\n    var v =  e.n(f);\n    // CONCATENATED MODULE: external \"@splunk/react-ui/Button\"\n    const m = require(\"@splunk/react-ui/Button\");\n    var b =  e.n(m);\n    // CONCATENATED MODULE: ./src/SplitButton/Item.tsx\n    function y() {\n        return y = Object.assign ? Object.assign.bind() : function(e) {\n            for (var n = 1; n < arguments.length; n++) {\n                var r = arguments[n];\n                for (var t in r) {\n                    ({}).hasOwnProperty.call(r, t) && (e[t] = r[t]);\n                }\n            }\n            return e;\n        }, y.apply(null, arguments);\n    }\n    function g(e, n) {\n        if (null == e) return {};\n        var r, t, a = O(e, n);\n        if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n            for (t = 0; t < i.length; t++) {\n                r = i[t], -1 === n.indexOf(r) && {}.propertyIsEnumerable.call(e, r) && (a[r] = e[r]);\n            }\n        }\n        return a;\n    }\n    function O(e, n) {\n        if (null == e) return {};\n        var r = {};\n        for (var t in e) {\n            if ({}.hasOwnProperty.call(e, t)) {\n                if (-1 !== n.indexOf(t)) continue;\n                r[t] = e[t];\n            }\n        }\n        return r;\n    }\n    /** @public */    var h = {\n        appearance: i().oneOf([ \"default\", \"secondary\", \"primary\", \"destructive\", \"destructiveSecondary\" ]),\n        children: i().node,\n        disabled: i().bool,\n        elementRef: i().oneOfType([ i().func, i().object ]),\n        icon: i().node,\n        isMain: i().bool,\n        onClick: i().func\n    };\n    /**\n * An item within a `SplitButton`.\n */    function S(e) {\n        var n = e.appearance, a = n === void 0 ? \"secondary\" : n, i = e.disabled, o = e.elementRef, l = e.icon, c = e.isMain, u = e.children, p = e.onClick, d = g(e, [ \"appearance\", \"disabled\", \"elementRef\", \"icon\", \"isMain\", \"children\", \"onClick\" ]);\n        // @docs-props-type ItemPropsBase\n                var f = (0, r.useCallback)((function(e) {\n            if (!i) {\n                p === null || p === void 0 ? void 0 : p(e, {});\n            }\n        }), [ i, p ]);\n        var m = (0, r.useCallback)((function(e, n) {\n            var r = n.action, t = n.icon, a = n.label, o = n.value;\n            if (!i) {\n                p === null || p === void 0 ? void 0 : p(e, {\n                    action: r,\n                    icon: t,\n                    label: a,\n                    value: o\n                });\n            }\n        }), [ i, p ]);\n        if (c) {\n            \n            return t().createElement(b(), y({\n                appearance: a,\n                append: true,\n                disabled: i,\n                elementRef: o,\n                icon: l,\n                onClick: m\n            }, d), u);\n        }\n        \n        return t().createElement(s().Item, y({\n            disabled: i,\n            elementRef: o,\n            onClick: f,\n            startAdornment: l\n        }, v()(d, [ \"role\" ])), u);\n    }\n    S.propTypes = h;\n    /* harmony default export */    const k = S;\n    // CONCATENATED MODULE: external \"styled-components\"\n    const w = require(\"styled-components\");\n    var j =  e.n(w);\n    // CONCATENATED MODULE: external \"@splunk/themes\"\n    const E = require(\"@splunk/themes\");\n    // CONCATENATED MODULE: ./src/SplitButton/SplitButtonStyles.ts\n    var C = j()(b()).withConfig({\n        displayName: \"SplitButtonStyles__StyledToggle\",\n        componentId: \"sc-9igsyh-0\"\n    })([ \"min-width:0;width:24px;\" ]);\n    var P = j().div.withConfig({\n        displayName: \"SplitButtonStyles__StyledDiv\",\n        componentId: \"sc-9igsyh-1\"\n    })([ \"\", \" \", \" \", \"\" ], E.mixins.reset(\"inline-flex\"), (function(e) {\n        var n = e.$appearance;\n        return (n === \"primary\" || n === \"destructive\") && (0, w.css)([ \"gap:1px;\" ]);\n    }), (function(e) {\n        var n = e.$inline;\n        return !n && (0, w.css)([ \"width:100%;\" ]);\n    }));\n    // CONCATENATED MODULE: ./src/utils/useDeprecate.tsx\n    var M = \"is deprecated and will be removed in the next major version.\";\n    var R = function e(n) {\n        var r = n.additionalMessage, t = r === void 0 ? \"\" : r, a = n.componentName;\n        useEffect((function() {\n            if (false) {}\n        }), [ t, a ]);\n    };\n    var q = function e(n) {\n        var r = n.additionalMessage, t = r === void 0 ? \"\" : r, a = n.componentName, i = n.propName, o = n.propValue;\n        useEffect((function() {\n            if (false) {}\n        }), [ t, a, i, o ]);\n    };\n    var x = function e(n) {\n        var t = n.additionalMessage, a = t === void 0 ? \"\" : t, i = n.componentName, o = n.deprecatedPropValue, l = n.propName, c = n.propValue;\n        (0, r.useEffect)((function() {\n            if (false) {}\n        }), [ a, i, l, c, o ]);\n    };\n    // CONCATENATED MODULE: ./src/SplitButton/SplitButton.tsx\n    function _() {\n        return _ = Object.assign ? Object.assign.bind() : function(e) {\n            for (var n = 1; n < arguments.length; n++) {\n                var r = arguments[n];\n                for (var t in r) {\n                    ({}).hasOwnProperty.call(r, t) && (e[t] = r[t]);\n                }\n            }\n            return e;\n        }, _.apply(null, arguments);\n    }\n    function N(e, n) {\n        if (null == e) return {};\n        var r, t, a = T(e, n);\n        if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n            for (t = 0; t < i.length; t++) {\n                r = i[t], -1 === n.indexOf(r) && {}.propertyIsEnumerable.call(e, r) && (a[r] = e[r]);\n            }\n        }\n        return a;\n    }\n    function T(e, n) {\n        if (null == e) return {};\n        var r = {};\n        for (var t in e) {\n            if ({}.hasOwnProperty.call(e, t)) {\n                if (-1 !== n.indexOf(t)) continue;\n                r[t] = e[t];\n            }\n        }\n        return r;\n    }\n    var I = {\n        appearance: i().oneOf([ \"default\", \"secondary\", \"primary\", \"destructive\", \"destructiveSecondary\" ]),\n        children: i().node,\n        disabled: i().bool,\n        elementRef: i().oneOfType([ i().func, i().object ]),\n        onClick: i().func,\n        inline: i().bool,\n        toggleRef: i().oneOfType([ i().func, i().object ])\n    };\n    function V(e) {\n        var n = e.appearance, a = n === void 0 ? \"secondary\" : n, i = e.children, o = e.disabled, c = e.elementRef, p = e.inline, f = p === void 0 ? true : p, v = e.onClick, m = e.toggleRef, b = N(e, [ \"appearance\", \"children\", \"disabled\", \"elementRef\", \"inline\", \"onClick\", \"toggleRef\" ]);\n        // @docs-props-type SplitButtonPropsBase\n                x({\n            componentName: \"SplitButton\",\n            deprecatedPropValue: \"default\",\n            propName: \"appearance\",\n            propValue: a\n        });\n        var y = r.Children.toArray(i).filter(r.isValidElement);\n        var g = 0;\n        var O = 0;\n        y.forEach((function(e, n) {\n            var r = e.props, t = r.disabled, a = r.isMain;\n            if (a) {\n                g = n;\n            }\n            if (t) {\n                O += 1;\n            }\n        }));\n        var h =  (0, r.cloneElement)(y[g], {\n            isMain: true,\n            appearance: a,\n            disabled: o || y[g].props.disabled\n        });\n        // Remove mainButton from array of dropdown items\n                y.splice(g, 1);\n        var S = y;\n        var k =  t().createElement(C, {\n            prepend: true,\n            disabled: o || O === S.length,\n            elementRef: m,\n            appearance: a,\n            \"data-test\": \"split-button-toggle\",\n            \"aria-label\": (0, d._)(\"Open more options\"),\n            icon:  t().createElement(l(), null)\n        });\n        \n        return t().createElement(P, _({\n            \"aria-label\": (0, d._)(\"Split button\"),\n            \"data-inline\": f || null,\n            \"data-test\": \"split-button-container\",\n            $inline: f,\n            ref: c,\n            role: \"group\",\n            onClick: o ? undefined : v,\n            $appearance: a\n        }, b), h,  t().createElement(\"div\", null,  t().createElement(u(), {\n            toggle: k\n        },  t().createElement(s(), null, S))));\n    }\n    V.propTypes = I;\n    V.Item = k;\n    /* harmony default export */    const B = V;\n    // CONCATENATED MODULE: ./src/SplitButton/index.ts\n    module.exports = n;\n    /******/})();", "const key = {\n  fullscreenEnabled: 0,\n  fullscreenElement: 1,\n  requestFullscreen: 2,\n  exitFullscreen: 3,\n  fullscreenchange: 4,\n  fullscreenerror: 5,\n  fullscreen: 6\n};\n\nconst webkit = [\n  'webkitFullscreenEnabled',\n  'webkitFullscreenElement',\n  'webkitRequestFullscreen',\n  'webkitExitFullscreen',\n  'webkitfullscreenchange',\n  'webkitfullscreenerror',\n  '-webkit-full-screen',\n];\n\nconst moz = [\n  'mozFullScreenEnabled',\n  'mozFullScreenElement',\n  'mozRequestFullScreen',\n  'mozCancelFullScreen',\n  'mozfullscreenchange',\n  'mozfullscreenerror',\n  '-moz-full-screen',\n];\n\nconst ms = [\n  'msFullscreenEnabled',\n  'msFullscreenElement',\n  'msRequestFullscreen',\n  'msExitFullscreen',\n  'MSFullscreenChange',\n  'MSFullscreenError',\n  '-ms-fullscreen',\n];\n\n// so it doesn't throw if no window or document\nconst document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\nconst vendor = (\n  ('fullscreenEnabled' in document && Object.keys(key)) ||\n  (webkit[0] in document && webkit) ||\n  (moz[0] in document && moz) ||\n  (ms[0] in document && ms) ||\n  []\n);\n\nexport default {\n  requestFullscreen: element => element[vendor[key.requestFullscreen]](),\n  requestFullscreenFunction: element => element[vendor[key.requestFullscreen]],\n  get exitFullscreen() { return document[vendor[key.exitFullscreen]].bind(document); },\n  get fullscreenPseudoClass() { return `:${vendor[key.fullscreen]}`; },\n  addEventListener: (type, handler, options) => document.addEventListener(vendor[key[type]], handler, options),\n  removeEventListener: (type, handler, options) => document.removeEventListener(vendor[key[type]], handler, options),\n  get fullscreenEnabled() { return Boolean(document[vendor[key.fullscreenEnabled]]); },\n  set fullscreenEnabled(val) {},\n  get fullscreenElement() { return document[vendor[key.fullscreenElement]]; },\n  set fullscreenElement(val) {},\n  get onfullscreenchange() { return document[`on${vendor[key.fullscreenchange]}`.toLowerCase()]; },\n  set onfullscreenchange(handler) { return document[`on${vendor[key.fullscreenchange]}`.toLowerCase()] = handler; },\n  get onfullscreenerror() { return document[`on${vendor[key.fullscreenerror]}`.toLowerCase()]; },\n  set onfullscreenerror(handler) { return document[`on${vendor[key.fullscreenerror]}`.toLowerCase()] = handler; },\n};\n", "import React, {\n  useCallback,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n} from 'react';\nimport fscreen from 'fscreen';\n\nexport interface FullScreenHandle {\n  active: boolean;\n  enter: () => Promise<void>;\n  exit: () => Promise<void>;\n  node: React.MutableRefObject<HTMLDivElement | null>;\n}\n\nexport interface FullScreenProps {\n  handle: FullScreenHandle;\n  children: any;\n  onChange?: (state: boolean, handle: FullScreenHandle) => void;\n  className?: string;\n}\n\nexport function useFullScreenHandle(): FullScreenHandle {\n  const [active, setActive] = useState<boolean>(false);\n  const node = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const handleChange = () => {\n      setActive(fscreen.fullscreenElement === node.current);\n    };\n    fscreen.addEventListener('fullscreenchange', handleChange);\n    return () => fscreen.removeEventListener('fullscreenchange', handleChange);\n  }, []);\n\n  const enter = useCallback(() => {\n    if (fscreen.fullscreenElement) {\n      return fscreen.exitFullscreen().then(() => {\n        return fscreen.requestFullscreen(node.current);\n      });\n    } else if (node.current) {\n      return fscreen.requestFullscreen(node.current);\n    }\n  }, []);\n\n  const exit = useCallback(() => {\n    if (fscreen.fullscreenElement === node.current) {\n      return fscreen.exitFullscreen();\n    }\n    return Promise.resolve();\n  }, []);\n\n  return useMemo(\n    () => ({\n      active,\n      enter,\n      exit,\n      node,\n    }),\n    [active, enter, exit],\n  );\n}\n\nexport const FullScreen: React.FC<FullScreenProps> = ({\n  handle,\n  onChange,\n  children,\n  className,\n}) => {\n  const classNames = [];\n  if (className) {\n    classNames.push(className);\n  }\n\n  classNames.push('fullscreen');\n\n  if (handle.active) {\n    classNames.push('fullscreen-enabled');\n  }\n\n  useEffect(() => {\n    if (onChange) {\n      onChange(handle.active, handle);\n    }\n  }, [handle.active]);\n\n  return (\n    <div\n      className={classNames.join(' ')}\n      ref={handle.node}\n      style={handle.active ? { height: '100%', width: '100%' } : undefined}\n    >\n      {children}\n    </div>\n  );\n};\n", "import DashboardCoreComponent from './DashboardCore';\n\nexport const DashboardCore = DashboardCoreComponent;\nexport type * from './types/DashboardCoreProps';\nexport default DashboardCoreComponent;\n", "\nimport * as defaultImport from \"lodash\";\nexport * from \"lodash\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"react\";\nexport * from \"react\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-context\";\nexport * from \"@splunk/dashboard-context\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-utils\";\nexport * from \"@splunk/dashboard-utils\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-state\";\nexport * from \"@splunk/dashboard-state\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-validation\";\nexport * from \"@splunk/dashboard-validation\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-ui\";\nexport * from \"@splunk/dashboard-ui\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"styled-components\";\nexport * from \"styled-components\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"react-resize-detector\";\nexport * from \"react-resize-detector\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@dnd-kit/sortable\";\nexport * from \"@dnd-kit/sortable\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/themes/mixins\";\nexport * from \"@splunk/themes/mixins\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@dnd-kit/core\";\nexport * from \"@dnd-kit/core\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n    useDndMonitor,\n    type UniqueIdentifier,\n    type DndContextProps,\n} from '@dnd-kit/core';\nimport { arrayMove } from '@dnd-kit/sortable';\nimport {\n    selectGlobalInputs,\n    selectLayoutGlobalOptions,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport {\n    GlobalInputSubmitDraggableId,\n    useDashboardCoreApi,\n} from '@splunk/dashboard-context';\n\nconst EMPTY_GLOBAL_INPUTS = Object.freeze<string[]>([]);\n\nexport const useDashboardDragMonitor = (): string[] => {\n    const dashboardCoreApi = useDashboardCoreApi();\n    const globalInputs = useSelector(selectGlobalInputs);\n    const submitButton = !!useSelector(selectLayoutGlobalOptions)?.submitButton;\n\n    const globalInputIds = useMemo<string[]>(() => {\n        if (globalInputs?.length && submitButton) {\n            return [...globalInputs, GlobalInputSubmitDraggableId];\n        }\n\n        return globalInputs ?? (EMPTY_GLOBAL_INPUTS as unknown as string[]);\n    }, [globalInputs, submitButton]);\n\n    const activeDragId = useRef<UniqueIdentifier | undefined>();\n\n    useEffect(() => {\n        activeDragId.current = undefined;\n    }, [globalInputs]);\n\n    const onDragStart = useCallback<\n        NonNullable<DndContextProps['onDragStart']>\n    >(({ active }) => {\n        activeDragId.current = !active?.id ? undefined : active.id;\n    }, []);\n\n    const onDragCancel = useCallback(() => {\n        activeDragId.current = undefined;\n    }, []);\n\n    const onDragEnd = useCallback<NonNullable<DndContextProps['onDragEnd']>>(\n        ({ active, over }) => {\n            if (!activeDragId.current || active?.id === over?.id) {\n                return;\n            }\n\n            // If there's fewer than 2 elements then there's nothing to reorder\n            if (!globalInputs || globalInputs.length < 2) {\n                return;\n            }\n\n            // Reorder global bar\n            dashboardCoreApi.updateInputStructure(\n                arrayMove(\n                    globalInputs,\n                    globalInputs.indexOf(active.id as string),\n                    globalInputs.indexOf(over?.id as string)\n                )\n            );\n\n            activeDragId.current = undefined;\n        },\n        [dashboardCoreApi, globalInputs]\n    );\n\n    useDndMonitor({ onDragStart, onDragCancel, onDragEnd });\n    return globalInputIds;\n};\n", "\nimport * as defaultImport from \"@splunk/react-ui/Button\";\nexport * from \"@splunk/react-ui/Button\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/Prose\";\nexport * from \"@splunk/react-ui/Prose\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/ui-utils/i18n\";\nexport * from \"@splunk/ui-utils/i18n\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/ui-utils/format\";\nexport * from \"@splunk/ui-utils/format\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/Paragraph\";\nexport * from \"@splunk/react-ui/Paragraph\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { DEFAULT_TOKEN_NAMESPACE } from '@splunk/dashboard-utils';\nimport type { InputDefinition } from '@splunk/dashboard-types';\n\nexport const formatInputName = ({\n    id,\n    itemDef,\n}: {\n    id: string;\n    itemDef?: InputDefinition;\n}): string | undefined => {\n    if (!itemDef) {\n        return undefined;\n    }\n\n    const {\n        title,\n        options: { token, tokenNamespace = DEFAULT_TOKEN_NAMESPACE } = {},\n    } = itemDef;\n\n    if (title) {\n        return title;\n    }\n\n    if (token) {\n        return tokenNamespace && tokenNamespace !== DEFAULT_TOKEN_NAMESPACE\n            ? `${tokenNamespace}:${token}`\n            : token;\n    }\n\n    return id;\n};\n", "import React from 'react';\nimport { sprintf } from '@splunk/ui-utils/format';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport P from '@splunk/react-ui/Paragraph';\nimport type { InputDefinition } from '@splunk/dashboard-types';\nimport { formatInputName } from './formatInputName';\n\n/** First line of modal text when a `Hide` button is available; push user towards hide instead of delete */\nconst HideContextualInfo = _(\n    'Deleting the time range picker \"%s\" might prevent search execution. Instead, you can hide it in View mode.'\n);\n/** Second line of modal text when a `Hide` button is available */\nconst HideConfirmationText = _(\n    'Do you want to continue deleting the time range picker?'\n);\n\n/** First line of modal text when the only available action is `Delete` */\nconst DeleteContextualInfo = _(\n    'You are about to delete the time range picker \"%s\".'\n);\n/** Second line of modal text when the only available action is `Delete` */\nconst DeleteConfirmationText = _('Are you sure?');\n\nexport const SingleItemBody = ({\n    id,\n    itemDef,\n    canHide = false,\n}: {\n    id: string;\n    itemDef?: InputDefinition;\n    canHide?: boolean;\n}) => {\n    if (!itemDef) {\n        return null;\n    }\n\n    const inputName = formatInputName({ id, itemDef });\n    return canHide ? (\n        <>\n            <P>{sprintf(HideContextualInfo, inputName)}</P>\n            <P>{HideConfirmationText}</P>\n        </>\n    ) : (\n        <>\n            <P>{sprintf(DeleteContextualInfo, inputName)}</P>\n            <P>{DeleteConfirmationText}</P>\n        </>\n    );\n};\n", "\nimport * as defaultImport from \"@splunk/react-ui/List\";\nexport * from \"@splunk/react-ui/List\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React from 'react';\nimport { sprintf } from '@splunk/ui-utils/format';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport List from '@splunk/react-ui/List';\nimport P from '@splunk/react-ui/Paragraph';\nimport type { RootInputsDefinition } from '@splunk/dashboard-types';\nimport { formatInputName } from './formatInputName';\n\nconst ContentTemplate = _(\n    'You are about to delete %d time range pickers. Are you sure?'\n);\n\n/**\n * Modal body to be displayed when there are multiple time range pickers being deleted in a single operation\n */\nexport const DeleteMultipleBody = ({\n    ids,\n    inputs,\n}: {\n    ids: string[];\n    inputs: RootInputsDefinition;\n}) => (\n    <>\n        <P>{sprintf(ContentTemplate, ids.length)}</P>\n        <List>\n            {ids.map(\n                (id) =>\n                    !!inputs?.[id] && (\n                        <List.Item key={id}>\n                            {formatInputName({ id, itemDef: inputs[id] })}\n                        </List.Item>\n                    )\n            )}\n        </List>\n    </>\n);\n", "import React, { useCallback, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { noop } from '@splunk/dashboard-utils';\nimport Button from '@splunk/react-ui/Button';\nimport Prose from '@splunk/react-ui/Prose';\nimport { _ } from '@splunk/ui-utils/i18n';\n\nimport {\n    useDashboardCoreApi,\n    useFeatureFlags,\n} from '@splunk/dashboard-context';\nimport {\n    batch,\n    selectGlobalInputs,\n    selectDeletionConfirmation,\n    setItemVisibility,\n    setConfirmDeletionIds,\n    useDispatch,\n    useSelector,\n    withSelectorValue,\n} from '@splunk/dashboard-state';\nimport { Modal, SecondaryActionButton } from '@splunk/dashboard-ui';\nimport type { DeletionConfirmationModal } from '@splunk/dashboard-types';\n\n// modal content\nimport { SingleItemBody } from './SingleItemBody';\nimport { DeleteMultipleBody } from './DeleteMultipleBody';\n\nconst StyledModal = styled(Modal)`\n    width: 600px;\n    max-width: 90%;\n`;\n\nconst StyledBodyProse = styled(Prose)`\n    // include StyledModal to increase specificity so this overrides without !important\n    ${StyledModal} & > :is(p, ul) {\n        margin-block-end: 1rem;\n    }\n`;\n\nconst DeleteButton = SecondaryActionButton(StyledModal);\n\nconst DeleteOneInputTitle = _('Delete time range picker');\nconst DeleteMultipleInputsTitle = _('Delete time range pickers');\n\nconst Labels = {\n    cancel: _('Cancel'),\n    hide: _('Hide'),\n    yesDelete: _('Yes, delete'),\n};\n\nconst NoGlobalInputs: string[] = [];\n\nconst ConfirmInputRemovalModal = ({\n    deletionConfirmation: { modalIds, additionalIds },\n}: {\n    deletionConfirmation: DeletionConfirmationModal;\n}) => {\n    const { enableShowHide, confirmGlobalTimeRangeDeletion } =\n        useFeatureFlags();\n    const dashboardApi = useDashboardCoreApi();\n    const dispatch = useDispatch();\n\n    const globalInputIds = useSelector(selectGlobalInputs) ?? NoGlobalInputs;\n\n    /* The modal should suggest hiding the input if:\n        (1) enableShowHide = true\n        (2) There is only one thing being deleted\n        (3) That one thing is a global input\n        (4) That global input does not have `.containerOptions.visibility.hideInVideMode = true`\n    */\n    const canSuggestHide =\n        enableShowHide &&\n        modalIds.length === 1 &&\n        !additionalIds?.length &&\n        globalInputIds.includes(modalIds[0]) &&\n        !dashboardApi.getDefinition().inputs?.[modalIds[0]]?.containerOptions\n            ?.visibility?.hideInViewMode;\n\n    const handleCancel = useCallback(() => {\n        dispatch(setConfirmDeletionIds());\n    }, [dispatch]);\n\n    const handleHide = useCallback(() => {\n        batch(() => {\n            dispatch(\n                setItemVisibility({\n                    itemId: modalIds[0],\n                    itemType: 'input',\n                    property: 'hideInViewMode',\n                    value: true,\n                })\n            );\n\n            dispatch(setConfirmDeletionIds());\n        });\n    }, [dispatch, modalIds]);\n\n    const handleDelete = useCallback(() => {\n        batch(() => {\n            dashboardApi.removeDashboardItems([\n                ...modalIds,\n                ...(additionalIds ?? []),\n            ]);\n\n            // Clear itemsPendingDeletion state\n            dispatch(setConfirmDeletionIds());\n        });\n    }, [additionalIds, modalIds, dashboardApi, dispatch]);\n\n    useEffect(() => {\n        if (!confirmGlobalTimeRangeDeletion) {\n            // If Redux is tracking items to be deleted, but the feature flag\n            // associated with the confirmation modal is false, the deletion\n            // should happen without prompt.\n            handleDelete();\n        }\n    }, [handleDelete, confirmGlobalTimeRangeDeletion]);\n\n    const modalBody = useMemo(() => {\n        const inputs = dashboardApi.getDefinition().inputs ?? {};\n        if (canSuggestHide) {\n            const [id] = modalIds;\n            return <SingleItemBody id={id} itemDef={inputs[id]} canHide />;\n        }\n\n        return modalIds.length === 1 ? (\n            <SingleItemBody id={modalIds[0]} itemDef={inputs[modalIds[0]]} />\n        ) : (\n            <DeleteMultipleBody ids={modalIds} inputs={inputs} />\n        );\n    }, [canSuggestHide, dashboardApi, modalIds]);\n\n    const modalTitle =\n        modalIds.length === 1 ? DeleteOneInputTitle : DeleteMultipleInputsTitle;\n\n    if (!confirmGlobalTimeRangeDeletion) {\n        return null;\n    }\n\n    return (\n        <StyledModal\n            data-test=\"confirm-trp-deletion-modal\"\n            onRequestClose={handleCancel}\n            open\n            returnFocus={noop}\n        >\n            <Modal.Header title={modalTitle} />\n            <Modal.Body>\n                <StyledBodyProse>{modalBody}</StyledBodyProse>\n            </Modal.Body>\n            <Modal.Footer>\n                {canSuggestHide && (\n                    <DeleteButton\n                        data-test=\"delete-input-button\"\n                        appearance=\"subtle\"\n                        onClick={handleDelete}\n                        label={Labels.yesDelete}\n                    />\n                )}\n                <Button\n                    data-test=\"cancel-button\"\n                    appearance=\"secondary\"\n                    onClick={handleCancel}\n                    label={Labels.cancel}\n                />\n                {canSuggestHide ? (\n                    <Button\n                        data-test=\"hide-input-button\"\n                        appearance=\"primary\"\n                        onClick={handleHide}\n                        label={Labels.hide}\n                    />\n                ) : (\n                    <Button\n                        data-test=\"delete-input-button\"\n                        appearance=\"destructive\"\n                        onClick={handleDelete}\n                        label={Labels.yesDelete}\n                    />\n                )}\n            </Modal.Footer>\n        </StyledModal>\n    );\n};\n\n/**\n * A modal to confirm the deletion of one or more time range picker inputs.\n * If there is no entry in Redux state for this modal then nothing will be rendered.\n */\nexport const ConfirmationModal = withSelectorValue(ConfirmInputRemovalModal, {\n    selector: selectDeletionConfirmation,\n    selectorResultProp: 'deletionConfirmation',\n    validationFn: (value) => !!value?.modalIds?.length,\n});\n", "\nimport * as defaultImport from \"@dnd-kit/modifiers\";\nexport * from \"@dnd-kit/modifiers\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/themes\";\nexport * from \"@splunk/themes\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/Menu\";\nexport * from \"@splunk/react-ui/Menu\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/ScreenReaderContent\";\nexport * from \"@splunk/react-ui/ScreenReaderContent\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/TabBar\";\nexport * from \"@splunk/react-ui/TabBar\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React from 'react';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport Menu from '@splunk/react-ui/Menu';\n\ntype onTabReorderHandler = ({ from, to }: { from: number; to: number }) => void;\n\nexport const createReorderMenuItems = ({\n    index,\n    length,\n    onTabReorder,\n}: {\n    index: number;\n    length: number;\n    onTabReorder: onTabReorderHandler;\n}) => {\n    if (length < 2 || index < 0 || index >= length) {\n        return [];\n    }\n\n    const canMoveLeft = index > 0;\n    const canMoveRight = index < length - 1;\n    // the second item should only show 'Move left'\n    const canMoveCompletelyLeft = canMoveLeft && index !== 1;\n    // the second last item should only show 'Move right'\n    const canMoveCompletelyRight = canMoveRight && index !== length - 2;\n\n    const onClickGenerator =\n        ({ from, to }: { from: number; to: number }) =>\n        () =>\n            onTabReorder({ from, to });\n\n    return [\n        canMoveLeft && (\n            <Menu.Item\n                key=\"move-left\"\n                data-test=\"move-left\"\n                onClick={onClickGenerator({ from: index, to: index - 1 })}\n            >\n                {_('Move left')}\n            </Menu.Item>\n        ),\n        canMoveRight && (\n            <Menu.Item\n                key=\"move-right\"\n                data-test=\"move-right\"\n                onClick={onClickGenerator({ from: index, to: index + 1 })}\n            >\n                {_('Move right')}\n            </Menu.Item>\n        ),\n        canMoveCompletelyLeft && (\n            <Menu.Item\n                key=\"move-completely-left\"\n                data-test=\"move-completely-left\"\n                onClick={onClickGenerator({ from: index, to: 0 })}\n            >\n                {_('Move completely left')}\n            </Menu.Item>\n        ),\n        canMoveCompletelyRight && (\n            <Menu.Item\n                key=\"move-completely-right\"\n                data-test=\"move-completely-right\"\n                onClick={onClickGenerator({ from: index, to: length - 1 })}\n            >\n                {_('Move completely right')}\n            </Menu.Item>\n        ),\n    ];\n};\n", "import React, { useCallback } from 'react';\nimport styled from 'styled-components';\nimport { _ } from '@splunk/ui-utils/i18n';\n\nimport Menu from '@splunk/react-ui/Menu';\nimport { variables } from '@splunk/themes';\n\nimport { useDispatch, removeTab } from '@splunk/dashboard-state';\n\nconst StyledMenuItem = styled(Menu.Item)`\n    color: ${variables.contentColorNegative};\n`;\n\ninterface TabMenuItemProps {\n    layoutId: string;\n}\n\nexport const RemoveTab = ({ layoutId }: TabMenuItemProps) => {\n    const dispatch = useDispatch();\n\n    const handleOnClick = useCallback(() => {\n        dispatch(removeTab(layoutId));\n    }, [dispatch, layoutId]);\n\n    return (\n        <StyledMenuItem\n            data-test=\"remove-tab-menu-item\"\n            onClick={handleOnClick}\n        >\n            {_('Remove tab')}\n        </StyledMenuItem>\n    );\n};\n", "import { useCallback, useRef } from 'react';\nimport {\n    batch,\n    selectActiveTab,\n    updateSelectedGlobalItems,\n    updateSelectedItems,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\n\n/**\n * Maintain state related to an `onMouseUp` callback which can be passed to the SUI `TabBar.Tab` component.\n *\n * When the active tab receives a mouse-up event and **it is not currently being dragged** a batched dispatch\n * will occur to deselect global inputs and in-canvas content. Selected in-cavnas content in inactive tabs\n * is not impacted, nor is the selection changed when changing and reordering tabs.\n *\n * @param {string} [param0.tabId] The ID of the tab receiving this callback\n * @param {boolean} [param0.isDragging = false] Indicate if the tab is actively being dragged\n */\nexport const useDeselectOnActiveTabPress = ({\n    tabId,\n    isDragging = false,\n}: {\n    tabId?: string;\n    isDragging?: boolean;\n}) => {\n    const dispatch = useDispatch();\n\n    const activeTabId = useSelector(selectActiveTab);\n    const activeTabIdRef = useRef(activeTabId);\n    activeTabIdRef.current = activeTabId;\n\n    const isDraggingRef = useRef(isDragging);\n    isDraggingRef.current = isDragging;\n\n    return useCallback(\n        (event: MouseEvent) => {\n            if (\n                // if the clicked tab is currently active\n                tabId === activeTabIdRef.current &&\n                // and the tab isn't being dragged\n                !isDraggingRef.current &&\n                // and the user didn't click the kebab menu\n                !(event.target as HTMLElement)?.hasAttribute('aria-haspopup')\n            ) {\n                batch(() => {\n                    dispatch(updateSelectedItems([]));\n                    dispatch(updateSelectedGlobalItems([]));\n                });\n            }\n        },\n        [tabId, dispatch]\n    );\n};\n", "import React, {\n    useMemo,\n    type ComponentProps,\n    type MutableRefObject,\n    type Ref,\n} from 'react';\nimport SUITabBar from '@splunk/react-ui/TabBar';\nimport { useDeselectOnActiveTabPress } from '../../hooks/useDeselectOnActiveTabPress';\n\nexport const updateReactRef = <T,>(ref: Ref<T> | undefined, current: T) => {\n    if (!ref) {\n        return;\n    }\n\n    if (typeof ref === 'function') {\n        ref(current);\n    } else {\n        // eslint-disable-next-line no-param-reassign\n        (ref as MutableRefObject<T>).current = current;\n    }\n};\n\n/**\n * A SUI tab component with event listeners injected for framework side-effects\n */\nexport const ConnectedTab = ({\n    tabId,\n    elementRef,\n    isDragging = false,\n    ...rest\n}: ComponentProps<typeof SUITabBar.Tab> & { isDragging?: boolean }) => {\n    /**\n     * Callback for onClick events to deselect dashboard content when clicking\n     * the active tab. Result is memoized and should *NEVER* change as it only\n     * uses stable functions (dispatch) and mutable refs.\n     */\n    const handleTabClick = useDeselectOnActiveTabPress({ tabId, isDragging });\n\n    const handleRef = useMemo(() => {\n        let prevNode: HTMLButtonElement | null = null;\n        let prevHandler: typeof handleTabClick;\n\n        return (el: HTMLButtonElement | null) => {\n            if (prevNode && prevHandler) {\n                prevNode.removeEventListener('click', prevHandler);\n            }\n\n            prevNode = el;\n            prevHandler = handleTabClick;\n            el?.addEventListener('click', handleTabClick);\n\n            // do not block parents from also setting an elementRef prop\n            updateReactRef(elementRef, el);\n        };\n    }, [elementRef, handleTabClick]);\n\n    return <SUITabBar.Tab {...rest} tabId={tabId} elementRef={handleRef} />;\n};\n\nConnectedTab.as = SUITabBar.Tab.as;\n", "\nimport * as defaultImport from \"@dnd-kit/utilities\";\nexport * from \"@dnd-kit/utilities\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React, { useMemo, useCallback, type ComponentProps } from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport SUITabBar from '@splunk/react-ui/TabBar';\nimport { ConnectedTab, updateReactRef } from './ConnectedTab';\n\nexport const Tab = ({\n    tabId,\n    elementRef,\n    ...rest\n}: ComponentProps<typeof ConnectedTab>) => {\n    const { listeners, setNodeRef, transform, transition, isDragging } =\n        useSortable({\n            id: tabId ?? '',\n        });\n\n    const style = useMemo(\n        () => ({\n            // CSS.Translate is needed instead of CSS.Transform because we don't want `scale` applied\n            //  due to our tab sizes differing.\n            transform: CSS.Translate.toString(transform),\n            transition,\n        }),\n        [transform, transition]\n    );\n\n    const handleRef = useCallback(\n        (el: HTMLButtonElement | null) => {\n            updateReactRef(elementRef, el);\n            setNodeRef(el);\n        },\n        [elementRef, setNodeRef]\n    );\n\n    return (\n        <ConnectedTab\n            // set Tab as the draggable element\n            style={style}\n            tabId={tabId}\n            isDragging={isDragging}\n            {...rest}\n            {...listeners}\n            elementRef={handleRef}\n        />\n    );\n};\n\nTab.as = SUITabBar.Tab.as;\n", "import React, { useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { useDndMonitor, type DragOverEvent } from '@dnd-kit/core';\nimport {\n    arrayMove,\n    horizontalListSortingStrategy,\n    SortableContext,\n} from '@dnd-kit/sortable';\nimport { variables } from '@splunk/themes';\nimport Menu from '@splunk/react-ui/Menu';\nimport ScreenReaderContent from '@splunk/react-ui/ScreenReaderContent';\nimport SUITabBar, { type TabBarChangeHandler } from '@splunk/react-ui/TabBar';\nimport {\n    useDispatch,\n    useSelector,\n    selectTabs,\n    setActiveTab,\n    selectActiveTab,\n    selectMode,\n    updateTabsStructure,\n} from '@splunk/dashboard-state';\nimport { useTabsRef } from '@splunk/dashboard-context';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport type { Mode, TabItem } from '@splunk/dashboard-types';\n\nimport { createReorderMenuItems } from './TabMenuItems/createReorderMenuItems';\nimport { RemoveTab } from './TabMenuItems/RemoveTab';\nimport { ConnectedTab } from './ConnectedTab';\nimport { Tab } from './SortableTab';\n\ninterface TabsContainerProps {\n    mode: Mode;\n}\n\nconst menuStyle = { width: 180 };\n\nconst TabsContainer = styled.div.attrs({\n    'data-test': 'TabsContainer',\n})<TabsContainerProps>`\n    min-width: ${({ mode }) => (mode === 'view' ? '100%' : 'auto')};\n    display: flex;\n    flex-shrink: 0;\n`;\n\nconst TabsContainerInner = styled.div.attrs({\n    'data-test': 'TabsContainerInner',\n})`\n    width: 100%;\n`;\n\nconst StyledTabBar = styled(SUITabBar)`\n    padding-inline: ${variables.spacingMedium};\n`;\n\nexport const TabBar = () => {\n    const tabs = useSelector(selectTabs);\n    const tabIds = useMemo(() => tabs.map((tab) => tab.layoutId), [tabs]);\n    const mode = useSelector(selectMode);\n    const tabContainerRef = useTabsRef('container');\n\n    const dispatch = useDispatch();\n\n    const handleTabChange = useCallback<TabBarChangeHandler>(\n        (e, { selectedTabId }) => {\n            if (selectedTabId) {\n                dispatch(setActiveTab(selectedTabId));\n            }\n        },\n        [dispatch]\n    );\n\n    const handleTabReorder = useCallback(\n        ({ from, to }: { from: number; to: number }) => {\n            const newOrder = arrayMove(tabs, from, to);\n            // Reorder global bar\n            dispatch(updateTabsStructure(newOrder));\n        },\n        [dispatch, tabs]\n    );\n\n    const activeTabId = useSelector(selectActiveTab);\n    const activeTab = tabs.find((tab) => tab.layoutId === activeTabId);\n\n    const tabElements = useMemo(() => {\n        const TabComponent = mode === 'view' ? ConnectedTab : Tab;\n        return tabs.map((tab: TabItem, idx) => {\n            const tabLabel = tab.label?.trim() || _(`Unnamed tab`);\n            const reorderMenuItems = createReorderMenuItems({\n                index: idx,\n                length: tabs.length,\n                onTabReorder: handleTabReorder,\n            });\n            // stop gap fix from showing Remove tab as the only option\n            //  since showing a disabled menu item is not accessible until\n            //  SUI bug is fixed: https://splunk.atlassian.net/browse/SUI-5671\n            const shouldRenderMenu = mode === 'edit' && tabs.length > 1;\n\n            return (\n                <TabComponent\n                    key={tab.layoutId}\n                    label={tabLabel}\n                    tabId={tab.layoutId}\n                    menu={\n                        shouldRenderMenu && (\n                            <Menu style={menuStyle}>\n                                {reorderMenuItems}\n                                <RemoveTab layoutId={tab.layoutId} />\n                            </Menu>\n                        )\n                    }\n                />\n            );\n        });\n    }, [handleTabReorder, mode, tabs]);\n\n    const onDragEnd = useCallback<(event: DragOverEvent) => void>(\n        ({ active, over }) => {\n            if (!over || active.id === over.id) {\n                return;\n            }\n\n            // If there's fewer than 2 elements then there's nothing to reorder\n            if (!tabs || tabs.length < 2) {\n                return;\n            }\n\n            const from = tabs.findIndex((tab) => tab.layoutId === active.id);\n            const to = tabs.findIndex((tab) => tab.layoutId === over.id);\n\n            handleTabReorder({ from, to });\n        },\n        [handleTabReorder, tabs]\n    );\n\n    useDndMonitor({ onDragEnd });\n\n    if (mode === 'view' && tabs.length <= 1) {\n        return null;\n    }\n\n    return (\n        <SortableContext\n            id=\"sortable-tab-bar\"\n            items={tabIds}\n            strategy={horizontalListSortingStrategy}\n        >\n            <TabsContainer mode={mode}>\n                <TabsContainerInner>\n                    <StyledTabBar\n                        activeTabId={activeTabId}\n                        onChange={handleTabChange}\n                        elementRef={tabContainerRef}\n                    >\n                        {tabElements}\n                    </StyledTabBar>\n                    {activeTab && (\n                        <ScreenReaderContent aria-live=\"polite\">\n                            {`${_('Active tab')}: ${activeTab.label} `}\n                        </ScreenReaderContent>\n                    )}\n                </TabsContainerInner>\n            </TabsContainer>\n        </SortableContext>\n    );\n};\n", "\nimport * as defaultImport from \"@splunk/react-ui/Tooltip\";\nexport * from \"@splunk/react-ui/Tooltip\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-icons/PlusCircle\";\nexport * from \"@splunk/react-icons/PlusCircle\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-icons/Plus\";\nexport * from \"@splunk/react-icons/Plus\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/react-ui/SplitButton\";\nexport * from \"@splunk/react-ui/SplitButton\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React, { useCallback, useState } from 'react';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport Button from '@splunk/react-ui/Button';\nimport Tooltip from '@splunk/react-ui/Tooltip';\nimport PlusCircle from '@splunk/react-icons/PlusCircle';\nimport Plus from '@splunk/react-icons/Plus';\nimport { useDispatch, addEmptyTab } from '@splunk/dashboard-state';\nimport {\n    useTabsRef,\n    useCoreOverrides,\n    useFeatureFlags,\n} from '@splunk/dashboard-context';\nimport SplitButton from '@splunk/react-ui/SplitButton';\n\nconst plusIcon = <Plus />;\nconst plusCircleIcon = <PlusCircle width={24} height={24} />;\nconst tooltipStyle = { margin: '0 10px' };\nconst addTabLabel = _('Add a tab');\nconst importTabLabel = _('Import a dashboard');\n\nexport const AddTabButton = ({ label = addTabLabel }: { label?: string }) => {\n    const dispatch = useDispatch();\n    const addTabRef = useTabsRef('addTab');\n    const importTabRef = useTabsRef('importTab');\n    const [mainOption, setMainOption] = useState('addTab');\n\n    const { importTabModal: ImportTabModal } = useCoreOverrides();\n    const { allowImportTab } = useFeatureFlags();\n    const [open, setOpen] = useState(false);\n\n    const handleAddTab = useCallback(() => {\n        setMainOption('addTab');\n        dispatch(addEmptyTab());\n    }, [dispatch]);\n\n    const handleImportTab = useCallback(() => {\n        setMainOption('importTab');\n        setOpen(true);\n    }, []);\n\n    const handleRequestClose = useCallback(() => {\n        setOpen(false);\n    }, []);\n\n    if (!allowImportTab || !ImportTabModal) {\n        return (\n            <Tooltip\n                contentRelationship=\"label\"\n                content={label}\n                style={tooltipStyle}\n            >\n                <Button\n                    data-test=\"add-tab-button\"\n                    appearance=\"subtle\"\n                    icon={plusCircleIcon}\n                    elementRef={addTabRef}\n                    onClick={handleAddTab}\n                />\n            </Tooltip>\n        );\n    }\n\n    // the main SplitButton.Item does not show up in the dropdown. Thus we have to include the \"main\" button twice\n    // in order to have it both as the main button _AND_ as a dropdown option as per the designs.\n    const duplicateOption =\n        mainOption === 'addTab' ? (\n            <SplitButton.Item data-test=\"add-tab-option\" onClick={handleAddTab}>\n                {addTabLabel}\n            </SplitButton.Item>\n        ) : (\n            <SplitButton.Item\n                data-test=\"import-tab-option\"\n                onClick={handleImportTab}\n            >\n                {importTabLabel}\n            </SplitButton.Item>\n        );\n\n    const addTabProps =\n        mainOption === 'addTab'\n            ? {\n                  'data-test': 'add-tab-button',\n                  icon: plusIcon,\n                  isMain: true,\n              }\n            : { 'data-test': 'add-tab-option' };\n\n    const importTabProps =\n        mainOption === 'importTab'\n            ? {\n                  'data-test': 'import-tab-button',\n                  icon: plusIcon,\n                  isMain: true,\n              }\n            : { 'data-test': 'import-tab-option' };\n\n    return (\n        <>\n            <SplitButton>\n                <SplitButton.Item\n                    elementRef={addTabRef}\n                    onClick={handleAddTab}\n                    {...addTabProps}\n                >\n                    {addTabLabel}\n                </SplitButton.Item>\n                {duplicateOption}\n                <SplitButton.Item\n                    onClick={handleImportTab}\n                    elementRef={importTabRef}\n                    {...importTabProps}\n                >\n                    {importTabLabel}\n                </SplitButton.Item>\n            </SplitButton>\n            {ImportTabModal && (\n                <ImportTabModal onModalClose={handleRequestClose} open={open} />\n            )}\n        </>\n    );\n};\n", "import React from 'react';\nimport styled from 'styled-components';\nimport { useTabsRef } from '@splunk/dashboard-context';\nimport { selectMode, useSelector } from '@splunk/dashboard-state';\nimport { AddTabButton } from '../AddTabButton';\n\nconst ActionBar = styled.div.attrs({\n    'data-test': 'tab-action-bar',\n})`\n    display: flex;\n    flex-direction: row;\n    justify-content: left;\n    flex-grow: 1;\n    align-items: center;\n`;\n\nexport const TabActionBar = () => {\n    const mode = useSelector(selectMode);\n    const ref = useTabsRef('tabActionBar');\n\n    if (mode !== 'edit') {\n        return null;\n    }\n\n    return (\n        <ActionBar ref={ref}>\n            <AddTabButton />\n        </ActionBar>\n    );\n};\n", "import React from 'react';\nimport styled from 'styled-components';\nimport { DndContext, MouseSensor, useSensor, useSensors } from '@dnd-kit/core';\nimport {\n    restrictToHorizontalAxis,\n    restrictToParentElement,\n} from '@dnd-kit/modifiers';\nimport { variables } from '@splunk/themes';\nimport { TabBar } from '../TabBar';\nimport { TabActionBar } from '../TabActionBar/TabActionBar';\n\nconst modifiers = [restrictToHorizontalAxis, restrictToParentElement];\n\nconst TabsContainer = styled.div.attrs({\n    'data-test': 'tabs-container',\n})`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    flex-shrink: 0;\n    gap: ${variables.spacingSmall};\n    padding-top: ${variables.spacingSmall};\n    // z-index needed so that focus on tabs does not get clipped by canvas\n    z-index: 1;\n`;\n\nexport const TabContainer = () => {\n    const sensors = useSensors(\n        useSensor(MouseSensor, { activationConstraint: { distance: 5 } })\n    );\n    return (\n        <TabsContainer>\n            <DndContext sensors={sensors} modifiers={modifiers}>\n                <TabBar />\n            </DndContext>\n            <TabActionBar />\n        </TabsContainer>\n    );\n};\n", "import type { VisualizationDefinition } from '@splunk/dashboard-types';\n\nexport const getHasDrilldown = (\n    eventHandlers?: VisualizationDefinition['eventHandlers']\n): boolean => {\n    if (!Array.isArray(eventHandlers)) {\n        return false;\n    }\n    // eventHandlers has to be an array here, we don't have to keep looping once we find something.\n    return !!eventHandlers.find((eventHandler) => {\n        return /^drilldown/.test(eventHandler.type);\n    });\n};\n", "\nimport * as defaultImport from \"react-dom\";\nexport * from \"react-dom\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { createContext, useContext } from 'react';\n\nconst ActionMenusContext = createContext<JSX.Element[] | null>(null);\n\nexport const ActionMenusContextProvider = ActionMenusContext.Provider;\n\nexport const useActionMenus: () => JSX.Element[] = () => {\n    const ctx = useContext(ActionMenusContext);\n    if (ctx === null) {\n        throw new Error(\n            'useActionMenus can only be used in a component that is a child of a ActionMenusContextProvider'\n        );\n    }\n\n    return ctx;\n};\n\nexport default ActionMenusContext;\n", "import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { createPortal } from 'react-dom';\n\nimport { ActionMenuContainer, SelectableContainer } from '@splunk/dashboard-ui';\nimport type {\n    DataSourceMeta,\n    InputDefinition,\n    RootDataSourcesDefinition,\n    VisualizationDefinition,\n    LayoutItemType,\n} from '@splunk/dashboard-types';\n\nimport { useActionMenus } from '../contexts/ActionMenusContext';\n\nexport interface ActionMenuProps {\n    top?: number;\n    itemId?: string;\n\n    isSelected?: boolean;\n    showLastUpdated?: boolean;\n\n    dataSourceMeta?: DataSourceMeta;\n    dataSourceDefinitions?: RootDataSourcesDefinition;\n\n    actionMenuPortal?: React.MutableRefObject<HTMLDivElement | null>;\n    renderActionMenuInPortal?: boolean;\n\n    type: LayoutItemType;\n    itemDefinition?: InputDefinition | VisualizationDefinition;\n}\n\ntype ActionMenuWrapperProps = Pick<\n    ActionMenuProps,\n    'isSelected' | 'top' | 'renderActionMenuInPortal'\n>;\n\ntype useActionMenusWithDataProps = Pick<\n    ActionMenuProps,\n    'itemId' | 'dataSourceDefinitions' | 'type' | 'itemDefinition'\n>;\n\nconst ActionMenuWrapper = styled.div.attrs<ActionMenuWrapperProps>(\n    ({ top }) => {\n        return {\n            'data-test': 'action-menu-wrapper',\n            style: {\n                // removing 1 from the top makes the menu more accessible since there's no longer a gap between the item and the menu for it to lose focus\n                ...(top ? { top: `${top - 1}px` } : { bottom: 0 }),\n            },\n        };\n    }\n)<ActionMenuWrapperProps>`\n    visibility: ${({ isSelected }) => (isSelected ? 'visible' : 'hidden')};\n    transition: visibility 0.2s ease-in 0;\n\n    position: absolute;\n    right: 0;\n    width: fit-content;\n    height: fit-content;\n    pointer-events: ${({ isSelected }) => (isSelected ? 'all' : 'none')};\n    z-index: ${({ renderActionMenuInPortal }) =>\n        renderActionMenuInPortal ? 'undefined' : '9999'};\n\n    /* On hover of absolute-item (or menu portal) make the action menu visible */\n    div[data-test='absolute-item']:hover\n        + div[data-test='action-menu-portal']\n        > &,\n    & div[data-test='action-menus']:hover,\n    ${SelectableContainer}:hover & {\n        transition: visibility 0.2s ease-in 0.3s;\n        visibility: visible;\n        pointer-events: all;\n    }\n\n    // The :hover pseudo selector cannot be mocked during visual testing, so also\n    // support a data-test selector to trigger this state in storybook test cases\n    // but DO NOT add a transition duration for visual tests (reduces flakiness)\n    div[data-test='absolute-item'][data-test-hovered]\n        + div[data-test='action-menu-portal']\n        > &,\n    & div[data-test='action-menus'][data-test-hovered],\n    ${SelectableContainer}[data-test-hovered] & {\n        transition: visibility 0s;\n        visibility: visible;\n        pointer-events: all;\n    }\n`;\n\n// Helper hook to add additional props to the ActionMenu buttons\nconst useActionMenusWithData = ({\n    type,\n    itemId,\n    itemDefinition,\n    dataSourceDefinitions,\n}: useActionMenusWithDataProps) => {\n    // Action Menu Props\n    const actionMenus = useActionMenus();\n\n    return useMemo(() => {\n        return actionMenus.map((item) =>\n            React.cloneElement(item, {\n                type,\n                itemId,\n                itemDefinition,\n                dataSources: dataSourceDefinitions,\n            })\n        );\n    }, [type, itemId, actionMenus, dataSourceDefinitions, itemDefinition]);\n};\n\nexport const ActionMenu = ({\n    top,\n    itemId,\n    isSelected,\n    dataSourceMeta,\n    dataSourceDefinitions,\n    type,\n    itemDefinition,\n    showLastUpdated,\n    actionMenuPortal,\n    renderActionMenuInPortal,\n}: ActionMenuProps) => {\n    const useActionMenusWithDataProps = useMemo(\n        () => ({\n            type,\n            itemId,\n            itemDefinition,\n            dataSourceDefinitions,\n        }),\n        [type, itemId, itemDefinition, dataSourceDefinitions]\n    );\n    const buttonsWithData = useActionMenusWithData(useActionMenusWithDataProps);\n\n    const ActionMenuComponent = useMemo(() => {\n        return (\n            <ActionMenuWrapper\n                isSelected={isSelected}\n                top={top}\n                renderActionMenuInPortal={renderActionMenuInPortal}\n            >\n                <ActionMenuContainer\n                    actionButtons={buttonsWithData}\n                    lastUpdated={dataSourceMeta?.lastUpdated}\n                    status={dataSourceMeta?.status}\n                    isRealTimeSearch={dataSourceMeta?.isRealTimeSearch}\n                    showLastUpdated={showLastUpdated}\n                    itemId={itemId}\n                />\n            </ActionMenuWrapper>\n        );\n    }, [\n        buttonsWithData,\n        dataSourceMeta?.isRealTimeSearch,\n        dataSourceMeta?.lastUpdated,\n        dataSourceMeta?.status,\n        itemId,\n        isSelected,\n        showLastUpdated,\n        top,\n        renderActionMenuInPortal,\n    ]);\n\n    return actionMenuPortal?.current && renderActionMenuInPortal\n        ? createPortal(ActionMenuComponent, actionMenuPortal.current)\n        : ActionMenuComponent;\n};\n", "import React, { useMemo, type MutableRefObject } from 'react';\nimport type {\n    DataSourceDefinition,\n    DataSourceEventPayload,\n    InputDefinition,\n    LayoutItemType,\n    Mode,\n    VisualizationDefinition,\n} from '@splunk/dashboard-types';\nimport { useFeatureFlags, usePreset } from '@splunk/dashboard-context';\nimport { ActionMenu } from '../containers/ActionMenu';\n\n/**\n * canvasHeight - 40 is the closest a viz should be from bottom of canvas to\n * render action menu below viz.\n */\nconst minDistanceFromBottomCanvasForActionMenus = 40;\n\ninterface GetActionMenuPositionProps {\n    height?: number | string;\n    y: number;\n    canvasHeight: number;\n    shouldUsePortal: boolean;\n}\n\nexport const getActionMenuPosition = ({\n    height,\n    y,\n    canvasHeight,\n    shouldUsePortal,\n}: GetActionMenuPositionProps): number | undefined => {\n    if (typeof height !== 'number') {\n        return undefined;\n    }\n\n    // Bottom of the action menu to be rendered\n    const menuBottom = height + y;\n\n    // Bottom of the canvas\n    const canvasBottom =\n        canvasHeight - minDistanceFromBottomCanvasForActionMenus;\n\n    // Only render below the visualization when the action\n    // menu will not fall below the bottom of the canvas\n    if (menuBottom <= canvasBottom) {\n        // Menu can render below viz\n        return shouldUsePortal ? 1 : height + 1;\n    }\n\n    return undefined;\n};\n\nexport interface UseActionMenuProps {\n    itemId: string;\n    itemDefinition: VisualizationDefinition | InputDefinition;\n    layoutItemType: LayoutItemType;\n    portalRef?: MutableRefObject<HTMLDivElement | null>;\n    shouldUsePortal: boolean;\n    dataSourceMeta: DataSourceEventPayload['meta'];\n    dataSourceDefinitions: Record<string, DataSourceDefinition>;\n    isSelected: boolean;\n    menuPosition?: number;\n    mode?: Mode;\n}\n\nexport const useActionMenu = ({\n    itemId,\n    itemDefinition,\n    layoutItemType,\n    portalRef,\n    shouldUsePortal,\n    dataSourceMeta,\n    dataSourceDefinitions,\n    isSelected,\n    menuPosition,\n    mode = 'view',\n}: UseActionMenuProps) => {\n    const preset = usePreset();\n    const { showLastUpdated: lastUpdatedFeatureFlag } = useFeatureFlags();\n\n    /**\n     * Preset should have first say of whether the element should be enabled\n     * Then determine if user has enabled/disabled in definition\n     */\n    const useLastUpdated = useMemo(() => {\n        const presetFlags = preset.shouldDisplaySiblingContent(\n            itemDefinition.type,\n            layoutItemType\n        );\n\n        return (\n            lastUpdatedFeatureFlag &&\n            presetFlags?.showLastUpdated &&\n            itemDefinition.showLastUpdated\n        );\n    }, [\n        preset,\n        layoutItemType,\n        itemDefinition.type,\n        itemDefinition.showLastUpdated,\n        lastUpdatedFeatureFlag,\n    ]);\n\n    const shouldShowActionMenu = useMemo(\n        () => preset.shouldShowActionMenu({ mode, layoutItemType }),\n        [preset, mode, layoutItemType]\n    );\n\n    return useMemo(\n        () =>\n            shouldShowActionMenu ? (\n                <ActionMenu\n                    itemId={itemId}\n                    type={layoutItemType}\n                    top={menuPosition}\n                    isSelected={isSelected}\n                    showLastUpdated={useLastUpdated}\n                    dataSourceMeta={dataSourceMeta}\n                    dataSourceDefinitions={dataSourceDefinitions}\n                    itemDefinition={itemDefinition}\n                    actionMenuPortal={portalRef}\n                    renderActionMenuInPortal={shouldUsePortal}\n                />\n            ) : null,\n        [\n            shouldShowActionMenu,\n            portalRef,\n            shouldUsePortal,\n            dataSourceDefinitions,\n            dataSourceMeta,\n            itemId,\n            layoutItemType,\n            isSelected,\n            useLastUpdated,\n            itemDefinition,\n            menuPosition,\n        ]\n    );\n};\n", "import { useFeatureFlags } from '@splunk/dashboard-context';\nimport type {\n    InputDefinition,\n    VisualizationDefinition,\n} from '@splunk/dashboard-types';\n\nexport type UseCanItemBeHiddenArgs = {\n    itemDefinition: InputDefinition | VisualizationDefinition;\n};\n\n// Note: don't consider the editor mode. In view mode when this hook returns true\n// the component can be hidden. In edit mode when this hook returns true, the component\n// can have visual cues applied to indicate the show/hide functionality\nexport const useCanItemBeHidden = ({\n    itemDefinition,\n}: UseCanItemBeHiddenArgs): boolean => {\n    const { enableShowHide } = useFeatureFlags();\n    const { conditions, hideConditions, showConditions, hideWhenNoData } =\n        itemDefinition.containerOptions?.visibility ?? {};\n\n    if (!enableShowHide) {\n        return false;\n    }\n\n    if (\n        itemDefinition.containerOptions?.visibility &&\n        'hideInViewMode' in itemDefinition.containerOptions.visibility &&\n        !!itemDefinition.containerOptions.visibility?.hideInViewMode\n    ) {\n        return true;\n    }\n\n    // Items can be hidden when featureFlag is enabled, and\n    // hideWhenNoData = true or there are conditions associated with the visibility of item\n    // keep support for legacy `definition.hideWhenNoData`\n    return (\n        !!hideWhenNoData ||\n        !!itemDefinition.hideWhenNoData ||\n        !!conditions?.length ||\n        !!hideConditions?.length ||\n        !!showConditions?.length\n    );\n};\n", "\nimport * as defaultImport from \"react-full-screen\";\nexport * from \"react-full-screen\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "\nimport * as defaultImport from \"@splunk/dashboard-telemetry\";\nexport * from \"@splunk/dashboard-telemetry\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { useLayoutEffect, useEffect, useState } from 'react';\n\nimport {\n    useDispatch,\n    blockItemResizing,\n    useIsFirstRender,\n    visualizationFirstRender,\n} from '@splunk/dashboard-state';\nimport { useTelemetryApi } from '@splunk/dashboard-telemetry';\nimport { hashString } from '@splunk/dashboard-utils';\n\ninterface UseVizTelemetryProps {\n    width: number | string;\n    height?: number | string;\n    id: string;\n    type: string;\n    loading: boolean;\n}\n\nexport const useVizTelemetry = ({\n    width,\n    height,\n    id,\n    type,\n    loading,\n}: UseVizTelemetryProps) => {\n    const [timerCreated, setTimerCreated] = useState(false);\n    const telemetry = useTelemetryApi();\n    const dispatch = useDispatch();\n\n    const isFirstRender = useIsFirstRender();\n    if (isFirstRender) {\n        dispatch(visualizationFirstRender({ id, type }));\n    }\n\n    useLayoutEffect(() => {\n        // Needs to be in a useLayoutEffect due to react batching and dom event handler logic\n        if (width && height) {\n            dispatch(blockItemResizing({ vizType: type }));\n        }\n    }, [dispatch, height, type, width]);\n\n    // Unique timerId for performanceCollector to create timer with\n    const timerId = `Visualization - ${type} - ${hashString(\n        id\n    )} - Time to Interactive`;\n\n    useEffect(() => {\n        const initialPayload = {\n            pageAction: 'performance.createTimer',\n            metadata: {\n                timerId,\n                sourceElement: 'TimeRangePicker',\n                heroElement: timerId,\n                currentTime: performance.now(),\n            },\n        };\n        // Creates an initial timer object when this visualization is initially mounted\n        // Source element is the Time Range Picker, because we want to track time between\n        // the time range change and this visualization updating\n        if (!timerCreated) {\n            telemetry.emit(initialPayload);\n            setTimerCreated(true);\n        }\n    }, [telemetry, timerCreated, timerId]);\n\n    useEffect(() => {\n        const actionPayload = {\n            pageAction: 'performance.mark',\n            metadata: {\n                timerId,\n                markInformation: timerId,\n                currentTime: performance.now(),\n            },\n        };\n        const initialPayload = {\n            pageAction: 'performance.createTimer',\n            metadata: {\n                timerId,\n                sourceElement: 'TimeRangePicker',\n                heroElement: timerId,\n                currentTime: performance.now(),\n            },\n        };\n\n        // After loading is finished, we emit a mark indicating that this visualization\n        // has finished updating. We create a new timer since the original timer's job is\n        // finished; a future update to time range picker and visualization updating\n        // will have a fresh timer object to act upon, and cycle continues.\n        if (!loading && timerCreated) {\n            telemetry.emit(actionPayload);\n            telemetry.emit(initialPayload);\n        }\n    }, [telemetry, loading, timerCreated, timerId]);\n};\n", "\nimport * as defaultImport from \"@splunk/datasource-utils\";\nexport * from \"@splunk/datasource-utils\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import { useMemo } from 'react';\nimport type { DataSourceEventPayload } from '@splunk/dashboard-types';\nimport { NO_RESULTS_MSG } from '@splunk/dashboard-state';\nimport { DS_STATUS } from '@splunk/datasource-utils';\n\nexport const useStatusMessage = ({\n    dataSource,\n}: {\n    dataSource?: DataSourceEventPayload;\n}) => {\n    const errorMessage = dataSource?.error?.message;\n    const warningMessage = dataSource?.meta?.serverLog?.[0]?.message;\n    let message = errorMessage || warningMessage || '';\n    const status = dataSource?.meta?.status ?? '';\n    const noData = dataSource?.data?.columns?.length === 0;\n    const noSearchResults = status === DS_STATUS.DONE && noData;\n    if (noSearchResults) {\n        message = NO_RESULTS_MSG;\n    }\n    const showWaitingForInputPlaceholder = !!(\n        noSearchResults ||\n        errorMessage ||\n        (noData && warningMessage)\n    );\n\n    return useMemo(\n        () => ({ message, showWaitingForInputPlaceholder }),\n        [message, showWaitingForInputPlaceholder]\n    );\n};\n", "import React, { useMemo, useEffect, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { FullScreen, useFullScreenHandle } from 'react-full-screen';\nimport type { VisualizationDefinition } from '@splunk/dashboard-types';\nimport {\n    sanitizeColor,\n    useRiskySearchToast,\n    VisualizationContent,\n    VisualizationWaitingForInput,\n} from '@splunk/dashboard-ui';\nimport { toPx } from '@splunk/dashboard-utils';\nimport {\n    setFullscreenItem,\n    triggerEvent,\n    updateVizOptions,\n    useDispatch,\n} from '@splunk/dashboard-state';\nimport {\n    useApiRegistry,\n    useCoreOverrides,\n    useEventRegistry,\n    useFeatureFlags,\n    usePreset,\n} from '@splunk/dashboard-context';\nimport type { ItemContainerProps } from '../types/ItemContainer';\nimport { useVizTelemetry } from '../hooks/useVizTelemetry';\nimport { useStatusMessage } from '../hooks/useStatusMessage';\n\nexport interface VisualizationContainerProps extends ItemContainerProps {\n    itemDefinition: VisualizationDefinition;\n    isFullscreen: boolean;\n    onSelected: (\n        e: React.MouseEvent,\n        visualizationIds: { id: string; type: string }[]\n    ) => void;\n}\n\ninterface StyledFullScreenProps {\n    width: string | number;\n    height?: string | number;\n}\nconst StyledFullScreen = styled(FullScreen)<StyledFullScreenProps>`\n    height: ${(props) => toPx(props.height)};\n    width: ${(props) => toPx(props.width)};\n`;\n\nconst empty: Record<string, unknown> = {};\n/**\n * Visualization wrapper that wires up events and data for viz content.\n */\n\nconst VisualizationContainer = ({\n    id,\n    mode,\n    itemDefinition,\n    height,\n    width,\n    loading,\n    refresh,\n    control,\n    dataSources,\n    updateRequestParams,\n    onSelected,\n    isFullscreen,\n}: VisualizationContainerProps): JSX.Element => {\n    const dispatch = useDispatch();\n\n    const onExitFullscreen = useCallback(\n        () => dispatch(setFullscreenItem(null)),\n        [dispatch]\n    );\n    const eventRegistry = useEventRegistry();\n    const onEventTrigger = useCallback(\n        ({\n            type: eventType,\n            originalEvent,\n            payload,\n        }: {\n            type: string;\n            originalEvent: MouseEvent;\n            payload: Record<string, unknown>;\n        }) => {\n            const eventId = eventRegistry.registerEvent(originalEvent);\n            dispatch(triggerEvent(id, eventType, payload, eventId));\n        },\n        [dispatch, eventRegistry, id]\n    );\n    const onOptionsChange = useCallback(\n        (newOptions?: Record<string, unknown>) =>\n            dispatch(updateVizOptions(id, newOptions)),\n        [dispatch, id]\n    );\n\n    const apiRegistry = useApiRegistry();\n    const fullscreenHandle = useFullScreenHandle();\n    const { enter: enterFullscreen, node: vizRef } = fullscreenHandle;\n\n    const vizApi = useMemo(\n        () => ({\n            getDomElement: () => vizRef.current,\n        }),\n        [vizRef]\n    );\n\n    useEffect(() => {\n        if (!apiRegistry.getVisualizationApi(id)) {\n            apiRegistry.registerVisualizationApi(id, vizApi);\n        }\n        return () => {\n            apiRegistry.removeVisualizationApi(id);\n        };\n    }, [apiRegistry, id, vizApi]);\n\n    // Register refresh to api on mount, unregister on unmount\n    useEffect(() => {\n        apiRegistry.registerVisualizationActionsApi(id, { refresh, control });\n\n        return () => {\n            apiRegistry.removeVisualizationActionsApi(id);\n        };\n    }, [apiRegistry, id, refresh, control]);\n\n    const registerApi = useCallback(\n        (ref: Record<string, unknown>) => {\n            apiRegistry.registerVisualizationApi(id, { ...ref, ...vizApi });\n        },\n        [apiRegistry, id, vizApi]\n    );\n\n    const handleToggleFullscreen = useCallback(\n        (isFull?: boolean) => {\n            if (isFullscreen && !isFull) {\n                onExitFullscreen();\n            }\n        },\n        [isFullscreen, onExitFullscreen]\n    );\n\n    // enter fullscreen if initial render includes a fullscreen prop\n    useEffect(() => {\n        if (isFullscreen) {\n            enterFullscreen();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    /**\n     * Viz/Preset should have first say of whether the progress bar/title/description element should be enabled\n     * Then determine if user has enabled/disabled in definition\n     */\n    const preset = usePreset();\n    const { message, showWaitingForInputPlaceholder } = useStatusMessage({\n        dataSource: dataSources?.primary,\n    });\n    const { showProgressBar: progressFeatureFlag } = useFeatureFlags();\n    const visualizationDefinition = useMemo(() => {\n        const presetFlags = preset?.shouldDisplayVisualizationSiblingContent(\n            itemDefinition.type\n        );\n        return {\n            ...itemDefinition,\n            showProgressBar:\n                !!itemDefinition.showProgressBar &&\n                progressFeatureFlag &&\n                presetFlags?.showProgressBar &&\n                !showWaitingForInputPlaceholder,\n            title: presetFlags.showTitleAndDescription\n                ? itemDefinition.title\n                : undefined,\n            description: presetFlags.showTitleAndDescription\n                ? itemDefinition.description\n                : undefined,\n        };\n    }, [\n        itemDefinition,\n        preset,\n        progressFeatureFlag,\n        showWaitingForInputPlaceholder,\n    ]);\n\n    const { waitingForInput: WaitingForInput = VisualizationWaitingForInput } =\n        useCoreOverrides();\n\n    useVizTelemetry({ width, height, id, loading, type: itemDefinition.type });\n\n    // Since we replace the viz with the placeholder when there is a datasource error, we never allow the HOC in the preset to do this for us.\n    useRiskySearchToast({ dataSource: dataSources?.primary });\n\n    const [computedProps, setComputedProps] = useState<{\n        backgroundColor?: string;\n    }>({});\n    useEffect(() => {\n        setComputedProps({});\n    }, [visualizationDefinition.type]);\n\n    const GraphicalChart = useMemo(() => {\n        const { eventHandlers } = visualizationDefinition;\n\n        const props = {\n            ...visualizationDefinition,\n            // height and width props will be set by VisualizationContent\n            width: 'inherit',\n            hasEventHandlers: eventHandlers && eventHandlers.length > 0,\n            dataSources,\n            loading,\n            onRequestParamsChange: updateRequestParams,\n            onComputedProps: setComputedProps,\n            id,\n            mode,\n            onEventTrigger,\n            vizActionHandlerRef: registerApi,\n            visualizationApiRef: registerApi,\n            onOptionsChange,\n            // need to convert the array of string to an array of objects.\n            onSelected: (e: React.MouseEvent, visualizationIds: string[]) =>\n                onSelected(\n                    e,\n                    visualizationIds.map((vizId: string) => ({\n                        id: vizId,\n                        type: 'block',\n                    }))\n                ),\n            isFullscreen,\n        };\n        return preset.createVisualization(visualizationDefinition.type, props);\n    }, [\n        visualizationDefinition,\n        dataSources,\n        loading,\n        updateRequestParams,\n        id,\n        mode,\n        onEventTrigger,\n        registerApi,\n        onOptionsChange,\n        isFullscreen,\n        preset,\n        onSelected,\n    ]);\n\n    // Memoize rendering the viz\n    const Placeholder = useMemo(() => {\n        const { type, options = empty } = visualizationDefinition;\n        const { backgroundColor } = options;\n        let bgColor =\n            computedProps.backgroundColor ||\n            (backgroundColor as string) ||\n            null;\n        if (bgColor) {\n            bgColor = sanitizeColor(bgColor);\n        }\n        const PlaceholderIcon = preset.getPlaceholderIcon(type);\n        return (\n            <WaitingForInput\n                width=\"initial\"\n                dataSource={dataSources.primary}\n                message={message}\n                backgroundColor={bgColor}\n                PlaceholderIcon={PlaceholderIcon}\n            />\n        );\n    }, [\n        visualizationDefinition,\n        computedProps.backgroundColor,\n        preset,\n        WaitingForInput,\n        dataSources.primary,\n        message,\n    ]);\n\n    return (\n        <StyledFullScreen\n            handle={fullscreenHandle}\n            onChange={handleToggleFullscreen}\n            width={width}\n            height={height}\n            className=\"styled-fullscreen\"\n        >\n            <VisualizationContent\n                id={id}\n                visualizationDefinition={visualizationDefinition}\n                height={height}\n                width={width}\n                isFullscreen={isFullscreen}\n                dataSources={dataSources}\n                computedProps={computedProps}\n            >\n                {showWaitingForInputPlaceholder ? Placeholder : GraphicalChart}\n            </VisualizationContent>\n        </StyledFullScreen>\n    );\n};\n\nexport default VisualizationContainer;\n", "import React, { useMemo, useEffect, useCallback } from 'react';\nimport type { Property } from 'csstype';\nimport { isEmpty } from 'lodash';\nimport styled from 'styled-components';\nimport type { useSortable } from '@dnd-kit/sortable';\nimport {\n    ERROR_LEVEL_INFO,\n    ERROR_LEVEL_ERROR,\n    WAITING_FOR_INPUT_MSG,\n    useSelector,\n    selectInputValue,\n    useDispatch,\n    inputValueChanged,\n} from '@splunk/dashboard-state';\nimport {\n    type DataSources,\n    sanitizeColor,\n    type UseSubscribeToSearchesReturnType,\n} from '@splunk/dashboard-ui';\nimport type { InputDefinition, InputAlignment } from '@splunk/dashboard-types';\nimport {\n    usePreset,\n    useApiRegistry,\n    useEventRegistry,\n} from '@splunk/dashboard-context';\nimport { useCanItemBeHidden } from '../hooks/useCanItemBeHidden';\nimport type { ItemContainerProps } from '../types/ItemContainer';\n\n// Map the top/center/bottom alignment values to CSS justify-content property\nconst AlignmentToJustifyMap: {\n    [key in InputAlignment]: Property.JustifyContent;\n} = {\n    top: 'start',\n    center: 'center',\n    bottom: 'end',\n};\n\ninterface OnCanvasWrapperProps {\n    alignment: InputAlignment;\n    backgroundColor?: string;\n}\n\nconst OnCanvasWrapper = styled.div.attrs(() => ({\n    'data-test': 'input-canvas-wrapper',\n}))<OnCanvasWrapperProps>`\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    justify-content: ${(props) => AlignmentToJustifyMap[props.alignment]};\n    background-color: ${(props) => props.backgroundColor};\n`;\n\ntype ItemProps = Pick<\n    ItemContainerProps,\n    'id' | 'height' | 'mode' | 'itemDefinition'\n> &\n    Partial<UseSubscribeToSearchesReturnType> & { width?: number | string };\n\nexport interface InputContentProps extends ItemProps {\n    itemDefinition: InputDefinition;\n    isSelected: boolean;\n    isOnCanvas?: boolean;\n    attributes?: Partial<ReturnType<typeof useSortable>['attributes']>;\n    listeners?: ReturnType<typeof useSortable>['listeners'];\n    // TO-DO: unify onRemove with the types used in enhancer.tsx\n    onRemove?: (id: string) => void;\n}\n\nconst empty = {};\n\n/**\n * compute isError, errorMessage, isDisabled, disabledMessage based on whether\n * primary dataSource contains error (level: info/error)\n * @method getErrorDisabledStates\n * @param {Object} inputData\n * @param {Object} inputData.dataSources dataSources containing primary dataSource\n * @returns {Object}\n */\nexport const getErrorDisabledStates = ({\n    dataSources,\n}: {\n    dataSources?: DataSources;\n}) => {\n    const errorLevel = dataSources?.primary?.error?.level;\n    const message = dataSources?.primary?.error?.message ?? '';\n    // Search is waiting for unresolved tokens\n    if (errorLevel === ERROR_LEVEL_INFO) {\n        return {\n            isDisabled: true,\n            disabledMessage: message || WAITING_FOR_INPUT_MSG,\n        };\n    }\n    if (errorLevel === ERROR_LEVEL_ERROR) {\n        return { isError: true, errorMessage: message };\n    }\n    return {};\n};\n\n/**\n * Display input content\n * @param {Object} props\n * @param {Object} props.inputProps props required by the input to render\n * @param {Boolean} props.loading indicates whether datasource is still fetching data and hasn't had an error\n * @param {Object} props.dataSources primary dataSource (if any) used by the input\n * @param {String} props.id input id\n * @param {String} props.type input type\n * @param {Function} props.onSelect callback to update the store when input is selected\n */\nexport default ({\n    itemDefinition,\n    loading = false,\n    dataSources = {},\n    id,\n    isSelected,\n    refresh,\n    control,\n    mode,\n    onRemove,\n    width,\n    height,\n    attributes,\n    listeners,\n    isOnCanvas = false,\n}: InputContentProps) => {\n    const apiRegistry = useApiRegistry();\n    const preset = usePreset();\n    const eventRegistry = useEventRegistry();\n    const dispatch = useDispatch();\n\n    const {\n        type,\n        title,\n        options = empty,\n        encoding = empty,\n        context = empty,\n        containerOptions = empty,\n    } = itemDefinition;\n\n    const input = preset.findInput(type);\n    const inputStaticDef = useMemo(\n        () => ({\n            options,\n            context,\n        }),\n        [context, options]\n    );\n\n    const handleValueChange = useCallback(\n        (e: MouseEvent, newValue: string | string[]) => {\n            const eventId = eventRegistry.registerEvent(e);\n            dispatch(inputValueChanged({ id, newValue, eventId, isOnCanvas }));\n        },\n        [dispatch, eventRegistry, id, isOnCanvas]\n    );\n\n    const registerApi = useCallback(\n        (ref: HTMLDivElement) => {\n            apiRegistry.registerInputApi(id, ref);\n        },\n        [apiRegistry, id]\n    );\n\n    useEffect(() => {\n        return () => {\n            apiRegistry.removeInputApi(id);\n        };\n    }, [apiRegistry, id]);\n\n    // Register refresh to api on mount, unregister on unmount\n    useEffect(() => {\n        if (refresh && control) {\n            apiRegistry.registerInputActionsApi(id, { refresh, control });\n        }\n        return () => {\n            apiRegistry.removeInputActionsApi(id);\n        };\n    }, [apiRegistry, id, refresh, control]);\n\n    // check whether the input dataSource contains search errors\n    const {\n        isError: dsError = false,\n        errorMessage: dsErrorMessage = '',\n        isDisabled = false,\n        disabledMessage = '',\n    } = useMemo(\n        () =>\n            getErrorDisabledStates({\n                dataSources,\n            }),\n        [dataSources]\n    );\n\n    // check whether the static input config (options/context) contain validation errors\n    const { errorMessages: inputErrorMessages } = useMemo(() => {\n        const validate = input?.validate;\n        return typeof validate === 'function'\n            ? validate(inputStaticDef)\n            : { errorMessages: [] };\n    }, [inputStaticDef, input]);\n\n    const value = useSelector((state) => selectInputValue(state, id));\n\n    const canBeHidden = useCanItemBeHidden({ itemDefinition });\n\n    // Generate final props passed to input\n    const props = useMemo(\n        () => ({\n            id,\n            key: id,\n            loading,\n            title,\n            dataSources,\n            encoding,\n            context,\n            options,\n            isError: dsError || !isEmpty(inputErrorMessages), // dataSource error take precedence over input options error\n            errorMessage: dsErrorMessage || inputErrorMessages.join(' '), // TODO: refactor tooltip to display multiline errors\n            isDisabled,\n            disabledMessage,\n            value,\n            isSelected,\n            inputApiRef: registerApi,\n            onRemove,\n            onValueChange: handleValueChange,\n            mode,\n            width,\n            height,\n            isOnCanvas,\n            canBeHidden,\n            attributes,\n            listeners,\n            containerOptions,\n        }),\n        [\n            attributes,\n            listeners,\n            id,\n            loading,\n            title,\n            dataSources,\n            encoding,\n            context,\n            options,\n            dsError,\n            inputErrorMessages,\n            dsErrorMessage,\n            isDisabled,\n            disabledMessage,\n            value,\n            isSelected,\n            registerApi,\n            onRemove,\n            handleValueChange,\n            mode,\n            width,\n            height,\n            isOnCanvas,\n            canBeHidden,\n            containerOptions,\n        ]\n    );\n\n    const Input = useMemo(\n        () => preset.createInput(type, props),\n        [preset, type, props]\n    );\n\n    const alignment: InputAlignment = itemDefinition?.canvasAlignment ?? 'top';\n    const backgroundColor = itemDefinition?.options?.backgroundColor\n        ? sanitizeColor(itemDefinition.options.backgroundColor as string)\n        : null;\n    const bgColor = backgroundColor || 'transparent';\n\n    return isOnCanvas ? (\n        <OnCanvasWrapper alignment={alignment} backgroundColor={bgColor}>\n            {Input}\n        </OnCanvasWrapper>\n    ) : (\n        Input\n    );\n};\n", "import styled from 'styled-components';\nimport type { CornerRadius } from '@splunk/dashboard-types';\nimport { toPx } from '@splunk/dashboard-utils';\n\ninterface CornerRadiusContainerProps {\n    cornerRadius?: CornerRadius;\n}\n\nconst CornerRadiusContainer = styled.div<CornerRadiusContainerProps>`\n    height: 100%;\n    width: 100%;\n    // If border radius is unset, then visualizations can render content outside of the container.\n    // If border radius is set, overflow:hidden allows for rounded corners\n    overflow: ${({ cornerRadius }) =>\n        cornerRadius === undefined ? null : 'hidden'};\n    border-radius: ${({ cornerRadius }) =>\n        cornerRadius === undefined\n            ? null\n            : `${toPx(cornerRadius[0])}\n              ${toPx(cornerRadius[1])}\n              ${toPx(cornerRadius[2])}\n              ${toPx(cornerRadius[3])}`};\n`;\n\nexport default CornerRadiusContainer;\n", "import { useEffect, useMemo } from 'react';\nimport type { DataSources } from '@splunk/dashboard-ui';\nimport {\n    useIsFirstRender,\n    useLiveAnnouncement,\n    usePreset,\n    usePrevious,\n} from '@splunk/dashboard-context';\nimport type {\n    InputDefinition,\n    VisualizationDefinition,\n} from '@splunk/dashboard-types';\n\nexport const useChangeAnnouncer = ({\n    id,\n    itemDefinition,\n    dataSources,\n}: {\n    id: string;\n    itemDefinition: VisualizationDefinition | InputDefinition;\n    dataSources: DataSources | null;\n}) => {\n    const preset = usePreset();\n    const { announceVisualizationChange } = useLiveAnnouncement();\n    const isFirstRender = useIsFirstRender();\n    const previousDefinition = usePrevious(itemDefinition);\n    const previousDataSources = usePrevious(dataSources);\n\n    const itemShouldAnnounceChange = useMemo(\n        () => preset.getItemShouldAnnounceChange(itemDefinition.type),\n        [preset, itemDefinition.type]\n    );\n\n    useEffect(() => {\n        if (isFirstRender) {\n            return;\n        }\n\n        if (\n            itemShouldAnnounceChange({\n                newDefinition: itemDefinition,\n                previousDefinition,\n                newDataSources: dataSources,\n                previousDataSources,\n            })\n        ) {\n            announceVisualizationChange(id, itemDefinition.title);\n        }\n    }, [\n        isFirstRender,\n        id,\n        itemDefinition,\n        previousDefinition,\n        itemShouldAnnounceChange,\n        announceVisualizationChange,\n        dataSources,\n        previousDataSources,\n    ]);\n};\n", "import React, { useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport type {\n    DataSourceBindingMap,\n    LayoutItemType,\n} from '@splunk/dashboard-types';\nimport {\n    ErrorBoundary,\n    EVENT_MOUSE_DOWN_ON_VIZ_WITH_HANDLE,\n    getBorderStyle,\n    Message,\n    SelectableContainer,\n    useDragHandleComponent,\n    useSubscribeToSearches,\n} from '@splunk/dashboard-ui';\nimport {\n    makeSelectIsSelected,\n    selectAreMultipleVizSelected,\n    selectDataSourceDefinitionFactory,\n    selectFullscreenElement,\n    selectItemDefinitionFactory,\n    selectMode,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport {\n    type LayersInfo,\n    useActionMenuRef,\n    useLayoutLayers,\n    useMouseEventsContext,\n    usePreset,\n} from '@splunk/dashboard-context';\n\nimport Button from '@splunk/react-ui/Button';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport { getHasDrilldown } from '../utils/visualization';\nimport { getActionMenuPosition, useActionMenu } from '../hooks/useActionMenu';\nimport { useCanItemBeHidden } from '../hooks/useCanItemBeHidden';\n\nimport VizContainer from './VisualizationContainer';\nimport InputContent from './InputContent';\nimport CornerRadiusContainer from '../components/CornerRadiusContainer';\nimport { useChangeAnnouncer } from '../hooks/useChangeAnnouncer';\n\nconst StyledSkipButton = styled(Button)`\n    position: absolute;\n    margin: 8px;\n    opacity: 0;\n    pointer-events: none;\n\n    &:focus {\n        opacity: 1;\n        pointer-events: auto;\n    }\n`;\nconst empty = {};\n\n// TODO: width and height also become HTML attributes, and we may want these to be hidden, on the other hand, we add an inline style with these, so it really doesn't matter\ninterface ItemWrapperProps {\n    width: string | number;\n    height?: string | number;\n    layoutItemType: LayoutItemType;\n    itemId: string;\n    $itemType: string;\n    children: React.ReactNode;\n}\n\nconst toAttrs = ({\n    itemId,\n    $itemType,\n    layoutItemType,\n    width,\n    height,\n}: Omit<ItemWrapperProps, 'children'>) => {\n    let base: Record<string, unknown>;\n    if (layoutItemType === 'input') {\n        base = {\n            'data-test': 'input-item',\n            'data-input-type': $itemType,\n            'data-input-id': itemId,\n        };\n    } else {\n        base = {\n            'data-test': 'viz-item',\n            'data-viz-type': $itemType,\n            'data-id': itemId,\n        };\n    }\n\n    base.style = height ? { width, height } : { width };\n\n    return base;\n};\n\ntype ItemProps = Omit<ItemWrapperProps, 'height'>;\nconst Item = styled.div.attrs<ItemProps>((props) => toAttrs(props))<ItemProps>`\n    position: relative;\n    pointer-events: auto;\n`;\n\ntype FixSizeItemProps = Required<ItemWrapperProps>;\nconst FixSizeItem = styled.div.attrs<FixSizeItemProps>((props) =>\n    toAttrs(props)\n)<FixSizeItemProps>`\n    flex-direction: column;\n    pointer-events: auto;\n`;\n\nconst ItemWrapper = React.memo(\n    ({\n        width,\n        height,\n        children,\n        itemId,\n        $itemType,\n        layoutItemType,\n    }: ItemWrapperProps) => {\n        if (!height) {\n            return (\n                <Item\n                    width={width}\n                    itemId={itemId}\n                    $itemType={$itemType}\n                    layoutItemType={layoutItemType}\n                >\n                    {children}\n                </Item>\n            );\n        }\n        return (\n            <FixSizeItem\n                width={width}\n                height={height}\n                itemId={itemId}\n                $itemType={$itemType}\n                layoutItemType={layoutItemType}\n            >\n                {children}\n            </FixSizeItem>\n        );\n    }\n);\n\n// Wrapper for the ProgressBar, Visualization, Title, and Status\ninterface ItemLayerProps {\n    zIndex?: number;\n}\nconst ItemLayer = styled.div.attrs<ItemLayerProps>(() => ({\n    'data-test': 'item-layer',\n}))<ItemLayerProps>`\n    z-index: ${(props) => props.zIndex};\n    height: 100%;\n`;\n\nexport interface BaseItemContainerProps {\n    id: string;\n    width: string | number;\n    height?: string | number;\n    y: number;\n    canvasHeight: number;\n    // TODO: don't pass a flag and an optional parameter. If the portal is provided, use it\n    renderActionMenuInPortal: boolean;\n    actionMenuPortal?: React.MutableRefObject<HTMLDivElement | null>;\n    dragHandlePortal?: React.MutableRefObject<HTMLDivElement | null>;\n    layoutItemType?: LayoutItemType;\n    // TODO: investigate - can this be handled with useDispatch so it doesn't need to drill through 3 layers?\n    onSelected: (\n        e: React.MouseEvent,\n        visualizationIds: { id: string; type: string }[]\n    ) => void;\n}\n\nexport const BaseItemContainer = ({\n    id,\n    width,\n    height,\n    layoutItemType = 'block',\n    y,\n    canvasHeight,\n    renderActionMenuInPortal,\n    actionMenuPortal,\n    dragHandlePortal,\n    onSelected,\n}: BaseItemContainerProps) => {\n    const preset = usePreset();\n\n    // Selector factory for checking if a vizId is in global state selectedItems array\n    const selectIsSelected = useMemo(makeSelectIsSelected, []);\n    const isSelected = useSelector((state) => selectIsSelected(state, id));\n    const isMultiSelect = useSelector(selectAreMultipleVizSelected);\n\n    const mode = useSelector(selectMode);\n    const isFullscreen = useSelector(selectFullscreenElement) === id;\n    const containerWidth = isFullscreen ? '100vw' : width;\n    const containerHeight = isFullscreen ? '100vh' : height;\n\n    const layerData = useLayoutLayers();\n    const { layer: itemLayer, selection: selectionLayer } = useMemo<\n        Partial<LayersInfo>\n    >(() => layerData?.[id] ?? (empty as Partial<LayersInfo>), [layerData, id]);\n\n    const selectItemDefinition = useMemo(\n        () => selectItemDefinitionFactory(layoutItemType)(),\n        [layoutItemType]\n    );\n    const selectDSDef = useMemo(\n        () => selectDataSourceDefinitionFactory(layoutItemType)(),\n        [layoutItemType]\n    );\n\n    const itemDefinition = useSelector((state) =>\n        selectItemDefinition(state, id)\n    );\n\n    const dataSourceDefinitions = useSelector((state) =>\n        selectDSDef(state, id)\n    );\n\n    const itemType = itemDefinition.type;\n    const dataSourceBindings: DataSourceBindingMap =\n        itemDefinition.dataSources ?? empty;\n\n    const canBeHidden = useCanItemBeHidden({ itemDefinition });\n    const radius = isFullscreen ? undefined : itemDefinition.cornerRadius;\n\n    const hasDrilldown = getHasDrilldown(itemDefinition.eventHandlers);\n    const outlineStyle = getBorderStyle({\n        isSelected,\n        mode,\n        hasDrilldown,\n        canBeHidden,\n        layoutItemType,\n    });\n\n    const { loading, dataSources, refresh, control, updateRequestParams } =\n        useSubscribeToSearches({\n            consumerId: id,\n            bindings: dataSourceBindings,\n        });\n\n    useChangeAnnouncer({\n        id,\n        itemDefinition,\n        dataSources: loading ? null : dataSources,\n    });\n\n    const actionMenuPosition = getActionMenuPosition({\n        height,\n        y,\n        canvasHeight,\n        shouldUsePortal: renderActionMenuInPortal,\n    });\n    const actionMenu = useActionMenu({\n        itemId: id,\n        itemDefinition,\n        layoutItemType,\n        portalRef: actionMenuPortal,\n        shouldUsePortal: renderActionMenuInPortal,\n        dataSourceMeta: dataSources?.primary?.meta,\n        dataSourceDefinitions,\n        isSelected,\n        menuPosition: actionMenuPosition,\n        mode,\n    });\n\n    const handleError = useCallback(\n        (message: string) => <Message level=\"error\" message={message} />,\n        []\n    );\n\n    const shouldShowDragHandle =\n        mode === 'edit' && preset.shouldShowDragHandle(itemType);\n\n    const DragHandle = useDragHandleComponent({\n        id,\n        shouldShowDragHandle,\n        type: layoutItemType,\n        portalRef: dragHandlePortal,\n    });\n\n    const { setIsMouseDownOnItemWithHandle } = useMouseEventsContext();\n\n    const handleMouseDown = useCallback<React.MouseEventHandler>(\n        (event) => {\n            if (shouldShowDragHandle) {\n                // any click in the viz should not bubble up to canvas\n                //   can only move viz via drag handle now\n                setIsMouseDownOnItemWithHandle(true);\n\n                // We still want ability to select a viz. This is the case where\n                //   we select viz but do not setPosition and thus it can't be moved\n                const newEvent = new CustomEvent(\n                    EVENT_MOUSE_DOWN_ON_VIZ_WITH_HANDLE,\n                    {\n                        detail: {\n                            vizId: id,\n                            initialEvent: event,\n                            type: layoutItemType,\n                        },\n                    }\n                );\n                document.dispatchEvent(newEvent);\n            }\n        },\n        [\n            shouldShowDragHandle,\n            setIsMouseDownOnItemWithHandle,\n            id,\n            layoutItemType,\n        ]\n    );\n\n    const ItemContainer = useMemo(() => {\n        const commonProps = {\n            id,\n            width,\n            height,\n            mode,\n            itemDefinition,\n            loading,\n            refresh,\n            control,\n            updateRequestParams,\n            dataSources,\n        };\n        if (layoutItemType === 'block') {\n            return (\n                <VizContainer\n                    {...commonProps}\n                    isFullscreen={isFullscreen}\n                    onSelected={onSelected}\n                />\n            );\n        }\n\n        return (\n            <InputContent\n                {...commonProps}\n                isSelected={isSelected && !isMultiSelect}\n                isOnCanvas\n            />\n        );\n    }, [\n        dataSources,\n        height,\n        id,\n        isFullscreen,\n        isSelected,\n        itemDefinition,\n        layoutItemType,\n        loading,\n        mode,\n        onSelected,\n        refresh,\n        control,\n        updateRequestParams,\n        width,\n        isMultiSelect,\n    ]);\n\n    const actionMenuRef = useActionMenuRef(id);\n\n    const skipToActionMenu = useCallback(() => {\n        const focusable =\n            actionMenuRef?.current?.querySelectorAll<HTMLButtonElement>(\n                `button:not([disabled])`\n            );\n\n        if (focusable && focusable.length > 0) {\n            focusable[0].focus();\n        }\n    }, [actionMenuRef]);\n\n    return (\n        <ErrorBoundary render={handleError}>\n            <ItemWrapper\n                width={width}\n                height={height}\n                layoutItemType={layoutItemType}\n                $itemType={itemType}\n                itemId={id}\n            >\n                <SelectableContainer\n                    itemId={id}\n                    width={containerWidth}\n                    height={containerHeight}\n                    outlineStyle={outlineStyle}\n                    onMouseDown={handleMouseDown}\n                    zIndex={selectionLayer}\n                    canBeHidden={mode === 'edit' && canBeHidden}\n                    tabIndex={0}\n                >\n                    {preset.shouldShowSkipButton(itemType) && (\n                        <StyledSkipButton\n                            appearance=\"primary\"\n                            onClick={skipToActionMenu}\n                            data-test=\"skip-button\"\n                        >\n                            {_('Skip to action menu')}\n                        </StyledSkipButton>\n                    )}\n                    <ItemLayer zIndex={itemLayer}>\n                        {DragHandle}\n                        <CornerRadiusContainer\n                            cornerRadius={radius}\n                            data-test=\"corner-radius-container\"\n                        >\n                            {ItemContainer}\n                        </CornerRadiusContainer>\n                    </ItemLayer>\n                    {!isMultiSelect && actionMenu}\n                </SelectableContainer>\n            </ItemWrapper>\n        </ErrorBoundary>\n    );\n};\n", "import React, { useCallback, useMemo } from 'react';\nimport type {\n    Coordinate,\n    RootDataSourcesDefinition,\n    VisualizationDefinition,\n    VizProps,\n} from '@splunk/dashboard-types';\nimport { noop } from '@splunk/dashboard-utils';\nimport { useSubscribeToSearches } from '@splunk/dashboard-ui';\nimport { usePreset, useEventRegistry } from '@splunk/dashboard-context';\n\ninterface BaseLineContainerProps extends VizProps {\n    from?: Coordinate;\n    to?: Coordinate;\n    onLineSelect?: () => void;\n}\n\nexport type LineContainerProps = BaseLineContainerProps & {\n    vizDef?: VisualizationDefinition;\n    dataSourceDefs?: RootDataSourcesDefinition;\n    handleEvent?: (\n        eventType: string,\n        payload: unknown,\n        eventId: string\n    ) => void;\n};\n\ntype LineContainerWithDataSourceProps = BaseLineContainerProps & {\n    dataSourceId: string;\n    vizType: string;\n};\n\nconst LineContainerWithDataSource = (\n    props: LineContainerWithDataSourceProps\n) => {\n    const { dataSourceId, vizType, ...lineProps } = props;\n\n    const dataSourceBindings = useMemo(\n        () => ({ primary: dataSourceId }),\n        [dataSourceId]\n    );\n\n    const preset = usePreset();\n\n    const { loading, dataSources, updateRequestParams } =\n        useSubscribeToSearches({\n            consumerId: lineProps.id,\n            bindings: dataSourceBindings,\n        });\n\n    return preset.createVisualization(vizType, {\n        ...lineProps,\n        loading,\n        dataSources,\n        onRequestParamsChange: updateRequestParams,\n    });\n};\n\nconst LineContainer = (props: LineContainerProps) => {\n    const {\n        id,\n        mode,\n        from,\n        to,\n        vizDef: {\n            type,\n            options = {},\n            dataSources: dataSourceBindings = {},\n            context,\n        } = {},\n        onLineSelect,\n        onOptionsChange,\n        dataSourceDefs,\n        handleEvent,\n    } = props;\n\n    const preset = usePreset();\n    const eventRegistry = useEventRegistry();\n    const onEventTrigger = useCallback(\n        ({\n            type: eventType,\n            originalEvent,\n            payload,\n        }: {\n            type: string;\n            originalEvent: MouseEvent;\n            payload: unknown;\n        }) => {\n            const eventId = eventRegistry.registerEvent(originalEvent);\n            handleEvent?.(eventType, payload, eventId);\n        },\n        [handleEvent, eventRegistry]\n    );\n\n    if (!type) {\n        return null;\n    }\n\n    const lineProps = {\n        id,\n        mode,\n        from,\n        to,\n        options,\n        context,\n        onLineSelect,\n        onOptionsChange,\n        onEventTrigger,\n    } as LineContainerProps;\n\n    // line only support primary DataSource\n    const primaryDataSourceId = dataSourceBindings.primary;\n    if (primaryDataSourceId && dataSourceDefs?.[primaryDataSourceId]) {\n        return (\n            <LineContainerWithDataSource\n                {...lineProps}\n                vizType={type}\n                dataSourceId={primaryDataSourceId}\n            />\n        );\n    }\n\n    return preset.createVisualization(type, {\n        ...lineProps,\n        loading: false,\n        dataSources: {},\n        onRequestParamsChange: noop,\n    });\n};\n\nexport default React.memo(LineContainer);\n", "import React, { useCallback, useMemo } from 'react';\nimport {\n    selectDataSourceDefinitionForVizFactory,\n    selectMode,\n    selectVisualizationDefinitionFactory,\n    triggerEvent,\n    updateVizOptions,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport type { VizProps } from '@splunk/dashboard-types';\nimport LineContainer from '../LineContainer';\n\nconst ConnectedLineContainer = (props: VizProps) => {\n    const selectVizDef = useMemo(selectVisualizationDefinitionFactory, []);\n    const selectDSDef = useMemo(selectDataSourceDefinitionForVizFactory, []);\n\n    const dispatch = useDispatch();\n\n    // mapDispatchToProps\n    const handleEvent = useCallback(\n        (eventType: string, payload: unknown, eventId: string) =>\n            dispatch(triggerEvent(props.id, eventType, payload, eventId)),\n        [dispatch, props.id]\n    );\n    const onOptionsChange = useCallback(\n        (newOptions?: Record<string, unknown>) =>\n            dispatch(updateVizOptions(props.id, newOptions)),\n        [dispatch, props.id]\n    );\n\n    // mapStateToProps\n    const mode = useSelector(selectMode);\n    const vizDef = useSelector((state) => selectVizDef(state, props.id));\n    const dataSourceDefs = useSelector((state) => selectDSDef(state, props.id));\n\n    return (\n        <LineContainer\n            {...props}\n            handleEvent={handleEvent}\n            onOptionsChange={onOptionsChange}\n            mode={mode}\n            vizDef={vizDef}\n            dataSourceDefs={dataSourceDefs}\n        />\n    );\n};\n\nexport default ConnectedLineContainer;\n", "import React, { useCallback, useMemo } from 'react';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport { Message } from '@splunk/dashboard-ui';\nimport { useEventRegistry, usePreset } from '@splunk/dashboard-context';\nimport type {\n    StructureItemType,\n    Mode,\n    LayoutDefinitionItem,\n    RootVisualizationsDefinition,\n    RootDataSourcesDefinition,\n    TokenState,\n    SelectedItem,\n} from '@splunk/dashboard-types';\nimport {\n    BaseItemContainer,\n    type BaseItemContainerProps,\n} from '../BaseItemContainer';\nimport type { LineContainerProps } from '../LineContainer';\nimport LineContainer from '../connected/ConnectedLineContainer';\n\n/**\n * A prop passed to the layout component.\n * @param {String} id visualization id\n * @param {*} props the props passed down to VisualizationContainer or LineContainer\n * @param {*} layoutItemType layoutItemType, could be 'line' or 'block'\n * @param {*} onSelected a callback function when visualization is selected\n */\nconst renderLayoutItem = (\n    id: string,\n    props: BaseItemContainerProps | LineContainerProps,\n    layoutItemType: StructureItemType,\n    onSelected: () => void\n) => {\n    if (layoutItemType === 'line') {\n        return (\n            <LineContainer\n                key={id}\n                id={id}\n                {...(props as Omit<LineContainerProps, 'id'>)}\n            />\n        );\n    }\n    return (\n        <BaseItemContainer\n            key={id}\n            id={id}\n            {...(props as Omit<BaseItemContainerProps, 'id'>)}\n            layoutItemType={layoutItemType}\n            onSelected={onSelected}\n        />\n    );\n};\n\nexport interface LayoutContainerProps {\n    mode?: Mode;\n    layout: LayoutDefinitionItem;\n    visualizations?: RootVisualizationsDefinition;\n    dataSources?: RootDataSourcesDefinition;\n    submittedTokens?: TokenState;\n    width?: number;\n    height?: number;\n    actionMenus?: React.ReactNode[];\n    selectedItems: SelectedItem[];\n    onLayoutItemsSelect: (items: SelectedItem[]) => void;\n    onLayoutStructureChange?: (structure: unknown) => void;\n    handleEvent?: (\n        eventType: string,\n        payload: Record<string, unknown>,\n        eventId: string\n    ) => void;\n    showGrid?: boolean;\n    isDashboardFullscreen: boolean;\n    layoutId?: string;\n}\n\nconst LayoutContainer = ({\n    handleEvent,\n    height, // container height in pixel\n    layout,\n    mode,\n    onLayoutItemsSelect,\n    onLayoutStructureChange,\n    selectedItems,\n    showGrid,\n    width, // container width in pixel\n    isDashboardFullscreen,\n    layoutId,\n}: LayoutContainerProps) => {\n    const eventRegistry = useEventRegistry();\n    const preset = usePreset();\n\n    const onEventTrigger = useCallback(\n        ({\n            type: eventType,\n            originalEvent,\n            payload,\n        }: {\n            type: string;\n            originalEvent: MouseEvent;\n            payload: Record<string, unknown>;\n        }) => {\n            const eventId = eventRegistry.registerEvent(originalEvent);\n            handleEvent?.(eventType, payload, eventId);\n        },\n        [handleEvent, eventRegistry]\n    );\n\n    return useMemo(() => {\n        const { type, options, structure: layoutStructure } = layout;\n\n        if (!preset.findLayout(type)) {\n            return (\n                <Message\n                    level=\"error\"\n                    message={_(`Layout ${type} is not defined`)}\n                />\n            );\n        }\n\n        const layoutProps = {\n            key: layoutId,\n            layoutId,\n            // we send down the actual width/height of dashboard-core container\n            containerHeight: height,\n            containerWidth: width,\n            layoutStructure,\n            mode,\n            onEventTrigger,\n            onLayoutItemsSelect,\n            onLayoutStructureChange,\n            options:\n                isDashboardFullscreen &&\n                type === 'absolute' &&\n                options?.display !== 'fit-to-width'\n                    ? { ...options, display: 'fit-to-width' }\n                    : options,\n            renderLayoutItem,\n            selectedItems,\n            showGrid,\n        };\n\n        return preset.createLayout(type, layoutProps);\n    }, [\n        layout,\n        preset,\n        layoutId,\n        height,\n        width,\n        mode,\n        onEventTrigger,\n        onLayoutItemsSelect,\n        onLayoutStructureChange,\n        isDashboardFullscreen,\n        selectedItems,\n        showGrid,\n    ]);\n};\n\nexport default LayoutContainer;\n", "import React, { useCallback } from 'react';\nimport {\n    MouseEventsContextProvider,\n    useFeatureFlags,\n} from '@splunk/dashboard-context';\nimport {\n    batch,\n    selectIsDashboardFullscreen,\n    selectMode,\n    selectResolvedLayout,\n    selectResolvedLayoutIncludingBackgroundImage,\n    selectSelectedItems,\n    triggerEvent,\n    updateLayoutStructure,\n    updateSelectedGlobalItems,\n    updateSelectedItems,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport LayoutContainer, {\n    type LayoutContainerProps,\n} from '../layouts/LayoutContainer';\n\ntype ConnectedLayoutProps = Omit<\n    LayoutContainerProps,\n    | 'handleEvent'\n    | 'onLayoutItemsSelect'\n    | 'onLayoutStructureChange'\n    | 'layout'\n    | 'mode'\n    | 'selectedItems'\n    | 'isDashboardFullscreen'\n>;\n\nexport default ({ layoutId, ...rest }: ConnectedLayoutProps) => {\n    const dispatch = useDispatch();\n    const { enableTokensInBackgroundImage } = useFeatureFlags();\n\n    // mapDispatchToProps\n    const handleEvent = useCallback<\n        NonNullable<LayoutContainerProps['handleEvent']>\n    >(\n        (eventType, payload, eventId) =>\n            dispatch(triggerEvent(null, eventType, payload, eventId)),\n        [dispatch]\n    );\n    const onLayoutItemsSelect = useCallback<\n        LayoutContainerProps['onLayoutItemsSelect']\n    >(\n        (newSelectedItems) => {\n            batch(() => {\n                // on canvas click deselect globals\n                dispatch(updateSelectedGlobalItems([]));\n                dispatch(updateSelectedItems(newSelectedItems));\n            });\n        },\n        [dispatch]\n    );\n    const onLayoutStructureChange = useCallback<\n        NonNullable<LayoutContainerProps['onLayoutStructureChange']>\n    >(\n        (layoutStructure) =>\n            dispatch(updateLayoutStructure(layoutStructure, layoutId)),\n        [dispatch, layoutId]\n    );\n\n    // mapStateToProps\n    // FIXME: this layout has nothing to do with the layoutId that was passed in. It's the active tab.\n    const layout = useSelector<LayoutContainerProps['layout']>(\n        enableTokensInBackgroundImage\n            ? selectResolvedLayoutIncludingBackgroundImage\n            : selectResolvedLayout\n    );\n\n    const mode = useSelector(selectMode);\n    // TODO: verify if layouts still need selected items (remove if not)\n    const selectedItems = useSelector(selectSelectedItems);\n\n    const isDashboardFullscreen = useSelector(selectIsDashboardFullscreen);\n\n    return (\n        <MouseEventsContextProvider>\n            <LayoutContainer\n                {...rest}\n                layoutId={layoutId}\n                handleEvent={handleEvent}\n                onLayoutItemsSelect={onLayoutItemsSelect}\n                onLayoutStructureChange={onLayoutStructureChange}\n                layout={layout}\n                mode={mode}\n                selectedItems={selectedItems}\n                isDashboardFullscreen={isDashboardFullscreen}\n            />\n        </MouseEventsContextProvider>\n    );\n};\n", "\nimport * as defaultImport from \"@splunk/dashboard-layouts\";\nexport * from \"@splunk/dashboard-layouts\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React, { useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { isEqual, omit } from 'lodash';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport {\n    makeSelectIsSelected,\n    removeDashboardItems,\n    selectConditionResults,\n    selectGlobalInputs,\n    selectInputDefinitionFactory,\n    selectMode,\n    updateSelectedGlobalItems,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport type {\n    GlobalState,\n    InputDefinition,\n    Mode,\n} from '@splunk/dashboard-types';\nimport { useSubscribeToSearches } from '@splunk/dashboard-ui';\nimport { useFeatureFlags } from '@splunk/dashboard-context';\nimport { shouldHideItem } from '@splunk/dashboard-utils';\nimport InputContent from '../InputContent';\nimport { useCanItemBeHidden } from '../../hooks/useCanItemBeHidden';\n\ntype UseSortableReturnType = ReturnType<typeof useSortable>;\n\ntype UseSortableProps = Pick<\n    UseSortableReturnType,\n    'setNodeRef' | 'transform' | 'transition' | 'isDragging' | 'listeners'\n> & { attributes: Partial<UseSortableReturnType['attributes']> };\ninterface SortableConnectedInputContainerProps {\n    id: string;\n    width?: string | number;\n}\ntype ConnectedInputContainerProps = UseSortableProps &\n    SortableConnectedInputContainerProps & {\n        mode: Mode;\n        isSelected: boolean;\n    };\n\ninterface WrapperProps {\n    $transform?: ConnectedInputContainerProps['transform'];\n    $transition?: ConnectedInputContainerProps['transition'];\n    isDragging?: ConnectedInputContainerProps['isDragging'];\n    mode?: ConnectedInputContainerProps['mode'];\n}\n\nconst emptyConditions: string[] = [];\n\nconst hideInViewMode = ({ inputDef }: { inputDef: InputDefinition }) =>\n    inputDef.containerOptions?.visibility &&\n    'hideInViewMode' in inputDef.containerOptions.visibility &&\n    !!inputDef.containerOptions.visibility?.hideInViewMode;\n\nconst wrapperAttributes = ({\n    $transform,\n    $transition,\n    isDragging,\n    mode,\n}: WrapperProps = {}) => ({\n    'data-test': 'input-item',\n    tabIndex: mode === 'edit' ? 0 : -1,\n    style: {\n        transform: CSS.Translate.toString($transform ?? null),\n        transition: isDragging ? $transition : undefined,\n    },\n});\n\nconst Wrapper = styled.div.attrs(wrapperAttributes)<WrapperProps>`\n    display: inline-block;\n    z-index: ${({ isDragging }) => (isDragging ? 1 : undefined)};\n    opacity: ${({ isDragging }) => (isDragging ? 0.4 : 1)};\n`;\n\nconst ConnectedInputContainer = ({\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n    attributes,\n    listeners,\n    mode,\n    isSelected,\n    ...props\n}: ConnectedInputContainerProps) => {\n    const selectInputDef = useMemo(selectInputDefinitionFactory, []);\n\n    const dispatch = useDispatch();\n\n    // mapDispatchToProps\n    const onRemove = useCallback(\n        (inputId: string) =>\n            dispatch(\n                removeDashboardItems(\n                    { itemIds: [inputId] },\n                    { confirmDeletion: true }\n                )\n            ),\n        [dispatch]\n    );\n    const onSelect = useCallback<React.ReactEventHandler>(\n        () =>\n            dispatch(\n                updateSelectedGlobalItems([{ id: props.id, type: 'input' }])\n            ),\n        [dispatch, props.id]\n    );\n\n    // mapStateToProps\n    const inputDef = useSelector((state) => selectInputDef(state, props.id));\n\n    const { type, dataSources: dataSourceBindings = {} } = inputDef;\n\n    const primaryDataSourceId = dataSourceBindings.primary;\n\n    const commonProps = {\n        onRemove,\n        itemDefinition: inputDef,\n        mode,\n        isSelected: isSelected && !isDragging,\n        attributes,\n        listeners,\n    };\n\n    const { loading, dataSources, refresh, updateRequestParams, control } =\n        useSubscribeToSearches({\n            consumerId: props.id,\n            bindings: dataSourceBindings,\n        });\n\n    const canBeHidden = useCanItemBeHidden({\n        itemDefinition: inputDef,\n    });\n\n    const {\n        conditions = emptyConditions,\n        hideConditions = emptyConditions,\n        showConditions = emptyConditions,\n    } = inputDef.containerOptions?.visibility ?? {};\n    const selector = useCallback(\n        (state: GlobalState) =>\n            selectConditionResults(state, [\n                ...conditions,\n                ...hideConditions,\n                ...showConditions,\n            ]),\n        [conditions, hideConditions, showConditions]\n    );\n    const conditionResults = useSelector(selector);\n\n    if (mode === 'view' && canBeHidden) {\n        if (hideInViewMode({ inputDef })) {\n            return null;\n        }\n\n        if (\n            shouldHideItem({\n                itemType: 'input',\n                definition: inputDef,\n                searchData: dataSources?.primary,\n                conditionResults,\n            })\n        ) {\n            return null;\n        }\n    }\n\n    return (\n        <Wrapper\n            mode={mode}\n            ref={setNodeRef}\n            data-input-id={props.id}\n            data-input-type={type}\n            data-test-selected={isSelected}\n            onClick={onSelect}\n            onFocus={mode === 'edit' ? onSelect : undefined}\n            $transform={transform}\n            $transition={transition}\n            isDragging={isDragging}\n        >\n            {primaryDataSourceId ? (\n                <InputContent\n                    {...props}\n                    {...commonProps}\n                    loading={loading}\n                    dataSources={dataSources}\n                    refresh={refresh}\n                    updateRequestParams={updateRequestParams}\n                    control={control}\n                />\n            ) : (\n                <InputContent {...props} {...commonProps} />\n            )}\n        </Wrapper>\n    );\n};\n\nconst MemoizedConnectedInputContainer = React.memo(\n    ConnectedInputContainer,\n    isEqual\n);\n\nconst withSortable =\n    (Component: typeof MemoizedConnectedInputContainer) =>\n    (props: SortableConnectedInputContainerProps) => {\n        const { enableDragDropInputs } = useFeatureFlags();\n\n        const mode = useSelector(selectMode);\n\n        const selectIsInputSelected = useMemo(makeSelectIsSelected, []);\n        const isSelected = useSelector((state) =>\n            selectIsInputSelected(state, props.id)\n        );\n\n        const globalInputs = useSelector(selectGlobalInputs);\n        const isGlobalInput = globalInputs?.includes(props.id) ?? false;\n\n        const isDraggable = useMemo(\n            () =>\n                enableDragDropInputs &&\n                mode === 'edit' &&\n                isSelected &&\n                isGlobalInput,\n            [enableDragDropInputs, mode, isSelected, isGlobalInput]\n        );\n\n        const {\n            setNodeRef,\n            transform,\n            transition,\n            isDragging,\n            attributes,\n            listeners,\n        } = useSortable({\n            id: props.id,\n            disabled: !isDraggable,\n            data: { snapCenterToCursor: true },\n        });\n\n        const sortableProps = {\n            setNodeRef,\n            transform,\n            transition,\n            isDragging,\n            attributes: omit(attributes, ['role', 'tabIndex']),\n            listeners,\n            mode,\n            isSelected,\n        };\n\n        return <Component {...props} {...sortableProps} />;\n    };\n\n// Do our best to keep @dnd-kit/sortable context changes from causing large tree computations\nexport default withSortable(MemoizedConnectedInputContainer);\n", "import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { InputLayout } from '@splunk/dashboard-layouts';\nimport {\n    selectAreTokensReadyToSubmit,\n    selectLayoutGlobalOptions,\n    selectGlobalInputs,\n    submitTokens,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport { DEFAULT_TOKEN_NAMESPACE } from '@splunk/dashboard-utils';\nimport { useApiRegistry } from '@splunk/dashboard-context';\nimport InputContainer from '../connected/ConnectedInputContainer';\n\nconst renderInput = ({ inputId }: { inputId: string }) => (\n    <InputContainer key={inputId} id={inputId} />\n);\n\nconst emptyGlobalInputs: string[] = [];\n\nexport default () => {\n    const apiRegistry = useApiRegistry();\n    const dispatch = useDispatch();\n\n    const inputsRef = useRef<HTMLDivElement | null>(null);\n\n    const globalInputsApi = useMemo(() => {\n        return {\n            getInputsDomElement: () => {\n                return inputsRef.current;\n            },\n        };\n    }, [inputsRef]);\n\n    const onSubmitButtonClick = useCallback(\n        () => dispatch(submitTokens(DEFAULT_TOKEN_NAMESPACE)),\n        [dispatch]\n    );\n\n    const submitButtonDisabled = !useSelector(selectAreTokensReadyToSubmit);\n\n    useEffect(() => {\n        apiRegistry.registerGlobalInputsApi(globalInputsApi);\n        return () => {\n            apiRegistry.removeGlobalInputsApi();\n        };\n    }, [apiRegistry, globalInputsApi]);\n\n    const submitButton = !!useSelector(selectLayoutGlobalOptions)?.submitButton;\n\n    const globalInputs = useSelector(selectGlobalInputs) ?? emptyGlobalInputs;\n\n    return (\n        <InputLayout\n            submitButtonDisabled={submitButtonDisabled}\n            onSubmitButtonClick={onSubmitButtonClick}\n            submitButton={submitButton}\n            inputStructure={globalInputs}\n            renderInput={renderInput}\n            ref={inputsRef}\n        />\n    );\n};\n", "import React, { useMemo, useRef } from 'react';\nimport { pick } from 'lodash';\nimport styled from 'styled-components';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { SortableContext } from '@dnd-kit/sortable';\nimport { reset } from '@splunk/themes/mixins';\nimport { toDimension } from '@splunk/dashboard-utils';\nimport { horizontalMasonryStrategy } from '@splunk/dashboard-context';\nimport {\n    selectActiveTab,\n    selectAreGridLinesEnabled,\n    selectTabs,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport { useDashboardDragMonitor } from '../hooks/useDashboardDragMonitor';\nimport { ConfirmationModal } from './ConfirmDeletionModal';\nimport { TabContainer } from './TabContainer';\nimport ConnectedLayoutContainer from '../containers/connected/ConnectedLayoutContainer';\nimport GlobalInputContainer from '../containers/layouts/GlobalInputContainer';\n\ninterface DashboardLayoutContainerProps {\n    width: string | number;\n    height: string | number;\n}\n\nconst DashboardLayoutContainer = styled.div.attrs({\n    'data-test': 'DashboardLayoutContainer',\n})<DashboardLayoutContainerProps>`\n    ${reset('flex')};\n    position: relative;\n    overflow: hidden;\n    flex-direction: column;\n    padding-bottom: 8px;\n    max-height: 100%;\n    ${(props) => toDimension(pick(props, ['width', 'height']))};\n`;\n\nconst GlobalInputsContainer = styled.div.attrs({\n    'data-test': 'GlobalInputsContainer',\n})`\n    flex-basis: auto;\n`;\n\nconst LayoutContainer = styled.div.attrs({\n    'data-test': 'LayoutContainer',\n})`\n    flex-grow: 1;\n    min-height: 0px;\n    overflow: auto;\n    position: relative;\n`;\n\ninterface DashboardLayoutProps extends DashboardLayoutContainerProps {\n    showGlobalInputs: boolean;\n}\n\nconst DashboardLayout = ({\n    height,\n    width,\n    showGlobalInputs,\n}: DashboardLayoutProps) => {\n    const tabs = useSelector(selectTabs);\n    const showGrid = useSelector(selectAreGridLinesEnabled);\n    const layoutId = useSelector(selectActiveTab);\n\n    const globalInputsContainerRef = useRef<HTMLDivElement | null>(null);\n\n    const {\n        width: containerWidth,\n        height: containerHeight,\n        ref,\n    } = useResizeDetector();\n\n    const globalInputsOrder = useDashboardDragMonitor();\n\n    const renderGlobalInputsContainer = useMemo(() => {\n        if (!showGlobalInputs) {\n            return null;\n        }\n        return (\n            <GlobalInputsContainer ref={globalInputsContainerRef}>\n                <GlobalInputContainer />\n            </GlobalInputsContainer>\n        );\n    }, [showGlobalInputs]);\n\n    const inputSortingStrategy = useMemo(\n        () => horizontalMasonryStrategy(globalInputsContainerRef),\n        []\n    );\n\n    return (\n        <DashboardLayoutContainer\n            height={height}\n            width={width}\n            data-udf-core-version={__UDF_VERSION__ || 'unknown'}\n            ref={ref}\n        >\n            <SortableContext\n                id=\"sortable-global-inputs\"\n                items={globalInputsOrder}\n                strategy={inputSortingStrategy}\n            >\n                {renderGlobalInputsContainer}\n            </SortableContext>\n            <TabContainer />\n            <LayoutContainer role={tabs.length > 1 ? 'tabpanel' : undefined}>\n                <ConnectedLayoutContainer\n                    width={containerWidth}\n                    height={containerHeight}\n                    showGrid={showGrid}\n                    layoutId={layoutId}\n                />\n            </LayoutContainer>\n            <ConfirmationModal />\n        </DashboardLayoutContainer>\n    );\n};\n\nexport default DashboardLayout;\n", "import React from 'react';\nimport { Message, ErrorBoundary } from '@splunk/dashboard-ui';\nimport DashboardLayout from '../components/DashboardLayout';\n\nconst GlobalErrorMessage = ({ message }: { message?: string }) => (\n    <Message level=\"error\" message={message} />\n);\n\nconst renderErrorMessage = (errorMessage?: string) => (\n    <GlobalErrorMessage message={errorMessage} />\n);\n\nconst defaultGlobalInputs: React.ReactNode[] = [];\n\nexport interface DashboardContainerProps {\n    message?: string | null;\n    height?: string | number;\n    width?: string | number;\n    globalInputs?: React.ReactNode[];\n}\n\nconst DashboardContainer = ({\n    message = null,\n    height,\n    width,\n    globalInputs = defaultGlobalInputs,\n}: DashboardContainerProps) => {\n    if (message) {\n        return <GlobalErrorMessage message={message} />;\n    }\n\n    return (\n        <ErrorBoundary render={renderErrorMessage}>\n            <DashboardLayout\n                width={width ?? 0}\n                height={height ?? 0}\n                showGlobalInputs={\n                    !!(Array.isArray(globalInputs) && globalInputs.length)\n                }\n            />\n        </ErrorBoundary>\n    );\n};\n\nexport default DashboardContainer;\n", "import React from 'react';\nimport {\n    selectGlobalInputs,\n    selectGlobalMessage,\n    useSelector,\n} from '@splunk/dashboard-state';\nimport DashboardContainer, {\n    type DashboardContainerProps,\n} from '../DashboardContainer';\n\n// TODO: migrate the content of this HOC into DashboardContainer\nexport default (\n    props: Omit<DashboardContainerProps, 'message' | 'globalInputs'>\n) => {\n    // mapStateToProps\n    const message = useSelector(selectGlobalMessage);\n    const globalInputs = useSelector(selectGlobalInputs);\n\n    return (\n        <DashboardContainer\n            {...props}\n            message={message}\n            globalInputs={globalInputs}\n        />\n    );\n};\n", "import React from 'react';\nimport { useSelector, selectDefinition } from '@splunk/dashboard-state';\nimport type { DashboardJSON } from '@splunk/dashboard-types';\n\ninterface DefinitionProps {\n    definition: DashboardJSON;\n}\n\nexport const withDefinition =\n    <P extends DefinitionProps>(WrappedComponent: React.ComponentType<P>) =>\n    (props: Omit<P, keyof DefinitionProps>) => {\n        const definition = useSelector(selectDefinition);\n\n        return <WrappedComponent {...(props as P)} definition={definition} />;\n    };\n", "import React from 'react';\nimport {\n    useSelector,\n    selectReadOnlyTokenNamespaces,\n} from '@splunk/dashboard-state';\n\ninterface NamespacesProps {\n    readOnlyTokenNamespaces?: string[];\n}\n\nexport const withReadOnlyTokenNamespaces =\n    <P extends NamespacesProps>(WrappedComponent: React.ComponentType<P>) =>\n    (props: Omit<P, keyof NamespacesProps>) => {\n        const namespaces = useSelector(selectReadOnlyTokenNamespaces);\n\n        return (\n            <WrappedComponent\n                {...(props as P)}\n                readOnlyTokenNamespaces={namespaces}\n            />\n        );\n    };\n", "\nimport * as defaultImport from \"@splunk/dashboard-definition\";\nexport * from \"@splunk/dashboard-definition\";\nexport default ('default' in defaultImport ? defaultImport.default : defaultImport);\n", "import React, { useMemo } from 'react';\nimport { usePreset } from '@splunk/dashboard-context';\nimport type { PresetMap } from '@splunk/dashboard-types';\nimport {\n    defaultSchema as defaultDashboardSchema,\n    createSchemaBasedOnPresets,\n} from '@splunk/dashboard-definition';\nimport { console } from '@splunk/dashboard-utils';\n\nconst createSchema = (preset: PresetMap) => {\n    try {\n        return createSchemaBasedOnPresets(preset);\n    } catch (e) {\n        console.error('Schema Error:', e);\n        return defaultDashboardSchema;\n    }\n};\n\ninterface SchemaProps {\n    schema: ReturnType<typeof createSchemaBasedOnPresets>;\n}\n\nexport const withValidationSchema =\n    <P extends SchemaProps>(WrappedComponent: React.ComponentType<P>) =>\n    (props: Omit<P, keyof SchemaProps>) => {\n        const preset = usePreset();\n\n        const schema = useMemo(\n            () => createSchema(preset.getPresetDefinition()),\n            [preset]\n        );\n\n        return <WrappedComponent {...(props as P)} schema={schema} />;\n    };\n", "import { useEffect, useMemo } from 'react';\nimport { useEventCallback } from '@splunk/dashboard-ui';\nimport {\n    getWindowLocationSearch,\n    mapActiveTabToURL,\n    mapURLToActiveTab,\n} from '@splunk/dashboard-utils';\nimport {\n    selectActiveTab,\n    selectTabs,\n    setActiveTab,\n    useDispatch,\n    useSelector,\n} from '@splunk/dashboard-state';\n\nexport const useActiveTabWithUrl = () => {\n    const dispatch = useDispatch();\n\n    const activeTab = useSelector(selectActiveTab);\n\n    const allTabs = useSelector(selectTabs);\n    const tabIds = useMemo(() => allTabs.map((tab) => tab.layoutId), [allTabs]);\n\n    // On popstate we get the new active tab from the url and dispatch setActiveTab\n    const handlePopState = useEventCallback(() => {\n        const newActiveTab = mapURLToActiveTab({\n            search: getWindowLocationSearch(),\n            tabIds,\n        });\n\n        if (newActiveTab && newActiveTab !== activeTab) {\n            dispatch(setActiveTab(newActiveTab));\n        }\n    });\n\n    // Listen for the popstate event\n    useEffect(() => {\n        window.addEventListener('popstate', handlePopState);\n        return () => {\n            window.removeEventListener('popstate', handlePopState);\n        };\n    }, [handlePopState]);\n\n    // When active tab changes push a new history item\n    useEffect(() => {\n        const search = getWindowLocationSearch();\n        const searchWithActiveTab = mapActiveTabToURL({ search, activeTab });\n\n        if (search !== `?${searchWithActiveTab}`) {\n            const url: URL = new URL(window.location.href);\n            url.search = searchWithActiveTab;\n            window.history.pushState({}, '', url.toString());\n        }\n    }, [activeTab]);\n};\n", "import React from 'react';\nimport { useFeatureFlags } from '@splunk/dashboard-context';\nimport { useActiveTabWithUrl } from '../hooks/useActiveTabWithUrl';\n\n/**\n * Tracks active tab's layoutId WRT browser history:\n * when the user hits the back button, update active tab based on the URL\n * when active tab changes, update browser URL\n * @returns null\n */\nconst ActiveTabInUrl = () => {\n    useActiveTabWithUrl();\n\n    return null;\n};\n\n/**\n * HOC to add browser history management for active tab based on a feature flag\n * @param {DashboardCore} Component\n * @returns wrapped component\n */\nexport const withActiveTabInUrl =\n    <T,>(\n        Component: React.ComponentType<T>\n    ): React.ComponentType<T & JSX.IntrinsicAttributes> =>\n    (props: T & JSX.IntrinsicAttributes) => {\n        const { trackActiveTabInUrl } = useFeatureFlags();\n\n        return trackActiveTabInUrl ? (\n            <>\n                <ActiveTabInUrl />\n                <Component {...props} />\n            </>\n        ) : (\n            <Component {...props} />\n        );\n    };\n", "import { _ } from '@splunk/ui-utils/i18n';\nimport { sprintf } from '@splunk/ui-utils/format';\nimport type {\n    AjvError,\n    DashboardDefaultsDefinition,\n    DashboardJSON,\n} from '@splunk/dashboard-types';\n\n/** Error message template for a misconfigured property of an item in a stanza */\nconst ErrorWithItemId = _(\n    'The property \"%(property)s\" for %(itemType)s \"%(itemId)s\" has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured property in a stanza */\nconst StanzaErrorWithoutItemId = _(\n    'The property \"%(property)s\" in the %(stanza)s stanza has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured property in the definition root */\nconst RootErrorWithoutItemId = _(\n    'The property \"%(property)s\" has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured item in a stanza */\nconst ItemDefinitionError = _(\n    'The definition for %(itemType)s \"%(itemId)s\" has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured type default */\nconst TypeDefaultError = _(\n    'The default for \"%(itemType)s\" %(itemClass)s has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured type property default */\nconst TypePropertyDefaultError = _(\n    'The \"%(property)s\" default for \"%(itemType)s\" %(itemClass)s has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured token namespace default */\nconst TokenNamespaceError = _(\n    'The default for token namespace \"%(namespace)s\" has an invalid configuration.'\n);\n\n/** Error message template for a misconfigured token default */\nconst TokenError = _(\n    'The default for token \"%(token)s\" in namespace \"%(namespace)s\" has an invalid configuration.'\n);\n\n/**\n * Check if a string is a number. Used to determine if an error segment is an array index\n * @param value string to be checked\n * @returns `true` if the string is a number\n */\nconst isNumeric = (value: string) =>\n    typeof value === 'string' &&\n    !Number.isNaN(value) &&\n    !Number.isNaN(parseFloat(value));\n\nconst simplifyLayoutError = (pathSegments: string[]) => {\n    if (pathSegments[1] === 'layoutDefinitions' || pathSegments[1] === 'tabs') {\n        const itemType =\n            pathSegments[1] === 'layoutDefinitions' ? _('layout') : _('tab');\n\n        if (pathSegments.length === 3) {\n            return sprintf(ItemDefinitionError, {\n                itemType,\n                itemId: pathSegments[2],\n            });\n        }\n\n        const property = pathSegments.slice(3).join('.');\n        return sprintf(ErrorWithItemId, {\n            property,\n            itemType,\n            itemId: pathSegments[2],\n        });\n    }\n\n    if (pathSegments[1] === 'options') {\n        return sprintf(StanzaErrorWithoutItemId, {\n            property: pathSegments.slice(1).join('.'),\n            stanza: _('layout'),\n        });\n    }\n\n    if (pathSegments[1] === 'globalInputs') {\n        return sprintf(StanzaErrorWithoutItemId, {\n            property: 'globalInputs',\n            stanza: _('layout'),\n        });\n    }\n\n    return undefined;\n};\n\nconst simplifySchemaError = (pathSegments: string[]) => {\n    const itemType = pathSegments[0].slice(0, -1).toLowerCase();\n\n    if (pathSegments.length === 2) {\n        return sprintf(ItemDefinitionError, {\n            itemType,\n            itemId: pathSegments[1],\n        });\n    }\n\n    if (isNumeric(pathSegments[pathSegments.length - 1])) {\n        // error is in an array. ignore the array index when creating the property path\n        return sprintf(ErrorWithItemId, {\n            property: pathSegments.slice(2, -1).join('.'),\n            itemType,\n            itemId: pathSegments[1],\n        });\n    }\n\n    return sprintf(ErrorWithItemId, {\n        property: pathSegments.slice(2).join('.'),\n        itemType,\n        itemId: pathSegments[1],\n    });\n};\n\nconst simplifyTokenDefaultsError = (\n    pathSegments: ['defaults', 'tokens', ...string[]]\n) => {\n    if (pathSegments.length === 3) {\n        return sprintf(TokenNamespaceError, { namespace: pathSegments[2] });\n    }\n\n    const [, , namespace, token] = pathSegments;\n    return sprintf(TokenError, { namespace, token });\n};\n\nconst simplifyDefaultsError = (\n    pathSegments: ['defaults', keyof DashboardDefaultsDefinition, ...string[]]\n) => {\n    if (pathSegments.length === 2) {\n        return sprintf(StanzaErrorWithoutItemId, {\n            stanza: pathSegments[0],\n            property: pathSegments[1],\n        });\n    }\n\n    if (pathSegments[1] === 'tokens') {\n        return simplifyTokenDefaultsError(\n            pathSegments as ['defaults', 'tokens', ...string[]]\n        );\n    }\n\n    if (pathSegments.length > 3) {\n        // error is related to a specific viz/input/ds property\n        const [, itemClass, itemType, ...propertyPath] = pathSegments;\n        const property = propertyPath.join('.');\n\n        return sprintf(TypePropertyDefaultError, {\n            itemClass,\n            itemType,\n            property,\n        });\n    }\n\n    // the whole viz/input/ds default is invalid\n    return sprintf(TypeDefaultError, {\n        itemClass: pathSegments[1],\n        itemType: pathSegments[2],\n    });\n};\n\nexport const simplifySchemaErrorMessages = (errors: AjvError[]): string[] => {\n    // group all errors for a given instance path\n    const messages: Record<string, string | undefined> = {};\n\n    // all messages will eventually be added to this set so only unique strings are returned\n    const result = new Set<string>();\n\n    errors.forEach(({ instancePath, message }) => {\n        if (message === 'must match \"then\" schema') {\n            return;\n        }\n\n        if (!instancePath || instancePath[0] !== '/') {\n            if (message) {\n                result.add(message);\n            }\n\n            return;\n        }\n\n        if (messages[instancePath]) {\n            return;\n        }\n\n        const pathSegments = instancePath.slice(1).split('/') as [\n            keyof DashboardJSON,\n            ...string[]\n        ];\n\n        if (pathSegments.length === 1) {\n            // misconfigured property is in the root of the definition\n            messages[instancePath] = sprintf(RootErrorWithoutItemId, {\n                property: pathSegments[0],\n            });\n\n            return;\n        }\n\n        if (pathSegments[0] === 'layout') {\n            // misconfigured property is within the layout stanza\n            messages[instancePath] = simplifyLayoutError(pathSegments);\n        } else if (\n            pathSegments[0] === 'visualizations' ||\n            pathSegments[0] === 'inputs' ||\n            pathSegments[0] === 'dataSources'\n        ) {\n            // misconfigured property is within a keyed stanza\n            messages[instancePath] = simplifySchemaError(pathSegments);\n        } else if (pathSegments[0] === 'defaults') {\n            // misconfigured property is within the defaults stanza\n            messages[instancePath] = simplifyDefaultsError(\n                pathSegments as [\n                    'defaults',\n                    keyof DashboardDefaultsDefinition,\n                    ...string[]\n                ]\n            );\n        } else if (pathSegments[0] === 'expressions') {\n            // todo: simplify errors in expressions\n        }\n    });\n\n    Object.values(messages).forEach((message) => {\n        if (message) {\n            result.add(message);\n        }\n    });\n\n    return Array.from(result);\n};\n", "import { once } from 'lodash';\nimport React, {\n    cloneElement,\n    type ReactElement,\n    useMemo,\n    useEffect,\n    useCallback,\n    useRef,\n} from 'react';\nimport {\n    CoreOverridesContext,\n    useDashboardPlugin,\n    useIsFirstRender,\n    useDashboardCoreApi,\n    useFeatureFlags,\n} from '@splunk/dashboard-context';\nimport {\n    console as consoleClass,\n    invokeAfterPaint,\n} from '@splunk/dashboard-utils';\nimport {\n    dashboardCoreFullRenderComplete,\n    useStore,\n    selectDataSourceDefinitions,\n    dashboardCoreFirstRender,\n} from '@splunk/dashboard-state';\nimport { Validator } from '@splunk/dashboard-validation';\nimport { useMutationObserverPerformance } from '@splunk/dashboard-ui';\nimport type { RenderMetrics } from '@splunk/dashboard-types';\nimport DashboardContainer from './containers/connected/ConnectedDashboardContainer';\nimport { ActionMenusContextProvider } from './contexts/ActionMenusContext';\nimport { withDefinition } from './utils/withDefinition';\nimport { withReadOnlyTokenNamespaces } from './utils/withReadOnlyTokenNamespaces';\nimport { withValidationSchema } from './utils/withValidationSchema';\nimport type { DashboardCoreProps } from './types/DashboardCoreProps';\nimport { withActiveTabInUrl } from './utils/withActiveTabInUrl';\nimport { simplifySchemaErrorMessages } from './utils/simplifySchemaErrorMessages';\n\n// Wrapping Validator with the extra props it needs, so they don't need to be in Core\nconst ValidatorComponent = withValidationSchema(\n    withReadOnlyTokenNamespaces(withDefinition(Validator))\n);\n\nexport const formatValidateError = ({\n    instancePath,\n    message,\n}: {\n    instancePath?: string;\n    message?: string;\n}) => {\n    if (!message) {\n        return undefined;\n    }\n\n    if (instancePath) {\n        return `${instancePath}: ${message}`;\n    }\n\n    return message;\n};\n\n// SearchMetricsCollector also wraps the callback with `once` but\n// if that gets removed for some reason then this will prevent multiple\n// event dispatches. Overly cautious, but at the same time: `once` isn't expensive.\nconst emitDashboardRenderedEvent = once(() => {\n    document.dispatchEvent(\n        new Event('dashboardCore.rendered', { bubbles: true })\n    );\n});\n\nconst noop = () => undefined;\nconst defaultActionMenus: ReactElement[] = [];\nconst defaultOverrides = Object.freeze({});\n// to ensure the div has no impact on the DOM layout\nconst containerStyle = { display: 'contents' } as const;\n\nconst DashboardCore = ({\n    dashboardCoreApiRef = noop,\n    width = '100%',\n    height = 600,\n    actionMenus = defaultActionMenus,\n    onValidationError,\n    overrides = defaultOverrides,\n}: DashboardCoreProps) => {\n    const store = useStore();\n    const dashboardPlugin = useDashboardPlugin();\n    const { simplifySchemaErrors = false } = useFeatureFlags();\n    const isFirstRender = useIsFirstRender();\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const dashboardCoreApi = useDashboardCoreApi();\n\n    useEffect(() => {\n        dashboardCoreApiRef(dashboardCoreApi);\n\n        return () => {\n            dashboardCoreApiRef(null);\n        };\n    }, [dashboardCoreApiRef, dashboardCoreApi]);\n\n    if (isFirstRender) {\n        store.dispatch(dashboardCoreFirstRender());\n    }\n\n    // initialize dashboard plugin ASAP on mount to start timers\n    if (isFirstRender) {\n        const dataSources = selectDataSourceDefinitions(store.getState());\n        dashboardPlugin.invokePluginCallback('onInitialize', {\n            dataSourceCount: Object.keys(dataSources || {}).length,\n        });\n    }\n\n    // inject dashboardApi into action menus\n    const clonedActionMenus = useMemo(\n        () =>\n            actionMenus.map((item) => {\n                if (!item.props.dashboardApi) {\n                    return cloneElement(item, {\n                        dashboardApi: dashboardCoreApi,\n                    });\n                }\n                return item;\n            }),\n        [actionMenus, dashboardCoreApi]\n    );\n\n    const handleValidationErrors = useCallback<\n        React.ComponentProps<typeof ValidatorComponent>['onError']\n    >(\n        (errs) => {\n            if (!errs) {\n                return;\n            }\n\n            const handleError =\n                typeof onValidationError === 'function'\n                    ? onValidationError\n                    : consoleClass.error;\n\n            const errors = Array.isArray(errs) ? errs : [errs];\n            if (simplifySchemaErrors) {\n                simplifySchemaErrorMessages(errors).forEach((message) => {\n                    handleError(message);\n                });\n            } else {\n                errors.forEach((error) => {\n                    const message = formatValidateError(error);\n                    if (message) {\n                        handleError(message);\n                    }\n                });\n            }\n        },\n        [onValidationError, simplifySchemaErrors]\n    );\n\n    const onRenderComplete = useCallback(\n        (metrics: RenderMetrics) => {\n            store.dispatch(dashboardCoreFullRenderComplete(metrics));\n            invokeAfterPaint(emitDashboardRenderedEvent);\n        },\n        [store]\n    );\n\n    useMutationObserverPerformance({\n        containerRef,\n        onRenderComplete,\n    });\n\n    return (\n        <ActionMenusContextProvider value={clonedActionMenus}>\n            <CoreOverridesContext.Provider value={overrides}>\n                <div ref={containerRef} style={containerStyle}>\n                    <ValidatorComponent onError={handleValidationErrors} />\n                    <DashboardContainer width={width} height={height} />\n                </div>\n            </CoreOverridesContext.Provider>\n        </ActionMenusContextProvider>\n    );\n};\n\nexport default withActiveTabInUrl(DashboardCore);\n"],
  "mappings": "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",
  "names": ["key", "UsedValueState", "key", "key", "Type", "DataType", "key", "_a", "import_dist", "key", "import_dist", "key", "key", "key", "import_dist", "import_dist", "import_dist", "import_dist", "key", "key", "key", "key", "key", "DiscrError", "key", "__export", "__toCommonJS", "__toESM", "defaultImport", "key", "_a", "_b", "debounce", "throttle", "import_dist", "import_dist", "t", "n", "r", "e", "a", "i", "o", "l", "u", "c", "s", "f", "b", "m", "S", "w", "O", "x", "I", "k", "T", "j", "P", "E", "M", "$", "L", "H", "U", "K", "Y", "J", "Q", "te", "ne", "re", "ae", "ie", "oe", "le", "ue", "ce", "se", "de", "fe", "ve", "be", "pe", "me", "ge", "ye", "he", "Se", "we", "Ce", "Oe", "xe", "Ie", "ke", "Te", "je", "d", "v", "p", "g", "y", "h", "A", "z", "_", "D", "N", "R", "q", "V", "W", "B", "F", "import_dist", "r", "t", "n", "e", "l", "a", "i", "d", "f", "C", "s", "import_dist", "n", "r", "t", "e", "a", "i", "o", "l", "c", "u", "p", "d", "f", "m", "v", "b", "y", "g", "O", "h", "S", "k", "import_dist", "document", "useFullScreenHandle", "useState", "active", "setActive", "node", "useRef", "useEffect", "handleChange", "fscreen", "fullscreenElement", "current", "addEventListener", "removeEventListener", "enter", "useCallback", "exitFullscreen", "then", "requestFullscreen", "exit", "Promise", "resolve", "useMemo", "FullScreen", "handle", "onChange", "children", "className", "classNames", "push", "React", "join", "ref", "style", "height", "width", "undefined", "__export", "DashboardCore", "__toCommonJS", "__toESM", "defaultImport", "_a", "TabsContainer", "empty", "_b", "LayoutContainer", "defaultDashboardSchema", "noop", "consoleClass"]
}
